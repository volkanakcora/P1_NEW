Summary,Issue key,Issue id,Issue Type,Status,Project key,Project name,Project type,Project lead,Project description,Project url,Priority,Resolution,Assignee,Reporter,Creator,Created,Updated,Last Viewed,Resolved,Affects Version/s,Affects Version/s,Fix Version/s,Fix Version/s,Component/s,Component/s,Component/s,Component/s,Due Date,Labels,Labels,Labels,Description,Environment,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Log Work,Log Work,Log Work,Log Work,Log Work,Log Work,Log Work,Log Work,Original Estimate,Remaining Estimate,Time Spent,Work Ratio,Σ Original Estimate,Σ Remaining Estimate,Σ Time Spent,Security Level,Outward issue link (Blocks),Outward issue link (Blocks),Outward issue link (Cloners),Outward issue link (Cloners),Outward issue link (Copied),Outward issue link (Duplicate),Outward issue link (Issue split),Outward issue link (Issue split),Outward issue link (Issue split),Outward issue link (Issue split),Outward issue link (Problem/Incident),Outward issue link (Problem/Incident),Outward issue link (Related),Outward issue link (Related),Outward issue link (Related),Outward issue link (Related),Outward issue link (Related),Outward issue link (Related),Outward issue link (Related),Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Custom field (ACM Type),Custom field (Acceptance Criteria),Custom field (Actual End Time),Custom field (Actual Start  Time),Custom field (Affected Areas),Custom field (BizOps Approvers),Custom field (Business Justification),Custom field (Change Type),Custom field (Change completion date),Custom field (Change description),Custom field (Change description),Custom field (Change description),Custom field (Change description),Custom field (Change reason),Custom field (Change risk),Custom field (Change start date),Custom field (Contact Number),Custom field (Critical Business Process),Customer Request Type,Custom field (Database & Journal cleanup),Custom field (Days Since Last Comment),Custom field (Delivery Due Date),Custom field (Deployment Success),Custom field (Duty Manager Approvers),Custom field (Duty Manager Approvers),Custom field (Duty Manager Approvers),Custom field (Duty Manager Approvers),Custom field (Duty Manager Approvers),Custom field (EPEX Project),Custom field (End Time),Custom field (Epic Link),Custom field (Estimate),Custom field (Fix Description),Custom field (Flagged),Custom field (HUPX Project),Custom field (Hosting Services Coordinator),Custom field (ICCC Invitation),Custom field (Impact),Custom field (Impact),Custom field (Impact Assessment),Custom field (Implementation Steps),Custom field (Introduction Factor),Custom field (Investigation reason),Custom field (Issue Detection Factor),Custom field (Issue Time),Custom field (M7 User),Custom field (M7A Change Description),Custom field (Merge Request Config),Custom field (Merge Request SQL),Custom field (Mitigation),Custom field (Onboarding details),Custom field (Operational categorization),Custom field (Owner),Custom field (PIR (Post Implementation Review)),Custom field (PO / ACM Approvers),Custom field (Pending reason),Custom field (Period),Custom field (Phase),Custom field (Price (excl. VAT)),Custom field (Probability),Custom field (Product Categorization),Custom field (Project Impact),Custom field (Purchasing Type),Custom field (RAID Response),Custom field (RAID type),Custom field (Rank),Custom field (Rank (Obsolete)),Custom field (Reason for failed deployment),Custom field (Release Notes),Custom field (Release Notes),Custom field (Release Notes),Custom field (Release Notes),Custom field (Reproducible),Custom field (Request Category),Custom field (Request participants),Custom field (Requirement ID),Custom field (Rollback Plan),Custom field (Root Cause Detail),Custom field (Root Cause Detail),Custom field (Root Cause Detail),Custom field (Root Cause Detail),Custom field (Root cause),Custom field (SAP Change),Custom field (SAP Record),Satisfaction score (out of 5),Custom field (Severity),Custom field (Shift Start Date),Custom field (Shift Type),Custom field (Source),Sprint,Sprint,Sprint,Sprint,Sprint,Sprint,Sprint,Sprint,Sprint,Sprint,Sprint,Custom field (Start Time),Custom field (Steps to reproduce),Custom field (Steps to reproduce),Custom field (Steps to reproduce),Custom field (Steps to reproduce),Custom field (Story Points),Custom field (Story Points),Custom field (Story Points),Custom field (Story Points),Custom field (Team),Custom field (TechOps Customer),Custom field (TechOps Service Catalogue),Custom field (Test Coverage),Custom field (Test Instructions),Custom field (Test Result),Time Spent in Progress,Time Spent in Progress simplified,Time to approve normal change,Time to approve normal change simplified,Time to close after resolution,Time to close after resolution simplified,Time to first response,Time to first response simplified,Time to resolution,Time to resolution simplified,Custom field (Urgency),Custom field (Urgency),Custom field (Waiting on),Custom field (Workaround),Custom field (XBID Environment),Custom field (XSOP Project),Custom field (Zephyr Teststep),Custom field ([Environment]),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitCommitsReferenced),Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment
Prepare for the CPM workshop HOT,XP-4376,105467,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,ei349,ei349,20/Jan/21 10:17,02/Feb/21 10:33,22/Feb/21 13:21,02/Feb/21 10:33,,,Cross Product Matching ASR,,,,,,,,,,,,ei349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,N/A,,,,,,,,,,2851200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3930,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0cfxq:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 26,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prepare for the CPM workshop Alpha,XP-4375,105466,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,ei349,ei349,20/Jan/21 10:17,01/Feb/21 10:03,22/Feb/21 13:21,01/Feb/21 10:03,,,Cross Product Matching ASR,,,,,,,,,,,,ei349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,N/A,,,,,,,,,,2851200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3930,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0cbsz:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 26 (S),,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove H2 2020 ACER reports from the sftp server after 20/01/2021,XP-4353,105209,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,hw120,qm925,qm925,14/Jan/21 12:47,20/Jan/21 14:40,22/Feb/21 13:21,20/Jan/21 14:40,,,,,,,,,22/Jan/21 00:00,TechOps,,,Remove H2 2020 ACER reports from the sftp server after *20/01/2021*,,hw120,qm925,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-4332,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,2764800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-4092,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|000xro:000c09i000000000000000e0002",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Xbops Sprint 26,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Jan/21 14:14;hw120;{code}
[root@xbprodcbn1 data01]# for px in cropex epex gme hupx np omie opcom ote tge bsp; do rm -f /opt/data01/xbid_${px}_prod/OUT/acer/acer_2020_h2.zip; done
[root@xbprodcbn1 data01]# for px in cropex epex gme hupx np omie opcom ote tge bsp; do ls -la /opt/data01/xbid_${px}_prod/OUT/acer; done
ls: cannot access /opt/data01/xbid_cropex_prod/OUT/acer: No such file or directory
total 8
drwxr-xr-x 2 101012 101012 4096 Jan 20 14:13 .
drwxr-xr-x 7 101012 101012 4096 Jul 13  2020 ..
total 8
drwxr-xr-x 2 101013 101013 4096 Jan 20 14:13 .
drwxr-xr-x 7 101013 101013 4096 Jul 13  2020 ..
total 8
drwxr-xr-x 2 101027 101027 4096 Jan 20 14:13 .
drwxr-xr-x 7 101027 101027 4096 Jul 13  2020 ..
total 8
drwxr-xr-x 2 101014 101014 4096 Jan 20 14:13 .
drwxr-xr-x 7 101014 101014 4096 Jul 13  2020 ..
total 8
drwxr-xr-x 2 101015 101015 4096 Jan 20 14:13 .
drwxr-xr-x 7 101015 101015 4096 Jul 13  2020 ..
total 8
drwxr-xr-x 2 101029 101029 4096 Jan 20 14:13 .
drwxr-xr-x 7 101029 101029 4096 Jul 13  2020 ..
total 8
drwxr-xr-x 2 101024 101024 4096 Jan 20 14:13 .
drwxr-xr-x 7 101024 101024 4096 Jul 13  2020 ..
total 8
drwxr-xr-x 2 101026 101026 4096 Jan 20 14:13 .
drwxr-xr-x 7 101026 101026 4096 Jul 13  2020 ..
total 8
drwxr-xr-x 2 101018 101018 4096 Jan 20 14:13 .
drwxr-xr-x 7 101018 101018 4096 Jan 12 15:42 ..
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide Acer reports for H2/2020,XP-4307,104767,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Critical,Done,tr866,ei349,ei349,06/Jan/21 10:24,12/Jan/21 17:06,22/Feb/21 13:21,12/Jan/21 17:06,,,3.1.x,,,,,,,waiting-techops,,,"Check the Acer reports, perform sanity check (all data, no bugs), provide to the SFTP. ",,ei349,ll664,tr866,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-4332,,,,,,,"11/Jan/21 11:46;tr866;Imported Reports to Excel.zip;https://jira.deutsche-boerse.com/secure/attachment/91589/Imported+Reports+to+Excel.zip","11/Jan/21 11:40;tr866;acer_2020_h2.zip;https://jira.deutsche-boerse.com/secure/attachment/91588/acer_2020_h2.zip","06/Jan/21 16:08;ll664;acer_2020_h2.zip;https://jira.deutsche-boerse.com/secure/attachment/91487/acer_2020_h2.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,3456000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-4092,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|000y0l:8o",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 25,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Jan/21 16:08;ll664;Reports attached, [~tr866] pls do sanity check.","07/Jan/21 15:58;tr866;Notes from testing:
 in case the archive from the jira will be used as is:
 - (!) don't include the files fore June, month 06 in the archive. The files were sent in H1 already
 - (!) remove 2020-10_TRADE_VOLUME_HOUR_TO_DELIVERY_2020-11-01-081500.zip

Reports checked for:
 # 
h4. EIC Check (/)
(previously problems with wrong mapping to EIC codes)
 the german MA EIC codes and the EIC that were expected to not be there were checked visually in the imported files and in Windows PowerShell with the following command:
{code:java}
Get-ChildItem -Recurse | Select-String -Pattern ""10YMA-ONE------O"" | group path | select name
{code}
 ## German MA 10Y1001A1001A82H EIC are used
 ## 10YDE-ENBW-----N EIC not found
 ## 10YDE-EON------1 EIC not found
 ## 10YDE-RWENET---I EIC not found
 ## 10YMA-ONE------O EIC not found
 # 
h4. Volumes check (/)
 ** INTRADAY_TRADE_VOLUME
 ** TRADE_VOLUME_HOUR_TO_DELIVERY
 ## values for volumes for *Quarterly product X03* should have 5 decimals and at least some should have a digit *5* at the position of the *3rd decimal*
 ## values for volumes for *Half-Hourly product X02* should have 5 decimals and at least some should have have a digit *5* at the position of the *2nd decimal*, but at latter positions only 0 digits
 ## values for volumes for products *Hourly X01* and *User Defined Blocks X04* should have 5 decimals and at least some should have not all 0 at the position of the *1st decimal*, but at latter positions only 0 digits
 # 
h4. OMIE (DA with EIC 10YES-REE------0) (/)
is having records for *X04 block product* only in Bid Ask Spread report even thought OMIE doesn't have block orders enabled. It was concluded before that it's correct because even if OMIE doesn't have block orders enabled such quantities are still visible for the trader in the Order Book.
 # 
h4. Products X02(Half Hourly) and X03(Quarter Hourly) (?)
check if record for the products are also present only for the expected bidding zones:
 ## X02: DE (10Y1001A1001A82H), FR (10YFR-RTE------C)
 (!) records for X02 product found unexpectedly also in all {color:#ff8b00}*December*{color} reports for countries {color:#ff8b00}*10YBE----------2*{color} and {color:#ff8b00}*10YNL----------L*{color} (in WEIGHTED_AVERAGE_PRICE_LAST_TRADING_HOUR only Belgium)
 ## X03: DE (10Y1001A1001A82H) , AT (10YAT-APG----L) , SI (10YSI-ELES----O)
 (!) records for X03 product found unexpectedly also in all {color:#ff8b00}*December*{color} reports for countries {color:#ff8b00}*10YBE----------2*{color}, {color:#ff8b00}*10YNL----------L*{color} and {color:#ff8b00}*10YHU-MAVIR----U*{color}
 # 
h4. EICs of the last joining bidding zones in 2nd wave appear in all reports for all months (/)
 -- 10YCA-BULGARIA-R
 -- 10YCZ-CEPS-----N
 -- 10YHR-HEP------M
 -- 10YHU-MAVIR----U
 -- 10YPL-AREA-----S
 -- 10YRO-TEL------P
 -- 10YSI-ELES-----O
 # 
h4. Name spaces (/)
Check if all reports for all months are having declared all namespaces as *ns1:*","08/Jan/21 15:23;tr866;h2. Summary: 
 # (!) if archive from this ticket will be used, following files have to be removed(30 files will remain):
 ## 2020-06_BID_ASK_SPREAD_2020-07-01-053000.xml
 ## 2020-06_INTRADAY_TRADE_VOLUME_2020-07-01-070000.xml
 ## 2020-06_TRADE_VOLUME_HOUR_TO_DELIVERY_2020-07-01-081500.xml
 ## 2020-06_WEIGHTED_AVERAGE_PRICE_2020-07-01-083000.xml
 ## 2020-06_WEIGHTED_AVERAGE_PRICE_LAST_TRADING_HOUR_2020-07-01-084500.xml
 ## 2020-10_TRADE_VOLUME_HOUR_TO_DELIVERY_2020-11-01-081500.zip
# (/) The only new Changes that were in question:
## X02 - Half-Hourly - newly assigned to BE, NL from 10th December 2020
## X03 - Quarterly - newly assigned to BE, NL, HU from 10th December 2020
are related to changes described in following press release
https://www.amprion.net/Presse/Presse-Detailseite_29056.html","12/Jan/21 15:36;tr866;Sanity check completed, obsolete files removed from archive.","12/Jan/21 17:04;tr866;Files uploaded to SFTP.",,,,,,,,,,,,,,,,,,,,,,,,,,,
CPM - 1:n Trade Recording - Shipping Module,XP-4303,104740,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Critical,Done,jy268,radeale,radeale,05/Jan/21 16:45,27/Jan/21 16:42,22/Feb/21 13:21,19/Jan/21 09:15,,,Cross Product Matching ASR,,Shipping,,,,,,,,"Please consider high-level changes necessary to be performed in the area of the *Shipping Module* (SM, SPM) because of the customer-requested trade recording 1:n as detailed in this comment in XBID-5205.
The example is also attached here as a [PDF document.|https://jira.deutsche-boerse.com/secure/attachment/91473/Example%20TradeCaptureRprt.pdf]

The current state of the code analysis is stored here, feel free to use it and/or update it:
 * https://github.deutsche-boerse.de/dev/xbid/wiki/CPM-Shipping-Module-Analysis

The aim is to be prepared for the upcoming _teleconference workshop_ with the customers (most likely to take place in 11/1 - 22/1).

The current WIP documentation for the CPM is [located here|https://projects.deutsche-boerse.de/sites/ps0080/Shared%20Documents/04%20XBID%20Legal%20Framework/01%20XBID%20Contracts%20and%20Change%20Requests/03_XBID%20Additional%20Service%20Requests/ASR018%20-%20Cross-Product%20Matching].

Related previous ticket(s):
https://jira.deutsche-boerse.com/browse/XP-3933",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,2678400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3930,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0c4g3:zo2",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 25 (S),,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Jan/21 14:34;radeale;The output is here:

[Link|https://github.deutsche-boerse.de/dev/xbid/wiki/CPM-Shipping-Module-Analysis-(option-1-N)]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CPM - 1:n Trade Recording - ACER and AM Reporting,XP-4302,104738,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,eh941,radeale,radeale,05/Jan/21 16:25,14/Jan/21 13:42,22/Feb/21 13:21,14/Jan/21 13:42,,,Cross Product Matching ASR,,AM Indicators Reporting,Trading,,,,,,,"Please consider high-level changes necessary to be performed in the areas of the *ACER Reporting* and the *AM Indicators* because of the customer-requested trade recording 1:n as detailed in this comment in XBID-5205.
The example is also attached here as a [PDF document.|https://jira.deutsche-boerse.com/secure/attachment/91473/Example%20TradeCaptureRprt.pdf]

The current state of the code analysis is stored here, feel free to use it and/or update it:
 * https://github.deutsche-boerse.de/dev/xbid/wiki/CPM-report-analysis

The aim is to be prepared for the upcoming _teleconference workshop_ with the customers (most likely to take place in 11/1 - 22/1).

The current WIP documentation for the CPM is [located here|https://projects.deutsche-boerse.de/sites/ps0080/Shared%20Documents/04%20XBID%20Legal%20Framework/01%20XBID%20Contracts%20and%20Change%20Requests/03_XBID%20Additional%20Service%20Requests/ASR018%20-%20Cross-Product%20Matching].

Related previous ticket(s):
https://jira.deutsche-boerse.com/browse/XP-4061",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,4060800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3930,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|000y0l:8w",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 25,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"CPM - 1:n Trade Recording - SOB Changes (API, Reports)",XP-4301,104737,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,uv683,radeale,radeale,05/Jan/21 16:19,29/Jan/21 22:16,22/Feb/21 13:21,14/Jan/21 13:37,,,Cross Product Matching ASR,,,,,,,,,,"Please consider high-level changes necessary to be performed in the areas of the *SOB API* and the *SOB Reporting* because of the customer-requested trade recording 1:n as detailed in this comment in XBID-5205.
 The example is also attached here as a PDF document.

The current state of the code analysis is stored here, feel free to use it and/or update it:
* https://github.deutsche-boerse.de/dev/xbid/wiki/CPM-trading-api-changes
* https://github.deutsche-boerse.de/dev/xbid/wiki/CPM-other-open-issues

The aim is to be prepared for the upcoming _teleconference workshop_ with the customers (most likely to take place in 11/1 - 22/1).

The current WIP documentation for the CPM is [located here|https://projects.deutsche-boerse.de/sites/ps0080/Shared%20Documents/04%20XBID%20Legal%20Framework/01%20XBID%20Contracts%20and%20Change%20Requests/03_XBID%20Additional%20Service%20Requests/ASR018%20-%20Cross-Product%20Matching].

Related previous ticket(s):
https://jira.deutsche-boerse.com/browse/XP-3932",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-5426,,,,,,,"05/Jan/21 16:14;radeale;Example TradeCaptureRprt.pdf;https://jira.deutsche-boerse.com/secure/attachment/91473/Example+TradeCaptureRprt.pdf",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,4060800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3930,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|000y0l:8s",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 25,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Public Description of Single Intra-Day Coupling Algorithm - last comments to be checked,XP-4252,104264,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,th409,qm925,qm925,11/Dec/20 14:47,13/Jan/21 09:48,22/Feb/21 13:21,13/Jan/21 09:48,3.1.x,,3.1.x,,,,,,,Waiting-Internal,,,"Review sections 3.4 and 2.5 in the attached document called “new”.

Also, in the document called ""compare"" the changes made in the new document are visible compared to the old document.

Is the content of Section 3.4 and 2.5 in the new document accurate?",,ek176,qm925,th409,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Dec/20 14:47;qm925;Compare.pdf;https://jira.deutsche-boerse.com/secure/attachment/91087/Compare.pdf","11/Dec/20 14:47;qm925;new.docx;https://jira.deutsche-boerse.com/secure/attachment/91086/new.docx","11/Dec/20 14:47;qm925;old.docx;https://jira.deutsche-boerse.com/secure/attachment/91085/old.docx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,3456000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-4090,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|000y0l:9w",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Christmas Sprint,Alpha Sprint 25,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Jan/21 09:47;th409;The content is accurate, I have only one small comment, in chapter 2.5, it was agreed to use wording ""shared ramping"" instead of ""sum ramping"", however, in picture below, wording ""sum ramping"" is still used.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CPM ASR - Prepare for a final handover to customers HOT,XP-4233,104142,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,ei349,ei349,09/Dec/20 07:52,14/Dec/20 10:37,22/Feb/21 13:21,11/Dec/20 15:41,,,Cross Product Matching ASR,,,,,,,,,,"There will be a customer workshop in the week between 14-19th December where we will discuss our findings from the ASR together with our customers. 

 

Finalize ASR topics, check the final document which will be handled to customers and prepare for a discussions about findings and open points. 

 

Main contact person is [~radeale]. ",,ei349,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,6220800,,,,,,,,,,XP-3930,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0c4g3:zp",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 24 (S),,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Dec/20 15:41;lt112;Workshop rescheduled to the next year",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CPM ASR - Prepare for a final handover to customers Alpha,XP-4232,104141,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,eh941,ei349,ei349,09/Dec/20 07:49,20/Jan/21 10:48,22/Feb/21 13:21,20/Jan/21 10:48,,,Cross Product Matching ASR,,,,,,,,,,"There will be a customer workshop in the week between 14-19th December where we will discuss our findings from the ASR together with our customers. 

 

Finalize ASR topics, check the final document which will be handled to customers and prepare for a discussions about findings and open points. 

 

Main contact person is [~radeale]. ",,eh941,ei349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-4233,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,2937600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3930,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|000y0l:6i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 24,Alpha Christmas Sprint (S),Alpha Sprint 25,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Jan/21 15:39;eh941;I focused on the trade capture report examples they sent from business logic point of view. I compared our current solution (branch {{cpm}}) with the suggested formats.
h3. Findings:
 * In current code we exclude orders from matching which have unmatchable price themselves but when the average price is done they can be used
 * We don't really care about matching prices for trade legs. For the aggressor the price from the order is taken as matching price which is nonsense
 * Auction prices and welfare distribution isn't handled at all

h3. Price handling suggestions
h4. Continuous trading

Each trade leg should have it's *matching price*. If it's an *aggressor* then it's the price the trader saw in the *order book* - the weighted average price. If it's a *passive* order it should be the *order's price*

Example:
 13-14 B 10@120
 13:00-13:30 S 10@100
The orders above generate in order book a shadow order 13:30-14:00 B 10@140.
 13:30-14:00 S 10@120 (aggressor)

The passive orders are matched with their prices as entered in order entries:
 Buy order is matched at price 120
 First sell order at price 100

The aggressor sees following price in the order book (formula in CPM analysis document 3.1.2 Shadow orders):
 2*120-100=140

Therefore the matching price will be 140 for the aggressor.

Cash value of trade legs should be equal:
 * Buy: 120*10=*1200*
 * Sell: 100*10/2 + 140*10/2=*1200*

h4. Auction

Each trade leg matched in the auction should have it's limit price +- distributed leftover cash value:
 Example:
 13-14 B 10@120
 13:00-13:30 S 10@100
 13:30-14:00 S 10@120

Weighted average price of virtual *sell* order 13-14 is (100+120) / 2 = 110. *Cash value is 1100*.
 *Buy* order price is 120, c*ash value 1200*. 
 Cash value difference is 1200-1100=*100*. The 100 must be *distributed* equally to *all participants* - equal part to *buy side* and *equal* part to *sell side*. Meaning:
 * Buy: Cash value 1200-100/2=1150 (only half of the extra cash value goes to buy side).  Matching price is 120-5=115
 * Sell 1: Cash value 1000+100/2/2=1050 (only half of the cash value goes to sell side and only half of that to this order since it's just 30 minutes). Matching price is 100+5=105
 * Sell 2: Cash value 1200+100/2/2=1250. Matching price is 120+5=125

The cash value of buy and sell orders is equal:
 * Buy order 115*10=*1150*
 * Sell orders 105*10/2+125*10/2=*1150*

h3. Opened questions:
 * They added {{qty}} to each trade leg. Isn't there an assumption there would be multiple quantities possible there? Meaning e.g. having 13-14 buy order qty=100 against sell 13:00-13:30 order qty=80 and sell 13:00-13:30 qty=20 and 13:30-14:00 qty=100?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 1) CPM - performance analysis based on data,XP-4171,103523,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,eh941,eh941,eh941,25/Nov/20 12:48,03/Dec/20 10:35,22/Feb/21 13:21,03/Dec/20 10:35,,,Cross Product Matching ASR,,,,,,,,,,"A follow up of XP-3837.

Try to prove on production data (or from performance test) that our assumptions done in XP-3837 are correct.",,eh941,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Nov/20 10:47;radeale;CPM performance analysis based on data · dev_xbid Wiki.pdf;https://jira.deutsche-boerse.com/secure/attachment/90433/CPM+performance+analysis+based+on+data+%C2%B7+dev_xbid+Wiki.pdf",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,7516800,,,,,,,,,,XP-3930,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0c1w2:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 22,Alpha Sprint 23 (S),,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Nov/20 10:46;radeale;https://github.deutsche-boerse.de/dev/xbid/wiki/CPM-performance-analysis-based-on-data","27/Nov/20 10:47;radeale;The output in PDF as of 27/11.

[^CPM performance analysis based on data · dev_xbid Wiki.pdf]","27/Nov/20 13:07;eh941;The goal of this task was to do CPM performance analysis on production-like data to prove the assumptions created [in this analysis.|https://github.deutsche-boerse.de/dev/xbid/wiki/CPM-performance-impact]. The full practical analysis [can be found here|https://github.deutsche-boerse.de/dev/xbid/wiki/CPM-performance-analysis-based-on-data].

To summarize it up.

The whole process of the analysis (the both tasks) was as following:
 # We as team decided to create performance downgrade *estimate* based on our *expertise* instead of the real code measurements.
 # I *picked* the areas that are affected and *potentially slowed down by CPM*
 # I tried to *estimate the slowest operation* of each part. There is an assumption that the *slowest part determine the most the overall performance*
 # I created the *formulas* which represents number of calls of the slowest parts in the system. These formulas are created *for the current solution and the CPM*. The *difference* should give us information how *much the system slows down with CPM*
 # In order to *verify* these assumptions I had to collect much more performance data than we do. I altered current 3.1.9 XBID version with new data collecting and run performance scenario sc04 on performance environment
 # By using correlation and other *statistics* I tried to prove the *formulas correctness*

There are the results from the *theoretical* part confronted with the *practical*:
 # *Routing* is the slowest operation in the system - *{color:#00875a}confirmed{color}* by Auction, Matching and Order Book practical analysis
 # *Matching* time is determined by by counter orders size. With CPM matching will be up to *7 times slower* - {color:#00875a}*confirmed*{color} by Matching practical analysis. However it turned out that the *matching takes minority time* so it the performance downgrade with CPM won't be important.
 # *Auction* time is determined by buy and order sizes. With CPM auction well be up to *13 times slower* - {color:#00875a}*confirmed*{color} by Auction practical analysis
 # *Order book calculation* time is determined by number of contracts, delivery areas which must be recalculated with their orders (full formula can be found [here|https://github.deutsche-boerse.de/dev/xbid/wiki/CPM-performance-impact#current-order-book]). With CPM the calculation will be slowed down up to *47 times* - *{color:#ff8b00}unknown{color}*. There is still *lack of data for the full confirmation*. Nevertheless we confirmed that the slowest part is the routing algorithm. With CPM the routing will be called 47 times more often therefore the formula is *{color:#ff8b00}most likely correct{color}*.
 # *Persister* will be 1.8 times slower by CPM - *{color:#de350b}not confirmed{color}*. There will be most likely no major impact on persister with CPM
 # In case one *PX Dispute* is configured up to *120 times* maximum slowdown is expected - *{color:#ff8b00}not tested{color}.* With one dispute enabled there must be 3 times more order books calculated therefore the assumption is *very likely in line with 47 times slower* order book calculations.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CPM Analysis - ACER Reporting,XP-4163,103477,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,lt112,lt112,24/Nov/20 11:30,24/Nov/20 12:54,22/Feb/21 13:21,24/Nov/20 12:54,,,Cross Product Matching ASR,,,,,,,,,,Analyze ACER Reporting (definitions) and detect potential issues.,,lt112,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,7776000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3930,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0c4b4:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Nov/20 12:54;lt112;already done in https://github.deutsche-boerse.de/dev/xbid/wiki/CPM-report-analysis#acer-reports",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CPM Analysis - AM Indicators,XP-4162,103476,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,lt112,lt112,24/Nov/20 11:30,24/Nov/20 12:54,22/Feb/21 13:21,24/Nov/20 12:54,,,Cross Product Matching ASR,,,,,,,,,,Analyze AM Indicators (definitions) and detect potential issues (e.g. trade vs trade_group definition).,,lt112,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,7776000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3930,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0c4aw:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Nov/20 12:54;lt112;already done in https://github.deutsche-boerse.de/dev/xbid/wiki/CPM-report-analysis#am-reports",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CPM Exchange Disputes Feasability Analysis,XP-4156,103406,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,lt112,lt112,20/Nov/20 16:54,25/Nov/20 10:28,22/Feb/21 13:21,25/Nov/20 10:27,,,Cross Product Matching ASR,,,,,,,,,,"Exchange Disputes bring in additional complexity. Analyze potential impact.
Output should be one of:
- non-feasible - reasoning should be provided
- feasible with high impact - a note (warning) should be given as part of the ASR
- feasible with low impact - we do not have to mention it explicitly

Hints and assumptions:
- we DO want to get rid of Exchange disputes, as they severely complicate the code and are not used at all
- we would like to use this as an opportunity, thus finding a way to find reasoning WHY we cannot support them anymore is preferred
- the expected outcome is the second option - in principle, a single exchange dispute causes 3 times the number of orderbooks to be calculated (one for A without B present, one for B without A present, one for everybody else), adding more complexity the more disputes there are",,lt112,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,7689600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3930,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0c4g4:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 22 (S),,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Nov/20 10:24;lt112;*Feasible with high impact*

h1. Exchange disputes

* exchange disputes cause high performance impact (generally) to the application
* the impact is mainly on OBK - specifically {{(n+1)}} as many OBK computations, where {{n}} represents a size of a set of parties involved in any dispute

h2. Examples

h3. A and B in dispute
* OBKs calculated for A without orders from B present
* OBKs calculated for B without orders from A present
* OBKs calculated for the remaining parties with all the orders present
* => 3x OBKs calculations

h3. A and B in dispute, C and D in dispute
* OBKs calculated for A without orders from B present
* OBKs calculated for B without orders from A present
* OBKs calculated for C without orders from D present
* OBKs calculated for D without orders from C present
* OBKs calculated for the remaining parties with all the orders present
* => 5x OBKs calculations

h3. A and B in dispute, B and C in dispute
* OBKs calculated for A without orders from B present
* OBKs calculated for B without orders from A or C present
* OBKs calculated for C without orders from B present
* OBKs calculated for the remaining parties with all the orders present
* => 4x OBKs calculations

h2. DBAG recommendation
* as exchange disputes are not used anyway, we recommend removing the exchange dispute functionality from the XBID solution in order to prevent the not-so-obvious performance impact should some dispute occur, as CPM already brings up to 47 times performance demand of the current solution, this can grow up to 141 times for a single dispute
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Finalize ASR for CPM and help with docs and workshop preparations (placeholder for Alpha) ,XP-4154,103404,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,ei349,ei349,20/Nov/20 15:43,16/Dec/20 15:33,22/Feb/21 13:21,16/Dec/20 15:33,,,,,,,,,,,,,"finish performance analyzis

 

coordinate with [~radeale]",,ei349,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,8035200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3930,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0c1w3:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 23 (S),Alpha Sprint 24,Alpha Christmas Sprint (S),,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Finalize ASR for CPM and help with docs and workshop preparations (placeholder for HOT) ,XP-4153,103402,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,ei349,ei349,20/Nov/20 15:43,08/Dec/20 10:35,22/Feb/21 13:21,08/Dec/20 10:35,,,,,,,,,,,,,,,ei349,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,8035200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3930,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0c4g2:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 23,,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CPM - performance analysis based on data,XP-4122,103072,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,eh941,eh941,eh941,11/Nov/20 13:41,15/Dec/20 15:45,22/Feb/21 13:21,25/Nov/20 12:49,,,Cross Product Matching ASR,,,,,,,,,,"A follow up of XP-3837.

Try to prove on production data (or from performance test) that our assumptions done in XP-3837 are correct.",,eh941,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-4171,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,8812800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3930,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0c1w0:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 22,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-4211-perf-analysis-jh,XP-4211-perf-analysis-develop-jh,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 1) CPM - performance analysis,XP-4119,103069,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,eh941,lt112,eh941,11/Nov/20 12:50,16/Nov/20 10:52,22/Feb/21 13:21,16/Nov/20 10:52,,,Cross Product Matching ASR,,,,,,,,,,"Analyse performance impact of the cross-product solution
- matching
- order-book
- auction
- persister?

Provide both estimate (e.g. 10 times slower for the given data) and reasoning, assume data as defined in the SLA agreement (ratios per product etc.)",,eh941,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,8899200,,,,,,,,,,XP-3930,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y0l:su",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 22,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CPM performance - analysis impact in context of PROD processing times,XP-4100,102901,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ll664,ll664,ll664,09/Nov/20 10:23,07/Dec/20 08:18,22/Feb/21 13:21,16/Nov/20 12:02,,,Cross Product Matching ASR,,,,,,,,,,"A follow up of XP-3837.

It would be nice to view the analysis results in the context of actual PROD procecssing pipeline performance profile.

The idea is that actual matching slowdown might not be so significant if we face bottlenecks in other stages, i.e. Persister.",,ll664,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-4122,,,,,,,"27/Nov/20 10:42;radeale;CPM performance impact · dev_xbid Wiki.pdf;https://jira.deutsche-boerse.com/secure/attachment/90432/CPM+performance+impact+%C2%B7+dev_xbid+Wiki.pdf",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,7516800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3930,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0c0w8:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 22,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-4174,XP-4100,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Nov/20 12:02;ll664;Gathered some stats and attempted to draw some conclusions in separate chapter within CPM Performance wiki: https://github.deutsche-boerse.de/dev/xbid/wiki/CPM-performance-impact#production-performance-profile

","27/Nov/20 10:42;radeale;GIT PDF

[^CPM performance impact · dev_xbid Wiki.pdf]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CPM - SOB-Related changes,XP-4061,102283,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,radeale,eh941,eh941,29/Oct/20 13:36,06/Nov/20 15:21,22/Feb/21 13:21,06/Nov/20 15:21,,,,,,,,,,,,,"The analysis was done within task XP-3932

There are wiki pages created:

* [Trading API Changes|https://github.deutsche-boerse.de/dev/xbid/wiki/CPM-trading-api-changes]
* [Report Changes|https://github.deutsche-boerse.de/dev/xbid/wiki/CPM-report-analysis]

While trading API changes can be designed from the functional perspective of changes required by CPM, for the reports we can't really say what should be in there, since we don't know the use case for which they were created.",,eh941,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,9936000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3930,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0bx48:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Oct/20 13:39;radeale;Trading-related changes done (/)

Reporting-related todo (/)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER database housekeeping job,XP-4026,101878,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,od044,qo794,qo794,21/Oct/20 08:27,19/Nov/20 16:46,22/Feb/21 13:21,19/Nov/20 16:16,,,,,,,,,,,,,"Introduce deletion of old (unused) data from database tables in ACER report tool.

housekeep all data older than 1 year ",,jy268,od044,qo794,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,8121600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-4092,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0bwzz:f",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 22 (S),,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,develop,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Nov/20 13:10;jy268;Housekeeping implemented, by default it is removing rows from tables which are more than 365 days old. This behavior can be modified with setting of
{code}acer.housekeeping.retention.days{code}
parameter.

DB tables are cleaned according to following column

||Table name||Column name which value has to be older than 1 year||
|acer_intraday_trade_volume|delivery_start_date|
|acer_trade_volume_hour_to_delivery|month|
|acer_weighted_average_price|delivery_start_date|
|acer_weighted_average_price_last_trading_hour|delivery_start_date|

New job is named *acer-housekeeping* and is executed every day at 8PM UTC","19/Nov/20 16:16;od044;Test passed on Acer v 1.0.3-SNAPSHOT (cf15ea5cfaebf63f5629ff5621ddab8ecfe1b785)
- new job acer-housekeeping is implemented and works properly: it remove all data that are older the the retention days (default 365) from table above. 
{code}
2020-11-19 15:51:50.643 batch-jobs-thread-1 INFO  - o.s.b.c.j.SimpleStepHandler - Executing step: [acer-clean-db-data-older-than-retention-period]
2020-11-19 15:51:50.651 batch-jobs-thread-1 INFO  - c.d.e.x.a.a.h.HousekeepingDao - Housekeeping acer_intraday_trade_volume data older than 2019-11-20 00:00:00.0
2020-11-19 15:51:50.652 batch-jobs-thread-1 INFO  - c.d.e.x.a.a.h.HousekeepingDao - Removed 67 rows during acer_intraday_trade_volume housekeeping
2020-11-19 15:51:50.652 batch-jobs-thread-1 INFO  - c.d.e.x.a.a.h.HousekeepingDao - Housekeeping acer_trade_volume_hour_to_delivery data older than 2019-11-20 00:00:00.0
2020-11-19 15:51:50.652 batch-jobs-thread-1 INFO  - c.d.e.x.a.a.h.HousekeepingDao - Removed 67 rows during acer_trade_volume_hour_to_delivery housekeeping
2020-11-19 15:51:50.652 batch-jobs-thread-1 INFO  - c.d.e.x.a.a.h.HousekeepingDao - Housekeeping acer_weighted_average_price data older than 2019-11-20 00:00:00.0
2020-11-19 15:51:50.653 batch-jobs-thread-1 INFO  - c.d.e.x.a.a.h.HousekeepingDao - Removed 67 rows during acer_weighted_average_price housekeeping
2020-11-19 15:51:50.653 batch-jobs-thread-1 INFO  - c.d.e.x.a.a.h.HousekeepingDao - Housekeeping acer_weighted_average_price_last_trading_hour data older than 2019-11-20 00:00:00.0
2020-11-19 15:51:50.654 batch-jobs-thread-1 INFO  - c.d.e.x.a.a.h.HousekeepingDao - Removed 67 rows during acer_weighted_average_price_last_trading_hour housekeeping
2020-11-19 15:51:50.659 batch-jobs-thread-1 INFO  - o.s.b.c.s.AbstractStep - Step: [acer-clean-db-data-older-than-retention-period] executed in 16ms
{code}

How to test:
1. Generate some orders and trades into XBID with timestamp in past more than 1 month ago
2. Start Acer report app and trigger import jobs to import the orders and trades in previous step 
3. Adjust some timestamp of records in tables below to have some records that are older than the retention days (365):
||Table name|	Column name which value has to be older than 1 year||
|acer_intraday_trade_volume|	delivery_start_date|
|acer_trade_volume_hour_to_delivery	|month|
|acer_weighted_average_price	|delivery_start_date|
|acer_weighted_average_price_last_trading_hour	|delivery_start_date|
4. Trigger a job acer-housekeeping
5. Verify that only records that were older than the retention days were removed from those tables 
6. Repeat steps 2-5 with different retention days and cron job",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AMR database housekeeping job,XP-4025,101877,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,od044,qo794,qo794,21/Oct/20 08:25,19/Nov/20 17:22,22/Feb/21 13:21,19/Nov/20 17:22,,,3.2.x,,AM Indicators Reporting,,,,,,,,"Introduce deletion of old (unused) data from database tables in AMR

Housekeep all data older than 1 year. ",,jy268,od044,qo794,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,8121600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0bwzz:c",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 22 (S),,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Nov/20 11:40;jy268;Housekeeping implemented, by default it is removing rows from tables which are more than 365 days old. This behavior can be modified with setting of
{code}am.housekeeping.retention.days{code}
parameter.

DB tables are cleaned according to following column

||Table name||Column name which value has to be older than 1 year||
|am_atc_utilization|delivery_start_date|
|am_net_position|delivery_start_date|
|am_order_volume|delivery_start_date|
|am_ramping_occurrence|delivery_start_date|
|am_volume_per_border|delivery_start_date|
|am_order_trade_ratio|day|
|am_submitted_orders|day|
|am_total_trades|day|
|am_explicit_implicit_allocation_volume|delivery_start|
|am_trades_evolution|delivery_start|

New job is named *am-housekeeping* and is executed every day at 8PM UTC","19/Nov/20 17:22;od044;Test passed on Acer v 1.0.8-SNAPSHOT (3f1bb3b9ed5b497d3d77df2a206e718af35f4e38)
- new job am-housekeeping is implemented and works properly: it remove all data that are older the the retention days (default 365).

How to test:
1. Generate some orders and trades into XBID with timestamp in past more than 1 month ago
2. Start AM report app and trigger import jobs to import the orders and trades in previous step 
3. Adjust some timestamp of records in tables mentioned above (e.g. via DB client) to have some records that are older than the retention days (365):
4. Trigger a job am-housekeeping
5. Verify that only records that were older than the retention days were removed from those tables 
6. Repeat steps 2-5 with different retention days and via cron job",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(split 5) Cross-Product Matching - Benchmark,XP-3970,101549,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,lt112,lt112,14/Oct/20 12:37,06/Nov/20 09:00,22/Feb/21 13:21,29/Oct/20 08:14,,,Cross Product Matching ASR,,,,,,,,,,"Analyze benchmarking options for matcher/auction/orderbook. Implement.

See losses benchmark: https://github.deutsche-boerse.de/dev/xbid.routing-benchmark",,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,11318400,,,,,,,,,,XP-3426,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000xro:000c0fz",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 20 (S),,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(split 3) Cross-Product Matching - OrderBook,XP-3969,101548,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,lt112,lt112,14/Oct/20 12:35,29/Oct/20 08:14,22/Feb/21 13:21,29/Oct/20 08:14,,,Cross Product Matching ASR,,,,,,,,,,"Introduce support for cross-product matching to order-book

Find some inspiration here https://github.deutsche-boerse.de/dev/xbid/issues/745 - just an idea/draft, not to be followed strictly

NOTES:
* Price calculation is still being discussed. Use weighted average price option, encapsulate for easy change.
* Do not include block orders yet",,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,11318400,,,,,,,,,,XP-3429,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000xro:000c0fx",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 20 (S),,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CPM Matcher - validate FOK/AON handling,XP-3951,101457,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,lt112,lt112,13/Oct/20 12:48,23/Oct/20 07:57,22/Feb/21 13:21,16/Oct/20 08:14,,,Cross Product Matching ASR,,,,,,,,,,"Using {{userOrderIds}} collection is fishy, validate correct handling of the AON/FOK orders before estimating impact.",,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,11145600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3426,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0bt5g:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 20 (S),,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,cpm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Oct/20 08:14;lt112;{{userOrderIds}} collection is meant to function as a rollback feature (in case of routing failure, the collection is just thrown away and no changes are applied), as orders quantity is reduced otherwise (for non-AON/FOK counter-orders).
However, for production code needs thorough refactoring.

We can move on to https://jira.deutsche-boerse.com/browse/XP-3837",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AM Indicators reports contain wrong column names,XP-3945,101399,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,od044,zi174,zi174,12/Oct/20 10:52,02/Nov/20 12:57,22/Feb/21 13:21,15/Oct/20 12:04,,,3.1.2,,,,,,,,,,"Fix to UAT Branch. 

during our internal testing and regeneration of the missing reports we've discovered typos in the AM Indicators reports. Some reports have a wrong column name, please see below.

 
||Report filename||Specs Chapter||Correct column names||
|ATC_UTILIZATION|2.10 ATC Utilization Ratio|(x) delivery_start_date instead of • {color:#00875a}delivery_start_date_time{color}|
|NET_POSITION|2.11 Net Position|(x) delivery_start_time instead of • {color:#00875a}delivery_start_date_time{color}|
|ORDERS_VOLUME|2.7 Total Submitted Order Volume per Market Area|(x) orders_volume instead of • {color:#00875a}order_volume{color}|
|RAMPING_OCCURRENCE|2.8 Total Number of Ramping Constraint Occurrences|(x) area1,area2 instead of • {color:#00875a}area_id1 , area_id2{color}|",,od044,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Oct/20 11:56;od044;2018-02_ATC_UTILIZATION_2020-10-15-094651.csv;https://jira.deutsche-boerse.com/secure/attachment/88647/2018-02_ATC_UTILIZATION_2020-10-15-094651.csv","15/Oct/20 11:56;od044;2018-02_NET_POSITION_2020-10-15-094701.csv;https://jira.deutsche-boerse.com/secure/attachment/88646/2018-02_NET_POSITION_2020-10-15-094701.csv","15/Oct/20 11:56;od044;2018-02_ORDERS_VOLUME_2020-10-15-095218.csv;https://jira.deutsche-boerse.com/secure/attachment/88644/2018-02_ORDERS_VOLUME_2020-10-15-095218.csv","15/Oct/20 11:56;od044;2018-02_RAMPING_OCCURRENCE_2020-10-15-094720.csv;https://jira.deutsche-boerse.com/secure/attachment/88645/2018-02_RAMPING_OCCURRENCE_2020-10-15-094720.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,11232000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0bs4r:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 20 (S),,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3791-runTime,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Oct/20 12:00;od044;Test passed on docker with the latest AM report tool from develop branch (943084e70808ca99feb0795587bda64af6fe1825)

- columns have been updated (see attached report below)
[^2018-02_ATC_UTILIZATION_2020-10-15-094651.csv]  
[^2018-02_NET_POSITION_2020-10-15-094701.csv]  
[^2018-02_ORDERS_VOLUME_2020-10-15-095218.csv]  
[^2018-02_RAMPING_OCCURRENCE_2020-10-15-094720.csv] 
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CPM Fixed canonical contracts analysis,XP-3936,101295,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,radeale,lt112,lt112,08/Oct/20 14:01,03/Nov/20 16:59,22/Feb/21 13:21,29/Oct/20 14:03,,,Cross Product Matching ASR,,,,,,,,,,"We want to make the base products for CPM fixed to be only the existing 3: 15, 30 and 60
 - analyze impact (e.g. configuration GUI)
 - provide reasoning (presentable to the customer) why we want to do that
 - consult with the ACM (via [~radeale] preferably)",,ll664,lt112,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,10195200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3930,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|000xro:000c09i8r",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 19 (S),Alpha Sprint 20,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Oct/20 10:33;ll664;Analysis moved to wiki: https://github.deutsche-boerse.de/dev/xbid/wiki/CPM-products-with-fixed-canonical-contracts-length","26/Oct/20 08:13;ll664;Adjusted the analysis with the idea of three  ""constant products"" - no creation of Products allowed, details in the wiki. Closing.","26/Oct/20 18:23;radeale;Hi David,

there are also other points regarding this ticket:
{quote}- provide reasoning (presentable to the customer) why we want to do that
- consult with the ACM (via Alexandr Radecky preferably){quote}

I think the reasoning for the customers to accept a limitation to the current functionality is not sufficiently reasoned.

Also the ticket can be closed once discussed with the ACM (core meeting), i.e. once the reasoning is sufficient to be discussed with the ACM.

Thanks
Alexandr",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CPM Parameters Analysis,XP-3935,101294,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,lt112,lt112,08/Oct/20 13:58,24/Nov/20 19:14,22/Feb/21 13:21,24/Nov/20 19:14,,,Cross Product Matching ASR,,,,,,,,,,"Analyse changes in XBID parameters
 - see [https://github.deutsche-boerse.de/dev/xbid/wiki/CPM-questionable-parameters]
 - output should preferably be something presentable to the customer
 - e.g. we need to fix minimal quantity across all mutually tradable products, because otherwise it does not work (why, examples)

Consult with [~radeale] for align with the customers.",,lt112,radeale,uv683,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,7689600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3930,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0bwzz:g",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 22 (S),,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Nov/20 10:19;uv683;*CMM/CMI* is loading its configuration from following sources

CMM
 * application.properties
 * defaultConfiguration.xml

CMI
 * application.properties
 * database
 * cmm_600_configuration

However as pointed out in this ticket XP-3931, no impact is foreseen on these two modules.","20/Nov/20 17:30;lt112;*DEPRECATED, SEE BELOW*

h1. Trading

h2. Product

h3. Honorable mentions - entry validation properties

* *validated only upon order entry and ignored elsewhere*
* min/max quantity
* min/max price
* tick size

h3. Lot size
* currently {{lot size = gcd( minimal_quantity, pow( floor( log_10( minimal_quantity ) ), 10 ) )}}, which means greatest common divisor of minimal quantity and the largest power of ten smaller than the minimal quantity  
* can cause issues during cross-product matches for partial match - incompatible lot size
* can be defined as input validation - might cause left-overs of quantities outside the product boundaries, e.g.:
** 00-30: min_q = 100, lot_size = 100
** 00-15,15-30: min_q = 1, lot_size = 1
** + 00-30 S100@100
** + 00-15 B17@100, 15-30 B17@100
** leaving 00-30 S83@100, you can no longer enter a fully matching order just for this leftover
* propose fixed lot size

h3. Quantity unit
* might cause inconsistency among products (e.g. displayed unit for a cross-product trade)

h3. Decimal shift (quantity)
* might cause inconsistency among products (e.g. displayed decimal shift for a cross-product trade)

h3. Decimal shift (price)
* might cause inconsistency among products (e.g. displayed unit for a cross-product trade)


h2. API changes
* there are multiple unused (deprecated, forbidden) parameters in the API that should be removed since we touch the API anyway

h3. {{OrdrReq}}
* {{inclPreArranged}} - there are no prearranged orders in XBID

h3. {{OrdrExeRprt}}
* {{preArranged}} - there are no prearranged orders in XBID
* {{preArrangedAcct}} - there are no prearranged orders in XBID

h3. ModifyAllOrdrs
* {{inclPreArranged}} - there are no prearranged orders in XBID

h3. TradeCaptureRprt
* {{preArranged}} - there are no prearranged orders in XBID
* keep in mind there are multiple changes to {{TradeCaptureRprt}} discussed elsewhere (due to CPM)

h3. ProdInfoRprt
* {{otcProduct}} - OTC is not supported
* {{currency}} - ???

h3. FullProdInfoRprt
* {{currency}} - ???
* {{assetType}} - ???
* {{CrossProductSpreadDescription}} - m7 implementation of CPM, not suported by XBID
","23/Nov/20 10:53;lt112;Cleaned up

h1. Trading parameters

h2. Product

There are a few groups of issue-causing parameters in the product settings with different options for each.

h3. Display parameters

* include the following:
** Quantity unit
** Decimal shift (quantity)
** Decimal shift (price)
* these parameters must be unified among all products that can cross-trade together

h3. Price parameters

* include the following:
** Minimal price
** Maximal price
** Tick size
* these parameters must be either unified among all products that can cross-trade together or be used only for entry validation and ignored later

h4. Example

* product P_A has a minimal price 1000
* product P_B has a minimal price 1
* {{B1000@1000}} from P_A will match (in auction) with {{S1000@2}} from P_B with the resulting price of {{501}}, which is below the P_A minimal price

h4. Note to tick size

* as trade price should be rounded to tick size, we highly recommend unifying this parameter across all products, otherwise the maximal values across products must be used, causing possibly high error for certain products

h3. Validation/computation parameters

* include the following:
** minimal quantity
** maximal quantity
** lot size
* these parameters must be either unified among all products that can cross-trade together or be used only for entry validation and ignored later

h4. Example

* product P_A has a minimal quantity 1000
* product P_B has a minimal quantity 1
* {{B1000@10}} from P_A will match with {{S1@10}} from P_B, {{B999@10}} remains
* no order from P_A can match this left-over

h4. Note to lot size

* lot size is defined as {{lot size = gcd( minimal_quantity, pow( floor( log_10( minimal_quantity ) ), 10 ) )}}, which means greatest common divisor of minimal quantity and the largest power of ten smaller than the minimal quantity  
* as such it is not directly a product parameter, but rather a consequence of other parameters
* is used also during routing and puts severe restrictions on the required capacity for partial match, as the transferred capacity must be a multiple of least common multiple of all lot size values across participating products
* we recommend fixing across all products


h1. API changes
* there are multiple unused (deprecated, forbidden) parameters in the API that should be removed since we touch the API anyway

h2. OrdrReq
* {{inclPreArranged}} - there are no prearranged orders in XBID

h2. OrdrExeRprt
* {{preArranged}} - there are no prearranged orders in XBID
* {{preArrangedAcct}} - there are no prearranged orders in XBID

h2. ModifyAllOrdrs
* {{inclPreArranged}} - there are no prearranged orders in XBID

h2. TradeCaptureRprt
* {{preArranged}} - there are no prearranged orders in XBID
* keep in mind there are multiple changes to {{TradeCaptureRprt}} discussed elsewhere (due to CPM)

h2. ProdInfoRprt
* {{otcProduct}} - OTC is not supported
* {{currency}} - not supported (cannot be changed)

h2. FullProdInfoRprt
* {{currency}} - not supported (cannot be changed)
* {{assetType}} - not supported (cannot be changed)
* {{CrossProductSpreadDescription}} - not suported by XBID (and will not be - leftover of a different incompatible implementation)
","24/Nov/20 19:14;radeale;Added to the Analysis, thanks.",,,,,,,,,,,,,,,,,,,,,,,,,,,,
CPM Analysis - Ramping,XP-3934,101293,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,radeale,radeale,08/Oct/20 13:56,04/Nov/20 10:33,22/Feb/21 13:21,04/Nov/20 10:33,,,Cross Product Matching ASR,,CMM,,,,,,,,Perform together impact analysis regarding Ramping - whether there si a decision need to be made by the customers and/or limitation accepted by them and the arguments for it.,,lt112,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,9590400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3930,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0btja:4",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 21,,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Nov/20 16:17;lt112;h1. Ramping

h2. What is ramping
Basically ramping constraint tells us the amount energy, by which we can increase/decrease flow in a certain inter-connector constrained by ramping. e.g. having inter-connector with capacity 10000, ramping 1000 and currently allocated flow at the time interval Q1 of 500 and at Q2 of 0, we can only transfer at most 1500 at the time interval Q2.

Ramping is used during available capacity computation - we limit the available capacity by the allocated quantity in the previous and the next time interval, using ramping as a maximal difference.

h3. Examples
Q1 10:00-10:15
Q2 10:15-10:30
Q3 10:30-10:45
capacity = 10000

h4. Example #1
* ramping = 1000
* allocated quantities
** Q1 - 2000
** Q2 - 1000
** Q3 -  500
* available capacities
** Q1 => +0/-2000
** Q2 => +500/-0
** Q3 => +1500/-500

h4. Example #2
* ramping = 2000
* allocated quantities
** Q1 - 9500
** Q2 - 8500
** Q3 - 9500
* available capacities
** Q1 => +500/-3000
** Q2 => +1500/-1000
** Q3 => +500/-3000

h2. How does CPM work
CPM introduces multiple different paths per single cross-product trade. This means searching for different paths from different delivery areas over different time intervals.

h2. Why is that an issue

h3. Parallelism
By its nature, ramping causes neighboring time intervals to be co-dependent, meaning a change in Q1 influences properties of Q2 and vice-versa. Such dependence prevents us from computing (searching for paths) in parallel, as existence of independent tasks is one of the basic preconditions for effective parallelism.

h3. Solution correctness
Let's start with an example. Consider the following setup:
* capacity for all: 10000
* ramping for DA1-DA3: 1000
* ramping for DA1-DA2, DA2-DA3: unlimited
* inter-connectors with preexisting allocations:
** DA1-DA2 - Q1->0, Q2->10000
** DA1-DA3 - Q1->0, Q2->1000
** DA3-DA2 - Q1->0, Q2->0

Let's put in the following orders:
* O1 10:00-10:30 B1000@10 to DA2
* O2 Q1 S1000@10 to DA1
* O3 Q2 S1000@10 to DA1

Now let's try to match the orders. First we attempt to find a path between DA1 and DA2 in Q1. The shortest path is found using only DA1-DA2 inter-connector. But when trying to find a path in Q2, we encounter the following issue:
* DA1-DA2 has no remaining available capacity
* DA1-DA3 is limited by ramping and because of that the flow cannot be increased to 2000

But imagine that we used DA1-DA3, DA3-DA2 path already in Q1 - then the trade would be feasible.

The computational requirements of such solution are not feasible for the xbid solution for performance reasons (NP-complete task), thus the algorithm cannot guarantee the best possible matches at all times (as this scenario will be marked with ""no path available"").

h2. Conclusion

Searching for optimal solution including searching for optimal path based on ramping constraints is not feasible. The result may be false-negative (no match even though there is a certain corner-case configuration in which it would have happened), but will never be false-positive (creating match even though it is not possible).

There is no decision for the customer to make, he will merely be informed about this in the ASR.

There is however a possible performance optimization regarding parallelism. The following should be part of the ""Performance optimization options"" section of the ASR (as at the moment we do not know if such optimization is necessary).

h3. Performance optimization - parallelism
As the existence of a valid path for cross-product match consists of computation of several subsequent intervals, these intervals can be processed in parallel. The only obstacle is the co-dependent impact of ramping. Should we ignore this dependence temporarily, we might speed up path-search for potential trades consisting of several small (short) counter-orders. 

h4. Change description
Ramping is ignored during path-searching, all the paths are searched for independently in parallel. Once this is done, the partial results are checked against existing ramping constraints. Should the constraints be unfilled, the trade is marked as not feasible.

h4. Trade-off
The optimization might cause the algorithm to find more false-negative solutions, as there can be cases, where knowledge of the previous/following grid state can help determining the optimal valid path.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CPM SPM Impact Analysis ,XP-3933,101291,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,lt112,lt112,08/Oct/20 13:54,22/Oct/20 10:33,22/Feb/21 13:21,12/Oct/20 12:42,,,Cross Product Matching ASR,,Shipping,,,,,,,,"Perform together with [~radeale] impact analysis regarding the SM
- Outbound files impact

",,ll664,lt112,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,10627200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3930,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0br8w:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 19 (S),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Oct/20 10:12;ll664;Shipping Module aggregates and reports traded quantities and flows in the form of XML files/JSON reports. There are two file categories - TSO files nad SA/CPP files. The former captures aggregated and netted view of the flows situation on particular IC/Area, while latter contain granular ""per-trade"" quantity and price data.

h3. TSO Files

No impact on the files. The data are aggregated and netted, hence does not contain any specifics of particular trade. TSO file perspective is completely oblivious to the way how trades are matched in the XBID.

h3. SA/CCP files, JSON Reports

Those contain details on the trade level. The analysis assumes that a Variant A (see decision in XP-3521) is implemented. TL;DR - any cross product match would form a new trades, those would be linked together by a concept of ""aggregate ID"".

Conceptually, there's no impact on SA/CCP files per se. The traded quantities are reported on Interconnector's delivery interval resolution level (SXS) or on 15-minute resolution level for DA based files (SHS, SHC). There would be the same attitude with CPM trades, no change.

h4. Trade Delivery Interval

Deliver Start and Delivery End of the whole trade is taken from XBID and used when calculating handovers for ""Intra Delivery Area"" trades. Hence, it requires that XBID sets the trade delivery interval to the ""shorter"" of matched contracts. This is only a case for Intra DA trades, because such a trade does not contain any trade flows. For a cross border trades, the delivery interval length is based on the delivery interval length of the actual trade flow as reported from XBID.

h5. Example:
Trade T is a match between contracts 12:00:13:00 and 12:30-12:45. The resulting delivery interval of T is 12:30-12:45.

JSON reports also show trade delivery interval, same logic applies there.

h4. Prices

SM calculates ""price amount"" (the value of {{<price.amount>}} element in SA/CPP files) on the reported delivery interval. The formula is:
 {noformat}
price * qty * report delivery interval length
{noformat}
 where _report delivery interval length_ is either:
* the delivery length of a particular flow
* the delivery interval of the whole trade 

No impact here, again, those variables are just taken ""as-is"" from XBID.

h2. Conclusions

No impact on Shipping, given we stick with trade model Variant A from XP-3521. 

The only thing that is not explicitly stated there, is that a CPM trade delivery interval is that of the ""shorter"" contract from matched. Which is rather logical.

However, we don't know what assumptions downstream systems make about the data SM provides, so customers should check their systems in the light of our proposal. The crucial thing here is the new Trade model and that the BUY/SELL contract lengths are not equal.","22/Oct/20 10:33;ll664;Analysis moved to wiki: https://github.deutsche-boerse.de/dev/xbid/wiki/CPM-Shipping-Module-Analysis",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CPM SOB Module Impact Analysis,XP-3932,101290,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,eh941,radeale,radeale,08/Oct/20 13:52,29/Oct/20 13:38,22/Feb/21 13:21,29/Oct/20 13:38,,,Cross Product Matching ASR,,Trading,,,,,,,,"Please perform together with [~radeale] an impact analysis regarding the CPM, namely, but not exclusive to:
 - API changes
 - Reports

Please beware for the following topics there are separate tasks:
 - Which parameters need to be fixed - XP-3935
 - Fixed products 15/30/60 - XP-3936

Related git:
https://github.deutsche-boerse.de/dev/xbid/wiki/CPM-trading-api-changes
https://github.deutsche-boerse.de/dev/xbid/wiki/CPM-other-open-issues",,eh941,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-4061,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,9936000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3930,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|000xro:000c09i8i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 20,,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Oct/20 13:57;radeale;Please note that there is also currently a discussion ongoing with the customers (within the analysis document), some of the points being:

4.2.6	 Virtual Orders – Common Characteristics

The specific parameters of VOs depend on the mutual agreement and wishes of the Parties. Below are current working assumptions. VOs will not be entered by a trading party, they are system generated orders much like cycles in the Losses solution. Matching a VO actually immediately creates trades of the regular and/UDB orders. Also there will be no order execution report created and distributed for VOs.  

Is it the idea to distinct those orders in ComTrader and the API order messages?
-	 Yes, by a specific OrderID and/or by introducing a new specific ordrType

Will these orders also get an OrderID?
-	 Current assumption they will get a technical OrderID (e.g. ""-3""), much like cycles in the Losses solution.  

Who will be the member of these order?
-	 No member will be associated with a VO

Who will be the user of these order?
-	 No user will be associated with a VO

Which balancing group will be used for this order?
-	 None

Can admin user control this order? Or will the same behaviour be used as for NEMO orders (so not able to modify in CT SOB)?
-	No control of VOs by admins","29/Oct/20 13:38;eh941;Analysis done:
 * [Trading API Changes|https://github.deutsche-boerse.de/dev/xbid/wiki/CPM-trading-api-changes]
 * [Report Changes|https://github.deutsche-boerse.de/dev/xbid/wiki/CPM-report-analysis]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CPM CMM Impact Analysis,XP-3931,101289,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,lt112,lt112,08/Oct/20 13:51,16/Oct/20 08:26,22/Feb/21 13:21,09/Oct/20 13:03,,,Cross Product Matching ASR,,CMM,,,,,,,,"Perform together with [~radeale] impact analysis regarding CMM
- API changes (Explicit Participant impact)
- IN/OUT files
- Reports
- RefData parameters impact?",,lt112,qo794,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,11750400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3930,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0br8g:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 19,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Oct/20 12:31;qo794;Since CMM does not operate with trades but only with allocations, there is not foreseen any impact on CMM with regards to Cross Product Matching from the customer's point of view at all.
","09/Oct/20 13:03;radeale;The results shall be included in the next version of the CPM analysis provided to the customers.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Analysis: sFTP logs provision for purpose of PMI Logs usage monitoring,XP-3848,100948,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,zi174,hj444,hj444,02/Oct/20 09:55,12/Jan/21 11:16,22/Feb/21 13:21,12/Jan/21 11:16,,,,,,,,,,TechOps,,,"Dear DBAG,

TWG FTF would like to request: 
 * Could DBAG share sFTP monitoring logs with the PXs?
 ** Monitoring logs should provide information sufficient to identify who and when downloaded/accessed the PMI logs files
 * If yes, how and by when the technical solution can be implemented?

Best regards

Jiri

 
h4. Draft (2020-11-26)
 * /var/log/xferlog [http://www.proftpd.org/docs/howto/Logging.html]
 * e.g. this one for a complete ""c"" transaction:

 
{quote}Wed Nov 25 09:05:02 2020 0 10.139.43.208 171523 /opt/data01/pmi_archiver/OUT/pmi/pmi5/20201123/SOBPMI_log_20201123T080000_0700-0800.log.gz b _ i r pmi_archiver sftp 0 * c
{quote} * *Jenkins Job with a bash script to copy logs to sFTP server which is daily triggered* (grep only needed information like pmi from xferlog)

 

 
 * {color:#505f79}in case of unsuccessful job, Jenkins email to slack channels ? like [https://englobjci1.deutsche-boerse.de/job/Energy-Operations/job/Selfhealing/, |https://englobjci1.deutsche-boerse.de/job/Energy-Operations/job/Selfhealing/] [https://github.deutsche-boerse.de/dev/energy.automation.deployments/blob/master/jenkins/selfhealing/Jenkinsfile_slave-slave#L46]){color}

 * open: file format .csv
 * open question: Can we have the xferlog synchronized regarding the data centers? (alternative: just provide two files - (?) merge then to on)

 * one central location to store these daily reports /opt/data01/ ? like pmi_archiver/
 * revocation of xferlogs in customer-accessible directory to only have logs available within one-year time period (one-year is techops proposal); archive logs files after one-year time period",,cs687,ei349,ek176,hj444,qm925,qo794,radeale,zi174,zs244,,,,,,,,,,,,,,,,,,,XBID-5273,,,,,,,,XP-4334,,M7ACM-1510,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,3542400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-4164,,,Impediment,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0by7c:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 19 (S),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Production,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Oct/20 10:17;hj444;It is a CR task. XBID jira assigned to Simona I'll put this into waiting.","20/Oct/20 14:01;ei349;We will come back to customers and ask them what type of events and in which details they would like to see requested information. 

Ideally in the way of User Story. ","22/Oct/20 13:42;qm925;Feedback from TWG FTF:

Dear DBAG,

TWG FTF 22/10 agreed:
 * TWG FTF would assume the provided information should contain information regarding:
 ** Timestamp, Username, Operation/Request on files, Success of the download/upload/change, Requestor IP address
 ** Note: reporting of sFTP server actions is applicable to the folders hosting the PMI Log files only.
 * Otherwise, if TWG FTF did not understand the DBAG's question properly, please provide us list of “events” which are available for reporting (are available in the sFTP server log).

Best regards

Jiri","22/Oct/20 13:47;ei349;(flag) Flag added

Customers came back. PO to take it for the next refinement.","27/Oct/20 13:06;ei349;This needs to be investigated first. ","27/Oct/20 13:09;ei349;Crucial questions for customers: 
 * how logs should be distributed? SFTP? 
 * how often they would like to see their logs? (one timer, daily, weekly, monthly, ad-hoc?)
 * what about confidential information?","13/Nov/20 16:17;ei349;{panel:title=Customer update in external ticket}
Dear Jiri, dear DBAG,

Let me to provide answers to your questions:
 * *Q1:* How Parties expect logs to be distributed? SFTP? GUI?
 ** *Answer:* Via SFTP
 * *Q2:* How often they would like to see the logs? (one time, daily, weekly, monthly, ad-hoc?)
 ** *Answer:* daily
 * *Q3:* What about confidential information? Should be there some levels of access rights to access the logs?
 ** *Answer:* All the NEMOs shall have free right to access anytime these files as this is intending to show equal treatment of the NEMOs.

Best regards

Jiri
{panel}","20/Nov/20 13:52;zi174;So, according to the information we know:

The customer would like to receive user's activity reports of downloading/accessing the PMI logs files
 * The reports need to be distributed via SFTP
 * The reports need to be created and uploaded to the SFTP on +daily basis+
 * **The reports need to be accessible for all NEMOs due to the equal treatment - i.e. every NEMO must have an access to the SFTP

""User's activity reports"" means that the provided reports need to contain:
 * username - i.e. who downloaded or accessed the PMI logs
 * operations/request on files - *not sure what it means, probably question to TO what we're able to provide (e.g. report download, accessing the logs, access to the PMI logs...)*
 * Success of the download/upload/change - *not sure what it means (TO to check), I guess it can inform the customer if the download action of the report was successful or not etc.* 
 * timestamp - when the action happened
 * Requestor IP address - username's IP Adresses

 

We need to discuss the unclear bullet points i.e. ""operations/requests"" and ""Success of the download/upload/change"" and provide our understanding to the customer to confirm that our understanding is correct. ","26/Nov/20 16:02;zi174;Dear Jirka Zavada,

let me share with you detail of the discussed change request. 

According to your requirements, we understand:
 * The reports need to be distributed via SFTP
 * The reports need to be created and uploaded to the SFTP on +daily basis+
 * The reports need to be accessible for all NEMOs due to the equal treatment

Based on your requirements mentioned above, we're proposing to provide a log file which will contain following data:
 * username - i.e. who downloaded/accessed the PMI logs
 * operations/request on files - detail if the report was downloaded or only accessed by the username mentioned above
 * Success of the download/upload/change - simple information if the operation/request mentioned above was successful or unsuccessful 
 * timestamp - when the action happened
 * Requestor IP address - username's IP Address

The reports will be generated on daily basis (i.e. each report will contain data from previous day) and will be stored on SFTP folder. This folder is accessible for all users which have the SFTP access. 

 

Might you please confirm that our understanding is correct and the proposed solution contains all necessary data you need? Once this proposal will be approved, we will provide an estimate and a final offer for that.

 

 ","27/Nov/20 12:28;cs687;Report could look like that in csv format: 


||username||operation||file||timestamp||IP-Address||success||
|xbid_svk_simu|OUT|SOBPMI_log_20201121T080000_0700-0800.log.gz|Mon Nov 23 09:05:01 2020|x.x.x.x PORT|c|
|xbid_svk_simu|IN|SOBPMI_log_20201121T080000_0700-0801.log.gz|Mon Nov 23 10:05:01 2020|x.x.x.x PORT|c|
|xbid_svk_simu|OUT|SOBPMI_log_20201121T080000_0700-0802.log.gz|Mon Nov 23 15:05:01 2020|x.x.x.x PORT|c|
|xbid_svk_simu|OUT|SOBPMI_log_20201121T080000_0700-0803.log.gz|Mon Nov 25 8:05:01 2020|x.x.x.x PORT|c|
","27/Nov/20 13:16;qm925;Hi [~zi174], I edited slightly your response. Please see below:

 

Dear Jirka Zavada,

let me share with you DBAG's proposal for the technical solution.

According to your requirements, we understand that:
 * The reports need to be distributed via SFTP
 * The reports need to be created and uploaded to the SFTP on a +daily basis+
 * The reports need to be accessible for all NEMOs in an equal way

Based on your requirements above, we propose to provide a log file which will contain the following data:
 * username - i.e. who downloaded/accessed the PMI logs
 * operations/request on files - detail if the report was downloaded or only accessed by the username mentioned above
 * Success of the download/upload/change - simple information if the operation/request mentioned above was successful or unsuccessful 
 * timestamp - when the action happened
 * Requestor IP address - username's IP Address

The reports will be generated on a daily basis (i.e. each report will contain data from the previous day) and will be stored on SFTP folder. This folder is accessible for all users which have an SFTP access. 

Could you please confirm if our understanding is correct and if the proposed technical solution provides all the necessary information you need? 

If the proposed technical solution is accepted by TWG FTF, DBAG will provide the NEMOs with a CR proposal.

 
*Internal note:* Maybe you can also mention how long these reports will be saved on the sftp before they are removed.","04/Dec/20 10:41;zi174;Dear Jakub, dear DBAG,

Thank you for your proposal.

TWG FTF 3/12 discussed the DBAG's feedback from 27/12 and would like to have few clarification questions:
 * Abbreviations in the Success field are: c-change d-download u-upload, correct?
 * What would be difference in cost if instead of customized sFTP server log information subset (as proposed above) just a plain sFTP server log would be provided?
 * What is the meaning the IN and OUT for the Operation field ? Values “download, upload, view, access” would be more explanatory.
 * What timezone are the timestamps in? UTC or CET? Is the DST shift reflected in them?

Best regards

Jiri","07/Dec/20 13:18;zi174;* Abbreviations in the Success field are: c-change d-download u-upload, correct? C - completed if the transaction was completed. D - deleted, U - download, I - upload
 * clear
 * we can replace it IN - upload, OUT - download
 * [~zs244] or [~cs687] please check if UTC or CET

 ","07/Dec/20 13:37;zs244;[~zi174], please use the table in [http://www.proftpd.org/docs/howto/Logging.html] as reference. There could be misunderstandings like ""i"" meaning incoming or incomplete depending on the context.
|_direction_| Flags| Direction of the transfer: ""o"" (outgoing, _i.e._ download), ""i"" (incoming, _i.e._ upload), ""d"" (deleted)|
|_completion-status_| Flags| Single character indicating the status of the transfer: ""c"" (complete), ""i"" (incomplete)|

(Further, the ""success field"" is either ""c"" for completed or ""i"" for incompleted.)

 

Regarding the *timestamps*:

I found no explicit setting for the time in the ProFTPd service. So, the xferlogs seems to be in the system-wide time which is CET in XBID simulation environment (if my analysis is correct). I guess we always give everything in CET then - but I will ask this Peter to get the context.","07/Dec/20 14:18;zs244;To answer the timestamp question: It is in CET and we should go for CET.

 

To see the behavior during the last DST change: DST ended at Sun 2020-10-25 02:59:59 CEST is
 Sun 2020-10-25 02:00:00 CET:
{quote}Sun Oct 25 02:33:03 2020 0 10.136.152.222 5141 /opt/data01/xbid_elering_simu/OUT/cmi/20201025_ATC_EE-FI_107.xml b _ d r xbid_elering_simu sftp 0 * c
Sun Oct 25 02:33:04 2020 0 10.136.152.222 5355 /opt/data01/xbid_elering_simu/OUT/cmi/20201025_NSF_EE-FI_112.xml b _ o r xbid_elering_simu sftp 0 * c
Sun Oct 25 02:33:04 2020 0 10.136.152.222 5355 /opt/data01/xbid_elering_simu/OUT/cmi/20201025_NSF_EE-FI_112.xml b _ d r xbid_elering_simu sftp 0 * c
Sun Oct 25 02:01:26 2020 0 10.136.152.222 5193 /opt/data01/xbid_tennetde_simu/OUT/cmi/20201025_ATC_TTG-DK1_013.xml b _ o r xbid_tennetde_simu sftp 0 * c
Sun Oct 25 02:01:26 2020 0 10.136.152.222 5193 /opt/data01/xbid_tennetde_simu/OUT/cmi/20201025_ATC_TTG-DK1_013.xml b _ d r xbid_tennetde_simu sftp 0 * c
Sun Oct 25 02:01:26 2020 0 10.136.152.222 2298 /opt/data01/xbid_tennetde_simu/OUT/cmi/20201025_OCC_DE-DK1_IMPL_049.xml b _ o r xbid_tennetde_simu sftp 0 * c
Sun Oct 25 02:01:26 2020 0 10.136.152.222 2298 /opt/data01/xbid_tennetde_simu/OUT/cmi/20201025_OCC_DE-DK1_IMPL_049.xml b _ d r xbid_tennetde_simu sftp 0 * c
Sun Oct 25 02:05:03 2020 0 10.136.152.222 5352 /opt/data01/xbid_ree_simu/OUT/cmi/20201025_NSF-I_RTE-ES_012.xml b _ o r xbid_ree_simu sftp 0 * c
Sun Oct 25 02:05:03 2020 0 10.136.152.222 5352 /opt/data01/xbid_ree_simu/OUT/cmi/20201025_NSF_ES-PT_012.xml b _ o r xbid_ree_simu sftp 0 * c
Sun Oct 25 02:05:06 2020 0 10.136.152.222 5352 /opt/data01/xbid_ree_simu/OUT/cmi/20201025_NSF-I_RTE-ES_012.xml b _ d r xbid_ree_simu sftp 0 * c
Sun Oct 25 02:05:10 2020 0 10.136.152.222 5352 /opt/data01/xbid_ree_simu/OUT/cmi/20201025_NSF_ES-PT_012.xml b _ d r xbid_ree_simu sftp 0 * c
Sun Oct 25 02:15:03 2020 0 10.136.152.222 5141 /opt/data01/xbid_elering_simu/OUT/cmi/20201025_ATC_EE-FI_110.xml b _ o r xbid_elering_simu sftp 0 * c
Sun Oct 25 02:15:03 2020 0 10.136.152.222 5141 /opt/data01/xbid_elering_simu/OUT/cmi/20201025_ATC_EE-FI_110.xml b _ d r xbid_elering_simu sftp 0 * c
Sun Oct 25 02:15:03 2020 0 10.136.152.222 5355 /opt/data01/xbid_elering_simu/OUT/cmi/20201025_NSF_EE-FI_115.xml b _ o r xbid_elering_simu sftp 0 * c
Sun Oct 25 02:15:03 2020 0 10.136.152.222 5355 /opt/data01/xbid_elering_simu/OUT/cmi/20201025_NSF_EE-FI_115.xml b _ d r xbid_elering_simu sftp 0 * c
Sun Oct 25 02:15:03 2020 0 10.136.152.222 4915 /opt/data01/xbid_elering_simu/OUT/cmi/20201026_ATC_EE-FI_014.xml b _ o r xbid_elering_simu sftp 0 * c
Sun Oct 25 02:15:04 2020 0 10.136.152.222 4915 /opt/data01/xbid_elering_simu/OUT/cmi/20201026_ATC_EE-FI_014.xml b _ d r xbid_elering_simu sftp 0 * c
Sun Oct 25 02:15:04 2020 0 10.136.152.222 5224 /opt/data01/xbid_elering_simu/OUT/cmi/20201026_NSF_EE-FI_014.xml b _ o r xbid_elering_simu sftp 0 * c
Sun Oct 25 02:15:04 2020 0 10.136.152.222 5224 /opt/data01/xbid_elering_simu/OUT/cmi/20201026_NSF_EE-FI_014.xml b _ d r xbid_elering_simu sftp 0 * c
Sun Oct 25 02:32:25 2020 0 10.136.152.222 5193 /opt/data01/xbid_tennetde_simu/OUT/cmi/20201025_ATC_TTG-DK1_015.xml b _ o r xbid_tennetde_simu sftp 0 * c
Sun Oct 25 02:32:25 2020 0 10.136.152.222 5193 /opt/data01/xbid_tennetde_simu/OUT/cmi/20201025_ATC_TTG-DK1_015.xml b _ d r xbid_tennetde_simu sftp 0 * c
Sun Oct 25 02:32:25 2020 0 10.136.152.222 2298 /opt/data01/xbid_tennetde_simu/OUT/cmi/20201025_OCC_DE-DK1_IMPL_051.xml b _ o r xbid_tennetde_simu sftp 0 * c
Sun Oct 25 02:32:25 2020 0 10.136.152.222 2298 /opt/data01/xbid_tennetde_simu/OUT/cmi/20201025_OCC_DE-DK1_IMPL_051.xml b _ d r xbid_tennetde_simu sftp 0 * c
Sun Oct 25 02:48:29 2020 0 10.136.152.222 5193 /opt/data01/xbid_tennetde_simu/OUT/cmi/20201025_ATC_TTG-DK1_016.xml b _ o r xbid_tennetde_simu sftp 0 * c
Sun Oct 25 02:48:30 2020 0 10.136.152.222 5193 /opt/data01/xbid_tennetde_simu/OUT/cmi/20201025_ATC_TTG-DK1_016.xml b _ d r xbid_tennetde_simu sftp 0 * c
Sun Oct 25 02:48:30 2020 0 10.136.152.222 2298 /opt/data01/xbid_tennetde_simu/OUT/cmi/20201025_OCC_DE-DK1_IMPL_052.xml b _ o r xbid_tennetde_simu sftp 0 * c
Sun Oct 25 02:48:30 2020 0 10.136.152.222 2298 /opt/data01/xbid_tennetde_simu/OUT/cmi/20201025_OCC_DE-DK1_IMPL_052.xml b _ d r xbid_tennetde_simu sftp 0 * c
Sun Oct 25 03:02:35 2020 0 10.136.152.222 5193 /opt/data01/xbid_tennetde_simu/OUT/cmi/20201025_ATC_TTG-DK1_017.xml b _ o r xbid_tennetde_simu sftp 0 * c
Sun Oct 25 03:02:35 2020 0 10.136.152.222 5193 /opt/data01/xbid_tennetde_simu/OUT/cmi/20201025_ATC_TTG-DK1_017.xml b _ d r xbid_tennetde_simu sftp 0 * c
Sun Oct 25 03:02:36 2020 0 10.136.152.222 2298 /opt/data01/xbid_tennetde_simu/OUT/cmi/20201025_OCC_DE-DK1_IMPL_053.xml b _ o r xbid_tennetde_simu sftp 0 * c
Sun Oct 25 03:02:36 2020 0 10.136.152.222 2298 /opt/data01/xbid_tennetde_simu/OUT/cmi/20201025_OCC_DE-DK1_IMPL_053.xml b _ d r xbid_tennetde_simu sftp 0 * c
{quote}","07/Dec/20 14:48;zi174;Dear Jiri,

we're coming back to you with our answers:

 
 * Abbreviations in the Success field are: c-change d-download u-upload, correct? 
 ** {color:#4c9aff}Actually, c = complete and i = incomplete. Basically, we would propose to modify this column and provide information if the action was ""complete"" or ""incomplete"" (if we follow CSV format) {color}
 * What would be difference in cost if instead of customized sFTP server log information subset (as proposed above) just a plain sFTP server log would be provided?
 ** {color:#4c9aff}Our preliminary analysis determined that the difference in the price between the two options will be minimal. However, more accurate information could be provided once the final technical solution is agreed. {color}{color:#4c9aff}The plain SFTP server log needs to be modified before providing as it includes internal information which need to be removed. Thus, we cannot just simply copy-paste the logs.{color}
 * What is the meaning the IN and OUT for the Operation field ? Values “download, upload, view, access” would be more explanatory.
 ** {color:#4c9aff}If we follow a solution with CSV file, we can replace the values. It means that we can provide more clear values like ""Download"", ""Upload"" or ""Delete"". Basically these three mentioned operations are possible to do with the PMI log on the SFTP. In a nutshell, if you want to do some action with the PMI log, you need to download it to your computer. You cannot open it directly on SFTP. Thus, we're not able provide information if the PMI log was accessed or viewed as these actions are done on his/her computer not on SFTP.{color}
 * What timezone are the timestamps in? UTC or CET? Is the DST shift reflected in them?
 ** {color:#4c9aff}The report will be provided in CET. The DST will affect it with doubling the values for range 02-03 (as in 1 hour time range, we'll have 2 hours in reality) and with no values for range 02-03 (as this hour is skipped when the time is moved to forward) {color}","11/Dec/20 13:01;qm925;Dear Jakub, dear DBAG,

TWG FTF discussed the answers provided and accepted them as a way forward. One small comment: the textual captions in the columns operation and success to be treated consistently, what regards the capital letter at the start (no preference if with big or small). 

Additional question:
 * DBAG to provide information (in specification is enough) for how long the reports will be persisted and available on sFTP server for download.

Best regards

Jiri

 ","11/Dec/20 13:53;zs244;A @monthly copy to a backup system and remove of all report files from the source would be simpler than a regular check if files are older than 1 year.","12/Jan/21 11:16;zi174;Ticket is closed - the outcome is described in XP-4334",,,,,,,,,,,,,
CPM - performance analysis,XP-3837,100900,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,eh941,lt112,lt112,01/Oct/20 15:34,11/Nov/20 13:41,22/Feb/21 13:21,11/Nov/20 12:50,,,Cross Product Matching ASR,,,,,,,,,,"Analyse performance impact of the cross-product solution
- matching
- order-book
- auction
- persister?

Provide both estimate (e.g. 10 times slower for the given data) and reasoning, assume data as defined in the SLA agreement (ratios per product etc.)",,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-4119,,,,,,XP-4122,XP-4100,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,12355200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3930,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|000y0l:so",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 21 (S),,,,,,,,,,,,,,,,4.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Decide used strategy for ramping, alter xbid to use it",XP-3829,100836,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,eh941,eh941,eh941,30/Sep/20 13:59,06/Nov/20 09:07,22/Feb/21 13:21,09/Oct/20 12:35,,,Cross Product Matching ASR,,,,,,,,,,"There are several options for ramping solving. Discuss with the team, pick one and change xbid to use it. ",,eh941,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,11750400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-4086,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|000y0k:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 19 (S),,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,cpm,XP-3829-routing-integration,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Oct/20 12:38;eh941;After some discussion ramping is implemented in following way:
* Ramping check is done continuously only against the previous delivery interval
* Routing is done from the first transport interval to the last
* As resolution (granularity for routing) the whole transport intervals are taken. Meaning that in case of 2 half hours orders matching against 1 hour order there are resolutions of 30 minutes used.
* 
For more information about the ways how to deal with ramping see XP-3594",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(split 2) Cross-Product Matching - OrderBook,XP-3826,100829,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,lt112,lt112,30/Sep/20 12:21,14/Oct/20 12:36,22/Feb/21 13:21,14/Oct/20 12:36,,,Cross Product Matching ASR,,,,,,,,,,"Introduce support for cross-product matching to order-book

Find some inspiration here https://github.deutsche-boerse.de/dev/xbid/issues/745 - just an idea/draft, not to be followed strictly

NOTES:
* Price calculation is still being discussed. Use weighted average price option, encapsulate for easy change.
* Do not include block orders yet",,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3969,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,12528000,,,,,,,,,,XP-3429,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000xro:000c0fw",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 19,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(split 4) Cross-Product Matching - Benchmark,XP-3825,100828,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,lt112,lt112,30/Sep/20 12:20,06/Nov/20 08:59,22/Feb/21 13:21,14/Oct/20 12:37,,,Cross Product Matching ASR,,,,,,,,,,"Analyze benchmarking options for matcher/auction/orderbook. Implement.

See losses benchmark: https://github.deutsche-boerse.de/dev/xbid.routing-benchmark",,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3970,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,12528000,,,,,,,,,,XP-3426,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000xro:000c0fy",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 19,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 1) Cross-Product Matching - Auction - Initial Kickoff,XP-3823,100824,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,uv683,lt112,uv683,30/Sep/20 11:28,13/Oct/20 12:45,22/Feb/21 13:21,13/Oct/20 12:45,,,Cross Product Matching ASR,,,,,,,,,,"Introduce support for cross-product matching to auction

Find some inspiration here https://github.deutsche-boerse.de/dev/xbid/issues/745 - just an idea/draft, not to be followed strictly

NOTES:
* Price calculation is still being discussed. Use weighted average price option, encapsulate for easy change.
* Do not include block orders yet",,uv683,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,12528000,,,,,,,,,,XP-3428,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y0c:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 19 (S),,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AM reports daily generation - backup,XP-3785,100592,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,ll664,qo794,qo794,24/Sep/20 10:44,30/Sep/20 11:34,22/Feb/21 13:21,29/Sep/20 09:10,,,3.1.2,,,,,,,,,,AM Indicator report tool: it would be great to move daily generated reports to a backup folder instead of deleting them in case there are some issues with copying them into an SFTP server or other issues and we need to investigate something or re-upload them.,,qo794,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,13046400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|000xro:000c06",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 18,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,Simulation,,,SIMU,develop,XP-3785,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 1) CPM Matcher - add bottom-up matching,XP-3598,100145,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,qo794,lt112,qo794,16/Sep/20 13:04,16/Sep/20 13:04,22/Feb/21 13:21,16/Sep/20 13:04,,,Cross Product Matching ASR,,,,,,,,,,"Currently matcher only supports matching top-down (trying to find suitable orders in subcontracts)
- implement bottom-up as well (searching through larger contracts and trying to find a complement)

Example:
OBK:
S100@100 0-60
B50@120 0-30

aggressor order B100@110 30-60 should cause trades:
50@110 0-30 (both orders already in OBK, matching in the middle)
50@100 30-60 (initiator price)
",,qo794,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13737600,,,,,,,,,,XP-3426,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0bgjz:9",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 17,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(split 3) Cross-Product Matching - Benchmark,XP-3596,100142,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,lt112,lt112,16/Sep/20 12:25,06/Nov/20 09:00,22/Feb/21 13:21,30/Sep/20 13:52,,,Cross Product Matching ASR,,,,,,,,,,"Analyze benchmarking options for matcher/auction/orderbook. Implement.

See losses benchmark: https://github.deutsche-boerse.de/dev/xbid.routing-benchmark",,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3825,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13737600,,,,,,,,,,XP-3426,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0ben3:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 18 (S),,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CPM - ramping implementation,XP-3594,100137,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,eh941,eh941,eh941,16/Sep/20 11:49,06/Nov/20 09:07,22/Feb/21 13:21,30/Sep/20 12:58,,,Cross Product Matching ASR,,,,,,,,,,Based on conclusions in XP-3520 decide which way to go. Adopt current solution to work with ramping properly.,,eh941,ek176,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3829,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,12528000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-4086,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|000xro:000c04y",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 18,,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,cpm,XP-4527,acceptance,master-cpm,CPM-release-settings,XP-3594-allocation-plans,develop,XP-3594-cpm-ramping,master-acceptance,master,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Sep/20 13:51;eh941;h1. Ramping in CPM

The PoC is prepared here - [https://github.deutsche-boerse.de/dev/xbid.graphx/pull/14]

There are several options how to deal with the ramping. Each of them have *certain situations in which they can lead to finding an ideal path and situation in which they fail*.
h2. Interface change for CPM

It's required to change the interface for {{routeFlow()}} method call. There must be always all intervals with source/destination passed as collection. In my PoC it's resolved as following:
{code:java}
router.routeFlowFromEdgesWithBothSideRampingCheck(
            // each interval is defined separately
            Lists.list(
                    new TransportInterval(""CZ"", ""AU"", start, start.plusMinutes(30)),
                    new TransportInterval(""PL"", ""AU"", start.plusMinutes(30), start.plusMinutes(45)),
                    new TransportInterval(""CZ"", ""AU"", start.plusMinutes(45), start.plusMinutes(60))
            ),
            // min, max quantity
            0, 600
    );
{code}
No matter what strategy we'll choose I believe *we must do such change for it*. The reason is the quantity checking. Imagine for the example above that you would call 3 times {{routeFlow()}} method. What would happen if the last call returned only 400 flow?
h2. Ramping Dealing

I identified *3 separate aspects* that affect the ramping result. The both of them aren't really connected to the CPM - they can be used even for the _classic_ matching.
 * *Delivery Interval Ordering*
 * *Ramping checking*
 * *Delivery interval granularity*

The ramping is very difficult to handle because of situations in which the ramping is violated for some of the delivery intervals handled separately but when applied the whole routing the ramping is fine.
h3. Example (used in all options)

Imagine situation we have inter-connector CZ-AU with ramping 600.
||Delivery interval||Allocations CZ->AU||
|12:45-13:00|600|
|13:00-13:15|600|
|13:15-13:30|0|
|13:30-13:45|0|
|13:45-14:00|0|

This initial setup is completely valid. There is no delta between allocations in time greater than 600.

But what if we wanted to allocate an hour 13:00-14:00. If we applied the allocation to the delivery interval 13:00-13:15 it would violate the ramping constraint because there would be delta against 13:15-13:30 1200. But if we apply the whole hour the ramping constraint would be fulfilled.
h3. Ramping checking

The result is determined a lot by the way how the ramping is checked. I identified 3 ways:

1. *Ramping check for each delivery interval from the both sides* - with example above - from last to first strategy with atomic intervals - it would mean that each of the delivery interval would be taken separately and ramping would be checked against the previous and the next delivery interval. Taking the last interval to first it would lead to capacity transfer.
 2. *Ramping check for each delivery interval from one side only* - with example above - from edges strategy with atomic intervals - it would take the 13:00-13:15 first, it would check the ramping against 12:45-13:00 with result OK. Then 13:45-14:00 with ramping check 14:00-14:15 with result OK. When the intervals are all routed the final check is performed. If there is ramping constraint violated in the end - flow 0 is returned (see Ramping Violated Problem bellow). This exact algorithm is currently used for the block contracts.
 3. *No continuous ramping check* - check is done only in the end. There is a *potential to use multithreaded computation* (the delivery interval path finding is independent on all other intervals). There is also Ramping Violated Problem.
h4. Ramping violated problem

When the checks for the ramping aren't done continuously there might be a problem in the end that the ramping is violated. Currently there is the most strict solution - it will return 0 flow and that's it. There might be an options how to optimize it - either disable all used ramping inter-connectors or maybe even all ramping inter-connectors.
h3. Delivery Interval Ordering

Imagine you want to route multiple delivery intervals. In which order they should be taken? I found 3 options:

1. *From first to last* - with Ramping check for each delivery interval from the both sides - it might lead to 0 capacity flow because the interval 13:00-13:15 violates the ramping with 13:15-13:30
 2. *From last to first*
 3. *From edges to the middle* - the path finding starts on the edge delivery intervals. For the example, the order would be - 13:00-13:15, 13:45-14:00, 13:15:13:30, 13:30-13:45. This ordering is used for block contract routing in current solution.
h3. Delivery interval granularity

Current solution contains 2 ways how to find ideal path for longer period than the resolution.

1. Atomic intervals - it uses the smallest resolution (usually 15 minutes) and tries to find the ideal path for each delivery interval independently. Meaning that one delivery interval might have completely different paths than the other.
 2. Interval concatenate - it tries to find the ideal path for all delivery intervals. There might be multiple paths but all intervals must have the same ones. There is a potential for more better performance (it isn't proven though)
h2. Implemented combinations

The options mentioned above might be all combined together but there are just a few implemented.

1. {{Router::routeFlowFromEdgesWithBothSideRampingCheck}} - Ramping check for each delivery interval from the both sides + From edges to the middle + Atomic intervals
 2. {{Router::routeFlowFromEdgesWithOneSideRampingCheck}} - Ramping check for each delivery interval from one side only + From edges to the middle + Atomic intervals
 3. {{Router::routeFlowSequentiallyWithBothSideRampingCheck}} - Ramping check for each delivery interval from the both sides + From first to last + Atomic intervals
 3. {{Router::routeFlowSequentiallyWithNoContinuousRampingCheck}} - No continuous ramping check* + From first to last + Atomic intervals",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AM Indicator - Net Position,XP-3574,100007,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,od044,zi174,zi174,14/Sep/20 12:12,30/Sep/20 11:34,22/Feb/21 13:21,24/Sep/20 13:27,,,3.1.2,,,,,,,,,,"According to discussion with the customer, the Net position indicator needs to be modified.

 
 * Delivery start time should be actually “*delivery start date time*” in the format aligned with format used in ATC Utilization ratio indicator
 * UDB needs to be transformed to base product for UDB (i.e. regular product used to create UDB) -> this means the time resolution which can appear for given date, timeslot and area EIC code will be 15, 30 and 60 min (i.e. we have 3 hours block (15-17) with volume 1000 MW - export. The reported values needs to be split per 60mins time resolution - see the table)

Table:
|*area_id*|*delivery_start_date_time*|*time_resolution*|*imported_volume*|*exported_volume*|*netted_volume*|
|10Y1001A1001A48H|2020-04-22T15:00:00Z|60|0|1000|-1000|
|10Y1001A1001A48H|2020-04-22T16:00:00Z|60|0|1000|-1000|
|10Y1001A1001A48H|2020-04-22T17:00:00Z|60|0|1000|-1000|
| | | | | | |

 

Final report example:
|*area_id*|*delivery_start_date_time*|*time_resolution*|*imported_volume*|*exported_volume*|*netted_volume*|
|10Y1001A1001A48H|2020-04-22T15:00:00Z|60|3100|2700|400|
|15Y1001A1001A45H|2020-04-22T15:30:00Z|15|200|600|-400|
|10Y1001A1001A48H|2020-04-24T12:30:00Z|30|5400|5400|0|
|10Y1001A1001A48H|2020-04-24T15:45:00Z|15|3000|1800|1200|",,od044,qo794,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Sep/20 13:22;od044;2018-02_NET_POSITION_2020-09-23-163824.csv;https://jira.deutsche-boerse.com/secure/attachment/87909/2018-02_NET_POSITION_2020-09-23-163824.csv","24/Sep/20 13:22;od044;Trades.xlsx;https://jira.deutsche-boerse.com/secure/attachment/87910/Trades.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,13046400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0bjp0:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 18 (S),,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3790,develop,XP-3785,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Sep/20 15:22;qo794;Implemented:
* added delivery_start_date_time column
* block trades divided into their canonical contracts","24/Sep/20 13:22;od044;Test passed on docker with app version 1.0.3-Snapshot 

- column delivery_start_date_time (/)
- block trades are correctly divided into canonical contracts, that mean if block trade was made from half-hourly resp, quarterly contacts then it was divided into 30min resp. 15 min contracts
- import, export, netted volume are correctly calculated 
- cancel and recall granted trades are not include into calculation 

Test scenario: XP-3602

Test data: 
 [^Trades.xlsx] 

Report:
 [^2018-02_NET_POSITION_2020-09-23-163824.csv] 
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"AM Indicator - SFTP ""AM"" folder visible for standard ",XP-3546,99753,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,iv732,zi174,zi174,08/Sep/20 10:12,30/Sep/20 11:34,22/Feb/21 13:21,22/Sep/20 16:39,,,3.1.2,,,,,,,,,,"Can you please check the SFTP, why the customer's users see a folder ""AM"" on the SFTP on SIMU?
 
The folder for AM indicators shall be visible only for a newly created user which will be shared within the parties, so their standard users shall not have access to this folder as well as the folder should not be visible for the standard users",,iv732,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,13132800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0bi60:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Sep/20 14:28;iv732;Not sure why I have both this ticket and the XP-3544? Can we close one of them?

I just copy my comment from that ticket to here:
{code:java}
Our current settings create the following sub directories for EVERY USER:sftp_directory_skel:      
  - IN/cmi
  - IN/smi
  - OUT/cmi
  - OUT/smi
  - OUT/pmi
  - OUT/am
Solution:we can create different directory skel for each user, depending on if he should read  AM report or not. That requires a change in our inventory, vault and setup playbook. will take time
{code}","22/Sep/20 16:39;zi174;Yes, we can close this ticket, please continue in XP-3544",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(split 2) Cross-Product Matching - Benchmark,XP-3523,99554,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,lt112,lt112,02/Sep/20 11:30,06/Nov/20 09:00,22/Feb/21 13:21,16/Sep/20 12:25,,,Cross Product Matching ASR,,,,,,,,,,"Analyze benchmarking options for matcher/auction/orderbook. Implement.

See losses benchmark: https://github.deutsche-boerse.de/dev/xbid.routing-benchmark",,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3596,,,,,,,,,,,,,"16/Sep/20 09:26;lt112;benchmark_run.log;https://jira.deutsche-boerse.com/secure/attachment/87609/benchmark_run.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13737600,,,,,,,,,,XP-3426,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0ben2:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 17,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Sep/20 11:30;lt112;https://github.deutsche-boerse.de/dev/xbid/pull/782","16/Sep/20 09:26;lt112;Sometimes the following gets thrown
{noformat}
java.util.ConcurrentModificationException: null
        at net.openhft.koloboke.collect.impl.hash.MutableLHashSeparateKVLongObjMapGO$NoRemovedValueIterator.forEachRemaining(MutableLHashSeparateKVLongObjMapGO.java:3339) ~[koloboke-impl-jdk8-0.6.6.jar:na]
        at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801) ~[na:1.8.0_252]
        at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482) ~[na:1.8.0_252]
        at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472) ~[na:1.8.0_252]
        at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708) ~[na:1.8.0_252]
        at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:1.8.0_252]
        at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566) ~[na:1.8.0_252]
        at com.deutscheboerse.energy.m7.trade.TradePoolImpl.filterByModificationType(TradePoolImpl.java:97) ~[classes/:na]
        at com.deutscheboerse.energy.m7.trade.RecallHandlingService.maintain(RecallHandlingService.java:49) ~[classes/:na]
        at com.deutscheboerse.energy.m7.core.in.req.MaintainRecallsTask.process(MaintainRecallsTask.java:25) ~[classes/:na]
        at com.deutscheboerse.energy.m7.core.in.req.MaintainRecallsTask.process(MaintainRecallsTask.java:13) ~[classes/:na]
        at com.deutscheboerse.energy.m7.core.RequestProcessor.onEvent(RequestProcessor.java:49) ~[classes/:na]
        at com.deutscheboerse.energy.m7.core.RequestProcessor.onEvent(RequestProcessor.java:27) ~[classes/:na]
        at com.deutscheboerse.energy.m7.core.CoreService.doOnEvent(CoreService.java:89) ~[classes/:na]
        at com.deutscheboerse.energy.m7.core.CoreService.doOnEvent(CoreService.java:36) ~[classes/:na]
        at com.deutscheboerse.energy.m7.core.AbstractEventHandler.onEvent(AbstractEventHandler.java:75) ~[classes/:na]
        at com.deutscheboerse.energy.m7.core.AbstractEventHandler.onEvent(AbstractEventHandler.java:32) ~[classes/:na]
        at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:128) ~[disruptor-3.3.2.jar:na]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_252]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_252]
        at java.lang.Thread.run(Thread.java:748) [na:1.8.0_252]
{noformat}","16/Sep/20 12:25;lt112;Issue split into:
|XP-3596|(split 3) Cross-Product Matching - Benchmark|
","16/Sep/20 13:00;lt112;First result:
{noformat}
Benchmark                   (cpmEnabled)                                                                                         (scenarioFile)  Mode  Cnt     Score     Error  Units
MatcherBenchmark.addOrders          true  /home/lt112/Documents/Projects/xbid/m7-core/src/main/resources/cpm/benchmark/scenario_1500_orders.csv  avgt   10  1174.095 ± 160.401  ms/op
MatcherBenchmark.addOrders         false  /home/lt112/Documents/Projects/xbid/m7-core/src/main/resources/cpm/benchmark/scenario_1500_orders.csv  avgt   10   402.403 ±  54.776  ms/op
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,
CPM Matcher - Entities analysis,XP-3521,99551,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,jy268,lt112,lt112,02/Sep/20 10:23,16/Sep/20 11:35,22/Feb/21 13:21,14/Sep/20 15:29,,,Cross Product Matching ASR,,,,,,,,,,"*Sit together in broader audience and brainstorm (e.g. consider impact on SPM and RE)*

Design entities reflecting CPM features
 - multiple orders can create trades over multiple contracts against a single aggressor
 - etc.

Create follow up tickets based on brainstorming and initial analysis output. ",,jy268,lt112,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3441,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,13737600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3426,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0bgjz:i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 17,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Sep/20 12:21;jy268;h2. Trades / Orders usage in SPM / RE applications

h3. SPM
In general SPM is not using orders in any way, the only thing which is important for SPM are *trades* and *trade flows* . What is more SPM is using trade ids from Core in following areas:
* SMI - reports functionality, lookup via trade id. Report display handovers (according to flows) in particular trade(s)
* Internal memory indexes for files generation use trade id for aggregation (SynchronizationPackageCache)
* Shc, Shs, Sxs files contain trade id coming from CORE

h3. RE
Reporting engine uses trade id in following reports:
* TC810
* TC830

h2. Possible solutions


||Variant||Description||Pros||Cons||What has to be done||
|A|CPM trade creates multiple Trades (1:1)|- Current mechanisms in core can be used
- Trade will have trade flows pointing from one source to one sink
- Model does not need to be changed, still Trade has one buy and one sell order|- Created trades have to be linked together by additional identifier
- Sell and buy order will have contracts with different period in minutes (is it a problem?) {color:red}according to our brainstorming, in current solution this is completely fine, no validation.{color}
- -We will broadcast that one order will be matched multiple times- {color:red}it is fine, we are doing it right now in case of partial matching{color}
- -Trades will have to be recalled one by one then- {color:red}trades can be recalled using aggregating id{color}|- create mechanism aggregating sub trades, for example additional identifier used for CPM trades.
|B|Trade contains multiple Orders [1-N] relation|- Intuitive
- sub orders are aggregated automatically by Trade entity|- Enrichment process in SM has to be redesigned
- Multiple source/sink areas in trade flows|- sellOrderId and tradeOrderId FK have to be moved from Trade to new table to keep N-M relation. In other words, FK has to be in intermediary table side.
- fields like buyClientOrderId, buyOrderText, buyOrderBalancingGroup, buyOrderTso and corresponding sell ones have to be moved to intermediary table.
- HalfTrade entity has to be reworked to adapt above changes|

h2. Questions
* Is it possible that one order will be present in multiple trades? What about customers and their approach, is it feasible from their perspective? {color:red}Yes it is completely fine, currently it happens during partial matching. One order can be found in multiple trades if its quantity is not depleted by a single opposite order.{color}
* Do you see any potential problem with Trade having matched Orders with different periods? {color:red}During brainstorming we have decided that this behavior is fine from COR perspective. There is neither validation nor expected problems{color}
* What about recall, which variant is better from this perspective? {color:red}During brainstorming we have decided that both variants have the same level of complexity in terms of recall{color}","14/Sep/20 15:29;jy268;h1. Team chose variant {color:red}A{color}","16/Sep/20 11:35;radeale;It greatly pleases me that the variant A has been chosen as that it something offered to the customers :-)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CPM Matcher - ramping analysis,XP-3520,99550,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,eh941,lt112,lt112,02/Sep/20 10:22,02/Nov/20 10:36,22/Feb/21 13:21,16/Sep/20 12:54,,,Cross Product Matching ASR,,,,,,,,,,"Ramping makes neighbouring contract calculation depend on each other (state of the grid before and after can cause capacity limitations)
This can cause several performance issues:
- being unable to route subcontracts in parallel (no/yes and if so, analyze options)
- nonoptimal paths (selecting a certain path in the first underlying contract might cause unavailability of any path in the second underlying contract, while selecting an alternative path in the first place might make the second routable)
- other issues you can think of",,eh941,ek176,lt112,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3594,,XP-3934,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,13737600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3426,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0bdql:r",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 17 (S),,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3520-ramping_analysis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Sep/20 12:54;eh941;h1. Interesting findings
When I was doing the analysis there were couple of interesting findings.

h2. Committing the allocated values in routing service isn't easy
In order to tell the graphx library - I want to use already made changes - it isn't easy to do it. I have prepared a solution how to handle it in branch {{XP-3520-ramping_analysis}} in {{FlowControlTest}} class.

h2. Block trades have different routing possibilities.
When a canonical trade (let's say 13:00-14:00) is created the routing is done differently to the block trade (13:00-13:15...13:45-14:00).

The canonical trade can contain multiple routing paths but they must be all the same through all delivery intervals. Block trades might have mixed pathes among delivery interval.

e.g. 13:00-14:00 -> paths for delivery intervals.

Canonical order
* 13:00-13:15, 13:15-13:30, 13:30-13:45, 13:45-14:00 - CZ->PL->DE 100 MW
Block order
* 13:00-13:15, 13:15-13:30 - CZ->PL->DE 100 MW
* 13:30-13:45, 13:45-14:00 - CZ->DE 100 MW

h1. Ramping
Brief analysis was done. I can see 3 options how to operate with ramping:
# Leave it pretty much the same as it is
# Optimize the routing

h2. Leave it as it is
In such case there might be paths omitted from the routing when there are multiple paths for delivery intervals and there is ramping involved. If there was a ramping check after the all routing was done no constraint would be violated. Because the paths are resolved independently the path can be evaluated as invalid. No need for changes in graphx library.

There is an optimization that might be introduced on core's side. We could concatenate the delivery intervals with the same delivery areas on the endpoints - e.g. There are 4 quarterly orders between 13:00 - 14:00 and 13:30-13:45 and 13:45-14:00 are both from DA-1 to DA-2. These two might be merged into one routing library call.

h5. Parallelism
Running the routing in parallel is possible but not really feasible. We might expect that there would be no ramping violation and run all routing in parallel. I wasn't able to resolve what to do with these independent results - is there a possibility that they will violate ramping when applied together? How to apply those _routing plans_ to the _main_ routing instance that is kept by core module.

h2. Optimize the routing
In order to maximize the routing possibilities (and therefore the ideal path) there would have to be changes in graphix libary. There already is an algorithm prepared for block contracts which goes: from the first delivery interval -> last delivery interval -> second delivery interval -> previous before last delivery interval and so on. By this it can handle different paths among all delivery intervals. 

We could adapt this mechanism to use multiple source or/and destinations (cross product matching) or create a new one. Creating a new one approach requires fully understanding of the graphx library.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CPM Matcher - add bottom-up matching,XP-3519,99549,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,qo794,lt112,lt112,02/Sep/20 10:12,21/Sep/20 12:52,22/Feb/21 13:21,17/Sep/20 15:22,,,Cross Product Matching ASR,,,,,,,,,,"Currently matcher only supports matching top-down (trying to find suitable orders in subcontracts)
- implement bottom-up as well (searching through larger contracts and trying to find a complement)

Example:
OBK:
S100@100 0-60
B50@120 0-30

aggressor order B100@110 30-60 should cause trades:
50@110 0-30 (both orders already in OBK, matching in the middle)
50@100 30-60 (initiator price)
",,lt112,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3598,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,14947200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3426,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0bgjz:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 18 (S),,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,cpm,why-optional,XP-3829-routing-integration,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement matching of AON,XP-3518,99548,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Critical,Done,jy268,uv683,uv683,02/Sep/20 10:06,29/Sep/20 15:40,22/Feb/21 13:21,29/Sep/20 15:40,,,Cross Product Matching ASR,,,,,,,,,,"First draft could be that AON matching will allow only to be matched with combination of 60,30 and 15min contracts.

 

Hint: change in contract splitter, check AON handling 

 

Talk to [~radeale] and ask how AONs are defined in specifications and if allows cross product matching. Potentially open discussion with customers about changing definition of AON in our specs. ",,radeale,uv683,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,14947200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3426,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0bjp3:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 18 (S),,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,why-optional,cpm,XP-3829-routing-integration,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CPM Matcher - consider VO timestamps in order priority,XP-3517,99547,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,jy268,ll664,ll664,02/Sep/20 10:03,14/Sep/20 09:43,22/Feb/21 13:21,14/Sep/20 09:43,,,Cross Product Matching ASR,,,,,,,,,,"When prices are equal, timestamp decides the priority.

Virtual Order timestamp is defined as timestamp of the latest underlying suborder.

Respect old comparator:
{code}
@Override
public int compare(Order o1, Order o2) {
    if (o1 == o2) {
        return 0;
    }
    int c = o1.getPrice().compareTo(o2.getPrice());
    if (c != 0) {
        return isBuy ? -c : c;
    }
    c = o1.getRestriction().comparePriority(o2.getRestriction());
    if (c != 0) {
        return c;
    }
    c = o1.getCreationTime().compareTo(o2.getCreationTime());
    if (c != 0) {
        return c;
    }
    return Long.compare(o1.getId(), o2.getId());
}
{code}
 ",,ll664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,14428800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3426,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0bdql:i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 17,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,why-optional,cpm,XP-3829-routing-integration,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Sep/20 12:04;ll664;WIP here: https://github.deutsche-boerse.de/dev/xbid/tree/XP-3517",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CPM Matcher - WAP should be compared unrouned,XP-3516,99546,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,jy268,ll664,ll664,02/Sep/20 10:01,14/Sep/20 09:16,22/Feb/21 13:21,07/Sep/20 16:01,,,Cross Product Matching ASR,,,,,,,,,,"When determining which price is better, we should compare virtual prices unrounded.

Note, this applies only for WAP option, encapsulate properly - I can image having a strategy interface with a single method `compare(VO1, VO2)` method - maybe we can use java `Comparator` straight away.",,ll664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,14947200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3426,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0bgjy:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 17,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,cpm,why-optional,XP-3829-routing-integration,ramping-analysis,XP-3520-ramping_analysis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AMS - undeliverable emails DEV - Subject Change,XP-3496,99309,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,,zi174,zi174,26/Aug/20 14:38,09/Nov/20 09:29,22/Feb/21 13:21,04/Sep/20 17:10,,,3.2.x,,,,,,,,,,"h2. {color:#de350b}THIS TICKET NEEDS TO BE IMPLEMENTED TOGETHER WITH XP-3340{color}

According to discussion in XBID-5170, we need to modify the process of sending emails notification. 
 * We need to modify the subject - currently we send ""_Warning - user password (or certificate) is expiring!_"" ----> we need to add an environment identification to the email subject. So, the subject would be like --> ""*Warning - user password (or certificate) is expiring on SIMU""* (Production etc.)

h2. Acceptance Criteria 
 * Subject with environment

 
h3.  ",,od044,qo794,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Sep/20 17:10;od044;Screenshot 2020-09-04 at 17.04.13.png;https://jira.deutsche-boerse.com/secure/attachment/87278/Screenshot+2020-09-04+at+17.04.13.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,14688000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0bgjz:r",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 17,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3496-develop,XP-3496-acceptance,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Sep/20 10:08;qo794;The current subjects are not consistent, see below:
* Warning - user password is expiring!
* Warning - user's email certificate is expiring!
* Warning - party's email certificate is expiring!
* Warning - user certificate is expiring!

I would suggest to fix the wrong values, [~zi174] please clarify.","03/Sep/20 10:14;zi174;Please fix it so that we have consistency in these subjects :) Thanks ","03/Sep/20 10:24;qo794;Implemented
* feature branch for acceptance: https://github.deutsche-boerse.de/dev/xbid.access-management/tree/XP-3496-acceptance
* feature branch for develop: https://github.deutsche-boerse.de/dev/xbid.access-management/tree/XP-3496-develop
* pull request to acceptance branch: https://github.deutsche-boerse.de/dev/xbid.access-management/pull/67
* pull request to develop branch https://github.deutsche-boerse.de/dev/xbid.access-management/pull/68","04/Sep/20 17:09;od044;Test passed on Docker with feature branch XP-3496-develop
- email subject contains ENV identification 
 !Screenshot 2020-09-04 at 17.04.13.png! ",,,,,,,,,,,,,,,,,,,,,,,,,,,,
AM Indicator - Net Position,XP-3468,99231,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,od044,zi174,zi174,25/Aug/20 11:01,08/Sep/20 09:58,22/Feb/21 13:21,31/Aug/20 11:19,,,3.1.2,,,,,,,,,,"h2. Current solution:

This report provides calculated net position for each Market Area per MTU level.

So, the report is provided with following values:
|*area_id*|*market_time_unit*|*imported_volume*|*exported_volume*|*netted_volume*|
|10Y1001A1001A48H|60|3100|2700|400|
|10Y1001A1001A48H|15|200|600|-400|
|10Y1001A1001A48H|30|5400|5400|0|
|15Y1001A1001A45H|60|3000|1800|1200|
h2. Required solution

The report needs to provide the values per Delivery Start Time with Time Resolution (use similar logic like for ATC Utilization Ratio). 

So the report shall be provided with following values:
|*area_id*|*delivery_start_time*|*time_resolution*|*imported_volume*|*exported_volume*|*netted_volume*|
|10Y1001A1001A48H|15:00|60|3100|2700|400|
|15Y1001A1001A45H|16:30|15|200|600|-400|
|10Y1001A1001A48H|17:30|30|5400|5400|0|
|10Y1001A1001A48H|17:30|60|3000|1800|1200|",,od044,qo794,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Aug/20 11:18;od044;2020-06_NET_POSITION_2020-08-28-133959.csv;https://jira.deutsche-boerse.com/secure/attachment/87039/2020-06_NET_POSITION_2020-08-28-133959.csv","31/Aug/20 11:18;od044;2020-06_NET_POSITION_2020-08-28-135355.csv;https://jira.deutsche-boerse.com/secure/attachment/87040/2020-06_NET_POSITION_2020-08-28-135355.csv","31/Aug/20 11:15;od044;trades.png;https://jira.deutsche-boerse.com/secure/attachment/87038/trades.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,14428800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|000xwa:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 16 (S),,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3468,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Aug/20 15:09;qo794;Ready for test on the feature branch https://github.deutsche-boerse.de/dev/xbid.am-reporting/tree/XP-3468. The change will be merge to develop after deployment taking place on 2.9.2020.

Pull request ready to be merged: https://github.deutsche-boerse.de/dev/xbid.am-reporting/pull/9","31/Aug/20 11:19;od044;Test passed on feature branch 
- new report is calculated and generated per area, delivery start time and time resolution properly
- test data:
 !trades.png! 

Report before adjustment
 [^2020-06_NET_POSITION_2020-08-28-133959.csv] 

New report 
 [^2020-06_NET_POSITION_2020-08-28-135355.csv] ","08/Sep/20 09:58;zi174;|*area_id*|*delivery_start_time*|*time_resolution*|*imported_volume*|*exported_volume*|*netted_volume*|
|10Y1001A1001A48H|15:00|60|3100|2700|400|
|10Y1001A1001A48H|15:00|30|3100|2700|400|
|10Y1001A1001A48H|15:00|15|3100|2700|400|
|15Y1001A1001A45H|16:30|15|200|600|-400|
|10Y1001A1001A48H|17:30|30|5400|5400|0|
|10Y1001A1001A48H|17:30|-60- 15|3000|1800|1200|",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(split 1) Cross-Product Matching - Benchmark,XP-3424,98964,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,lt112,lt112,17/Aug/20 12:19,06/Nov/20 09:00,22/Feb/21 13:21,02/Sep/20 11:30,,,Cross Product Matching ASR,,,,,,,,,,"Analyze benchmarking options for matcher/auction/orderbook. Implement.

See losses benchmark: https://github.deutsche-boerse.de/dev/xbid.routing-benchmark",,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3523,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,14947200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3426,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0ben0:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 16 (S),,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,cpm,XP-3424-cpm-benchmark,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Sep/20 11:31;lt112;https://github.deutsche-boerse.de/dev/xbid.cpm-benchmark",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(split 1) Cross-Product Matching - OrderBook,XP-3423,98963,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,lt112,lt112,17/Aug/20 12:18,29/Oct/20 08:14,22/Feb/21 13:21,30/Sep/20 13:52,,,Cross Product Matching ASR,,,,,,,,,,"Introduce support for cross-product matching to order-book

Find some inspiration here https://github.deutsche-boerse.de/dev/xbid/issues/745 - just an idea/draft, not to be followed strictly

NOTES:
* Price calculation is still being discussed. Use weighted average price option, encapsulate for easy change.
* Do not include block orders yet",,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3826,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,16329600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3429,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0bkwk:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 18 (S),,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,cpm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 0) Cross-Product Matching - Auction - Initial Kickoff,XP-3422,98962,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,uv683,lt112,lt112,17/Aug/20 12:17,13/Oct/20 12:44,22/Feb/21 13:21,30/Sep/20 11:28,,,Cross Product Matching ASR,,,,,,,,,,"Introduce support for cross-product matching to auction

Find some inspiration here https://github.deutsche-boerse.de/dev/xbid/issues/745 - just an idea/draft, not to be followed strictly

NOTES:
* Price calculation is still being discussed. Use weighted average price option, encapsulate for easy change.
* Do not include block orders yet",,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3823,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,16329600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3428,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0bk6f:i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 18,,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,cpm,why-optional,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cross-Product Matching - Matcher - initial kickoff,XP-3421,98961,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,lt112,lt112,17/Aug/20 12:16,02/Sep/20 10:41,22/Feb/21 13:21,02/Sep/20 10:41,,,Cross Product Matching ASR,,,,,,,,,,"h1. CPM Matching Analyzis

Introduce support for cross-product matching to matcher

Find some inspiration here [https://github.deutsche-boerse.de/dev/xbid/issues/745] - just an idea/draft, not to be followed strictly

NOTE: Price calculation is still being discussed. Use weighted average price option, encapsulate for easy change.
h2. Proposed Solution 
 * checked MichaelB's algorithm for matching on GitHub
 * Implement matcher lgorithm - Proof of Concept (PoC)
 * XBID team synchronizes about solution multiple times per sprint
 * prepare outcome of this PoC and next tasks for 

h2. Acceptance criteria 
 * Michael's algorithm is implemented multiple times by different people to get best outcome
 * Current algorithm is enhanced (completed) for what is currently missing
 * Set of examples and scenarios created - these will be used to test our solution in the future to prove feasibility
 * Split how to separate matcher and run benchmark test is known and proven
 * API supporting split above is described
 * Check Rounding problem - figure out whether rounding issue affects calculations
 * Based on above Teams created tasks (Jira issues) with additional steps to refined and taken into next sprint ",,ll664,lt112,qo794,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,15033600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3426,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0bdqm:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 16,,,,,,,,,,,,,,,,13.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3443-rounding,cpm,why-optional,XP-3829-routing-integration,ramping-analysis,XP-3443-recursion,XP-3520-ramping_analysis,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Sep/20 12:45;ll664;h2. Rounding problem analysis

*Update*: Disregard text below - we decided to not round when comparing WAP -  	XP-3516

------------------------------------------------------------------------

When calculating weighted average price (WAP), we need to round results to cents.

 

When selecting top order, we walk the ""order delivery tree"" from the bottom. Assume 60 minutes agressor all (sub) contracts has a valid order, then
 * take two smallest orders 15 mins orders, compute their average price
 * compare to the price of the to the 30 minutes order - take order(s) with better price
 * repeat for another pair of 15 min
 * take two prices of the resulting 30 minutes prices and compare to 60 min order

 
h2. Rules

 
 # In case price for suborder is same as the price of 'parent' order prefer parent order to minimize number of matches.
 # Initiator orders rounding:
Sells - round to ceiling
Buys - round floor
The reason for not using 'half-up' is that we don't want the orders to not be ruled out by applying Rule 1, when the price is actually better, but the precision is lost due to rounding.

 
h3. Example 1 - SELL aggressor

Buy order prices
  
 30m: 2.34 EUR
  
 15m: 3.44 EUR
 15m: 1.25 EUR
  
 15 min WAP: 2.345 ~ 2.35 EUR  (round ceiling).
  
 Bigger is price is better (for sell aggressor), hence 2x15min order has better price than 30 min. order.
  
h3. Example 2 - BUY aggressor

Sell order prices
  
 30m: 2.35 EUR
  
 15m: 3.44 EUR
 15m: 1.25 EUR
 WAP: 2.345 ~ 2.34 EUR (round floor)

Smaller price is better for buy aggressor, 2x15 min order wins.
h3. Example 3 - SELL aggressor - equal prices after rounding

Buy order prices
  
 30m: 2.35 EUR
  
 15m: 3.44 EUR
 15m: 1.25 EUR
  
 15 min WAP: 2.345 ~ 2.35 EUR  (round ceiling).

 

After rounding (round to ceiling), the prices are the same. Prefer less order matched, hence 30 min would be taken isntead of 2x15min.

 
  ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[SIMU DEPLOYMENT] Variable time frame for generation of AM Indicator Reports ,XP-3415,98929,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,yo218,jy268,jy268,14/Aug/20 11:10,09/Oct/20 14:23,22/Feb/21 13:21,21/Aug/20 14:45,,,3.1.1,,,,,,,TechOps,,,"This ticket requires deployment of script to SIMU node1 endpoint. Following steps have to be done by techops to install on SIMU.

{code}
1. Install jq package on SIMU node1
2. Copy following script to SIMU node1: https://github.deutsche-boerse.de/dev/xbid.am-reporting/blob/develop/am-reporting/src/scripts/am_rest_generate.sh
3. Execute following script as cron job (crontab -e) for tomcat user with following parameters:

0 2 * * * PATH_TO_SCRIPT_FROM_POINT_2 /xbid/reports/am
{code}


h1. {color:#00875a}Easier UATs testing for AM Indicators {color}
h2. Current Situation 

On production our reports for AM Indicators will be generated every month. This is not acceptable on UATs to wait such a long period. 

If we do it manually we would have massive overhead with repetitive tasks we would like to avoid. 
h2. Proposed Solution 

Allow variable time between AM indicator reports generation to ease UAT testing. 

Hint:
 * Currently it's generated every day but there is a check if report was generated in current month
 * always upload all reports, there is a timestamp

h2. Acceptance Criteria
 - scheduled job for generating reports every day and uploading it to customer sftp so the can download them",,jy268,yo218,,,,,,,,";09/Oct/20 14:23;qo794;28800",,,,,,,,,,28800,,,,28800,,,,XP-3358,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,15897600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0bbbp:zr",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 16 (S),,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3415,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Aug/20 14:31;yo218;installed jq on xbsimusla1","20/Aug/20 14:31;yo218;copied the script to /xbid/
{noformat}
[root@xbsimusla1 xbid]# ls -la /xbid/
total 51676
drwxr-xr-x 10 tomcat tomcat     4096 Aug 20 14:26 .
dr-xr-xr-x 19 root   root       4096 Sep  6  2018 ..
-rwxr-xr-x  1 tomcat tomcat     2157 Aug 20 14:25 am_rest_generate.sh
(...) {noformat}","21/Aug/20 14:45;yo218;the report target dir had to be created (/xbid/reports/am). 

The following jenkins job will run daily and trigger the job:

[https://englobjci1.deutsche-boerse.de/job/Energy-Operations/job/XBID%20Ansible%20Jobs/job/XBID-Reports-Generator-Simu/]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AM Indicators - Averaged Net Position - quarterly position,XP-3409,98909,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Critical,Done,od044,zi174,zi174,13/Aug/20 14:10,31/Aug/20 15:38,22/Feb/21 13:21,18/Aug/20 17:18,,,3.1.1,,,,,,,,,,"*Current implementation is:*
 # for 2020-05-01 12:15-12:30 we sum quantities for trade 1 and 2 and convert to MWHs -> (100 + 300)/4 = 100
 # 2020-05-20 12:15-12:30 - only a single trade applies (3), hence just convert to MWHs: -250/4 = -62.5
 # We calculate a net position for the delivery interval 12:15 – 12:30 from the values above -> 100 – 62.5 = 37.50
 # At the end, we need to calculate an average -> the average is calculated from the net position (step 3), +this value is divided by+ *+number of days when the contract were traded (in our case 2)+,* so the calculation is as follow -> 37.5 / 2 = 18.75

 

*We need to modify the point 4 to be implemented:*
 4. At the end, we need to calculate an average -> the average is calculated from the net position (step 3), +this value is divided by number of days+ *+in the particular month+,* so the calculation is as follow -> 37.5 / 30 = 1.25

e.g. in case of June, the net position would be divided by 30.",,ei349,od044,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-5202,,,,,,,,,,,,,,,"18/Aug/20 17:17;od044;2020-02_NET_POSITION_AVERAGED_QUARTERLY_2020-08-18-145545.csv;https://jira.deutsche-boerse.com/secure/attachment/86526/2020-02_NET_POSITION_AVERAGED_QUARTERLY_2020-08-18-145545.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,16070400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|000xro:000c",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 15,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Aug/20 17:17;od044;Test passed on AM 1.0.2-Snapshot (0a4303a5df7615d6747c9172c3d0dedd8a8b621f)
- Net position average values in Net position average quarterly report is calculate per new definition as following sum of net positions per quarter time unit on particular market area divided by number of days in the particular month 

Test example:
1. Trade from APG (sink) <- (source) DK1: 9 MW for contract T21-22 in trading date 2020-02-15
2. Trade from APG (sink) <- (source) FI: 5 MW for contract 21-22 in the trading date 2020-02-15
3. Trade from APG (source) -> (sink) BE: 3 MW for contract 21-22 in the trading date 2020-02-15 

Here report  [^2020-02_NET_POSITION_AVERAGED_QUARTERLY_2020-08-18-145545.csv] :
{code}
month,delivery_start_time,area_id,volume
2020-02,20:00,10YAT-APG------L,0.095
2020-02,20:15,10YAT-APG------L,0.095
2020-02,20:30,10YAT-APG------L,0.095
2020-02,20:45,10YAT-APG------L,0.095
2020-02,20:00,10YBE----------2,0.026
2020-02,20:15,10YBE----------2,0.026
2020-02,20:30,10YBE----------2,0.026
2020-02,20:45,10YBE----------2,0.026
2020-02,20:00,10YDK-1--------W,-0.078
2020-02,20:15,10YDK-1--------W,-0.078
2020-02,20:30,10YDK-1--------W,-0.078
2020-02,20:45,10YDK-1--------W,-0.078
2020-02,20:00,10YFI-1--------U,-0.043
2020-02,20:15,10YFI-1--------U,-0.043
2020-02,20:30,10YFI-1--------U,-0.043
2020-02,20:45,10YFI-1--------U,-0.043
{code}

Example of manual calculation for DA 10YAT-APG------L and quarter 20:00 - 20:15 : 
1. convert sum of volume of trades to quarterly MTU (9+5-3)/4 = 2,75
2. calculate average as sum value from step 1 divided by number of days of the particular month (our case Feb 2020, leap-year) is 29 => 2,75 / 29 = 0,09482758621 ~ 0,095 
","19/Aug/20 14:32;ei349;Approved for 3.1.1. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AM Indicators - ATC Utilization Ratio,XP-3408,98907,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Critical,Done,tr866,zi174,zi174,13/Aug/20 13:47,19/Aug/20 14:33,22/Feb/21 13:21,17/Aug/20 15:57,,,3.1.1,,,,,,,,,,"*Current implementation is:*

_Last ATC ~A->B~_ = Last Available Transfer Capacity before gate closure of given MTU for given interconnector and direction
 * In case the last ATC parameter is related to an interconnector which is constrained by ramping, the available capacity *without* ramping rate is used. It means that the parameter “Last ATC ~A->B~” is populated by a value of available transfer capacity of the interconnector.

 

*We need to modify that to be implemented:*

_Last ATC ~A->B~_ = Last Available Transfer Capacity before gate closure of given MTU for given interconnector and direction
 * In case the last ATC parameter is related to an interconnector which is constrained by ramping, the available capacity +*with*+ ramping rate is used. It means that the parameter “Last ATC ~A->B~” is populated by a value of available transfer capacity of the interconnector.

 

So, please change the implementation so that the ATC parameter would consider the ramping rate.

 ",,ei349,ll664,tr866,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-5201,,,,,,,,,,,,,,,"17/Aug/20 15:53;tr866;ATC Utilisation Rate - ATC with RR - Retest.xlsx;https://jira.deutsche-boerse.com/secure/attachment/86503/ATC+Utilisation+Rate+-+ATC+with+RR+-+Retest.xlsx","17/Aug/20 15:53;tr866;am reports - ATC Utilization.zip;https://jira.deutsche-boerse.com/secure/attachment/86502/am+reports+-+ATC+Utilization.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,16070400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|000xro:0006",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 15 (S),,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Aug/20 14:24;ll664;Fixed to the new xbid.am-reporting module. Ready to test.","17/Aug/20 15:57;tr866;Successfully tested on docker with version AM Reporting 1.0.2-SNAPSHOT-0a4303a5df7615d6747c9172c3d0dedd8a8b621f
and reproduced with version Report Tool 2.46-SNAPSHOT-41b82abfcd9760cf272c7ea9203b83d48e67611c

As seen in the attached scenario [^ATC Utilisation Rate - ATC with RR - Retest.xlsx] and generated reports [^am reports - ATC Utilization.zip] the ATC utilization rate is now being calculated using the ATC with RR values reflecting the ramping constraint.","19/Aug/20 14:33;ei349;Approved for 3.1.1

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Missing mandatory attributes when FTC configured with Auction type explicit,XP-3371,98645,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,tm431,tm431,04/Aug/20 17:17,20/Aug/20 17:21,22/Feb/21 13:21,05/Aug/20 11:03,,,3.1.0,,,,,,,,,,Please develop according to XBID-5122 and merge and release into COR 3.1.0,,hj444,tm431,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-5122,,,,,,,"05/Aug/20 10:06;hj444;20200805_OCC_DE-APG_EXPL_001.xml;https://jira.deutsche-boerse.com/secure/attachment/86262/20200805_OCC_DE-APG_EXPL_001.xml","05/Aug/20 10:06;hj444;20200805_OCC_DE-APG_IMPL_001.xml;https://jira.deutsche-boerse.com/secure/attachment/86263/20200805_OCC_DE-APG_IMPL_001.xml","05/Aug/20 10:06;hj444;20200805_OCC_DE-TTN_EXPL_002.xml;https://jira.deutsche-boerse.com/secure/attachment/86264/20200805_OCC_DE-TTN_EXPL_002.xml","05/Aug/20 11:28;hj444;20200806_OCC_DK1-NO2_EXPL_001.xml;https://jira.deutsche-boerse.com/secure/attachment/86275/20200806_OCC_DK1-NO2_EXPL_001.xml","05/Aug/20 11:28;hj444;20200806_OCC_DK1-SE3_IMPL_001.xml;https://jira.deutsche-boerse.com/secure/attachment/86276/20200806_OCC_DK1-SE3_IMPL_001.xml",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,17366400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2609,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0bbpk:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 14 (S),,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,acceptance,develop,master,master-acceptance,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Aug/20 10:05;hj444;tested on Docker :
Version R3.1.1-SNAPSHOT (Build 3e2715d1d34dddf072a0a8cb494ffd274c315c54)

attributes 
<auction.category>A04</auction.category>
<classificationSequence_AttributeInstanceComponent.position>1</classificationSequence_AttributeInstanceComponent.position>
- *present in FTC*
-- DE-NL Explicit/Origin
-- DE-APG Explicit/Minimum
- not present in FTC Implicit
     -- after change  DE-APG Explicit - Implicit




{code}
-<TimeSeries>
<mRID>e6cfd43334a0b6096620b3fc742f83de</mRID>
<auction.type>A02</auction.type>
<auction.category>A04</auction.category>
<businessType>A31</businessType>
<in_Domain.mRID codingScheme=""A01"">10YNL----------L</in_Domain.mRID>
<out_Domain.mRID codingScheme=""A01"">10Y1001A1001A82H</out_Domain.mRID>
<contract_MarketAgreement.type>A07</contract_MarketAgreement.type>
<quantity_Measure_Unit.name>MAW</quantity_Measure_Unit.name>
<classificationSequence_AttributeInstanceComponent.position>1</classificationSequence_AttributeInstanceComponent.position>
<curveType>A03</curveType>
<update_DateAndOrTime.dateTime>2020-08-05T07:47:15.271Z</update_DateAndOrTime.dateTime>{code}

files added

Test continue at SYT2 env 
","05/Aug/20 11:27;hj444;SYT2 env :
Version R3.1.1 (Build 6860b8aee092c9a16f7d5b05ff5aac07ac8f4d9e)
DK1A-SE3 : Impl/MIn
DK1A-NO2 : Expl/Min
files added.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Variable time frame for generation of AM Indicator Reports ,XP-3358,98596,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,jy268,ei349,ei349,03/Aug/20 13:29,15/Oct/20 16:13,22/Feb/21 13:21,14/Aug/20 13:07,,,3.1.1,,,,,,,,,,"h1. {color:#00875a}Easier UATs testing for AM Indicators {color}
h2. Current Situation 

On production our reports for AM Indicators will be generated every month. This is not acceptable on UATs to wait such a long period. 

If we do it manually we would have massive overhead with repetitive tasks we would like to avoid. 
h2. Proposed Solution 

Allow variable time between AM indicator reports generation to ease UAT testing. 

Hint:
 * Currently it's generated every day but there is a check if report was generated in current month
 * always upload all reports, there is a timestamp

h2. Acceptance Criteria
 - scheduled job for generating reports every day and uploading it to customer sftp so the can download them",,ei349,jy268,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,16070400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0bbbr:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 15,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3358,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Aug/20 13:07;jy268;Done, separate task created to cover deployment to SIMU https://jira.deutsche-boerse.com/browse/XP-3415","19/Aug/20 14:34;ei349;Approved for 3.1.1",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ramping occurrences report - columns modification,XP-3344,98486,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,hj444,zi174,zi174,29/Jul/20 12:09,04/Aug/20 19:53,22/Feb/21 13:21,03/Aug/20 17:34,,,3.1.0,,,,,,,,,,"Please modify the columns to reflect a logic ""delivery_start_time"" with ""time_resolution"" instead of current solution with Start/End time.

The logic from XP-3285 can be reused.",,hj444,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Aug/20 17:30;hj444;2020-08_RAMPING_OCCURRENCE_2020-08-07-080234.csv;https://jira.deutsche-boerse.com/secure/attachment/86193/2020-08_RAMPING_OCCURRENCE_2020-08-07-080234.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,17452800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|000xu4:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 14,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Aug/20 17:34;hj444;Docker :
XBID :Version R3.1.0-SNAPSHOT (Build 4a791b66ae52dcd2196399931f265fffb0e32c70)
Reportool : 2.45-SNAPSHOT

Report added. 
 Columns renamed.
||area1||area2||delivery_start_time||time_resolution||total_occurrences||
|10YDK-1--------W|10Y1001A1001A46L|10:00|60|1|
|10YDK-1--------W|10Y1001A1001A46L|11:00|60|1|",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rounding - cross reports,XP-3336,98411,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,zi174,zi174,27/Jul/20 15:29,04/Aug/20 19:53,22/Feb/21 13:21,29/Jul/20 16:17,,,3.1.0,,,,,,,,,,"Please check all reports to use rounding with 3 digits after ""."" - i.e. Y.XXX",,od044,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Jul/20 16:17;od044;2020-06_EXPLICIT_IMPLICIT_ALLOCATIONS_2020-07-29-140340.csv;https://jira.deutsche-boerse.com/secure/attachment/86133/2020-06_EXPLICIT_IMPLICIT_ALLOCATIONS_2020-07-29-140340.csv","29/Jul/20 16:17;od044;2020-06_NET_POSITION_2020-07-29-140340.csv;https://jira.deutsche-boerse.com/secure/attachment/86130/2020-06_NET_POSITION_2020-07-29-140340.csv","29/Jul/20 16:17;od044;2020-06_ORDERS_VOLUME_2020-07-29-140340.csv;https://jira.deutsche-boerse.com/secure/attachment/86131/2020-06_ORDERS_VOLUME_2020-07-29-140340.csv","29/Jul/20 16:17;od044;2020-06_ORDER_TRADE_RATIO_2020-07-29-140340.csv;https://jira.deutsche-boerse.com/secure/attachment/86129/2020-06_ORDER_TRADE_RATIO_2020-07-29-140340.csv","29/Jul/20 16:17;od044;2020-06_VOLUME_PER_BORDER_2020-07-29-140340.csv;https://jira.deutsche-boerse.com/secure/attachment/86132/2020-06_VOLUME_PER_BORDER_2020-07-29-140340.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,17884800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0bac0:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 14 (S),,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Jul/20 15:42;od044;The reports need to be updated:
- Volume per order - value traded volume
- Explicit implicit allocation - value explicit_allocation_volume, implicit_allocation_volume
- Order trade ratio - value ratio
- Order volumes - value orders_volume
- Net position  - values  imported_volume, exported_volume, netted_volume","29/Jul/20 16:17;od044;Test passed on report-tool 2.44-Snapshot-b042c49aeb5a1b105d26992854bd3d00ffd16613
- values are rounded with 3 digit after
 [^2020-06_ORDER_TRADE_RATIO_2020-07-29-140340.csv]  [^2020-06_NET_POSITION_2020-07-29-140340.csv]  [^2020-06_ORDERS_VOLUME_2020-07-29-140340.csv]  [^2020-06_VOLUME_PER_BORDER_2020-07-29-140340.csv]  [^2020-06_EXPLICIT_IMPLICIT_ALLOCATIONS_2020-07-29-140340.csv] ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AM Ramping Occurence indicator - Virtual Interconnectors Handling,XP-3324,98318,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,hj444,ei349,ei349,22/Jul/20 14:56,05/Aug/20 13:22,22/Feb/21 13:21,05/Aug/20 10:50,,,3.1.0,,,,,,,,,,"!da-setup2.png!

The ramping occurence should be reported between real areas, as VAs are construct not known outside of XBID.

So, here the decision table that explains where to register ramping occurences, for the grid above ({color:#0747a6}Blue are{color} occurences that appers in the report)

TL;DR: Translate ramping on ""virtual"" IC to all ""outer"" ICs
  
||DA1-VDA2||DA3-VDA2||VDA2-DA2||{color:#0747a6}DA1-DA2{color}||{color:#0747a6}DA3-DA2{color}||
|*|*|1| 1|1|
|0|0|0|0|0|
|0|1|0|0|1|
|1|0|0|1|0|
|1|1|0|1|1|

 ",,ei349,hj444,ll664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Aug/20 13:22;hj444;2020-08_RAMPING_OCCURRENCE_2020-08-07-080234.csv;https://jira.deutsche-boerse.com/secure/attachment/86280/2020-08_RAMPING_OCCURRENCE_2020-08-07-080234.csv","22/Jul/20 15:18;ll664;da-setup2.png;https://jira.deutsche-boerse.com/secure/attachment/85969/da-setup2.png","05/Aug/20 13:20;hj444;retest_VDA-BR08.xlsx;https://jira.deutsche-boerse.com/secure/attachment/86279/retest_VDA-BR08.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,17366400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0b9ho:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 14,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3324-am-mira-test,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Jul/20 16:10;ll664;WIP here: https://github.deutsche-boerse.de/dev/m7.xbid-report-tool/tree/XP-3324","31/Jul/20 09:53;ll664;The area translation logic is implemented and merged into develop. 

Also, the report has been adjusted to count only single occurrences of ramping per specific MTU in specfic day. For intance is ramping occured 12 times for 2020-06-0121:00 contract, it would be counted as one.

In the resulting report, the total number of all occurrences for the whole month is summed, effectively showing a number of days when the ramping occurred.



","05/Aug/20 13:18;hj444;Retest done 
Docker
Excel with results and report added",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 2) Dev Consul config- SFTP server configuration - testing,XP-3321,98303,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,od044,zi174,od044,22/Jul/20 12:30,04/Aug/20 19:53,22/Feb/21 13:21,27/Jul/20 17:00,,,3.1.0,,,,,,,,,,"h1. {color:#00875a}AM Indicators Reports SFTP Automation{color}
h2. Proposed solution 

Requirements:
 * Reports must be made available on a SFTP server hosted by DBAG and accessible to NEMOs and TSOs
 * Reports should remain available on the DBAG sFTP server for a period of at least 12 months after the end of the report period.

 

The expected behavior is described (in the spec) as follow:

Monthly reports generation produces report files each month. All generated reports are stored on the SFTP server which is accessible to NEMOs and TSOs. The reports are stored and available for a period of 12 months. During the defined period every report may be downloaded by NEMOs and TSOs. After 12 months the reports are deleted and cannot be accessible anymore. The files are available in a CSV format as is defined by each report format.

--------------

Please during implementation this solution, validate if the statement above is in accordance with the real implementation. Also if the description should be enhanced some important information, please let [~zi174] know.

*Hints:* 

 
 * Avoidance of duplicity because of master-master solution:
 ** Consul master election 
 *** new key/value store might be needed
 ** -Let files override themselves- (risk of race condition)
 * Monitoring
 ** 0 bytes files check 
 ** grafana 
 ** alert in xbid_prod_issues would be nice (create future task)

h2. Acceptance Criteria
 * reports automatically uploaded to SFTP server (Report Tool)
 * new subdirectory
 * reports automatically deleted after 12 months (Report Tool)
 * no duplicate files on sftp server
 * automatic monitoring - currently only in Grafana
 * create future task for automated alerting in case of problem ",,od044,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,18057600,,,,,,,,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y0p:i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 14 (S),,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Jul/20 17:00;od044;Test on Report-tool 2.44-Snapshot on docker 
- new jobs: 
-- am-distribute-reports-to-sftp
- file are distribited to sftp properly
- master slave hand over correctly - only master instace handles distribution
- deleting all reports older than 1 year from SFTP

Test steps:
1. run consul docker instance 
2. Config and start two report-tool instance with different endpoint port and different cron time for job 
- example of dev profile:
{code}
# possible values: single-node, consul
master.elector=consul
consul.host=localhost
consul.port=28500
consul.session.ttl=30s
consul.session.renew.period=PT10S
consul.acl.token=master_token
consul.lock.key=test

am.report.store.path=/tmp/am
am.sftp.rootDirectory=/tmp
am.sftp.enabled=true
am.sftp.hosts=localhost
am.sftp.ports=24022
am.sftp.user=user1
am.sftp.privateKey=file:///home/test/IdeaProjects/xbid-test/test-common/src/main/resources/sftp/sftp_ssh_key.priv
am.sftp.allowUnknownKeys=true
am.sftp.knownHosts=/home/test/IdeaProjects/xbid-test/test-common/src/main/resources/sftp/known_hosts
am.sftp.timeout=10000
am.sftp.retentionPeriodMonths=12
{code}
3. Generate some report and create some report
4. Create some fake reports on SFTP which are older than 1 year
5. Wait and check delete and distribution job on both report tool instance, you can check staus of lock on UI localhost:28500
- delete job responsible for deleting all file older than 1 year from SFTP 
- distribution job reponsible for copy all file in AM folder for particular month, job is skipped if there are not all AM reports for particular month in folder (actually 13)
- slave report-tool instance skipping distribution job in case master instance is locked
6. stop master node 
7. check that after while slave node switch to master and take over distribution ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 1) CMI FTC validity interval not working correctly,XP-3319,98300,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tr866,radeale,hj444,22/Jul/20 11:34,20/Aug/20 17:20,22/Feb/21 13:21,04/Aug/20 12:32,,,3.1.0,,,,,,,Latent_Faults,,,"DBAG uncovered an inconsistency of the behavior, a latent fault.

+*Current behavior*+
The validity for the CMI FTCs currently works as <date1;date2>, i.e. files are also generated for the entire duration of of the date2.
It is possible to create FTCs as <date1;date2> and <date2;date3>.
*{color:#DE350B}As a result for the date2 TWO files are generated in parallel despite the FTCs should never overlap.{color}*

+*Correct behavior*+
The proper validity behavior is <date1;date2) and <date2;date3).
This is industry standard and also ensure that the situation described above does not happen.

+*Steps to reproduce*+
1. Login into the CMI with a File Management Admin user.
2. Create two outbound file transfer configurations for the same IC, file type, channel and recipient - <date1;date2> and <date2;date3>.
3. Wait for the date2 to happen.
=> Two files are sent in parallel while only one should be sent.

+*Relevant documentation*+
DFS800, chapters
3.3.3.1.1 Create a new inbound file configuration
3.3.4.1.1 Create a new outbound file configuration

+*Related tickets*+
XBID-3632 - The clarification ticket from which the behavior originated.",,hj444,tr866,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,17452800,,,,,,,,,,XP-3447,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0b3xj:yi",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 14,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Jul/20 11:00;tr866;Tested on docker with version R2.0.45-SNAPSHOT (Build 8b7e8274586caacafcd8e417040dc4a4ef824798)

FTC pairs with validities 21.07. 2020-28.07. 2020 (2020-07-20 22:00:00; 2020-07-27 22:00:00) and 28.07. 2020-31.07. 2020 (2020-07-27 22:00:00; 2020-07-30 22:00:00) with following distribution mapping were created:
# Event mapping: Contract Delivery
# Event mapping: Contract Closing
# Scheduler mapping

The time of docker was set just couple of minutes before midnight 28.07.2020 00:00.
In all 3 cases only 1 file was generated at midnight and no overlapping of the FTCs validity intervals was in place. All files had the create_time timestamp 2020-07-27 22:00:00 in tbxi700_file_header table which suggests they were created exactly at the edge between the two file configurations.

Unfortunatelly with the older version like 2.0.43 and 2.0.42 and 2.0.40 I wasn't able to reproduce the issue either and not sure if it's even possible. It's probably not possible to make an event trigger to get happen exactly at 28.07.2020 00:00:00 with the needed precision. With the older version I was trying the same scenario as above, on the top of it I tried to generate the event trigger files manually by creating service halt/alloc FTC. Then I tried to generate files not only at midnight but also during the previous day, but nothing of it generated the files twice as described in the ticket.","30/Jul/20 12:14;tr866;Trying to reproduce on docker with version R2.0.42 (Build f403efdf33967cf1068e5016b173e5995138f1f5)
 # Started XBID in docker with date 20.07.2020
 ## In CMI File Management following FTCs were created:
 ### 
|Border:|MAES-MAPT| | |Border:|MAES-MAPT|
|Interconnector:|ES-PT| | |Interconnector:|ES-PT|
|File Type:|OCC| | |File Type:|OCC|
|Receiver:|TS-TSO1--------0| | |Receiver:|TS-TSO1--------0|
|Auction:|Implicit| | |Auction:|Implicit|
|VDA Quantity:|Minimum| | |VDA Quantity:|Minimum|
|Allocation Scope:|BOTH| | |Allocation Scope:|BOTH|
|Transport Type:|GUI| | |Transport Type:|GUI|
|Valid From:|21.07.2020| | |Valid From:|*30.07.2020*|
|Valid To:|*30.07.2020*| | |Valid To:|31.08.2020|
|Distribution Event Mappings:| | | |Distribution Event Mappings:| |
|Event Type:|*Publish*| | |Event Type:|*Publish*|
|Scheduling Type:|*IMMEDIATE*| | |Scheduling Type:|*IMMEDIATE*|
### 
|Border:|MAES-MAMA| | |Border:|MAES-MAMA|
|Interconnector:|ES-MA| | |Interconnector:|ES-MA|
|File Type:|ATC| | |File Type:|ATC|
|Receiver:|TS-TSO1--------0| | |Receiver:|TS-TSO1--------0|
|Allocation Scope:|BOTH| | |Allocation Scope:|BOTH|
|Transport Type:|GUI| | |Transport Type:|GUI|
|Valid From:|21.07.2020| | |Valid From:|*30.07.2020*|
|Valid To:|*30.07.2020*| | |Valid To:|31.08.2020|
|Distribution Event Mappings:| | | |Distribution Event Mappings:| |
|Event Type:|*Publish*| | |Event Type:|*Publish*|
|Scheduling Type:|*FIXED_DELAY*| | |Scheduling Type:|*FIXED_DELAY*|
|Scheduling Value (seconds):|*10*| | |Scheduling Value (seconds):|*10*|
 ## In Reference Data Management>Product Setup>Interconnectors Management new configuration for the two ICs was created as follows:
 ### Border: MAES-MAPT
 DA1: ES DA2: PT
 Validity From: 23.07.2020
 Interconnector Opening Times
 Opens At: *01:00*
 Automatic Publish Offset [min]: *65*
 ### Border: MAES-MAMA
 DA1: ES DA2: MA
 Validity From: 23.07.2020
 Interconnector Opening Times
 Opens At: *00:15*
 Automatic Publish Offset [min]: *615*
## Stop docker and start it again on the overlap day few minutes before the publish at the second border,i.e. 07/30/2020 11:50:00
##- Check at what time the files got generated(""Scheduled At"" time from Outbound> Status and created_time from tbxi700_file_header table in CMI DB):
ES-MA: N/A nothing got generated as autopublish didn't happen
##- And check the time of Capacity Publish according to ""Capacity fully published"" message:
ES-MA: N/A autopublish didn't happent
## Stop the docker again and set the time just few minutes before the publishment on the 1st border, i.e. ""07/30/2020 21:42:00""
##- Check at what time the files got generated(""Scheduled At"" time from Outbound> Status and created_time from tbxi700_file_header table in CMI DB):
ES-PT: N/A - nothing generated as autopublish didn't happen
##- And check the time of Capacity Publish according to ""Capacity fully published"" message:
ES-PT: N/A - autopublish didn't happen
## As autopublish didn't happen I triggered the Publish manually for day 30.07.2020 still before midnight
{noformat}
23:58:19		Capacity fully published for ES-PT on 30.07.
23:56:33		Capacity fully published for ES-MA on 30.07.
{noformat}
As result again only one file for each IC got generated
| Receiver | Filename | File Type | Transport Type | Event Interval  | Scheduled At  | Already Sent | Ack |
| TS-TSO1--------0 | 20200801_ATC_ES-MA_001.xml |ATC |GUI |01.08.2020 00:00:00 - 02.08.2020 00:00:00 | 31.07.2020 00:00:10 | (/)| (*)| 
| TS-TSO1--------0 | 20200730_OCC_ES-PT_IMPL_001.xml | OCC | GUI | 30.07.2020 00:00:00 - 31.07.2020 00:00:00 | 30.07.2020 23:58:19 | (/)| (*)|
## At midnight autopublish for day 01.08.2020 was triggered even though I set the autopublish offset before midnight:
{noformat}
00:00:00		Capacity fully published for ES-MA on 01.08.
00:00:00		Capacity fully published for ES-PT on 01.08.
{noformat}
As result again only one file per IC got generated
| Receiver | Filename | File Type | Transport Type | Event Interval  | Scheduled At  | Already Sent | Ack |
| TS-TSO1--------0 | 20200801_ATC_ES-MA_001.xml | ATC | GUI | 01.08.2020 00:00:00 - 02.08.2020 00:00:00 |31.07.2020 00:00:10| (/)| (*)|
| TS-TSO1--------0 | 20200801_OCC_ES-PT_IMPL_001.xml | OCC | GUI | 01.08.2020 00:00:00 - 02.08.2020 00:00:00 | 31.07.2020 00:00:00	| (/)| (*)|
Result: only one file was generated in every case. Still can't reproduce the issue on older version (?).","04/Aug/20 11:38;tr866;Final round of reproduction attempt on docker with version Report Tool R2.0.42 (Build f403efdf33967cf1068e5016b173e5995138f1f5)

Found out in previous attempt that the main problem which prevented to be able to reproduce the issue was to follow thoroughly the instructions in the description of the JIRA. The FTC with ""overlapping"" Validity Dates *must not be identical*. If the FTC are created for the same IC, file type, channel and recipient only one file is going to be generated all the time even the problem with the time intervals is there.

h2. Steps to reproduce:
Started XBID in docker with date 20.07.2020
 # In CMI File Management following FTCs were created:
 ## 
|Border:|MAES-MAPT| | |Border:|MAES-MAPT|
|Interconnector:|ES-PT| | |Interconnector:|ES-PT|
|File Type:|OCC| | |File Type:|OCC|
|Receiver:|TS-TSO1--------0| | |Receiver:|TS-TSO1--------0|
|Auction:|*Implicit*| | |Auction:|*Explicit*|
|VDA Quantity:|Minimum| | |VDA Quantity:|Minimum|
|Allocation Scope:|BOTH| | |Allocation Scope:|BOTH|
|Transport Type:|GUI| | |Transport Type:|GUI|
|Valid From:|21.07.2020| | |Valid From:|*04.08.2020*|
|Valid To:|*04.08.2020*| | |Valid To:|08.08.2020|
|Distribution Event Mappings:| | | |Distribution Event Mappings:| |
|Event Type:|*Allocation*| | |Event Type:|*Allocation*|
|Scheduling Type:|*FIXED_DELAY*| | |Scheduling Type:|*FIXED_DELAY*|
|Scheduling Value (seconds):|*10*| | |Scheduling Value (seconds):| *10*|
 ## 
|Border:|MAES-MAMA| | |Border:|MAES-MAMA|
|Interconnector:|ES-MA| | |Interconnector:|ES-MA|
|File Type:|ATC| | |File Type:|ATC|
|Receiver:|TS-TSO1--------0| | |Receiver:|TS-TSO1--------0|
|Allocation Scope:|BOTH| | |Allocation Scope:|BOTH|
|Transport Type:|*GUI*| | |Transport Type:|*ECP*|
|Valid From:|21.07.2020| | |Valid From:|*04.08.2020*|
|Valid To:|*04.08.2020*| | |Valid To:|08.08.2020|
|Distribution Event Mappings:| | | |Distribution Event Mappings:| |
|Event Type:|*Allocation*| | |Event Type:|*Allocation*|
|Scheduling Type:|*FIXED_DELAY*| | |Scheduling Type:|*FIXED_DELAY*|
|Scheduling Value (seconds):|*10*| | |Scheduling Value (seconds):|*10*|
 # Stop docker and start it again on the overlap day,i.e. 08/04/2020 11:50:00
 # In CMM make an allocation On Behalf in Admin's GUI for ES-PT IC for any contract on the overlap day 04.08.2020
 ## Check the generated files in CMI>Outbound>Status overview
 ## As result two files were generated at the same time
|Receiver|Filename|File Type|Transport Type|Event Interval|Scheduled At|Already Sent|Ack|
|TS-TSO1--------0|20200804_OCC_ES-PT_IMPL_001.xml|OCC|GUI|04.08.2020 00:00:00 - 05.08.2020 00:00:00|04.08.2020 13:56:22|(*g)|(*)|
|TS-TSO1--------0|20200804_OCC_ES-PT_EXPL_001.xml|OCC|GUI|04.08.2020 00:00:00 - 05.08.2020 00:00:00|04.08.2020 13:56:22|(*g)|(*)|
 # In CMM make an allocation On Behalf in Admin's GUI for ES-MA IC for any contract on the overlap day 04.08.2020
 ## Check the generated files in CMI>Outbound>Status overview
 ## As result two files were generated at the same time
|Receiver|Filename|File Type|Transport Type|Event Interval|Scheduled At|Already Sent|Ack|
|TS-TSO1--------0|20200804_ATC_ES-MA_002.xml|ATC|ECP|04.08.2020 00:00:00 - 05.08.2020 00:00:00|04.08.2020 14:00:18|(*g)|(*)|
|TS-TSO1--------0|20200804_ATC_ES-MA_001.xml|ATC|GUI|04.08.2020 00:00:00 - 05.08.2020 00:00:00|04.08.2020 14:00:18|(*g)|(*)|

h2. Result:
Issue was reproduced on the old version before the fix.","04/Aug/20 12:08;tr866;Successfully tested after the fix on docker with version 3.1.1-SNAPSHOT-c46829568c26bf71d42baded102406682a9acdc5
Following exactly the same steps from above which reproduced the issue before fix now resulted with generation of only 1 file per IC with the 2 FTCs, having the same date as the end of the 1st FTC and start of the 2nd FTC. (/)",,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 1) update trade evolution am indicator according co specs comments,XP-3318,98299,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,hj444,uv683,hj444,22/Jul/20 11:29,05/Aug/20 09:34,22/Feb/21 13:21,27/Jul/20 09:28,,,3.1.0,,,,,,,,,,"There are some comments added into Trade Evolution chapter into specification attached to XBID-5114. It is in [^DFS910 - AM Indicators reporting_v1.1_MSD.docx]

Mainly they want 15 minute intervals to be counted ""backwards"" than current implementation. It means that 15min quarter denoted with 0 should be the one from `delivery_start - 15min` to `delivery_start`. Additionally there are some changes in column names. Please go through it and implement.

 

Please rename:

interval_order ---> quarter_to_delivery

total quantity ---> volume

 ",,hj444,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jul/20 09:46;hj444;2020-03_TRADES_EVOLUTION_2020-03-29-000923.csv;https://jira.deutsche-boerse.com/secure/attachment/85995/2020-03_TRADES_EVOLUTION_2020-03-29-000923.csv","27/Jul/20 09:27;hj444;demo_tradeEvolution.xlsx;https://jira.deutsche-boerse.com/secure/attachment/86020/demo_tradeEvolution.xlsx","27/Jul/20 09:22;hj444;retest_BR04_22072020.xlsx;https://jira.deutsche-boerse.com/secure/attachment/86019/retest_BR04_22072020.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,18144000,,,,,,,,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0b80k:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 14,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jul/20 09:43;hj444;renaming:
 *quarter_to_delivery*  *volume*  number_of_trades
 4 25 1
 6 55 1

report added
 ","24/Jul/20 14:38;hj444;Docker
Xbid : Version R2.0.45-SNAPSHOT (Build 8b7e8274586caacafcd8e417040dc4a4ef824798)
Reportool : 2.44-SNAPSHOT
Data collection test done :
1. Trades 
2. DTS Winter
3. DST Summer

Excel with values will be added","27/Jul/20 09:25;hj444;excel for retest added
Tested also on datas for demo.
excel added",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"AM order/trade ratio does not exclude 'RGRA', 'CNCL' trades",XP-3317,98292,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,od044,od044,od044,22/Jul/20 10:25,05/Aug/20 09:27,22/Feb/21 13:21,27/Jul/20 15:35,,,3.1.0,,,,,,,,,,"AM order/trade ratio does not exclude 'RGRA', 'CNCL' trades.

Actual
Report included recalled and cancelled trades in total trades value

Expect
Recalled and cancelled should be excluded from calculation ",,od044,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jul/20 10:26;od044;cor_docker.dump;https://jira.deutsche-boerse.com/secure/attachment/85959/cor_docker.dump","27/Jul/20 15:34;od044;cx_111_trade_history_202007271530.csv;https://jira.deutsche-boerse.com/secure/attachment/86052/cx_111_trade_history_202007271530.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,18057600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,22/Jul/20 10:25,,,,,,,,,,,,,None,,,,,,,,"1|y0b9og:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 13,HOT Sprint 14 (S),,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3285-am-atc-utilization,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Jul/20 15:35;od044;Test passed on docker 
- order trade ratio calculation does not include canceled and recalled trade

Test data 
trade history detail
 [^cx_111_trade_history_202007271530.csv] 

a number of order in a specific product:
|XBID_Half_Hour_Power	|4|
|XBID_Hour_Power	|17|
|XBID_Quarter_Hour_Power	|2|

Report:
{code}
month,product_id,order_to_trade_ratio
2020-06,XBID_Hour_Power,2.8333333333333335
2020-06,XBID_Half_Hour_Power,4.0
2020-06,XBID_Quarter_Hour_Power,2.0
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow Read-only SFTP access for customers ,XP-3314,98279,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Critical,Done,,ei349,ei349,21/Jul/20 17:09,30/Sep/20 11:34,22/Feb/21 13:21,21/Sep/20 09:23,,,3.1.2,,,,,,,TechOps,,,"h1. {color:#00875a}Read-Only Access for Customer Reports{color}
h2. Current Situation 

Currently we have only access to sftp with full read/write/delete user permissions. We have plenty of reports published by DBAG and customers need to be able to download those reports without possibility of changing or deleting them. 
h2. Proposed Solution 

Create SFTP user account with r/o rights so customers can download their reports. 
 * Customers willuse a certificate (an ssh key) for login to SFTP (i.e. no password). The solution will be the same as we have for other SFTP
 * The SFTP will be accessible only via the IP address which needs to be allowed (i.e. stored on White-list level) 
 * More information in https://jira.deutsche-boerse.com/browse/XBID-5114

*Hints:* 
 * modify repository 
 ** [https://github.deutsche-boerse.de/dev/energy.xbid.sftp]
 * create two user groups (with write and r/o rights) and assign users properly to them in Ansible inventory below
 ** [https://github.deutsche-boerse.de/dev/energy.xbid.sftp/blob/master/inventory/group_vars/prod.yml]

h2. Acceptance Criteria
 * Customers are able to download their reports
 * access via certificate
 * access only from whitelisted",,cv179,ei349,ek176,iv732,tm431,yo218,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Jul/20 09:05;yo218;image-2020-07-31-09-05-50-460.png;https://jira.deutsche-boerse.com/secure/attachment/86159/image-2020-07-31-09-05-50-460.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,13305600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,Impediment,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|000xro:000c1",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 14,HOT Sprint 15,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,xbid-dev-env,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Jul/20 10:34;cv179;One addition here:
[http://www.proftpd.org/docs/howto/Limit.html]
the limits statement can then be used, e.g. 


{code:java}
<LIMIT WRITE>
  AllowGroup rw
</LIMIT>
 {code}
and then just a little bit experimenting...","27/Jul/20 17:04;iv732;[~zi174] [~ei349] [~yo218]
There are some points which are not clear to me:
1. all customers will access the same directory on the SFTp server, where the reports should be available to ALL customers as READ ONLY?
2. all customers will use the same (NEW) user/key to access that directory? Why not use the same current users and  restrict their access to that specific directory at system level?
3. current users have no access to that directory (even READ ONLY)? ","28/Jul/20 12:45;zi174;Hi [~iv732]
 # Yes, the reports shall be stored in one folder which needs to be accessible for ALL customers
 # The assumed solution is that we will create a new user (account) which will be with read-only rights and this user (account) will access the dedicated folder with the reports. Also, this user (account) will be shared with the customer i.e. ALL customer will use the same user (account)
 # This is something what I don't know. Also, I don't know if all users have an access to the SFTP. Thus, we assumed we will create the new user (account) which will be used for accessing the SFTP for ALL parties and everyone who will have the userId and key and allowed IP address. 

 ","28/Jul/20 13:36;iv732;Sorry still not clear to me. So far as I see, each user just has access to his own SFTP home directory.
How about create a shared directory for all users, with the umask 022?
I still dont see any benefit of creating an extra user for that.","28/Jul/20 14:09;zi174;But these users have write rights. We need to create a new user, which has read-only right and access to the dedicated folder. 

This user will be distributed to the customer and it's up to the customer who will use it. Basically, this solution has a huge benefit that we will hand over the distribution to the customer - we will just need to receive their IP addresses. 

 

 ","28/Jul/20 14:32;iv732;We can set the directory permission on that specific directory, so that all users have only read access. Doing that way doesn't require us to change anything from customer side: they can still use the same user/key to access their own directories with full read/write, and to access this shared directory with only read permission.
It seems that there must be a sound reason to not apply that. Maybe [~yo218] can explain more.","28/Jul/20 14:37;zi174;I understand your point, but as you said, there is probably some obstacle on the way. Thus, we propose the solution described in the ticket to the customer and it was accepted.

 ","29/Jul/20 10:45;yo218;[~iv732] it doesn't work the way you suggested. You are thinking in usual linux directory logic, but the sftp solution is working differently. Each user is allowed to access it's userspace only, so you can't allow them to access a shared directory","29/Jul/20 11:12;yo218;[~zi174] who proposed the solution described in the ticket to the customer and who from operations approved it?

I proposed the following two possible solutions:
 # A new shared account for the customer with read/write access in case the customer would trust each other on not deleting the reports
 # Distribution of the reports to the already existing individual sftp accounts 

I will give you a little more context:

With option 1 we would be able to use only one account for the am reports - the application would use it to upload the file and the customer would use it to download the file. It would be the easiest from our point of view as no scripts are required to distribute the file. Just the customer would have to make sure to just copy the file without deleting them. But maybe that would be high expectations from the customer. To be able to do so, we would have to add all user pubkeys to this single account

With option 2 we would have to use a script which will distribute the report from the account used by the application to each individual user account. 

The option which is described here is somehow a mixture of both solutions - we would have to create yet another account, add all pubkeys to it and use a script to copy the reports from the application user to it. So combining all the efforts of each option without winning anything :(

 ","29/Jul/20 11:50;zi174;[~yo218],

this solution was discussed with [~ei349] and [~cv179] (if I am correct). Basically, it reflects the solution 1, only with assigning the read-only rights instead of read/write rights. 

We will have one shared account which have read-only rights with accessing to one dedicated folder. ","29/Jul/20 12:05;yo218;""only with assigning the read-only rights instead of read/write"". With having read-only rights you are not able to upload files with the same user in my point of view. That's why I was of the opinion it would require another account, independent of the one which is used by the application. And the script which copies the files from the first one to the second","29/Jul/20 12:07;zi174;Might you please align with [~cv179]? [~ei349] had a call with him and the solution should be possible. ","29/Jul/20 12:11;yo218;Did I say somewhere it wouldn't be possible? I just stated it is the solution with the most effort and was trying to understand who chose it an why as I discussed different solutions with [~ll664] prior to my vacation ","29/Jul/20 12:20;zi174;As I said, this solution was chosen according to discussion with Roman and the team. Our understanding was that current setup doesn't allow to have a user with read-only rights. The customer said that they would like to avoid to have read-write rights. We discussed that internally and find out a way that we can have read-only user which will be dedicated to one particular folder.

The second solution with copying the reports to each folder doesn't make sense to us as it's about duplication of lots of same files. 

I understand that this solution is with the most effort but from our point of view it the best from the possibilities. 

What is your main concern? ","29/Jul/20 12:23;yo218;Fair enough, I don't have much of a concern though. As I said, just wanted to know why we are going this way, your last comment explained it","29/Jul/20 12:25;zi174;ok, cool :) ","30/Jul/20 10:55;yo218;Just to double check: we are talking about one single account which is used/shared by all customers, right? ","30/Jul/20 12:55;zi174;Yes, we need one account which will be shared by all customers.","31/Jul/20 09:06;yo218;As agreed with [~ll664], we changed the name of the user which is used by our application to xbid_reporttool_\{env}, so the customers can use xbid_amreports_\{env} for downloading the files. It is working fine for syt1 now. Files are available as readonly for the new user

!image-2020-07-31-09-05-50-460.png|width=1023,height=524!","31/Jul/20 10:16;yo218;[~zi174] pleas provide the following:
 * list of environments (all cutes required?)
 * all ssh pub keys from the customer
 * all IP addresses that should be able to access the sftp server

Remark: the customers who already have access to our sftp server for exchanging files with XBID don't need to provide their IPs again. ","03/Aug/20 08:44;tm431;Hi

as of environments, we will need it firstly for *SIMU* (we will deploy AM indicators which will be part of SLA modul i.e. reporting tool, this Wendsday 5/Aug/2020 in SIMU, and first report I think should be available by the end of August in sftp) and then (in cca 2-3month) to CUTEPX because of DST testing. In other envs. this will be rolled out after UAT test phase finishes, i.e. Februrary 2021","04/Aug/20 16:16;yo218;The user and the SFTP server is prepared for Simu. It will just be usabel for the customer after adding their pubkeys","05/Aug/20 15:07;ei349;waiting for ssh keys from customers and there is a follow up work needed afterwards. ","21/Sep/20 09:23;zi174;This ticket can be closed as public keys and IPs are discussed within the linked tickets.",,,,,,,,
fix owasp problems,XP-3301,98205,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,qo794,jy268,jy268,20/Jul/20 10:46,04/Aug/20 19:53,22/Feb/21 13:21,20/Jul/20 11:25,,,3.1.0,,SLA Report Tool,,,,,,,,Fix owasp problems occuring during build.,,jy268,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,18748800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0b96g:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 13,,,,,,,,,,,,,,,,0.5,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3306,XP-3279-am-snake-case,XP-3291,XP-3324-am-mira-test,XP-3281,develop,XP-3285-am-atc-utilization,master,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
XBID CLONE: XBID-4932-BR08 - Total number of occurrences of ramping constraint,XP-3300,98191,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,zi174,zi174,zi174,20/Jul/20 10:05,31/Aug/20 15:39,22/Feb/21 13:21,20/Jul/20 12:13,,,3.1.0,,,,,,,,,,"Dear David,
 During our internal testing we've found a potential discrepancy between our implementation and the user story. The BR08 ""_Total number of occurrences of ramping constraint_"" says that the report shall provide detail of ramping constraints per interconnector. The discrepancy which we would like to share with you to clarify the correct behavior is regarding the areas. The interconnectors connect two delivery areas, however in the report feedback (XBID-5114) you’re talking about ""Border"". On which level the values shall be provided in the report for columns area_id1 and area_id2?
 * Only EIC codes of delivery areas every time as the interconnectors connect two Delivery Areas (as is written in the User Story) - Implies usage of VDA EIC codes for VDA-PDA interconnectors
 * Primarily Delivery Area EIC codes with the replacing logic of Market Areas (i.e. if 1 MA has only 1 DA, we use EIC of DA, but in case MA has more than 1 DA, we use Market Area EIC code) which is applied to AM indicators.  

Might you please clarify?

Thank you,

Best Regards

Jakub",,ll664,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-5173,,,,,,,,,,,,,,,,,"20/Jul/20 10:34;ll664;da-setup2.png;https://jira.deutsche-boerse.com/secure/attachment/85865/da-setup2.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,18748800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0b93c:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Jul/20 10:05;DMyska@e-bridge.com;Dear DBAG,

When it comes to identification of ICs in the report it seems the second option mentioned by you is the one to be used - we just formulated it in slightly different way:
 * DA-VDA IC:  is to be replaced by DA-PDA, if PDA or DA is part of MA with more than one DA the relevant EIC code is replaced by MA EIC code

We noticed with your question other corner case - when the ramping constraint is introduced on VDA-PDA IC it shall be considered within calculation of occurrences on level of DA-VDA IC (please consider to add example of this situation to specifications).

Best regards

David","20/Jul/20 10:40;ll664;!da-setup2.png!

For the corner case you described, we'd like to clarify it in the context of the ""classic"" VDA setup (image above), where VDA2's parent is DA2 and all ICs have a ramping constraint.

 

We understand that if a ramping occurs on VDA2-DA2 interconnector, it should be counted into one of the ""outer"" ICs. But here, there are two options, either count it to DA1-VDA2 or DA3-VDA2. So we need to find a rule which IC to prefer.

 

Here, the we see two approaches:

 
 * implement decision rule for multiple ICs, i.e sort them alphabetically and pick first
 * analyze the trade path and pick ""previous"" IC

 

However, DBAG sees both options as sub-optimal. Especially the second one would make the data aggregation step extremely complex as the every trade path would need to be analyzed to fix the potential VAs. Moreover, this would need to be thoroughly analyzed because with introduction of ""multiple-VAs"" chained, as it is planned for Polis market,  new corner cases would arise.

 

In order to avoid needlessly complex solutions, we suggest to add exception for VDA-PDA ICs and report them transparently as-is. That would mean no replacement for VDA EIC in the reports. The ramping occurrences that happened on those ICs would transparently appear in the report, without any translation logic for VDA areas.

 

 

[~zi174], pleas check.

 

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
update trade evolution am indicator according co specs comments,XP-3291,98013,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,hj444,uv683,uv683,14/Jul/20 15:10,04/Aug/20 19:45,22/Feb/21 13:21,22/Jul/20 11:33,,,3.1.0,,,,,,,,,,"There are some comments added into Trade Evolution chapter into specification attached to XBID-5114. It is in [^DFS910 - AM Indicators reporting_v1.1_MSD.docx]

Mainly they want 15 minute intervals to be counted ""backwards"" than current implementation. It means that 15min quarter denoted with 0 should be the one from `delivery_start - 15min` to `delivery_start`. Additionally there are some changes in column names. Please go through it and implement.

 

Please rename:

interval_order ---> quarter_to_delivery

total quantity ---> volume

 ",,hj444,ll664,uv683,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3318,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,18576000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0b80g:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 13 (S),,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3279-am-snake-case,XP-3306,XP-3324-am-mira-test,XP-3291,XP-3281,XP-3285-am-atc-utilization,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Jul/20 10:47;ll664;Agreed with [~zi174]  that as we switched the numbering logic based on contract delivery start, should also filter the trades into the reports based on the contract's deliery start a not the expiry point.","21/Jul/20 12:20;hj444;Test:
1. Renaming - done. 
 2. Verification of additional changes in implementation - test started.","22/Jul/20 11:29;hj444;Issue split into:
|XP-3318|(Split 1) update trade evolution am indicator according co specs comments|
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Get rid of "" character in case of long entries in AM reports",XP-3289,98003,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,od044,jy268,jy268,14/Jul/20 13:31,04/Aug/20 19:53,22/Feb/21 13:21,16/Jul/20 16:07,,,3.1.0,,SLA Report Tool,,,,,,,,"Get rid of "" character in case of long entries in AM reports",,jy268,od044,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,19008000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|000y0s:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 13,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3306,XP-3279-am-snake-case,XP-3291,XP-3324-am-mira-test,XP-3281,develop,XP-3285-am-atc-utilization,master,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Jul/20 16:07;od044;Test passed on docker with report-tool 2.44-snapshot
- the "" is not used anymore",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Net Position averaged - daily position,XP-3287,97985,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,zi174,zi174,13/Jul/20 17:30,04/Aug/20 19:53,22/Feb/21 13:21,31/Jul/20 15:40,,,3.1.0,,,,,,,,,,"The net position for the day is calculated as follow:
 # We calculate a net position from all delivery periods from the day for which at least one trade has been executed. In our case above, we sum up trade 1 and trade 2 for all quarters -> SUM(Net position) = 625.
 # *Once the net position is calculated, the sum is averaged by number of quarters in the day (in our case 8), i.e. 625/8 = 78.125*
 # The daily average is 78.125

 

-----> We need to consider all values for the calculation. Currently only quarters where trade was concluded are considered. It means also trades with 0 zero net position needs to be considered as well. It means that the sum will be averaged by 96 as we have UTC day. 

So the step 2, will be:
 # Once the net position is calculated, the sum is averaged by numbers of quarters in the day (UTC, thus 96 quarters), i.e. 625/96 = 6,510

*Please also check the columns as from my point of view it doesn't make any sense to have columns ""month"" and ""delivery_date""*

 ",,od044,qo794,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,17712000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,13/Jul/20 17:30,,,,,,,,,,,,,None,,,,,,,,"1|y0b9ok:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 14 (S),,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,develop,XP-3285-am-atc-utilization,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Jul/20 13:18;zi174;[~qo794] might you please check my last comment ""*Please also check the columns as from my point of view it doesn't make any sense to have columns ""month"" and ""delivery_date""?*

The report still contains the column ""month"", from my point of view this column is redundant as we have ""delivery_date"" column. What do you think?","28/Jul/20 17:11;qo794;The customers explicitly stated here XP-3281 they wanted to add the ""month"" column to this report, it was not there before. Even though it did not make any sense to us we introduced this column as requested. Maybe it's a mistake from their side and the new column should be added to NET_POSITION report and not to NET_POSITION_AVERAGED_DAILY?","29/Jul/20 10:21;zi174;Hi [~qo794],

I checked again customer's feedback and probably it's my mistake, they requested the column month mainly for ""NET_POSITION_AVERAGED_QUARTERLY"". For daily values they just mentioned that they would like to have the column ""delivery_date"". So, please delete the column ""month"" from this report.

 

Thank you

Jakub","31/Jul/20 15:40;od044;Test passed on docker report-tool 2.45
- net position average daily is calculated as the following the sum is averaged by numbers of quarters in the day reps. 96 quarter e.g SUM(Net position) = 625 -> net position averga = 625/96
- column month is omitted 

Report example:
{code}
delivery_date,area_id,volume
2020-06-15,10Y1001A1001A39I,-6.250
2020-06-15,10Y1001A1001A82H,0.078
2020-06-16,10Y1001A1001A82H,0.052
2020-06-15,10YBE----------2,-0.073
2020-06-16,10YDK-1--------W,-0.052{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,
ATC Utilization ratio,XP-3285,97973,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tr866,zi174,zi174,13/Jul/20 16:15,04/Aug/20 19:53,22/Feb/21 13:21,27/Jul/20 09:16,,,3.1.0,,,,,,,,,,"This ticket doesn't affect the calculation formula, only the column names needs changing and populated with particular data.  

 

ATC Utilizatio ration
 * delivery_start_date_time to be used with time_resolution instead of delivery start and end date 
 *  please rename out area -> source_area_id 
 * in area -> sink_area_id",,ei349,tr866,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Jul/20 13:56;tr866;2020-07_ATC_UTILIZATION_2020-07-29-133046.csv;https://jira.deutsche-boerse.com/secure/attachment/86091/2020-07_ATC_UTILIZATION_2020-07-29-133046.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,18057600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0b9hq:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 14,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,develop,XP-3285-am-atc-utilization,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Jul/20 14:18;ei349;[~zi174]: please also link external Jira with this request. ","28/Jul/20 13:58;tr866;Successfully tested in docker with version 2.44-SNAPSHOT-17d5c5e79a5b5322f8c3a6e84566b11b05bd4e0c
Names of the columns changed correctly
|out_area|->|source_area_id|(/)
|in_area|->|sink_area_id|(/)
|delivery_start_date|=|delivery_start_date|(/)
|delivery_end_date|->|time_resolution|(/)
|utilization_ratio|=|utilization_ratio|(/)

Correct values for time_resolution are stored,i.e. 15,30,60 and delivery_start_date still indicating the correct time of delivery start in UTC.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
2018-02_ORDER_TRADE_RATIO_2020-06-29-110253 report,XP-3282,97958,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,od044,zi174,zi174,13/Jul/20 12:05,04/Aug/20 19:53,22/Feb/21 13:21,15/Jul/20 17:10,,,3.1.0,,,,,,,,,,"Please modify the column ""month"" to be filled with values in the format YYYY-MM",,jy268,od044,qo794,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,19094400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|000y0r:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 13,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3279-am-snake-case,XP-3306,XP-3282,XP-3291,XP-3324-am-mira-test,XP-3281,XP-3285-am-atc-utilization,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Jul/20 09:34;qo794;As agreed this change should be done for all reports within XP-3280","15/Jul/20 12:08;jy268;This one was different, as only month as a word was changed to formatted one with year.","15/Jul/20 17:10;od044;Test passed on docker with report-tool version 2.44-snapshot 
- month format is in YYYY-MM 

example:
{code}
month,product,order_to_trade_ratio
2020-06,User_Defined_Product,3.21875
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Column names cross reports,XP-3281,97956,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,od044,zi174,zi174,13/Jul/20 11:20,04/Aug/20 19:53,22/Feb/21 13:21,21/Jul/20 16:09,,,3.1.0,,,,,,,,,,"Please incorporated the changes below:
 * column label “area” to be replaced by “area_id
 * any column referring to energy to be labelled “volume” and be in MWh e.g order_volumee etc.

 
 * 2018-02_VOLUME_PER_BORDER_2020-06-29-110420
 ** {color:#172b4d}the column needs to be renamed to delivery_date{color} (/)
 * 2018-02_TOTAL_TRADES_WITH_HOURS_TO_DELIVERY_2020-06-29-110357
 ** the column needs to be renamed to area_id (/)
 * 2018-02_TOTAL_TRADES_2020-06-29-110345
 ** the column needs to be renamed to area_id (/)
 * 2018-02_SUBMITTED_ORDERS_2020-06-29-110332
 ** the column needs to be renamed to delivery_date (/)
 ** the column need to be renamed to area_id and product_id (/)
 * 2018-02_ORDERS_VOLUME_2020-06-29-110305
 ** the column needs to be renamed to delivery_date (/)
 ** the column needs to be renamed to area_id (/)
 * 2018-02_ORDER_TRADE_RATIO_2020-06-29-110253
 ** the column needs to be renamed to product_id (/)
 ** Instead of month name we suggest to use YYYY-MM (/)

 * 2018-02_NET_POSITION_AVERAGED_QUARTERLY_2020-06-29-110233
 ** It's expected to refer to volume as in other reports instead to quantity (/)
 ** First column is not delivery_start_date but time - delivery_start_time (/)
 ** Month identification is missing, please use YYYY-MM (/)

 * 2018-02_NET_POSITION_AVERAGED_DAILY_2020-06-29-110225
 ** a column needs to be added - ""month"" (/)
 ** Volume needs to be used instead of quantity (/)

 * 2018-02_NET_POSITION_2020-06-29-110217
 ** {color:#de350b}we're waiting for feedback regarding provided example{color}
 ** {color:#172b4d}please rename:{color}
 *** IMPORT -> IMPORT VOLUME (plewmic: I suppose it to be imported_volume) (/)
 *** EXPORT -> EXPORT VOLUME (plewmic: I suppose it to be exported_volume) (/)
 *** QUANTITY - NETTED VOLUME (plewmic: I suppose it to be netted_volume) (/)

 * Explicit/Implicit allocation volume

 ** day shall be ""delivery_date"" (/)",,od044,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Jul/20 15:16;od044;2020-06_ATC_UTILIZATION_2020-07-21-125440.csv;https://jira.deutsche-boerse.com/secure/attachment/85935/2020-06_ATC_UTILIZATION_2020-07-21-125440.csv","21/Jul/20 15:16;od044;2020-06_EXPLICIT_IMPLICIT_ALLOCATIONS_2020-07-21-125440.csv;https://jira.deutsche-boerse.com/secure/attachment/85936/2020-06_EXPLICIT_IMPLICIT_ALLOCATIONS_2020-07-21-125440.csv","21/Jul/20 15:16;od044;2020-06_NET_POSITION_2020-07-21-125440.csv;https://jira.deutsche-boerse.com/secure/attachment/85937/2020-06_NET_POSITION_2020-07-21-125440.csv","21/Jul/20 15:16;od044;2020-06_NET_POSITION_AVERAGED_DAILY_2020-07-21-125440.csv;https://jira.deutsche-boerse.com/secure/attachment/85938/2020-06_NET_POSITION_AVERAGED_DAILY_2020-07-21-125440.csv","21/Jul/20 15:16;od044;2020-06_NET_POSITION_AVERAGED_QUARTERLY_2020-07-21-125440.csv;https://jira.deutsche-boerse.com/secure/attachment/85939/2020-06_NET_POSITION_AVERAGED_QUARTERLY_2020-07-21-125440.csv","21/Jul/20 15:16;od044;2020-06_ORDERS_VOLUME_2020-07-21-125440.csv;https://jira.deutsche-boerse.com/secure/attachment/85941/2020-06_ORDERS_VOLUME_2020-07-21-125440.csv","21/Jul/20 15:16;od044;2020-06_ORDER_TRADE_RATIO_2020-07-21-125440.csv;https://jira.deutsche-boerse.com/secure/attachment/85940/2020-06_ORDER_TRADE_RATIO_2020-07-21-125440.csv","21/Jul/20 15:16;od044;2020-06_RAMPING_OCCURRENCE_2020-07-21-125440.csv;https://jira.deutsche-boerse.com/secure/attachment/85942/2020-06_RAMPING_OCCURRENCE_2020-07-21-125440.csv","21/Jul/20 15:16;od044;2020-06_SUBMITTED_ORDERS_2020-07-21-125440.csv;https://jira.deutsche-boerse.com/secure/attachment/85943/2020-06_SUBMITTED_ORDERS_2020-07-21-125440.csv","21/Jul/20 15:16;od044;2020-06_TOTAL_TRADES_2020-07-21-125440.csv;https://jira.deutsche-boerse.com/secure/attachment/85944/2020-06_TOTAL_TRADES_2020-07-21-125440.csv","21/Jul/20 15:16;od044;2020-06_TOTAL_TRADES_WITH_HOURS_TO_DELIVERY_2020-07-21-125440.csv;https://jira.deutsche-boerse.com/secure/attachment/85945/2020-06_TOTAL_TRADES_WITH_HOURS_TO_DELIVERY_2020-07-21-125440.csv","21/Jul/20 15:16;od044;2020-06_TRADES_EVOLUTION_2020-07-21-125440.csv;https://jira.deutsche-boerse.com/secure/attachment/85946/2020-06_TRADES_EVOLUTION_2020-07-21-125440.csv","21/Jul/20 15:16;od044;2020-06_VOLUME_PER_BORDER_2020-07-21-125440.csv;https://jira.deutsche-boerse.com/secure/attachment/85947/2020-06_VOLUME_PER_BORDER_2020-07-21-125440.csv",,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,18576000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0b7ns:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 13,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3306,XP-3279-am-snake-case,XP-3324-am-mira-test,XP-3281,XP-3285-am-atc-utilization,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Jul/20 15:16;od044;Test on docker version 2.44-SNATSHOT
- VOLUME_PER_BORDER (/) 
{code}
delivery_date,number_of_borders,traded_volume
2020-06-15,0,5.75000
2020-06-15,1,612.50000
{code}
- TOTAL_TRADES_WITH_HOURS_TO_DELIVERY (/) 
{code}
contract,area_id,hours_to_delivery,number_of_trades
20200615 19:00-20200615 19:15,10Y1001A1001A82H,1,1
20200615 19:00-20200615 19:30,10Y1001A1001A82H,1,1
{code}
- TOTAL_TRADES (/) 
{code}
contract,area_id,number_of_trades
20200615 19:00-20200615 19:15,10Y1001A1001A82H,1
20200615 19:00-20200615 19:30,10Y1001A1001A82H,1
{code}
- SUBMITTED_ORDERS (/) 
{code}
delivery_date,product_id,area_id,number_of_orders
2020-06-15,User_Defined_Product,TSDA10---------U,1
2020-06-15,User_Defined_Product,TSDA11---------J,1
{code}
- ORDERS_VOLUME (/) 
{code}
delivery_date,area_id,orders_volume
2020-06-15,TSDA10---------U,3.00000
2020-06-15,10Y1001A1001A82H,19.00000
{code}
- ORDER_TRADE_RATIO (/) 
{code}
month,product_id,order_to_trade_ratio
2020-06,XBID_Hour_Power,2.0
2020-06,User_Defined_Product,2.5
{code}
- NET_POSITION_AVERAGED_QUARTERLY (/) 
{code}
month,delivery_start_time,area_id,volume
2020-06,18:00,10Y1001A1001A39I,-150.000
2020-06,18:15,10Y1001A1001A39I,-150.000
{code}
- NET_POSITION_AVERAGED_DAILY (/) 
{code}
month,delivery_date,area_id,volume
2020-06,2020-06-15,10Y1001A1001A39I,-150.000
2020-06,2020-06-15,10Y1001A1001A82H,0.938
2020-06,2020-06-16,10Y1001A1001A82H,1.250
{code}
- NET_POSITION (/) 
{code}
area_id,market_time_unit,imported_volume,exported_volume,netted_volume
10Y1001A1001A39I,60,0.00000,600.00000,-600.00000
10Y1001A1001A82H,15,0.75000,0.75000,0.00000
10Y1001A1001A82H,30,1.50000,0.00000,1.50000
{code}
- EXPLICIT_IMPLICIT_ALLOCATIONS (/) 
{code}
delivery_date,source_area_id,sink_area_id,explicit_allocation_volume,implicit_allocation_volume
2020-06-15,10YNL----------L,10YNO-2--------T,0,7.00000
2020-06-15,10YNO-1--------2,10YNO-2--------T,0,7.00000
2020-06-15,TS-MA1---------P,TS-MA2---------E,0,5.00000
{code}

Full files can find in attachments",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Date format - use the same format for all reports ,XP-3280,97952,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,zi174,zi174,13/Jul/20 10:47,04/Aug/20 19:53,22/Feb/21 13:21,28/Jul/20 13:04,,,3.1.0,,,,,,,,,,"Check if ready and update if not: 

 

Please use the same date format for all reports:

YYYY-MM-DD

YYYY-MM (in case the report shall include only month)",,od044,qo794,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Jul/20 13:00;od044;2020-06_EXPLICIT_IMPLICIT_ALLOCATIONS_2020-07-28-105140.csv;https://jira.deutsche-boerse.com/secure/attachment/86084/2020-06_EXPLICIT_IMPLICIT_ALLOCATIONS_2020-07-28-105140.csv","28/Jul/20 13:00;od044;2020-06_NET_POSITION_AVERAGED_DAILY_2020-07-28-105140.csv;https://jira.deutsche-boerse.com/secure/attachment/86087/2020-06_NET_POSITION_AVERAGED_DAILY_2020-07-28-105140.csv","28/Jul/20 13:00;od044;2020-06_NET_POSITION_AVERAGED_QUARTERLY_2020-07-28-105140.csv;https://jira.deutsche-boerse.com/secure/attachment/86088/2020-06_NET_POSITION_AVERAGED_QUARTERLY_2020-07-28-105140.csv","28/Jul/20 13:00;od044;2020-06_ORDERS_VOLUME_2020-07-28-105140.csv;https://jira.deutsche-boerse.com/secure/attachment/86081/2020-06_ORDERS_VOLUME_2020-07-28-105140.csv","28/Jul/20 13:00;od044;2020-06_ORDER_TRADE_RATIO_2020-07-28-105140.csv;https://jira.deutsche-boerse.com/secure/attachment/86085/2020-06_ORDER_TRADE_RATIO_2020-07-28-105140.csv","28/Jul/20 13:00;od044;2020-06_SUBMITTED_ORDERS_2020-07-28-105140.csv;https://jira.deutsche-boerse.com/secure/attachment/86083/2020-06_SUBMITTED_ORDERS_2020-07-28-105140.csv","28/Jul/20 13:00;od044;2020-06_VOLUME_PER_BORDER_2020-07-28-105140.csv;https://jira.deutsche-boerse.com/secure/attachment/86080/2020-06_VOLUME_PER_BORDER_2020-07-28-105140.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,18057600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0b9om:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 14 (S),,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Jul/20 08:45;qo794;Seems to me all reports are compliant with the requirement, please retest.","28/Jul/20 13:04;od044;Test passed on report-tools 2.44-Snapshot-1ff59092d5c795a147d7916f55de7b7cdcf57eb0
The date values are in the correct format. The month and date value are used in the following report:
 [^2020-06_EXPLICIT_IMPLICIT_ALLOCATIONS_2020-07-28-105140.csv]
 [^2020-06_NET_POSITION_AVERAGED_DAILY_2020-07-28-105140.csv] 
 [^2020-06_NET_POSITION_AVERAGED_QUARTERLY_2020-07-28-105140.csv] 
 [^2020-06_ORDER_TRADE_RATIO_2020-07-28-105140.csv] 
 [^2020-06_ORDERS_VOLUME_2020-07-28-105140.csv] 
 [^2020-06_SUBMITTED_ORDERS_2020-07-28-105140.csv] 
 [^2020-06_VOLUME_PER_BORDER_2020-07-28-105140.csv] ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Snake case naming for all reports of AM Indicators,XP-3279,97951,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tr866,zi174,zi174,13/Jul/20 10:45,04/Aug/20 19:53,22/Feb/21 13:21,28/Jul/20 14:52,,,3.1.0,,,,,,,,,,"Check if ready and update if not: 

- Please change the columns name to snake_case_naming",,ek176,tr866,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,17971200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0b9hr:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 14,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3279-am-snake-case,XP-3285-am-atc-utilization,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Jul/20 13:15;ek176;There was no functional code change (all attrs were already in snake_case).","28/Jul/20 14:52;tr866;Testing on docker with version Report Tool 2.44-SNAPSHOT-17d5c5e79a5b5322f8c3a6e84566b11b05bd4e0c
 The following names of the columns were checked for snake_case_naming for the following Reports. For each report it was checked if data were imported in the DB table and if reports could be generated.
||Number||Name of the report||DB columns||Collect data into DB||Report Generation||
|1|Total traded volume per number of crossed borders|(/)|(/)|(/)|
|2|Net Position averaged - daily|(/)|(/)|(/)|
|3|Net Position averaged - quarterly|(/)|(/)|(/)|
|4|Explicit/Implicit allocation volume|(/)|(/)|(/)|
|5|Evolution of number of trades|(/)|(/)|(/)|
|6|Order/trade ratio|(/)|(/)|(/)|
|7|The total number of submitted orders per product|(/)|(/)|(/)|
|8|The total submitted order volume in MWh per market area|(/)|(/)|(/)|
|9|Total number of occurrences of ramping constraint|(/)|(/)|(/)|
|10|The total number of trades|(/)|(/)|(/)|
|11|ATC utilization rate|(/)|(/)|(/)|
|12|Net position|(/)|(/)|(/)|",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Order Volume AM indicator based on delivery date,XP-3272,97893,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,od044,qo794,qo794,09/Jul/20 12:14,04/Aug/20 19:53,22/Feb/21 13:21,13/Jul/20 17:14,,,3.1.0,,,,,,,,,,"Based on the customers review https://jira.deutsche-boerse.com/browse/XBID-5114?focusedCommentId=285354&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-285354 the Orders Volume AM indicator should be generated based on delivery days, not on days when orders have been received.",,od044,qo794,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Jul/20 17:14;od044;2020-06_ORDERS_VOLUME_2020-07-13-151020.csv;https://jira.deutsche-boerse.com/secure/attachment/85641/2020-06_ORDERS_VOLUME_2020-07-13-151020.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,19267200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|000y0q:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 13,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3264,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Jul/20 17:14;od044;Test passed on docker  2.43-SNAPSHOT
- order volumes are generated base on delivery date

 [^2020-06_ORDERS_VOLUME_2020-07-13-151020.csv] ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Internal - report examples feedback,XP-3270,97886,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Trivial,Done,zi174,zi174,zi174,09/Jul/20 10:21,31/Aug/20 15:38,22/Feb/21 13:21,10/Jul/20 12:56,,,3.1.0,,,,,,,,,,"General comments +DBAG:+
 * we use snake case naming cross the reports, for example area_id, product_id etc, Might you please confirm that it is ok for you?
 * provided reports were only examples before internal testing. Therefore, some naming inconsistency might appear.

General comments +the customer+
 * Wherever day is referred the same format to be used - format YYYY-MM-DD (to be confirmed with DBAG if this or other one would be more suitable) - {color:#ff0000}agreed, we will used the mentioned format YYYY-MM-DD{color}
 * column label “area” to be replaced by “areaID” {color:#ff0000}- as mentioned above, we would like to use snake case naming. Thus, it will be area_id{color}
 * any column referring to energy to be labelled “volume” and be in MWh (now volume and quantity seems to be used without consistency) {color:#ff0000}- we will align it cross the reports. {color}

For the provided examples of reports we have following preliminary comments:
 * 2018-02_VOLUME_PER_BORDER_2020-06-29-110420
 ** proposal is to indicate if we count trading day or delivery day (DELIVERY_DATE as column name suggested) {color:#ff0000}- Delivery day is used - the column will be delivery_date as you suggested{color}
 * 2018-02_TOTAL_TRADES_WITH_HOURS_TO_DELIVERY_2020-06-29-110357
 ** areaID label to be used {color:#ff0000}- agreed, the column will be area_id as mentioned above{color}
 * 2018-02_TOTAL_TRADES_2020-06-29-110345
 ** areaID label to be used {color:#ff0000}- agreed, the column will be area_id as mentioned above{color}
 * 2018-02_SUBMITTED_ORDERS_2020-06-29-110332
 ** proposal is to indicate if we count trading day or delivery day (DELIVERY_DATE as column name suggested) {color:#ff0000}- Delivery day is used - the column will be delivery_date as you suggested{color}
 ** areaID, productID label to be used {color:#ff0000}- agreed, the column will be area_id and product_id as mentioned above{color}
 * 2018-02_ORDERS_VOLUME_2020-06-29-110305
 ** proposal is to indicate if we count trading day or delivery day (DELIVERY_DATE as column name suggested) {color:#ff0000}- Delivery day is used - the column will be delivery_date as you suggested{color}
 ** areaID label to be used {color:#ff0000}- agreed, the column will be area_id as mentioned above{color}
 * 2018-02_ORDER_TRADE_RATIO_2020-06-29-110253
 ** use “productID” label {color:#ff0000}- agreed, the column will be area_id as mentioned above{color}
 ** Instead of month name we suggest to use YYYY-MM - {color:#ff0000}agreed, we will provide values YYYY-MM as you requested{color}

 * 2018-02_NET_POSITION_AVERAGED_QUARTERLY_2020-06-29-110233
 ** We expect to refer again to volume as in other reports instead to quantity {color:#ff0000}- agreed {color}
 ** First column is not delivery_start_date but time {color:#ff0000}- will be fixed{color}
 ** Month identification is missing - {color:#ff0000}will be added - the same format as for ORDER TRADE RATIO, i.e. YYYY-MM{color}

 * 2018-02_NET_POSITION_AVERAGED_DAILY_2020-06-29-110225
 ** proposal is to indicate if we count trading day or delivery day (DELIVERY_DATE as column name suggested) {color:#ff0000}- Delivery day is used - the column will be delivery_date as you suggested{color}
 ** Volume to be used instead of quantity {color:#ff0000}- agreed{color}

 * 2018-02_NET_POSITION_2020-06-29-110217
 ** There should not be one value per month but individual value for each 60 minutes/15 minutes (see also our feedback to XBID-4932 updated User story) - {color:#ff0000}please see modified example if it is in accordance with your requirement [^2018-02_NET_POSITION_2020-06-29-110217.csv]{color}
 ** Gross values missing for now - {color:#ff0000}the report was generated before internal testing, gross values are going to be included, please see the new example{color}

 * Explicit/Implicit allocation volume 
 ** Border shall be identified as sourceareaID, sinkareaID considering the direction need to be identified and EIC codes shall be used {color:#ff0000}- ok, we'll implement it like that (source_area_id, sink_area_id){color}

 * Ramping occurrences
 ** Border identification to be aligned with item above (e.g. areaID1, areadID2) {color:#ff0000}- agreed, the column will be area_id1 and area_id2, please also see XBID-5173 with a clarification{color}
 ** deliveryStartDateTime to be used with TIME_Resolution instead of delivery start and end date {color:#ff0000}- agreed, we will modify it{color}",,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3281,,,,,,,"09/Jul/20 12:14;zi174;2018-02_NET_POSITION_2020-06-29-110217.csv;https://jira.deutsche-boerse.com/secure/attachment/85511/2018-02_NET_POSITION_2020-06-29-110217.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,19699200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0b78g:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Check Catrina test Client against R3.1 ,XP-3268,97881,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,ei349,ei349,09/Jul/20 09:09,31/Aug/20 15:39,22/Feb/21 13:21,31/Jul/20 13:34,,,3.1.0,,,,,,,,,,check specifically if Catrina works with latest interfaces and updated certificates. ,,ei349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,19699200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3449,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|000xtm:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Dev SFTP Itegration - SFTP server configuration,XP-3264,97857,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tr866,zi174,ei349,08/Jul/20 15:13,04/Aug/20 19:53,22/Feb/21 13:21,15/Jul/20 16:04,,,3.1.0,,,,,,,,,,"h1. {color:#00875a}AM Indicators Reports SFTP Automation{color}
h2. Proposed solution 

Requirements:
 * Reports must be made available on a SFTP server hosted by DBAG and accessible to NEMOs and TSOs
 * Reports should remain available on the DBAG sFTP server for a period of at least 12 months after the end of the report period.

 

The expected behavior is described (in the spec) as follow:

Monthly reports generation produces report files each month. All generated reports are stored on the SFTP server which is accessible to NEMOs and TSOs. The reports are stored and available for a period of 12 months. During the defined period every report may be downloaded by NEMOs and TSOs. After 12 months the reports are deleted and cannot be accessible anymore. The files are available in a CSV format as is defined by each report format.

--------------

Please during implementation this solution, validate if the statement above is in accordance with the real implementation. Also if the description should be enhanced some important information, please let [~zi174] know.

*Hints:* 

 
 * Avoidance of duplicity because of master-master solution:
 ** Consul master election 
 *** new key/value store might be needed
 ** -Let files override themselves- (risk of race condition)
 * Monitoring
 ** 0 bytes files check 
 ** grafana 
 ** alert in xbid_prod_issues would be nice (create future task)

h2. Acceptance Criteria
 * reports automatically uploaded to SFTP server (Report Tool)
 * new subdirectory
 * reports automatically deleted after 12 months (Report Tool)
 * no duplicate files on sftp server
 * automatic monitoring - currently only in Grafana
 * create future task for automated alerting in case of problem ",,ei349,ll664,tr866,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Jul/20 08:35;ll664;id_rsa_xbid_amreports_inte;https://jira.deutsche-boerse.com/secure/attachment/85712/id_rsa_xbid_amreports_inte",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,19180800,,,,,,,,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y13:yw",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 13 (S),,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3306,XP-3324-am-mira-test,XP-2979-postgresql,XP-3264,develop,XP-3285-am-atc-utilization,XP-3230,XP-2232,master,XP-3279-am-snake-case,XP-4273-owasp-zap-enable,xbid-dev-env,XP-3291,XP-3281,XP-4526-resource-managment-fix,,,,,,,,,,,,,,,,,,,true,"14/Jul/20 08:51;ll664;SFTP integration ready. A new job {{am-distribute-reports-to-sftp}} has been introduced. By default runs every 3rd day of the month at 11:00AM UTC and expects all AM indicators files for the previous month to be already generated on disk otherwise it fails.

The job can be also run manually from CLI.

The job also deletes all files from SFTP folder older than 12 months.","15/Jul/20 08:36;ll664;Report Tool 2.43 deployed to syt1 with SFTP integration enabled.

SFTP Connection details:

Server: XBINTECBN1
Port: 40300
User: xbid_amreports_inte
Output dir: OUT/am

Private key attached  [^id_rsa_xbid_amreports_inte] 
","15/Jul/20 13:34;tr866;Tested on Syt1 with 2.43 deployed

- Connected to SFTP to check the content of the OUT/am folder:
Server: xbintecha1
Port: 40300
User: xbid_amreports_inte
- Connected to SLA1 to run the report tool jobs, check the SLA logs and generated files
Server: xbsyt1sla1
- Cleaned-up the /xbid/logs/am folder on SLA1 server

# Generated all AM indicator reports for 05th month May
# Ran the am-distribute-reports-to-sftp job
# No report was distributed, the job failed with exception: (/)
{code:java}
2020-07-15T11:14:07.999Z [h-jobs-thread-1][][] INFO  o.s.b.c.j.SimpleStepHandler - Executing step: [distribute-reports]
2020-07-15T11:14:08.003Z [h-jobs-thread-1][][] ERROR o.s.b.c.s.AbstractStep - Encountered an error executing step distrib
ute-reports in job am-distribute-reports-to-sftp
java.lang.IllegalStateException: Not all of the reports are ready for month 2020-06-01T00:00Z, skipping distribution. Mis
sing: [ATC_UTILIZATION]
{code}
# Renamed ATC_UTILIZATION report for 05 month to 06 mont(as generation was failing due to know bug)
# Generated all other reports for 06 month except ""am-generate-trade-evolution-report"" being before last one on the list of jobs, and in alphabetical order on the list of files
# Ran the am-distribute-reports-to-sftp job again
# No report was distributed, the job failed with exception: (/)
{code:java}
2020-07-15T12:14:16.469Z [h-jobs-thread-1][][] INFO  o.s.b.c.j.SimpleStepHandler - Executing step: [distribute-reports]
2020-07-15T12:14:16.473Z [h-jobs-thread-1][][] ERROR o.s.b.c.s.AbstractStep - Encountered an error executing step distribute-reports in job am-distribute-reports-to-sftp
java.lang.IllegalStateException: Not all of the reports are ready for month 2020-06-01T00:00Z, skipping distribution. Missing: []
{code}
_Note: the name of the report is not mentionned in the exception this time_
# Generated also ""am-generate-trade-evolution-report""  to have all reports existing for 06 month
# Ran the am-distribute-reports-to-sftp job again
# Generation failed again with the following exception(same as last time): (/)
{code:java}
2020-07-15T12:18:46.178Z [h-jobs-thread-1][][] INFO  o.s.b.c.j.SimpleStepHandler - Executing step: [distribute-reports]
2020-07-15T12:18:46.182Z [h-jobs-thread-1][][] ERROR o.s.b.c.s.AbstractStep - Encountered an error executing step distrib
ute-reports in job am-distribute-reports-to-sftp
java.lang.IllegalStateException: Not all of the reports are ready for month 2020-06-01T00:00Z, skipping distribution. Mis
sing: []
{code}
# Problem was there were folders in am directory where I kept backup files (/)
# After obsolete folders were deleted from the directory the  am-distribute-reports-to-sftp ran successfully and all files appeared in SFTP /OUT/am/ folder (/)
{code:java}
2020-07-15T12:44:34.653Z [nio-8080-exec-8][][] INFO  o.s.b.c.l.s.SimpleJobOperator - Checking status of job with name=am-distribute-reports-to-sftp
2020-07-15T12:44:34.654Z [nio-8080-exec-8][][] INFO  o.s.b.c.l.s.SimpleJobOperator - Attempting to launch job with name=am-distribute-reports-to-sftp and parameters=RUN_TIME(long)=1594817074653
2020-07-15T12:44:34.658Z [h-jobs-thread-1][][] INFO  o.s.b.c.l.s.SimpleJobLauncher - Job: [FlowJob: [name=am-distribute-reports-to-sftp]] launched with the following parameters: [{RUN_TIME=1594817074653}]
2020-07-15T12:44:34.719Z [h-jobs-thread-1][][] INFO  o.s.b.c.j.SimpleStepHandler - Executing step: [delete-old-reports]
2020-07-15T12:44:34.722Z [h-jobs-thread-1][][] INFO  c.d.e.x.r.a.AmReportDistributionService - Deleting AM reports on SFTP server older than 2019-07-15T12:44:34.653Z
2020-07-15T12:44:34.768Z [h-jobs-thread-1][][] INFO  o.s.b.c.s.AbstractStep - Step: [delete-old-reports] executed in 49ms
2020-07-15T12:44:34.829Z [h-jobs-thread-1][][] INFO  o.s.b.c.j.SimpleStepHandler - Executing step: [distribute-reports]
2020-07-15T12:44:34.868Z [h-jobs-thread-1][][] INFO  c.d.e.x.r.a.AmReportDistributionService - Copied 2020-06_ORDERS_VOLUME_2020-07-15-120750.csv to SFTP
2020-07-15T12:44:34.903Z [h-jobs-thread-1][][] INFO  c.d.e.x.r.a.AmReportDistributionService - Copied 2020-06_TOTAL_TRADES_WITH_HOURS_TO_DELIVERY_2020-07-15-120933.csv to SFTP
2020-07-15T12:44:34.942Z [h-jobs-thread-1][][] INFO  c.d.e.x.r.a.AmReportDistributionService - Copied 2020-06_SUBMITTED_ORDERS_2020-07-15-120856.csv to SFTP
2020-07-15T12:44:34.983Z [h-jobs-thread-1][][] INFO  c.d.e.x.r.a.AmReportDistributionService - Copied 2020-06_TRADES_EVOLUTION_2020-07-15-121742.csv to SFTP
2020-07-15T12:44:35.019Z [h-jobs-thread-1][][] INFO  c.d.e.x.r.a.AmReportDistributionService - Copied 2020-06_NET_POSITION_AVERAGED_DAILY_2020-07-15-120535.csv to SFTP
2020-07-15T12:44:35.055Z [h-jobs-thread-1][][] INFO  c.d.e.x.r.a.AmReportDistributionService - Copied 2020-06_NET_POSITION_2020-07-15-120507.csv to SFTP
2020-07-15T12:44:35.091Z [h-jobs-thread-1][][] INFO  c.d.e.x.r.a.AmReportDistributionService - Copied 2020-06_NET_POSITION_AVERAGED_QUARTERLY_2020-07-15-120600.csv to SFTP
2020-07-15T12:44:35.128Z [h-jobs-thread-1][][] INFO  c.d.e.x.r.a.AmReportDistributionService - Copied 2020-06_VOLUME_PER_BORDER_2020-07-15-120948.csv to SFTP
2020-07-15T12:44:35.162Z [h-jobs-thread-1][][] INFO  c.d.e.x.r.a.AmReportDistributionService - Copied 2020-06_EXPLICIT_IMPLICIT_ALLOCATIONS_2020-07-15-120445.csv to SFTP
2020-07-15T12:44:35.196Z [h-jobs-thread-1][][] INFO  c.d.e.x.r.a.AmReportDistributionService - Copied 2020-06_ORDER_TRADE_RATIO_2020-07-15-120733.csv to SFTP
2020-07-15T12:44:35.238Z [h-jobs-thread-1][][] INFO  c.d.e.x.r.a.AmReportDistributionService - Copied 2020-06_RAMPING_OCCURRENCE_2020-07-15-120834.csv to SFTP
2020-07-15T12:44:35.277Z [h-jobs-thread-1][][] INFO  c.d.e.x.r.a.AmReportDistributionService - Copied 2020-06_ATC_UTILIZATION_2020-07-15-120241.csv to SFTP
2020-07-15T12:44:35.311Z [h-jobs-thread-1][][] INFO  c.d.e.x.r.a.AmReportDistributionService - Copied 2020-06_TOTAL_TRADES_2020-07-15-120915.csv to SFTP
2020-07-15T12:44:35.314Z [h-jobs-thread-1][][] INFO  o.s.b.c.s.AbstractStep - Step: [distribute-reports] executed in 485ms
2020-07-15T12:44:35.319Z [h-jobs-thread-1][][] INFO  o.s.b.c.l.s.SimpleJobLauncher - Job: [FlowJob: [name=am-distribute-reports-to-sftp]] completed with the following parameters: [{RUN_TIME=1594817074653}] and the following status: [COMPLETED] in 659ms
{code}
# Deleted the file TRADES_EVOLUTION from SLA1 direcory
# job failed listing already the name of the missing file: (/)
{code:java}
2020-07-15T12:54:54.604Z [h-jobs-thread-1][][] ERROR o.s.b.c.s.AbstractStep - Encountered an error executing step distribute-reports in job am-distribute-reports-to-sftp
java.lang.IllegalStateException: Not all of the reports are ready for month 2020-06-01T00:00Z, skipping distribution. Missing: [TRADES_EVOLUTION]
{code}
# Same worked with two missing files, all listed in the expception. Previously it was apparently evaluating the existing folders as the report files: (/)
{code:java}
2020-07-15T12:55:54.535Z [h-jobs-thread-1][][] ERROR o.s.b.c.s.AbstractStep - Encountered an error executing step distribute-reports in job am-distribute-reports-to-sftp
java.lang.IllegalStateException: Not all of the reports are ready for month 2020-06-01T00:00Z, skipping distribution. Missing: [VOLUME_PER_BORDER, TRADES_EVOLUTION]
{code}
# Copied back all the missing files and added some files from previous month
# Job ran successfully and only files for last months were copied to SFTP (/)
# Rename one file to 07 mont and try to run again 
# Job finished successfully and copied only files from last month (/)
# Keep the files on SFTP and try to run the job again
# Job finished successfully and files on SFTP had a new timestamp, so apparently files got overwritten (/)
# Rename one file to 001.html
# Job finished successfully and ignored the file (/)
# Renome the file to 001.csv
# Job finished successfully and ignored the file (/)

Summary:
Only one thing what I noticed is that the am-distribute-reports-to-sftp job takes into consideration also subdirectories. If the reports are for example on SLA1 server in /xbid/logs/am/MyCreatedDir the reports are taken into account and copied to SFTP server. When there are some reports present in the subdirectory, even if it is all reports for the month, the distribution job evaluates it as incomplete list of reports.
But this I assume is not a problem because in the folder structures no other directories are supposed to be present.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 1) ATC utilization rate,XP-3260,97845,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tr866,zi174,tr866,08/Jul/20 12:20,04/Aug/20 19:53,22/Feb/21 13:21,22/Jul/20 11:44,,,3.1.0,,,,,,,,,,"ATC utilization rate
 ATC utilization ratio for each MTU calculated from the allocated netted intra-day capacity / offered intra-day capacity for each border in both directions [11.4 ID monitoring]

Ratio A→B=(Max(0;〖Net Total allocation〗_(A→B)))/(〖Last ATC〗_(A→B) +〖Net Total allocation〗_(A→B) )",,ll664,od044,tr866,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Jul/20 16:40;tr866;2020-07_ATC_UTILIZATION_2020-07-17-124540.csv;https://jira.deutsche-boerse.com/secure/attachment/85804/2020-07_ATC_UTILIZATION_2020-07-17-124540.csv","21/Jul/20 16:56;tr866;2020-07_ATC_UTILIZATION_2020-07-22-100447.csv;https://jira.deutsche-boerse.com/secure/attachment/85953/2020-07_ATC_UTILIZATION_2020-07-22-100447.csv","21/Jul/20 16:55;tr866;CMM-rounding-screenshot-localhost_24082-2020.07.21-15_43_29.png;https://jira.deutsche-boerse.com/secure/attachment/85950/CMM-rounding-screenshot-localhost_24082-2020.07.21-15_43_29.png","16/Jul/20 16:37;tr866;Capacity Overview - ATC with RR.PNG;https://jira.deutsche-boerse.com/secure/attachment/85803/Capacity+Overview+-+ATC+with+RR.PNG","21/Jul/20 18:06;tr866;Test Scenarios and results.xlsx;https://jira.deutsche-boerse.com/secure/attachment/85954/Test+Scenarios+and+results.xlsx","13/Jul/20 16:34;od044;am_atc_utilization_202007131633.csv;https://jira.deutsche-boerse.com/secure/attachment/85636/am_atc_utilization_202007131633.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,18576000,,,,,,,,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y13:yr",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 12,Alpha Sprint 13 (S),,,,,,,,,,,,,,,4.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3306,XP-3279-am-snake-case,XP-3324-am-mira-test,XP-3291,XP-3281,XP-3285-am-atc-utilization,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Jul/20 16:33;od044;Error during generation 

{code}
2020-07-13 16:11:41.726 batch-jobs-thread-1 INFO  - c.d.e.x.r.r.ReportIntervalLoggingListener - Generating ATC_UTILIZATION report for interval 2020-06-01T00:00:00Z - 2020-07-01T00:00:00Z
2020-07-13 16:11:41.788 batch-jobs-thread-1 ERROR - o.s.b.c.s.AbstractStep - Encountered an error executing step am-atc-utilization-generate-csv in job am-generate-atc-utilization
java.lang.IllegalArgumentException: DB constraint did not work - there shouldn't be multiple items for key AtcUtilizationGroupKey(outArea=TSMA11---------4, inArea=TSMA11---------4, deliveryStartDate=2020-06-16T00:00:00Z, deliveryEndDate=2020-06-16T01:00:00Z), items: NonnettedAtcUtilization(area1=TSMA11---------4, area2=TSMA11---------4, deliveryStartDate=2020-06-16T00:00:00Z, deliveryEndDate=2020-06-16T01:00:00Z, direction=FROM_2_TO_1, lastAtc=10000000, totalAllocatedQuantity=0), NonnettedAtcUtilization(area1=TSMA11---------4, area2=TSMA11---------4, deliveryStartDate=2020-06-16T00:00:00Z, deliveryEndDate=2020-06-16T01:00:00Z, direction=FROM_1_TO_2, lastAtc=10000000, totalAllocatedQuantity=0)
	at com.deutscheboerse.energy.xbid.reporttool.am.atcutilization.AtcUtilizationCalculator.calculateAtcUtilization(AtcUtilizationCalculator.kt:16)
	at com.deutscheboerse.energy.xbid.reporttool.am.atcutilization.GeneratorAtcUtilizationJobConfig$generateAtcUtilizationTasklet$1.invoke(GeneratorAtcUtilizationJobConfig.kt:76)
	at com.deutscheboerse.energy.xbid.reporttool.am.atcutilization.GeneratorAtcUtilizationJobConfig$generateAtcUtilizationTasklet$1.invoke(GeneratorAtcUtilizationJobConfig.kt:25)
	at com.deutscheboerse.energy.xbid.reporttool.am.CsvReportGenerator.writeCsv(CsvReportGenerator.kt:11)
	at com.deutscheboerse.energy.xbid.reporttool.am.CsvReportTasklet.execute(CsvReportTasklet.kt:18)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:136)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy103.execute(Unknown Source)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
{code}

DB data:  [^am_atc_utilization_202007131633.csv] ","13/Jul/20 16:33;ll664;ATC Utilization CSV generation fails when same in/our area is collected - we should filter records out those records out on data collection. Add also flyway script to delete already collected data.
{code:java}
{2020-07-13 16:11:41.726 batch-jobs-thread-1 INFO  - c.d.e.x.r.r.ReportIntervalLoggingListener - Generating ATC_UTILIZATION report for interval 2020-06-01T00:00:00Z - 2020-07-01T00:00:00Z
2020-07-13 16:11:41.788 batch-jobs-thread-1 ERROR - o.s.b.c.s.AbstractStep - Encountered an error executing step am-atc-utilization-generate-csv in job am-generate-atc-utilization
java.lang.IllegalArgumentException: DB constraint did not work - there shouldn't be multiple items for key AtcUtilizationGroupKey(outArea=TSMA11---------4, inArea=TSMA11---------4, deliveryStartDate=2020-06-16T00:00:00Z, deliveryEndDate=2020-06-16T01:00:00Z), items: NonnettedAtcUtilization(area1=TSMA11---------4, area2=TSMA11---------4, deliveryStartDate=2020-06-16T00:00:00Z, deliveryEndDate=2020-06-16T01:00:00Z, direction=FROM_2_TO_1, lastAtc=10000000, totalAllocatedQuantity=0), NonnettedAtcUtilization(area1=TSMA11---------4, area2=TSMA11---------4, deliveryStartDate=2020-06-16T00:00:00Z, deliveryEndDate=2020-06-16T01:00:00Z, direction=FROM_1_TO_2, lastAtc=10000000, totalAllocatedQuantity=0)
	at com.deutscheboerse.energy.xbid.reporttool.am.atcutilization.AtcUtilizationCalculator.calculateAtcUtilization(AtcUtilizationCalculator.kt:16)
	at com.deutscheboerse.energy.xbid.reporttool.am.atcutilization.GeneratorAtcUtilizationJobConfig$generateAtcUtilizationTasklet$1.invoke(GeneratorAtcUtilizationJobConfig.kt:76)
	at com.deutscheboerse.energy.xbid.reporttool.am.atcutilization.GeneratorAtcUtilizationJobConfig$generateAtcUtilizationTasklet$1.invoke(GeneratorAtcUtilizationJobConfig.kt:25)
	at com.deutscheboerse.energy.xbid.reporttool.am.CsvReportGenerator.writeCsv(CsvReportGenerator.kt:11)
	at com.deutscheboerse.energy.xbid.reporttool.am.CsvReportTasklet.execute(CsvReportTasklet.kt:18)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:136)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy103.execute(Unknown Source)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
{code}","15/Jul/20 09:49;ll664;Fixed, records for the same area1/area2 pair are now filtered out during data collection.","16/Jul/20 16:41;tr866;h2. IC with {color:#de350b}Ramping Constraint{color}

Tested with version Report Tool 2.44-SNAPSHOT-b3d303166a5a0ac38752a65c12464e56bd9ece4e
 Ratio~A->B~ is counted wrong on *IC with Ramping Constraint*. Instead of *{color:#de350b}Last ATC{color}* the value of new *{color:#00875a}New ATC{color}* is used. Weirdly this doesn't happen on border without Ramping.
 Scenario:
 Border: MAEE-MAFI
 Interconnector: EE-FI
 Initial ATCs, Allocations:
|Contract CEST|Contract UTC|Direction|ATC|AAC|ATC with RR|
|16:00-17:00|14:00-15:00|EE->FI|10000|0|600|
| | |FI->EE|10000|0|600|
|17:00-18:00|15:00-16:00|EE->FI|10000|0|600|
| | |FI->EE|10000|0|600|
|18:00-19:00|16:00-17:00|EE->FI|10000|0|600|
| | |FI->EE|10000|0|600|

Trade FI->EE 50MW@50€

Expected vs Current result:
|Contract CEST|Start UTC|End UTC|DA 1|DA 2|RatioA->B|Ratio from report|
|17:00-18:00|15:00|16:00|10YFI-1--------U|10Y1001A1001A39I|*{color:#00875a}0,076923077{color}*|{color:#de350b}*0.083*{color}|

The value 0,083 can be obtained only by doing the following calculation: Ratio~A->B~=50/(50+{color:#de350b}*550*{color})

Correct calculation should be Ratio~A->B~=50/(50+{color:#00875a}*600*{color})
 _Note: Not 100% if ATC (10 000) or ATC with RR (600) should be used, but ATC with RR makes sense for me._
 Report attached[^2020-07_ATC_UTILIZATION_2020-07-17-124540.csv]
 Capacity overview after executed trade attached
 !Capacity Overview - ATC with RR.PNG|width=1047,height=115!
h2. Conclusion: (!)

we agreed that for Last ATC values the values of ATC without RR are going to be used. Ratio values are going to be then lower for all contracts because of RR

 
h2. Re-evaluation: (/) (?)

Tha current values in the report actually correspond to correct calculation using the values of ATC with RR. When the comment was created ""last"" ATC was misintepreted as ATC value before the last allocation, not ATC value after last allocation.","16/Jul/20 17:43;tr866;When 2 trades are made in the opposite directions and in the direction of second trade the net flow is negative the ratio is calculated for the *direction* of the *{color:#de350b}1st trade{color}* not the *{color:#00875a}latest{color}*.
 Example:
 Border: MAEE-MALV
 Interconnector: EE-LV
 Initial ATCs, Allocations:
|Contract CEST|Contract UTC|Direction|ATC|AAC|
|20:00-21:00|18:00-19:00|EE->LV|10000|0|
| | |LV->EE|10000|0|

1st Trade:
 20-21 EE->LV 90MW@90€

ATCs, Allocations after 1st trade:
|Contract CEST|Contract UTC|Direction|ATC|AAC|
|20:00-21:00|18:00-19:00|EE->LV|9910|90|
| | |LV->EE|10090|0|

2nd Trade:
 20-21 LV->EE 20MW@20€

Expected result:
|Contract CEST|Start UTC|End UTC|DA 1|DA 2|RatioA->B|
|20:00-21:00|18:00|19:00|{color:#00875a}*10YLV-1001A00074*{color}|{color:#00875a}*10Y1001A1001A39I*{color}|{color:#00875a}*0*{color}|

Ratio ~A->B~ =MAX(00;20-90)/(1090+20-90)= 0 / (1090+20-90) = 0

Current result:
|Contract CEST|Start UTC|End UTC|DA 1|DA 2|RatioA->B|
|20:00-21:00|18:00|19:00|{color:#de350b}*10Y1001A1001A39I*{color}|{color:#de350b}*10YLV-1001A00074*{color}|{color:#de350b}*0.007*{color}|

_Note: when only one trade is executed in the opposite direction the ratio is correctly calculated for the direction LV->EE_
h2. Conclusion: (/)

we agreed it's an expected behaviour and always for every contract with allocations only ratios with non-zero values are reported, which is going to be mentionned in the specs","20/Jul/20 09:45;tr866;h2. {color:#de350b}Inernal Interconnectors{color} are not part of the reports


 *{color:#ff8b00}Internal Interconnectors{color}* - ATC utilisation rate data is not being collected for Internal Interconnectors at all (!)
 Question is if it should be and if yes what EICs should be reported. EICs should be replaced by EIC of MA, then it would be DE-DE? Or similarly like for OCC files in case of Internal Interconnectors nothing should be replaced?","20/Jul/20 12:34;tr866;h2. Uploaded already allocated capacity via {color:#de350b}CAS file{color} - wrong calculation

When already uploaded capacity is uploaded by *{color:#de350b}CAS file{color}* ATC Utilization Rate is caculated wrong.

Scenario:
 Border: DE-AT
 Interconnector: AMP-APG

Initial ATCs, Allocations:
|Contract CEST|Contract UTC|Direction|ATC|AAC|
|17:00-17:15|15:00-15:15|AMP->APG|550|0|
| | |APG->AMP|450|50|
|17:15-17:30|15:15-15:30|AMP->APG|550|0|
| | |APG->AMP|450|50|
|17:30-17:45|15:30-15:45|AMP->APG|550|0|
| | |APG->AMP|450|50|
|17:45-18:00|15:45-16:00|AMP->APG|550|0|
| | |APG->AMP|450|50|

Executed Trade: Contract 17-18, APG->AMP 315MW@315€
h4. Expected vs Current Result:
|Expected result| | | | | | |
|Contract CEST|Start UTC|End UTC|DA 1|DA 2|RatioA->B|Ratio from report|
|17:00-17:15|15:00|15:15|10YAT-APG------L|10Y1001A1001A82H|{color:#00875a}*0,447853*{color}|{color:#de350b}*0.700*{color}|
|17:15-17:30|15:15|15:30|10YAT-APG------L|10Y1001A1001A82H|{color:#00875a}*0,447853*{color}|{color:#de350b}*0.700*{color}|
|17:30-17:45|15:30|15:45|10YAT-APG------L|10Y1001A1001A82H|{color:#00875a}*0,447853*{color}|{color:#de350b}*0.700*{color}|
|17:45-18:00|15:45|16:00|10YAT-APG------L|10Y1001A1001A82H|{color:#00875a}*0,447853*{color}|{color:#de350b}*0.700*{color}|
h4. Expected result:

Calculation should look as follows:
 Ratio ~APG->AMP~ =MAX(00;315+50-0)/(450+315+50-0)= 365 / (450+365) = {color:#00875a}*0,447853*{color}
h4. Current Result:

Calculation looks being executed as following:
 Ratio ~APG->AMP~ =MAX(00;315-*{color:#de350b}+50-0{color}*-)/(*{color:#de350b}135{color}*+315-*{color:#de350b}+50-0{color}*-)= 365 / (450+365) = {color:#00875a}*0,447853*{color}

It looks as some weird combination of a problem that occurs on Border with RR, where {color:#de350b}*New ATC*{color} is being used rather than {color:#00875a}*Last ATC*{color} and on top of it the AAC allocations from CAS files look being ignored?

 ","21/Jul/20 16:54;tr866;The above errors were clarified and ramping was fixed as agreed.
ATC rates on IC with ramping retested on version Report Tool 2.44-SNAPSHOT-de786e6e8672b38faf04fb25d7f40abbe12becec.
All parts where expected results were calculated wrong were retested and verified that the values in the reports are correct.

 There is tho one last doubt regarding the rounding numbers ending by 5 don't get rounded up, e.g. 0,0215 gets rounded in the report to 0,021

Expample:
 Border: MAES-MAMA
 Interconnector: ES-MA
 ATCs, Allocations after Allocation: 
|Contract CEST|Contract UTC|Direction|ATC|AAC|
|14:00-15:00|12:00-13:00|ES->MA|9785|215|
| | |MA->ES|10215|0|

Explicit allocation ES->MA 215 MW

Expected result vs values in the report:
|Contract CEST|Start UTC|End UTC|DA 1|DA 2|RatioA->B|Ratio from report|
|17:00-18:00|15:00|16:00|10YES-REE------0|10YMA-ONE------O|{color:#00875a}*0,0215=0,022*{color}|{color:#de350b}*0.021*{color}|

!CMM-rounding-screenshot-localhost_24082-2020.07.21-15_43_29.png!
Report attached [^2020-07_ATC_UTILIZATION_2020-07-22-100447.csv]","22/Jul/20 10:36;ll664;[~tr866], with regards to rounding, this is simply precision error of double datatype, for instance it computes
{{615/10000=0.06149999999999999911182158029987476766109466552734375}}, the correct result should be {{0.0615}}. The only thing we can do here is to increase number of decimals, currently we have 3. [~zi174] what do you think? ",,,,,,,,,,,,,,,,,,,,,,,
(Split 2) Total number of occurrences of ramping constraint,XP-3259,97844,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tr866,zi174,tr866,08/Jul/20 12:16,04/Aug/20 19:53,22/Feb/21 13:21,03/Aug/20 16:59,,,3.1.0,,,,,,,,,,"Total number of occurrences of ramping constraint being a potentially limiting one for the allocations per applicable DC interconnector, per MTU and per month (23-25, 46-50 or 92-100 values between 0 and 31 per interconnector per month, depending on the applicable MTU). An MTU on an interconnector on a given day would be considered restricted by ramping if the ATC value in one direction is zero AND it can be demonstrated that the last capacity change leading to this zero value was restricted by ramping - trade lead to a zero ATC in one direction and does display a difference with either (or both) neighbouring MTUs in the size of the ramping constraint. [10.a. ID monitoring]

 

Example:

interconnector xx-yy has a ramping constraint of 600MW

MTU is 15’

NTC is 1000 MW in the direction XX-YY for all hours/MTU of the day

NTC is 1000 MW in the direction YY-XX for all hours/MTU of the day

AAC in direction XX-YY is 1000MW for all hours

--> ATC without consideration of ramping is 0MW in direction XX-YY and 2000MW in direction YY-XX for all MTUs of the day

 

A trade would match 1000MW in direction YY-XX for MTU2

Due to the ramping constraint, if MTU 1 has 1000MW XX-YY net flow and MTU3 has 1000 MW XX-YY net flow, MTU2 is limited to 400MW net flow in direction XX-YY and the trade of 1000 MW could use the interconnector for 600MW only

--> In this case, this occurrence should be taken into account for the counting of ramping restriction for MTU 2 only, because the difference of AAC between MTU 2 and MTU1 (resp. MTU3) is 600MW",,ll664,tr866,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Aug/20 16:57;tr866;2020-07_RAMPING_OCCURRENCE_2020-08-03-103944.csv;https://jira.deutsche-boerse.com/secure/attachment/86191/2020-07_RAMPING_OCCURRENCE_2020-08-03-103944.csv","03/Aug/20 16:57;tr866;2020-08_RAMPING_OCCURRENCE_2020-08-03-104001.csv;https://jira.deutsche-boerse.com/secure/attachment/86192/2020-08_RAMPING_OCCURRENCE_2020-08-03-104001.csv","03/Aug/20 16:48;tr866;EIC Retest.xlsx;https://jira.deutsche-boerse.com/secure/attachment/86190/EIC+Retest.xlsx","09/Jul/20 16:35;tr866;Test Scenarios and Results.xlsx;https://jira.deutsche-boerse.com/secure/attachment/85521/Test+Scenarios+and+Results.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,17452800,,,,,,,,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y13:yi",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 12,Alpha Sprint 13 (S),Alpha Sprint 14,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Jul/20 15:59;tr866;Tested with version Report Tool 2.43-SNAPSHOT-bffcc3a3998f40fd00d04a6bc10cd30f776a07c3
 Two problems were discovered for EIC codes replacements
 # In case of Internal Interconnectors no replacement of EIC codes should be done, but it is replaced by those of Market areas
 Example:
|Interconnector|Border|DA1 EIC|DA2 EIC|MA1 EIC|MA2 EIC|area1 Expected|area2 Expected|area1 current|area2 current|
|50HzT-AMP|DE|10YDE-VE-------2|10YDE-RWENET---I|10Y1001A1001A82H|10Y1001A1001A82H|{color:#00875a}*10YDE-VE-------2*{color}|{color:#00875a}*10YDE-RWENET---I*{color}|*{color:#de350b}10Y1001A1001A82H{color}*|*{color:#de350b}10Y1001A1001A82H{color}*|
 # In case of VDA-PDA also no replacement should happen
 Example:
|Contract|Interconnector|Border|DA1 EIC|DA2 EIC|area1 Expected|area2 Expected|area1 current|area2 current|
|18:00-19:00|DK1A-DK1|MADK1-MASE3|10YDK-1-------AA|10YDK-1--------W|{color:#00875a}*10YDK-1-------AA*{color}|{color:#00875a}*10YDK-1--------W*{color}|{color:#de350b}*10YDK-1--------W*{color}|{color:#de350b}*10YDK-1--------W*{color}|","09/Jul/20 16:46;tr866;Otherwise the rest of test cases was comleted.

Total number or ramping constraint occurences was tested on interconnectors with different resolution, MTU 15min, MTU 60 min. Counting of total number was checked for multiple occurences per contract and DA in one day same as over multiple days within the same month.
Behaviour of cancelled trades was checked too, which in this case behaves just like normal counter-allocation, so the previous allocation record is kept. 
Similarly multiple trades were executed within IDCB auction that led to multiple 0 ATC with RR constraint and reports were checked. In this case again from the poing of view of CMM only one netted allocation comes from IDCB auction, so always only 1 occurence is reported.
The report was checked allso for correct collecting of data in UTC and generating reports delitimited by correct UTC intervals.
Reports were tested against different types of allocations : implicit(coming from trades), explicit, special: Balancing Mechanism, Gen-Outage.
Lastly the correct recording of the EIC codes was retested, where still some small issues persist as mentionned above.","10/Jul/20 07:37;ll664;1. Not sure whether the statement is correct, I just followed generic rule that if MA has multiple DAs, then MA EIC should be used.

2. This is general problem similar to one described in XBID-5167. Generally, they're not interested in VDAs (see XBID-5165), but here, the ramping constraint kicks in on VDA-PDA IC, so we should probably report it. So I've translated the area EIC in similar fashion - MA contains only one DA (not counting VDA), the use the DA EIC.

[~zi174] could you pls check and share your view?","24/Jul/20 10:19;zi174;[~tr866]

Tome, please check the tickets XBID-5173 and XP-3324 if they answer your question and open points for testing. I believer that based on the mentioned ticket we are able to finish testing.

 

Jakub","03/Aug/20 16:58;tr866;Successfully tested in version Report Tool 2.45-SNAPSHOT-5bfc22f0412b2d1ade70403419146d977129bc12

The EICs of Market Areas are used according to specks. In case Market Area contains only a single Delivery Area EIC of Delivery Area is used Instead.
In case of internal IC of a MA with multiple ICs EICs stay those of Market Area, e.g. DE-DE = 10Y1001A1001A82H-10Y1001A1001A82H.
In case of Virtual Delivery Areas instead of PDA-VDA and nonPDA-VDA Interconnectors all the outer interconnectors of the VDA are recorded with correct EICs of DA or MA following the rules no matter if MA is the one of the PDA or not, as expected.
Results attached [^EIC Retest.xlsx] together with the generated reports [^2020-07_RAMPING_OCCURRENCE_2020-08-03-103944.csv] [^2020-08_RAMPING_OCCURRENCE_2020-08-03-104001.csv]",,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 1) EXT: AU execution restriction is not listed in any specification ,XP-3258,97843,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Trivial,Done,tr866,sv648,tr866,08/Jul/20 12:14,13/Aug/20 19:40,22/Feb/21 13:21,10/Jul/20 16:46,,,3.1.0,,Trading,,,,,,,,"Hi,

please find below the steps to be performed:
 # enter an order with an invalid execution restriction (""FUK"" instead of ""FOK"") (/)
 # the order is not entered in the book and an error message is received (/)

Anyway, the text of the error message contains an execution restriction which is not mentioned, not explained in any specification: ""{color:#d04437}*AU*{color}""

{color:#205081}{{<?xml version=""1.0"" encoding=""UTF-8""?>}}{color}

{color:#205081}{{<ErrResp xmlns=""http://www.deutscheboerse.com/m7/v1"">}}\{\{  }}{color}

{color:#205081}{{<StandardHeader marketId=""XSOB""/>}}\{\{    }}{color}

{{{color:#205081}<Error err=""Invalid request: cvc-enumeration-valid: Value 'FUK' is not facet-valid with respect to enumeration '[FOK, IOC, NON, AON, *AU*{color}]'. It must be a value from the enumeration."" errCode=""0""/>}}

{{</ErrResp>}}

And even trying entering an order with such execution restriction, the system replies with a further error message:

<?xml version=""1.0"" encoding=""UTF-8""?>
<ErrResp xmlns=""http://www.deutsche-boerse.com/m7/v1"">
 <StandardHeader marketId=""XSOB""/>
 <Error err=""Invalid message."" errCode=""0""/>
</ErrResp>

Could you please check and clarify? 

{color:#205081}Thanks {color}

 ",,tr866,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,19526400,,,,,,,,,,XP-53,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0b3xj:9",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 12,Alpha Sprint 13 (S),,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Jul/20 16:46;tr866;Successfully reproduced on Syt2 with version XB R2.0.42-f403efdf33967cf1068e5016b173e5995138f1f5,
client-swing-6.0.33-with-deps
# When sending OrderEntry request with unknown execution restriction an error message is received mentionning AU restriction not being part of specifications:
{code:xml}<?xml version=""1.0"" encoding=""UTF-8""?>
<?xml version=""1.0"" encoding=""UTF-8""?>
<ErrResp xmlns=""http://www.deutsche-boerse.com/m7/v1"">
    <StandardHeader marketId=""XSOB""/>
    <Error err=""Invalid request: cvc-enumeration-valid: Value 'FCK' is not facet-valid with respect to enumeration '[FOK, IOC, NON, AON, *{color:#DE350B}AU{color}*]'. It must be a value from the enumeration."" errCode=""0""/>
</ErrResp>{code}
# When OrderEntry request is sent with AU restriction a different error message is received, as the restriction is probably recognized, but the request is rejected by backend as invalid.
{code:xml}<?xml version=""1.0"" encoding=""UTF-8""?>
<ErrResp xmlns=""http://www.deutsche-boerse.com/m7/v1"">
    <StandardHeader marketId=""XSOB""/>
    <Error err=""Invalid message."" errCode=""0""/>
</ErrResp>{code}

Successfully tested on environment Syt1 with version R2.0.43-65563f14c1dea14399c22b0864824255ee5728, client-swing-6.0.36-with-deps
# When sending OrderEntry request with unknown execution restriction a correct error message  is received not listin AU restriction anymore:
{code:xml}<?xml version=""1.0"" encoding=""UTF-8""?>
<ErrResp xmlns=""http://www.deutsche-boerse.com/m7/v1"">
    <StandardHeader marketId=""XSOB""/>
    <Error err=""Invalid request: cvc-enumeration-valid: Value 'FCK' is not facet-valid with respect to enumeration '[FOK, IOC, NON, AON]'. It must be a value from the enumeration."" errCode=""0""/>
</ErrResp>{code}
# When OrderEntry request is sent with AU restriction same error message is received, as the restriction is evaluated as not supported
{code:xml}<?xml version=""1.0"" encoding=""UTF-8""?>
<ErrResp xmlns=""http://www.deutsche-boerse.com/m7/v1"">
    <StandardHeader marketId=""XSOB""/>
    <Error err=""Invalid request: cvc-enumeration-valid: Value 'FCK' is not facet-valid with respect to enumeration '[FOK, IOC, NON, AON]'. It must be a value from the enumeration."" errCode=""0""/>
</ErrResp>{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 2) All AM indicator reports should use UTC timezone,XP-3257,97842,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tr866,eh941,tr866,08/Jul/20 12:12,04/Aug/20 19:53,22/Feb/21 13:21,21/Jul/20 15:13,,,3.1.0,,,,,,,,,,"Current implementation use only CET but we have an information from the customers we should use UTC only.



All reports should be UTC based, that is:

    collection interval is UTC day
    report generation interval is UTC month
    all timestamps/dates are rendered in UTC

Decision was taken by customers in https://jira.deutsche-boerse.com/browse/XBID-5120
",,od044,tr866,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Jul/20 13:08;tr866;BR08 - DST Switch,UTC Check Reports.zip;https://jira.deutsche-boerse.com/secure/attachment/85513/BR08+-+DST+Switch%2CUTC+Check+Reports.zip","09/Jul/20 13:09;tr866;BR08 - Ramping Occurences - DST,UTC Test.xlsx;https://jira.deutsche-boerse.com/secure/attachment/85514/BR08+-+Ramping+Occurences+-+DST%2CUTC+Test.xlsx","20/Jul/20 15:30;tr866;BR10 - ATC Utilization Rate - DST,UTC Test.xlsx;https://jira.deutsche-boerse.com/secure/attachment/85886/BR10+-+ATC+Utilization+Rate+-+DST%2CUTC+Test.xlsx","20/Jul/20 15:30;tr866;BR10 - DST Switch,UTC Check Reports.zip;https://jira.deutsche-boerse.com/secure/attachment/85887/BR10+-+DST+Switch%2CUTC+Check+Reports.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,18576000,,,,,,,,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y13:x",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 12,Alpha Sprint 13 (S),,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Jul/20 13:17;tr866;BR08 - Total number of occurrences of ramping constraint (/)
Tested on Docker with version Report Tool 2.43-SNAPSHOT-fd641b63b68c50e70fb7da6d2f82b4b99d066727
All dates are collected in UTC times (delivery_start_date, delivery_end_date), same as the hours in the generated reports (delivery_start_time, delivery_end_time).
Data are collected in UTC intervals and report generation interval is also a month delimited by UTC times. Test Scenarios with results attached [^BR08 - Ramping Occurences - DST,UTC Test.xlsx] together with the generated reports [^BR08 - DST Switch,UTC Check Reports.zip]","20/Jul/20 11:39;od044;BR03 - Explicit and Implicit volumes (/)
BR05 - Order trade ratio (/) 
BR06 - Submitted orders  (/) 
BR07 - Submitted orders volumes (/) 
BR09 - Total trades and Total trades with hours to delivery (/)

- all data are collected in UTC time and tested within its separated tickets","20/Jul/20 15:33;tr866;BR10 - ATC Utilization Rate
Tested on docker with version Report Tool 2.44-SNAPSHOT-b3d303166a5a0ac38752a65c12464e56bd9ece4e
All dates are collected in UTC times (delivery_start_date, delivery_end_date), same as the hours in the generated reports (delivery_start_time, delivery_end_time).
Data are collected in UTC intervals and report generation interval is also a month delimited by UTC times. Test Scenarios with results attached [^BR10 - ATC Utilization Rate - DST,UTC Test.xlsx] together with the generated reports [^BR10 - DST Switch,UTC Check Reports.zip]","20/Jul/20 15:36;tr866;Reports checked in the ticket before split:
report-tool-2.41-SNAPSHOT.jar

BR04 - Evolution of Number of Trades - OK. (/)
BR01 - Total Trade Volume per Border - OK (/)
BR02 - Net Position Averaged  (/)

Only 1 report to be verified it was checked already:
BR11 (?)
","21/Jul/20 15:13;tr866;BR11 - covered in https://jira.deutsche-boerse.com/browse/XP-3018",,,,,,,,,,,,,,,,,,,,,,,,,,,
Update TestClient to reflect R3.1 XSD changes,XP-3254,97838,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tr866,ei349,ei349,08/Jul/20 11:19,20/Aug/20 17:17,22/Feb/21 13:21,10/Jul/20 16:31,,,3.1.0,,,,,,,,,,"XBID-4864, XBID-3381 have XSD impact. Update TestClient to be able to work with made changes. ",,ei349,ek176,tr866,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,19526400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3449,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0b3xj:zu",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 13 (S),,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Jul/20 13:34;ek176;Released TestClient 6.0.36 (with cmm-refdata 1.1.6)","10/Jul/20 16:31;tr866;Successfully tested on environment Syt1 with version R2.0.43-65563f14c1dea14399c22b0864824255ee5728, client-swing-6.0.36-with-deps

# Correct error message is received when trying to send an order with wrong execution restriction.
{code:xml}<?xml version=""1.0"" encoding=""UTF-8""?>
<ErrResp xmlns=""http://www.deutsche-boerse.com/m7/v1"">
    <StandardHeader marketId=""XSOB""/>
    <Error err=""Invalid request: cvc-enumeration-valid: Value 'AU' is not facet-valid with respect to enumeration '[FOK, IOC, NON, AON]'. It must be a value from the enumeration."" errCode=""0""/>
</ErrResp>{code}
# Test Client is able to consume the report messages OrdrExeRprt, TradeCaptureRprt ,PblcTradeConfRprt with the new attribute revisionNoTime

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update ComTrader to reflect R3.1 XSD changes,XP-3253,97837,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tr866,ei349,ei349,08/Jul/20 11:18,20/Aug/20 17:17,22/Feb/21 13:21,10/Jul/20 16:37,,,3.1.0,,,,,,,,,,"XBID-4864, XBID-3381 have XSD impact. Update ComTrader to be able to work with made changes. ",,ei349,ek176,tr866,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,19526400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3449,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0b3xj:zo",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 13 (S),,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Jul/20 13:37;ek176;Released (internaltest) ComTrader 2.5.1.67 (with xbid-api 1.0.56)","10/Jul/20 16:34;tr866;Successfully tested on environment Syt1 with version R2.0.43-65563f14c1dea14399c22b0864824255ee5728, ComTrader 2.5.1.67
# ComTrader consumes the new error message with about wrong executin restriction without any problems
{code:xml}<?xml version=""1.0"" encoding=""UTF-8""?>
<ErrResp xmlns=""http://www.deutsche-boerse.com/m7/v1"">
    <StandardHeader marketId=""XSOB""/>
    <Error err=""Invalid request: cvc-enumeration-valid: Value 'AU' is not facet-valid with respect to enumeration '[FOK, IOC, NON, AON]'. It must be a value from the enumeration."" errCode=""0""/>
</ErrResp>{code}
# ComTrader is able to log in without crashing and is able to consume also the report messages OrdrExeRprt, TradeCaptureRprt ,PblcTradeConfRprt with the new attribute revisionNoTime.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 1) Indicator - Explicit/Implicit allocation volume,XP-3249,97828,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,od044,zi174,jy268,08/Jul/20 09:46,04/Aug/20 19:53,22/Feb/21 13:21,15/Jul/20 10:52,,,3.1.0,,,,,,,,,,"+Indicator - Explicit/Implicit allocation volume+

For each border (not per IC) that allows for explicit allocation: the explicit and implicit allocation volume per day on that border *and direction.*

For avoidance of doubts this report is generated only for borders where explicit allocation is allowed.

UPDATE:

The report needs to reflect a direction between areas - it needs to be incorporated according to discussions with the customer.  ",,jy268,od044,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Jul/20 10:47;od044;2020-06_EXPLICIT_IMPLICIT_ALLOCATIONS_2020-07-14-152020.csv;https://jira.deutsche-boerse.com/secure/attachment/85716/2020-06_EXPLICIT_IMPLICIT_ALLOCATIONS_2020-07-14-152020.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,19180800,,,,,,,,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y0n:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 13,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Jul/20 13:41;jy268;Example report

{code}
                day,source_area_id,sink_area_id,""explicit_allocation_volume"",""implicit_allocation_volume""
                2020-06-01,10Y1001A1001A82H,10YFR-RTE-TEST-W,0,5.00000
                2020-06-01,10Y1001A1001A82H,19Y-XBID-MA-PL-N,15.00000,0
                2020-06-03,10Y1001A1001A82H,10YFR-RTE-TEST-W,5.00000,1.00000
                2020-06-03,10YFR-RTE-TEST-W,10Y1001A1001A82H,4.50000,0
                2020-06-03,19Y-XBID-MA-PL-N,10Y1001A1001A82H,2.00000,1.00000
                2020-06-04,10YFR-RTE-TEST-W,10Y1001A1001A82H,20.00000,4.00000
                2020-06-05,10YFR-RTE-TEST-W,10Y1001A1001A82H,0,2.50000
{code}","15/Jul/20 10:51;od044;Test passed on docker with report-tool version 2.43-Snapshot
- new report-tools jobs:
-- am-collect-explicit-implicit-allocation-volume
-- am-generate-explicit-implicit-allocation-volume-report 
- Verify on various type of allocations implicit (15,30,60, block contract) and explicit
- Allocations volume are aggregated per border, direction and delivery date (in UTC) 
- delivery area EIC code is used instead of MA EIC code in case MA has only one DA
- All allocations are calculated in MWh

How to test:
- Enter trades for various contracts (15,30,60, block contract)
- Cancel or recall some of trades
- Enter explicit allocations 
- Collect data and generate report by the following jobs:
-- am-collect-explicit-implicit-allocation-volume
-- am-generate-explicit-implicit-allocation-volume-report 
- check that allocation volumes are calculated correctly for border direction, delivery date (in UTC) and type (implicit, explicit)

Here is example of report:
 [^2020-06_EXPLICIT_IMPLICIT_ALLOCATIONS_2020-07-14-152020.csv] ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 1) Dev Consul config- SFTP server configuration,XP-3241,97790,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,od044,zi174,ei349,07/Jul/20 13:37,04/Aug/20 19:53,22/Feb/21 13:21,22/Jul/20 13:04,,,3.1.0,,,,,,,,,,"h1. {color:#00875a}AM Indicators Reports SFTP Automation{color}
h2. Proposed solution 

Requirements:
 * Reports must be made available on a SFTP server hosted by DBAG and accessible to NEMOs and TSOs
 * Reports should remain available on the DBAG sFTP server for a period of at least 12 months after the end of the report period.

 

The expected behavior is described (in the spec) as follow:

Monthly reports generation produces report files each month. All generated reports are stored on the SFTP server which is accessible to NEMOs and TSOs. The reports are stored and available for a period of 12 months. During the defined period every report may be downloaded by NEMOs and TSOs. After 12 months the reports are deleted and cannot be accessible anymore. The files are available in a CSV format as is defined by each report format.

--------------

Please during implementation this solution, validate if the statement above is in accordance with the real implementation. Also if the description should be enhanced some important information, please let [~zi174] know.

*Hints:* 

 
 * Avoidance of duplicity because of master-master solution:
 ** Consul master election 
 *** new key/value store might be needed
 ** -Let files override themselves- (risk of race condition)
 * Monitoring
 ** 0 bytes files check 
 ** grafana 
 ** alert in xbid_prod_issues would be nice (create future task)

h2. Acceptance Criteria
 * reports automatically uploaded to SFTP server (Report Tool)
 * new subdirectory
 * reports automatically deleted after 12 months (Report Tool)
 * no duplicate files on sftp server
 * automatic monitoring - currently only in Grafana
 * create future task for automated alerting in case of problem ",,ei349,od044,qo794,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3321,XP-3264,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,18576000,,,,,,,,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y0p:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 13,,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3306,XP-3279-am-snake-case,XP-3358,XP-3324-am-mira-test,XP-3243-hp-fortify-develop,develop,XP-3285-am-atc-utilization,master,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Jul/20 13:40;qo794;h2. Implementation details
Two master election implementations introduced, only one created during the application startup based on a configuration (see details below):
* ConsulMasterElector - master election using a consul key locking
* SingleNodeMasterElector - for single sided envs where a node is always a master

Only a master node executes {{delete-old-reports}} and {{distribute-reports}} jobs, on other node(s) the execution is skipped.

If ConsulMasterElector is configured the following points are taken into account on each and every node:
* a consul session has a defined expiration time (consul.session.ttl)
* a consul session is refreshed in a defined period (consul.session.renew.period)
* a node tries to acquire a key lock (consul.lock.key) only when the lock is needed, so both nodes can be running in a slave mode at the same time
* if the key is not locked a node locks it and becomes a master

h2. New application configuration parameters
* the following parameter introduced in {{application.properties}}
** master.elector - possible values: {{single-node}} (SingleNodeMasterElector) or {{consul}} (ConsulMasterElector)

* for master.elector {{consul}} the following parameters must be defined:
** consul.host - consul agent host, usually localhost since a consul agent is always running locally, default {{localhost}}
** consul.port - port of the consul agent, default {{8500}}
** consul.session.ttl - consul session TTL, string format containing also a time unit, default {{30s}}
** consul.session.renew.period - a consul session renew period, must be lower than {{consul.session.ttl}}, string format of java.time.Duration, default {{PT10S}}
** consul.acl.token - consul ACL token
** consul.lock.key - a key used as a lock in consul for master election, e.g. {{service/sla/prod/master}}","20/Jul/20 14:41;qo794;TODO:
* create a pull request updating a production {{application.properties}} - consul details from techops needed
* update README in the project (/)","22/Jul/20 12:30;od044;Issue split into:
|XP-3321|(Split 2) Dev Consul config- SFTP server configuration - testing|
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
XBID CLONE: Latent Fault - Can't access to SOB WebGUI,XP-3238,97778,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,ei349,ei349,07/Jul/20 09:15,25/Sep/20 11:18,22/Feb/21 13:21,05/Aug/20 12:00,,,3.1.0,,,,,,,Latent_Faults,,,"Based on the finding from XBID-4765 DBAG is reporting a Latent Fault behavior.

+*Current behavior*+

It is possible to reach a state when it is impossible to login to the SOB when a DA is suspended in the CMM.

+*Correct behavior*+

It is possible to login to the SOB even when a suspended DA is assigned to a product.

+*Steps to reproduce*+
 # Have an admin user in the SOB
 # In the CMM suspend the DA assigned to the product
 # After the suspension of the DA takes effect (3 days) login to the SOB

+*Permanent fix*+

Technical solution, no functional impact: The fix means that the GUI page Contract modification fetches now delivery areas from a given contract to prevent NullPointerException (NPE), previously areas were fetched from the product.

+*Relevant documentation*+

DFS700

 +*Related tickets*+

XBID-4765 Can't access to SOB WebGUI",,ei349,radeale,,,,,,,,";25/Sep/20 11:18;radeale;10800",,,,,,,,,0,10800,,,0,10800,,,,XBID-4824,,,,,,,,,,XBID-4765,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,19094400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3447,,,,,,,,,,,,,,17/Dec/19 16:23,,,,,,,,,,,,,None,,,,,,,,"1|y0b70m:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 13,HOT Sprint 14 (S),,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Jul/20 14:58;radeale;SYT2

CMM DA: Test-1

SOB Admin User: TESTADM1

Password: .O7ZB2mX:f3S

After testing please inform JirkaV.","16/Jul/20 12:53;radeale;Test OK on SYT1, XBID R2.0.42.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Reports examples,XP-3196,97486,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,,zi174,zi174,29/Jun/20 12:54,31/Aug/20 15:40,22/Feb/21 13:21,03/Jul/20 13:03,,,3.1.0,,,,,,,,,,Please provide all examples of the AM indicator reports. ,,jy268,ll664,qo794,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Jun/20 13:06;od044;2018-02_NET_POSITION_2020-06-29-110217.csv;https://jira.deutsche-boerse.com/secure/attachment/85239/2018-02_NET_POSITION_2020-06-29-110217.csv","29/Jun/20 13:06;od044;2018-02_NET_POSITION_AVERAGED_DAILY_2020-06-29-110225.csv;https://jira.deutsche-boerse.com/secure/attachment/85238/2018-02_NET_POSITION_AVERAGED_DAILY_2020-06-29-110225.csv","29/Jun/20 13:06;od044;2018-02_NET_POSITION_AVERAGED_QUARTERLY_2020-06-29-110233.csv;https://jira.deutsche-boerse.com/secure/attachment/85237/2018-02_NET_POSITION_AVERAGED_QUARTERLY_2020-06-29-110233.csv","29/Jun/20 13:06;od044;2018-02_ORDERS_VOLUME_2020-06-29-110305.csv;https://jira.deutsche-boerse.com/secure/attachment/85235/2018-02_ORDERS_VOLUME_2020-06-29-110305.csv","29/Jun/20 13:06;od044;2018-02_ORDER_TRADE_RATIO_2020-06-29-110253.csv;https://jira.deutsche-boerse.com/secure/attachment/85236/2018-02_ORDER_TRADE_RATIO_2020-06-29-110253.csv","29/Jun/20 13:06;od044;2018-02_RAMPING_OCCURRENCE_2020-06-29-110318.csv;https://jira.deutsche-boerse.com/secure/attachment/85234/2018-02_RAMPING_OCCURRENCE_2020-06-29-110318.csv","29/Jun/20 13:06;od044;2018-02_SUBMITTED_ORDERS_2020-06-29-110332.csv;https://jira.deutsche-boerse.com/secure/attachment/85233/2018-02_SUBMITTED_ORDERS_2020-06-29-110332.csv","29/Jun/20 13:06;od044;2018-02_TOTAL_TRADES_2020-06-29-110345.csv;https://jira.deutsche-boerse.com/secure/attachment/85232/2018-02_TOTAL_TRADES_2020-06-29-110345.csv","29/Jun/20 13:06;od044;2018-02_TOTAL_TRADES_WITH_HOURS_TO_DELIVERY_2020-06-29-110357.csv;https://jira.deutsche-boerse.com/secure/attachment/85231/2018-02_TOTAL_TRADES_WITH_HOURS_TO_DELIVERY_2020-06-29-110357.csv","29/Jun/20 13:06;od044;2018-02_TRADES_EVOLUTION_2020-06-29-110409.csv;https://jira.deutsche-boerse.com/secure/attachment/85230/2018-02_TRADES_EVOLUTION_2020-06-29-110409.csv","29/Jun/20 13:06;od044;2018-02_VOLUME_PER_BORDER_2020-06-29-110420.csv;https://jira.deutsche-boerse.com/secure/attachment/85229/2018-02_VOLUME_PER_BORDER_2020-06-29-110420.csv","01/Jul/20 10:14;ll664;2020-04_RAMPING_OCCURRENCE_2020-05-20-134500.csv;https://jira.deutsche-boerse.com/secure/attachment/85312/2020-04_RAMPING_OCCURRENCE_2020-05-20-134500.csv",,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,20390400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0b6ac:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 12 (S),,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Jun/20 12:59;jy268;order to trade ratio

{code}
            month,product,order_to_trade_ratio
            APRIL,product1,2.0
            APRIL,product2,4.0
{code}","01/Jul/20 10:14;ll664; [^2020-04_RAMPING_OCCURRENCE_2020-05-20-134500.csv] ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 1) All AM indicator reports should use UTC timezone,XP-3186,97349,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tr866,eh941,hj444,24/Jun/20 11:25,04/Aug/20 19:53,22/Feb/21 13:21,08/Jul/20 12:12,,,3.1.0,,,,,,,,,,"Current implementation use only CET but we have an information from the customers we should use UTC only.



All reports should be UTC based, that is:

    collection interval is UTC day
    report generation interval is UTC month
    all timestamps/dates are rendered in UTC

Decision was taken by customers in https://jira.deutsche-boerse.com/browse/XBID-5120
",,hj444,tr866,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3257,,,,,,,,,,,,,"26/Jun/20 16:03;hj444;2020-06_TRADES_EVOLUTION_2020-06-27-110056.csv;https://jira.deutsche-boerse.com/secure/attachment/85203/2020-06_TRADES_EVOLUTION_2020-06-27-110056.csv","26/Jun/20 16:05;hj444;2020-06_VOLUME_PER_BORDER_2020-06-27-110102.csv;https://jira.deutsche-boerse.com/secure/attachment/85204/2020-06_VOLUME_PER_BORDER_2020-06-27-110102.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,19785600,,,,,,,,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y13:w",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 12,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Jun/20 10:23;hj444;BR02 - Net Position Averaged - done. see comments in XP-3139.","26/Jun/20 16:03;hj444;report-tool-2.41-SNAPSHOT.jar

BR04 - Evolution of Number of Trades - OK. 
BR01 - Total Trade Volume per Border  - OK","08/Jul/20 12:12;tr866;Issue split into:
|XP-3257|(Split 2) All AM indicator reports should use UTC timezone|
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 1) Total number of occurrences of ramping constraint,XP-3185,97348,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tr866,zi174,hj444,24/Jun/20 11:17,06/Aug/20 09:45,22/Feb/21 13:21,08/Jul/20 12:16,,,3.1.0,,,,,,,,,,"Total number of occurrences of ramping constraint being a potentially limiting one for the allocations per applicable DC interconnector, per MTU and per month (23-25, 46-50 or 92-100 values between 0 and 31 per interconnector per month, depending on the applicable MTU). An MTU on an interconnector on a given day would be considered restricted by ramping if the ATC value in one direction is zero AND it can be demonstrated that the last capacity change leading to this zero value was restricted by ramping - trade lead to a zero ATC in one direction and does display a difference with either (or both) neighbouring MTUs in the size of the ramping constraint. [10.a. ID monitoring]

 

Example:

interconnector xx-yy has a ramping constraint of 600MW

MTU is 15’

NTC is 1000 MW in the direction XX-YY for all hours/MTU of the day

NTC is 1000 MW in the direction YY-XX for all hours/MTU of the day

AAC in direction XX-YY is 1000MW for all hours

--> ATC without consideration of ramping is 0MW in direction XX-YY and 2000MW in direction YY-XX for all MTUs of the day

 

A trade would match 1000MW in direction YY-XX for MTU2

Due to the ramping constraint, if MTU 1 has 1000MW XX-YY net flow and MTU3 has 1000 MW XX-YY net flow, MTU2 is limited to 400MW net flow in direction XX-YY and the trade of 1000 MW could use the interconnector for 600MW only

--> In this case, this occurrence should be taken into account for the counting of ramping restriction for MTU 2 only, because the difference of AAC between MTU 2 and MTU1 (resp. MTU3) is 600MW",,hj444,tr866,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3259,,,,,,,,,,,,,"07/Jul/20 16:32;tr866;2020-07_RAMPING_OCCURRENCE_2020-07-08-173009.csv;https://jira.deutsche-boerse.com/secure/attachment/85438/2020-07_RAMPING_OCCURRENCE_2020-07-08-173009.csv","07/Jul/20 18:30;tr866;Test Scenarios and Results.xlsx;https://jira.deutsche-boerse.com/secure/attachment/85448/Test+Scenarios+and+Results.xlsx","07/Jul/20 16:31;tr866;screenshot-localhost_24082-2020.07.07-16_18_05.png;https://jira.deutsche-boerse.com/secure/attachment/85437/screenshot-localhost_24082-2020.07.07-16_18_05.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,19785600,,,,,,,,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y13:y",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 12,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Jul/20 13:58;tr866;In the reports and DB table EICs of Market Areas are used instead of Delivery Areas:(x)
As the number of occurences should be reported per interconnector, there would be no way to distinguish the numbers in case of border with multiple ICs
e.g. IC EE-FI
expected area names: {color:#00875A}10Y1001A1001A39I,10YFI-1--------U{color}
current area names in the reports: {color:#DE350B}44Y-DUMMY-EE---N,44Y-DUMMY-FI---Y{color}

Then evene if MAs should be in the reports in this case as the MAs are having only a single DA, EIC of DA should be used instead of dummy codes for MAs","07/Jul/20 16:48;tr866;Tested on docker with version XB 2.0.43-SNAPSHOT-4b99dd5e8e785bb7980b1ab33f2b99e870a39f48
 Report Tool 2.43-SNAPSHOT-fd641b63b68c50e70fb7da6d2f82b4b99d066727

Seems like there are records missing when a trade for hourly contract is executed on Interconnector with 15 minutes resolution.

When a trade is executed for hourly contract, e.g. 18-19 CEST (16-17 UTC) 4 records would be expected in the am_ramping_occurence DB table and in the Ramping Occurence report.
 Expected records would by for 4 hours, but the records from the neighbor hours are missing.
|Contract in CEST|Contract in UTC|
|*{color:#de350b}17:45-18:00{color}*|*{color:#de350b}15:45-16:00{color}*|
|*{color:#00875a}18:00-18:15{color}*|*{color:#00875a}16:00-16:15{color}*|
|*{color:#00875a}18:45-19:00{color}*|*{color:#00875a}16:45-17:00{color}*|
|*{color:#de350b}19:00-19:15{color}*|*{color:#de350b}17:00-17:15{color}*|

The file containing the incomplete records [^2020-07_RAMPING_OCCURRENCE_2020-07-08-173009.csv] .
 The situation in Capacity management can be seen [^screenshot-localhost_24082-2020.07.07-16_18_05.png].
 As shown in the attached screenshot above and in the test case TC15 in the attached [^Test Scenarios and Results.xlsx],
 it can be seen that for the two missing neighbor contracts 17:45-18:00 CET (15:45-16:00 UTC), 19:00-19:15 CEST (17:00-17:15 UTC) ATC is 10000 and ATC with RR is *0*. The difference of the flows between the mentionned contract and the neighbor MTUs is of size of 1000 which is equal to Ramping Rate.

Result: as I got clarified it is actually an expected behaviour. the neighbour contracts shouldn't be part of the reports as no flows(allocations) happened on these contracts (/)","07/Jul/20 17:16;tr866;Also noticed regarding EIC codes replacement, when trade is executed on IC between Market Areas with Multiple Delivery Areas, the EIC code of Delivery Area is used and not replaced by EIC of MA.

Example:
trade on Interconnector TSDA4-TSDA5(TSMA2-TSMA3)
both TSMA2 and TSMA3 are having each 2 delivery areas.
expected EICs:
area1,area2
*{color:#00875A}TS-MA2---------E,TS-MA3---------3{color}*

current EICs from the report:
area1,area2
*{color:#DE350B}TS-DA4---------Z,TS-DA5---------O{color}*

I see the EIC code replacement fix hasn't been implemented yet, as no replacement happens for no VDA-PDA IC and EIC of DA is replaced by MA.","08/Jul/20 12:16;tr866;Issue split into:
|XP-3259|(Split 2) Total number of occurrences of ramping constraint|
",,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 2) Evolution of number of trades,XP-3181,97344,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,hj444,zi174,hj444,24/Jun/20 11:06,04/Aug/20 19:53,22/Feb/21 13:21,29/Jun/20 12:54,,,3.1.0,,,,,,,,,,"+Evolution of number of trades+

Number of trades and traded volumes grouped by trade timestamp against contract delivery time, aggregated per month. In 15-minute increments, report the total monthly number of trades and the total monthly trade volume grouped according to the time lapse between the trade time stamp and the delivery start of the traded contract.

 

The values reported will be: (1) number of trades, (2) traded volumes.

The maximum number of both these values for each month will be the number of 15-minute increments from the earliest gate opening for trading until the last gate closure for trading.

For each 15-minute period between start of trading and end of trading, we will see the total number of trades in the given month and the total traded volume in the given month that was realised in this 15-minute period on every day of the month.

In which 15-minute bucket a trade falls is decided by the distance between trade timestamp and delivery start of the traded contract.

In effect, this report tells us: in month A, x trades for a volume of y were traded between i and i + 15 minutes before delivery, where the first i is start of trading and the last i + 15 is gate closure for trading. There is no splitting per contract and no splitting per MA/DA. The aggregation is a sum.

 ",,hj444,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Jun/20 15:43;hj444;2020-06_TRADES_EVOLUTION_2020-06-27-110056.csv;https://jira.deutsche-boerse.com/secure/attachment/85201/2020-06_TRADES_EVOLUTION_2020-06-27-110056.csv","26/Jun/20 15:44;hj444;RTM_US4932_AM_Indicators_v2.xlsx;https://jira.deutsche-boerse.com/secure/attachment/85202/RTM_US4932_AM_Indicators_v2.xlsx","29/Jun/20 12:54;hj444;RTM_US4932_AM_Indicators_v3.xlsx;https://jira.deutsche-boerse.com/secure/attachment/85227/RTM_US4932_AM_Indicators_v3.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,20304000,,,,,,,,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y13:z",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 12,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jun/20 11:42;hj444;report-tool-2.41-SNAPSHOT.jar
Scenarios with tested cases and results will be added.
Testing continue : verification - DST days.","29/Jun/20 12:54;hj444;DST days tested 
added new version of excel .v3 with DST data","02/Jul/20 10:09;hj444;Collecting data on daily basis - verified at SYT1.

reportool version 2.42
XBID version 2.0.42",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 2) Indicator - Total traded volume per number of crossed borders ,XP-3180,97343,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,hj444,zi174,hj444,24/Jun/20 11:05,04/Aug/20 19:53,22/Feb/21 13:21,29/Jun/20 12:55,,,3.1.0,,,,,,,,,,"+Indicator - Total traded volume per number of crossed borders+ 

This indicates for each day the total volume in MWh allocated in trades that crossed 0, 1, 2 … (to the maximum number of borders crossed by any trade on that day) borders.

The sum of the values for each day should equal the total traded volume for that day.

 

Example:",,hj444,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Jun/20 15:43;hj444;2020-06_VOLUME_PER_BORDER_2020-06-27-110102.csv;https://jira.deutsche-boerse.com/secure/attachment/85199/2020-06_VOLUME_PER_BORDER_2020-06-27-110102.csv","26/Jun/20 15:43;hj444;RTM_US4932_AM_Indicators_v2.xlsx;https://jira.deutsche-boerse.com/secure/attachment/85200/RTM_US4932_AM_Indicators_v2.xlsx","29/Jun/20 12:55;hj444;RTM_US4932_AM_Indicators_v3.xlsx;https://jira.deutsche-boerse.com/secure/attachment/85228/RTM_US4932_AM_Indicators_v3.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,20304000,,,,,,,,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y13:r",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 12,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jun/20 11:45;hj444;Tested cases and results will be added.
Waiting for fix - border number count with VDA.
1. Retest of border count algorithm
2. Test continue - verification of split path algorithm from existing values from previous days.
","26/Jun/20 15:40;hj444;report-tool-2.41-SNAPSHOT.jar
tested scenarios :
see added excel with examples, calculations a and results.

Example of report added.","29/Jun/20 12:55;hj444;added new version of excel .v3 with DST test data.","02/Jul/20 10:10;hj444;Collecting data on daily basis verified - SYT1
reportool version 2.42
XBID version 2.0.42",,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 2) The total number of trades grouped per contract - Testing,XP-3179,97341,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,zi174,od044,24/Jun/20 10:38,04/Aug/20 19:53,22/Feb/21 13:21,01/Jul/20 11:17,,,3.1.0,,,,,,,,,,"The total number of trades grouped per contract, per market area and both grouped and not grouped according to the hours left to delivery from the trade timestamp, on a monthly basis. [11.1.c + 11.1.d ID monitoring]

Two types of reports will be generated: 
-	Per contract, MA and hours to delivery
-	Per contract and MA. 

For each month, MA and contract, we will get one figure for total number of trades and a set of values for total number of trades i hours before delivery, for all relevant values of i (from trade start until trade closure).
",,od044,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Jun/20 18:58;od044;2018-02_TOTAL_TRADES_2020-06-30-142205.csv;https://jira.deutsche-boerse.com/secure/attachment/85300/2018-02_TOTAL_TRADES_2020-06-30-142205.csv","30/Jun/20 18:58;od044;2018-02_TOTAL_TRADES_WITH_HOURS_TO_DELIVERY_2020-06-30-142208.csv;https://jira.deutsche-boerse.com/secure/attachment/85299/2018-02_TOTAL_TRADES_WITH_HOURS_TO_DELIVERY_2020-06-30-142208.csv","24/Jun/20 16:40;od044;cor_docker.dump;https://jira.deutsche-boerse.com/secure/attachment/85128/cor_docker.dump",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,20390400,,,,,,,,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0b2dj:z",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 12 (S),,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jun/20 16:41;od044;[~lt112] issue with collecting job
{code}
2020-06-24 15:58:51.952 batch-jobs-thread-1 ERROR - o.s.b.c.s.AbstractStep - Encountered an error executing step am-collect-total-trades-data in job am-collect-total-trades
org.springframework.dao.DuplicateKeyException: PreparedStatementCallback; SQL [INSERT INTO am_total_trades (day, contract, area, hours_to_delivery, trade_count)
VALUES (?, ?, ?, ?, ?)]; ERROR: duplicate key value violates unique constraint ""pg_am_total_trades""
  Detail: Key (day, contract, area)=(2020-05-25, 20200525 19:00-20200525 20:00, 10YNO-4--------9) already exists.; nested exception is org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint ""pg_am_total_trades""
  Detail: Key (day, contract, area)=(2020-05-25, 20200525 19:00-20200525 20:00, 10YNO-4--------9) already exists.
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:243)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:72)
{code}

here is db dump:  [^cor_docker.dump] 
created with command 
{code}
pg_dump -Fc -p 24432 -h localhost -n public -U m7 -d m7core  > /tmp/cor_docker.dump
{code}","30/Jun/20 19:15;od044;Test report-tool version 2.41 on docker - passed
- job for collecting data: 
-- am-collect-total-trades
- job for generating report: 
-- am-generate-total-trades-report
-- am-generate-total-trades-with-hours-to-delivery-report
- the report 'total trades' contain a number of trades aggregated per contract and market area
- the report  'total trades with hours to delivery' contain a number of trades per contract, market area and its hours to delivery
- EIC delivery area is used instead of the market area in case market are has only one delivery area
- cancelled and recalled trades are not taken in account in calculation (they are excluded from calculation) 

File examples:
[^2018-02_TOTAL_TRADES_WITH_HOURS_TO_DELIVERY_2020-06-30-142208.csv]  
[^2018-02_TOTAL_TRADES_2020-06-30-142205.csv] 

Test data of trades for files above:
|DA Buy|DA Sell|Delivery|Quantity|State|Type|
|10YDK-2--------M|10YLV-1001A00074|2018-02-15 11:00:00-2018-02-15 12:00:00|2000|ACTI|Regular|
|10Y1001A1001A47J|10Y1001A1001A39I|2018-02-15 12:00:00-2018-02-15 13:00:00|1000|ACTI|Regular|
|10YDE-RWENET---I|10YFI-1--------U|2018-02-15 12:00:00-2018-02-15 13:00:00|2000|ACTI|Regular|
|10YNO-1--------2|10YNO-3--------J|2018-02-15 12:00:00-2018-02-15 13:00:00|3000|ACTI|Regular|
|10YNO-2--------T|10YNO-3--------J|2018-02-15 12:00:00-2018-02-15 13:00:00|1000|ACTI|Regular|
|10YLT-1001A0008Q|10YDK-1--------W|2018-02-15 13:00:00-2018-02-15 14:00:00|9000|RGRA|Regular|
|10Y1001A1001A47J|10Y1001A1001A46L|2018-02-15 14:00:00-2018-02-15 15:00:00|7000|ACTI|Regular|
|10YDE-EON------1|10Y1001A1001A46L|2018-02-15 14:00:00-2018-02-15 15:00:00|1000|ACTI|Regular|
|10Y1001A1001A44P|10YNO-4--------9|2018-02-15 15:00:00-2018-02-15 16:00:00|2000|ACTI|Regular|
|10YDK-1--------W|10YDK-1--------W|2018-02-15 15:00:00-2018-02-15 16:00:00|1000|ACTI|Regular|
|10YLV-1001A00074|10YDK-1--------W|2018-02-15 15:00:00-2018-02-15 16:00:00|4000|ACTI|Regular|
|10YLV-1001A00074|10YNO-4--------9|2018-02-15 15:00:00-2018-02-15 16:00:00|3000|ACTI|Regular|
|10YAT-APG------L|10YCH-SWISSGRIDZ|2018-02-15 15:00:00-2018-02-15 19:00:00|40000|ACTI|Block|
|10YNO-1--------2|10YDE-ENBW-----N|2018-02-15 16:00:00-2018-02-15 17:00:00|5000|ACTI|Regular|
|10YNO-1--------2|10YLT-1001A0008Q|2018-02-15 16:00:00-2018-02-15 17:00:00|1000|ACTI|Regular|
|10YDE-EON------1|10YNO-2--------T|2018-02-15 17:00:00-2018-02-15 18:00:00|4000|ACTI|Regular|
|10YLT-1001A0008Q|10YNO-2--------T|2018-02-15 17:00:00-2018-02-15 18:00:00|2000|ACTI|Regular|
|10YDOM-1001A084H|10YNL----------L|2018-02-15 19:00:00-2018-02-15 20:00:00|8000|ACTI|Regular|
|10YFI-1--------U|10Y1001A1001A44P|2018-02-15 19:00:00-2018-02-15 20:00:00|3000|ACTI|Regular|
|10Y1001A1001A45N|10YBE----------2|2018-02-15 20:00:00-2018-02-15 21:00:00|2000|ACTI|Regular|
|10Y1001A1001A45N|10YDK-2--------M|2018-02-15 20:00:00-2018-02-15 21:00:00|3000|ACTI|Regular|
|10YFI-1--------U|10YBE----------2|2018-02-15 20:00:00-2018-02-15 21:00:00|5000|ACTI|Regular|
|10YNO-1--------2|10YDK-2--------M|2018-02-15 20:00:00-2018-02-15 21:00:00|1000|ACTI|Regular|
|10Y1001A1001A44P|10Y1001A1001A39I|2018-02-15 21:00:00-2018-02-15 22:00:00|3000|ACTI|Regular|
|10Y1001A1001A44P|10YLV-1001A00074|2018-02-15 21:00:00-2018-02-15 22:00:00|2000|ACTI|Regular|
|10YDK-1--------W|10YFI-1--------U|2018-02-15 21:00:00-2018-02-15 22:00:00|2000|ACTI|Regular|
|10YNO-4--------9|10Y1001A1001A47J|2018-02-15 17:00:00-2018-02-15 18:00:00|3000|ACTI|Regular|
|10YDK-1--------W|10YFI-1--------U|2018-02-15 15:00:00-2018-02-15 16:00:00|5000|ACTI|Regular|
|10Y1001A1001A39I|10YNO-2--------T|2018-02-15 17:00:00-2018-02-15 18:00:00|1000|CNCL|Regular|
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Underscore column names in order to trade AM Indicator,XP-3170,97279,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,od044,jy268,jy268,23/Jun/20 09:39,20/Aug/20 17:10,22/Feb/21 13:21,23/Jun/20 11:54,,,3.1.0,,,,,,,,,,"Rename column from ""order / trade ratio"" to ""order_to_trade_ratio""",,jy268,od044,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jun/20 11:54;od044;2020-05_ORDER_TRADE_RATIO_2020-06-23-090129.csv;https://jira.deutsche-boerse.com/secure/attachment/85082/2020-05_ORDER_TRADE_RATIO_2020-06-23-090129.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,21081600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,None,,,,,,,,"1|y0b3sw:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 11,,,,,,,,,,,,,,,,0.5,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3008-virtual-das,XP-3009-underscores,XP-3015-underscores,develop,XP-3170-rename-column-in-order-to-trade-ratio-am-indicator,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Jun/20 11:54;od044;Test passed on Report-tool 2.41-snapshot

- underscore is applied

[^2020-05_ORDER_TRADE_RATIO_2020-06-23-090129.csv]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove distict from Order Trade ratio AM indicator collector,XP-3141,96894,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Fixed,jy268,qo794,qo794,15/Jun/20 11:12,20/Aug/20 17:07,22/Feb/21 13:21,22/Jun/20 08:30,,,3.1.0,,,,,,,,,,"Duplicate rows in testing data in {{cx_211_contract_history}} does not reflect a real situation, it can't ever happen in a real world. This flaw will be fixed within XP-3138. Once it's done, remove {{distinct}} from Order Trade ratio AM indicator DAO.",,qo794,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,21168000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0b1go:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 11,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Jun/20 08:30;qo794;fixed",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
All AM indicator reports should use UTC timezone,XP-3139,96891,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,eh941,eh941,15/Jun/20 10:59,04/Aug/20 19:53,22/Feb/21 13:21,24/Jun/20 11:25,,,3.1.0,,,,,,,,,,"Current implementation use only CET but we have an information from the customers we should use UTC only.



All reports should be UTC based, that is:

    collection interval is UTC day
    report generation interval is UTC month
    all timestamps/dates are rendered in UTC

Decision was taken by customers in https://jira.deutsche-boerse.com/browse/XBID-5120
",,eh941,hj444,qo794,tr866,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3186,,,,,,,,,,,,,"18/Jun/20 15:02;tr866;Net positions averaged - UTC, DST.xlsx;https://jira.deutsche-boerse.com/secure/attachment/84973/Net+positions+averaged+-+UTC%2C+DST.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,20995200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0b1gk:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 11 (S),,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,develop,master,XP-3011-fix,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Jun/20 15:12;tr866;BR02 - Net Position Averaged (/)
Successfully tested with version Report Tool 2.40-SNAPSHOT-95b9c2cc036ae794a9e0ba9900074401c6eaaa65
All dates are collected in UTC times (delivery_start_date, delivery_end_date), same as dates in the generated reports (deliveryStartDate).
Data are collected in UTC intervals(i.e. doesn't correspond to trading day) and report generation interval is also a month delimited by UTC times. Example of test scenario attached.
[^Net positions averaged - UTC, DST.xlsx]
","24/Jun/20 11:25;hj444;Issue split into:
|XP-3186|(Split 1) All AM indicator reports should use UTC timezone|
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 1) Order/trade ratio - Testing and additional adjustment,XP-3120,96760,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,od044,od044,od044,10/Jun/20 11:57,04/Aug/20 19:53,22/Feb/21 13:21,23/Jun/20 14:57,,,3.1.0,,,,,,,,,,"NOTE: waiting for clarification from customer and additional testing

+Order/trade ratio+

Per product[[1]|#_ftn1] the order/trade ratio aggregated per month.

All the order modifications resulting in new priority of the order (e.g. price modification, but this is not the case in all kind of volume modification) shall be handled as separate order.

 

[[1]|#_ftnref1] 15mins, 30mins, 60mins product + user defined product, so four in total.",,od044,qo794,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3012,,,,,,,,,,,,,,,,,"23/Jun/20 15:11;od044;2019-11_ORDER_TRADE_RATIO_2020-06-23-123750.csv;https://jira.deutsche-boerse.com/secure/attachment/85093/2019-11_ORDER_TRADE_RATIO_2020-06-23-123750.csv","23/Jun/20 15:11;od044;2020-05_ORDER_TRADE_RATIO_2020-06-23-090129.csv;https://jira.deutsche-boerse.com/secure/attachment/85094/2020-05_ORDER_TRADE_RATIO_2020-06-23-090129.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,20995200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y0t:s0000001",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 11,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Jun/20 11:51;od044;Please adjust a report per customer clarification in ticket XBID-5143

","22/Jun/20 09:01;qo794;Changes from XBID-5143 implemented","23/Jun/20 14:56;od044;Test passed on Report-tool 2.41-snapshot
 - new job am-collect-order-trade-ratio and am-generate-order-trade-ratio-report
 - the report collects and calculate order/trade ratio per product on monthly basis
 - Product in report is defined as follow:
 -- XBID_Hour_Power as 60 mins product
 -- XBID_Half_Hour_Power as 30 mins product
 -- XBID_Quarter_Hour_Power as 15 mins product
 -- User_Defined_Product used for other and user-defined product

Sample of test data:
|Order id|Single DA in MA|Delivery area|Market area|Delivery start|Delivery end|quaintity|Initial order Id|Order type|
|1| |TS-DA1---------V|TS-MA1---------P|2020-05-25 14:00:00|2020-05-25 15:00:00|1000| |Hourly|
|2| |TS-DA1---------V|TS-MA1---------P|2020-05-25 16:00:00|2020-05-25 17:00:00|1000| |Hourly|
|3| |TS-DA2---------K|TS-MA1---------P|2020-05-25 14:00:00|2020-05-25 15:00:00|1000| |Hourly|
|4| |TS-DA2---------K|TS-MA1---------P|2020-05-25 13:30:00|2020-05-25 14:00:00|1000| |Half-hourly|
|5| |TS-DA3---------9|TS-MA2---------E|2020-05-25 13:30:00|2020-05-25 14:00:00|1000| |Half-hourly|
|6| |TS-DA3---------9|TS-MA2---------E|2020-05-25 14:00:00|2020-05-25 14:30:00|1000| |Half-hourly|
|7| |TS-DA4---------Z|TS-MA2---------E|2020-05-25 17:30:00|2020-05-25 18:00:00|1000| |Half-hourly|
|8| |TS-DA4---------Z|TS-MA2---------E|2020-05-25 18:45:00|2020-05-25 19:00:00|1000| |Quarterly|
|9|x|TSDA17---------R|TSMA10---------F|2020-05-25 15:00:00|2020-05-25 16:00:00|1000| |Hourly|
|10|x|TSDA17---------R|TSMA10---------F|2020-05-25 15:30:00|2020-05-25 16:00:00|1000| |Half-hourly|
|11| |TS-DA1---------V|TS-MA1---------P|2020-05-25 15:00:00|2020-05-25 18:00:00|1000| |Block 3h|
|12| |TS-DA1---------V|TS-MA1---------P|2020-05-25 13:00:00|2020-05-25 16:00:00|1000| |Block 3h|
|13| |TS-DA1---------V|TS-MA1---------P|2020-05-25 15:00:00|2020-05-25 18:00:00|1000| |Block 3h|
|14| |10YDE-RWENET---I|10Y1001A1001A82H|2020-05-25 15:00:00|2020-05-25 16:00:00|1000| |Hourly|
|15| |10YDE-EON------1|10Y1001A1001A82H|2020-05-25 15:00:00|2020-05-25 16:00:00|1000| |Hourly|
|16| |10YDE-EON------1|10Y1001A1001A82H|2020-05-25 14:00:00|2020-05-25 15:00:00|1000| |Hourly|
|17| |10YDE-EON------1|10Y1001A1001A82H|2020-05-25 12:15:00|2020-05-25 12:30:00|1000| |Quarterly|
|18| |10YDE-EON------1|10Y1001A1001A82H|2020-05-25 12:00:00|2020-05-25 12:30:00|1000| |Half-hourly|
|19| |10YDE-EON------1|10Y1001A1001A82H|2020-05-25 22:00:00|2020-05-26 22:00:00|1000| |Base 24h|
|20| |10YDE-EON------1|10Y1001A1001A82H|2020-05-25 22:00:00|2020-05-26 10:00:00|1000| |Peak 12h|
|21| |10YDE-VE-------2|10Y1001A1001A82H|2020-05-25 22:00:00|2020-05-26 22:00:00|1000| |Base 24h|
|22| |10YDE-VE-------2|10Y1001A1001A82H|2020-05-25 22:00:00|2020-05-26 22:00:00|1000| |Base 24h|
|23|x|10YDK-1--------W|45Y-DUMMY-DK1--D|2020-05-25 16:00:00|2020-05-25 17:00:00|1000| |Peak 12h|
|24|x|10YFR-RTE------C|10YFR-RTE-TEST-W|2020-05-25 14:00:00|2020-05-25 15:00:00|1000| |Peak 12h|
|25|x|10YFR-RTE------C|10YFR-RTE-TEST-W|2020-05-25 14:00:00|2020-05-25 15:00:00|1000| |Peak 12h|
|26|x|10YFR-RTE------C|10YFR-RTE-TEST-W|2020-05-25 12:15:00|2020-05-25 12:30:00|1000| |Quarterly|
|27|x|10YFR-RTE------C|10YFR-RTE-TEST-W|2020-05-25 14:00:00|2020-05-25 15:00:00|2000|25|Hourly|
|28|x|10YFR-RTE------C|10YFR-RTE-TEST-W|2020-05-25 12:15:00|2020-05-25 12:30:00|1000|26|Quarterly|
 - 6 trades were matched

Report of order trade ratio
{code:java}
month,product,order_to_trade_ratio
MAY,User_Defined_Product,4.666666666666667
{code}
[^2020-05_ORDER_TRADE_RATIO_2020-06-23-090129.csv]

note: report contains only one product due to test env where is only user defined product

here is example of report with data dump from prod
{code:java}
month,product,order_to_trade_ratio
NOVEMBER,XBID_Hour_Power,7.766008495871838
NOVEMBER,XBID_Half_Hour_Power,44.70739219712526
NOVEMBER,XBID_Quarter_Hour_Power,11.6045055546876{code}
[^2019-11_ORDER_TRADE_RATIO_2020-06-23-123750.csv]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 1) The total number of submitted orders per product - Testing and additional adjustment,XP-3119,96759,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,od044,od044,od044,10/Jun/20 11:52,04/Aug/20 19:53,22/Feb/21 13:21,23/Jun/20 15:14,,,3.1.0,,,,,,,,,,"NOTE: waiting for clarification from customer and additional testing 

The total number of submitted orders per product[^[1]^|#_ftn1] and market area, on a daily basis. [8.1.b. ID monitoring]

 

[[1]|#_ftnref1] 15mins, 30mins, 60mins product + user defined product, so four in total.",,od044,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3013,,,,,,,,,,,,,,,,,"23/Jun/20 15:13;od044;2019-11_SUBMITTED_ORDERS_2020-06-23-123825.csv;https://jira.deutsche-boerse.com/secure/attachment/85095/2019-11_SUBMITTED_ORDERS_2020-06-23-123825.csv","23/Jun/20 15:13;od044;2020-05_SUBMITTED_ORDERS_2020-06-23-090134.csv;https://jira.deutsche-boerse.com/secure/attachment/85096/2020-05_SUBMITTED_ORDERS_2020-06-23-090134.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,20995200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y0t:s0000002",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 11,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Jun/20 11:50;od044;Please adjust a report per customer clarification in ticket XBID-5143","23/Jun/20 15:03;od044;Test passed on Report-tool 2.41-snapshot
 - new job am-collect-submitted-orders and am-generate-submitted-orders-report
 - the report collects and calculate submitted order per product and market area on daily basis
 - Delivery area EIC is used instead of MA EID in case MA has only one signle DA

Sample of test data:
|Order id|Single DA in MA|Delivery area|Market area|Delivery start|Delivery end|quaintity|Initial order Id|Order type|
|1| |TS-DA1---------V|TS-MA1---------P|2020-05-25 14:00:00|2020-05-25 15:00:00|1000| |Hourly|
|2| |TS-DA1---------V|TS-MA1---------P|2020-05-25 16:00:00|2020-05-25 17:00:00|1000| |Hourly|
|3| |TS-DA2---------K|TS-MA1---------P|2020-05-25 14:00:00|2020-05-25 15:00:00|1000| |Hourly|
|4| |TS-DA2---------K|TS-MA1---------P|2020-05-25 13:30:00|2020-05-25 14:00:00|1000| |Half-hourly|
|5| |TS-DA3---------9|TS-MA2---------E|2020-05-25 13:30:00|2020-05-25 14:00:00|1000| |Half-hourly|
|6| |TS-DA3---------9|TS-MA2---------E|2020-05-25 14:00:00|2020-05-25 14:30:00|1000| |Half-hourly|
|7| |TS-DA4---------Z|TS-MA2---------E|2020-05-25 17:30:00|2020-05-25 18:00:00|1000| |Half-hourly|
|8| |TS-DA4---------Z|TS-MA2---------E|2020-05-25 18:45:00|2020-05-25 19:00:00|1000| |Quarterly|
|9|x|TSDA17---------R|TSMA10---------F|2020-05-25 15:00:00|2020-05-25 16:00:00|1000| |Hourly|
|10|x|TSDA17---------R|TSMA10---------F|2020-05-25 15:30:00|2020-05-25 16:00:00|1000| |Half-hourly|
|11| |TS-DA1---------V|TS-MA1---------P|2020-05-25 15:00:00|2020-05-25 18:00:00|1000| |Block 3h|
|12| |TS-DA1---------V|TS-MA1---------P|2020-05-25 13:00:00|2020-05-25 16:00:00|1000| |Block 3h|
|13| |TS-DA1---------V|TS-MA1---------P|2020-05-25 15:00:00|2020-05-25 18:00:00|1000| |Block 3h|
|14| |10YDE-RWENET---I|10Y1001A1001A82H|2020-05-25 15:00:00|2020-05-25 16:00:00|1000| |Hourly|
|15| |10YDE-EON------1|10Y1001A1001A82H|2020-05-25 15:00:00|2020-05-25 16:00:00|1000| |Hourly|
|16| |10YDE-EON------1|10Y1001A1001A82H|2020-05-25 14:00:00|2020-05-25 15:00:00|1000| |Hourly|
|17| |10YDE-EON------1|10Y1001A1001A82H|2020-05-25 12:15:00|2020-05-25 12:30:00|1000| |Quarterly|
|18| |10YDE-EON------1|10Y1001A1001A82H|2020-05-25 12:00:00|2020-05-25 12:30:00|1000| |Half-hourly|
|19| |10YDE-EON------1|10Y1001A1001A82H|2020-05-25 22:00:00|2020-05-26 22:00:00|1000| |Base 24h|
|20| |10YDE-EON------1|10Y1001A1001A82H|2020-05-25 22:00:00|2020-05-26 10:00:00|1000| |Peak 12h|
|21| |10YDE-VE-------2|10Y1001A1001A82H|2020-05-25 22:00:00|2020-05-26 22:00:00|1000| |Base 24h|
|22| |10YDE-VE-------2|10Y1001A1001A82H|2020-05-25 22:00:00|2020-05-26 22:00:00|1000| |Base 24h|
|23|x|10YDK-1--------W|45Y-DUMMY-DK1--D|2020-05-25 16:00:00|2020-05-25 17:00:00|1000| |Peak 12h|
|24|x|10YFR-RTE------C|10YFR-RTE-TEST-W|2020-05-25 14:00:00|2020-05-25 15:00:00|1000| |Peak 12h|
|25|x|10YFR-RTE------C|10YFR-RTE-TEST-W|2020-05-25 14:00:00|2020-05-25 15:00:00|1000| |Peak 12h|
|26|x|10YFR-RTE------C|10YFR-RTE-TEST-W|2020-05-25 12:15:00|2020-05-25 12:30:00|1000| |Quarterly|
|27|x|10YFR-RTE------C|10YFR-RTE-TEST-W|2020-05-25 14:00:00|2020-05-25 15:00:00|2000|25|Hourly|
|28|x|10YFR-RTE------C|10YFR-RTE-TEST-W|2020-05-25 12:15:00|2020-05-25 12:30:00|1000|26|Quarterly|

Report of submitted order
{code:java}
day,product,area,""number of orders""
2020-05-25,User_Defined_Product,10Y1001A1001A82H,9
2020-05-25,User_Defined_Product,10YDK-1--------W,1
2020-05-25,User_Defined_Product,10YFR-RTE------C,5
2020-05-25,User_Defined_Product,TSDA17---------R,2
2020-05-25,User_Defined_Product,TS-MA1---------P,7
2020-05-25,User_Defined_Product,TS-MA2---------E,4
{code}
[^2020-05_SUBMITTED_ORDERS_2020-06-23-090134.csv]

note: report contains only one product due to test env where is only user defined product

here is an example of a report with a data dump from prod
{code:java}
day,product,area,number_of_orders
2019-11-01,XBID_Half_Hour_Power,10Y1001A1001A82H,5188
2019-11-01,XBID_Half_Hour_Power,10YFR-RTE------C,5917
2019-11-01,XBID_Hour_Power,10Y1001A1001A39I,2535
2019-11-01,XBID_Hour_Power,10Y1001A1001A44P,215
2019-11-01,XBID_Hour_Power,10Y1001A1001A45N,994
2019-11-01,XBID_Hour_Power,10Y1001A1001A46L,847
2019-11-01,XBID_Hour_Power,10Y1001A1001A47J,258
2019-11-01,XBID_Hour_Power,10Y1001A1001A48H,16
2019-11-01,XBID_Hour_Power,10Y1001A1001A82H,271506
...
{code}
 [^2019-11_SUBMITTED_ORDERS_2020-06-23-123825.csv] ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 1) Indicator - Total traded volume per number of crossed borders ,XP-3118,96755,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,hj444,zi174,hj444,10/Jun/20 11:18,04/Aug/20 19:53,22/Feb/21 13:21,24/Jun/20 11:07,,,3.1.0,,,,,,,,,,"+Indicator - Total traded volume per number of crossed borders+ 

This indicates for each day the total volume in MWh allocated in trades that crossed 0, 1, 2 … (to the maximum number of borders crossed by any trade on that day) borders.

The sum of the values for each day should equal the total traded volume for that day.

 

Example:",,eh941,hj444,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3180,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,20995200,,,,,,,,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y13:i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 10,Alpha Sprint 11 (S),,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Jun/20 16:53;eh941;Waiting for XP-3139 to be finished. It can be tested then.
","24/Jun/20 11:05;hj444;Issue split into:
|XP-3180|(Split 2) Indicator - Total traded volume per number of crossed borders |
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 1) Evolution of number of trades,XP-3117,96754,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,hj444,zi174,tr866,10/Jun/20 11:18,04/Aug/20 19:53,22/Feb/21 13:21,24/Jun/20 11:07,,,3.1.0,,,,,,,,,,"+Evolution of number of trades+

Number of trades and traded volumes grouped by trade timestamp against contract delivery time, aggregated per month. In 15-minute increments, report the total monthly number of trades and the total monthly trade volume grouped according to the time lapse between the trade time stamp and the delivery start of the traded contract.

 

The values reported will be: (1) number of trades, (2) traded volumes.

The maximum number of both these values for each month will be the number of 15-minute increments from the earliest gate opening for trading until the last gate closure for trading.

For each 15-minute period between start of trading and end of trading, we will see the total number of trades in the given month and the total traded volume in the given month that was realised in this 15-minute period on every day of the month.

In which 15-minute bucket a trade falls is decided by the distance between trade timestamp and delivery start of the traded contract.

In effect, this report tells us: in month A, x trades for a volume of y were traded between i and i + 15 minutes before delivery, where the first i is start of trading and the last i + 15 is gate closure for trading. There is no splitting per contract and no splitting per MA/DA. The aggregation is a sum.

 ",,tr866,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3181,,,,,,,,,,,,,"17/Jun/20 17:38;hj444;XP-3011_EvolutionOfNumberOfTrades_170620.xlsx;https://jira.deutsche-boerse.com/secure/attachment/84937/XP-3011_EvolutionOfNumberOfTrades_170620.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,22204800,,,,,,,,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0ay7j:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 10,Alpha Sprint 11 (S),,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 3) Net Position averaged,XP-3116,96752,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tr866,zi174,tr866,10/Jun/20 10:59,04/Aug/20 19:53,22/Feb/21 13:21,19/Jun/20 17:29,,,3.1.0,,,,,,,,,,"|+Net Position averaged+
For each market area, the net position in MWh averaged per 15min MTU across a month (92-100  values one for each MTU of the day averaged over the month considering DST) and per day (28-31 values one for each day of the month averaged over the day) 
 
The values reported will be: (1) the net position in MWh averaged per 15 min MTU across a month, (2) the net position in MWh averaged per day.
Net position is calculated as total purchased quantity – total sold quantity in MWh within MA.
 
Example of MTUs consideration:
 
e.g. 3 trades are created (with purchase in MA only i.e. import):
Q1-2MW,
Q2-3MW,
Q3-4MW
and 1 trade is created for
H1-1MW.
The net position shall be calculated on quarterly basis:
Q1= 0,75 MWh,
Q2=1 MWh,
Q3=1,25 MWh,
Q4= 0,25MWh.|",,tr866,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Jun/20 17:23;tr866;Test Scenarios and Results.xlsx;https://jira.deutsche-boerse.com/secure/attachment/85028/Test+Scenarios+and+Results.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,21340800,,,,,,,,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y11:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 10,Alpha Sprint 11 (S),,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3013-submitted-orders-product-grouping,develop,master,XP-3011-fix,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Jun/20 14:06;tr866;Tested on Docker with version Report Tool 2.40-SNAPSHOT-5d9221d2ced16b1b2338f2a84006149352094b37, R2.0.42-SNAPSHOT-d3f7c64e87c32420dccb2dd7b6ecdec8e7e9aaba

Unexpected result for net position averaged per day
|Simple multiple days scenario:| | | | |
|Trades Executed:| | | | |
|Number|Day|Contract|Product|IC|Qty/Prc|
|Trade 1|D0 - 24.09.2019|18-19|Intraday_Power|AMP->APG|16/16|
|Trade 2|D0 - 24.09.2019|18:00-18:15|Quarterly_Hour_Power|APG->AMP|13/13|
|Trade 3|D+1 - 25.09.2019|T18-19|Intraday_Power|AMP->APG|20/20|
|Trade 4|D+1 - 25.09.2019|T18-19|Intraday_Power|APG->AMP|36/36|
|Trade 5|D+1 - 25.09.2019|T18:30-19:00|Half_Hour_Power|AMP->APG|12/12|

Expected result:
 Quarterly net positions averaged:
|Day:| |D0 - 24.09.2019| D0 - 24.09.2019| D+1 - 25.09.2019| D+1 - 25.09.2019| D+1 - 25.09.2019|
|Contract|MA|Trade 1|Trade 2|Trade 3|Trade 4|Trade 5|Expected Net Position Averaged
 (sum of all quantities in MWh for the same contract divided by n of days)|Current result from report (/)|Alternative possible results
 (sum of all quantities in MWh for the same quarterly contract / divided by number of trades) (x)|
|18:00-18:15|DE|-4 (-16/4)|3,25 (13/4)|-5 (20/4)|9 (36/4)| |(-4+3,25-5+9)/2days=1,625|{color:#00875a}1.625{color}|{color:#172b4d}0,8125{color}|
|18:15-18:30|DE|-4| |-5|9| |0|{color:#00875a}0.000{color}|{color:#172b4d}0{color}|
|18:30-18:45|DE|-4| |-5|9|-3|-1,5|{color:#00875a}-1.500{color}|{color:#172b4d}-0,75{color}|
|18:45-19:00|DE|-4| |-5|9|-3|-1,5|{color:#00875a}-1.500{color}|{color:#172b4d}-0,75{color}|
|18:00-18:15|APG|4|-3,25|5|-9| |-1,625|{color:#00875a}-1.625{color}|{color:#172b4d}-0,8125{color}|
|18:15-18:30|APG|4| |5|-9| |0|{color:#00875a}0.000{color}|{color:#172b4d}0{color}|
|18:30-18:45|APG|4| |5|-9|3|1,5|{color:#00875a}1.500{color}|{color:#172b4d}0,75{color}|
|18:45-19:00|APG|4| |5|-9|3|1,5|{color:#00875a}1.500{color}|{color:#172b4d}0,75{color}|

Daily net positions averaged:
|Trading day|MA|Expected Restult|Current Restult|Possible Calculation|
|24.09.2019|DE|-2,55|{color:#00875a}*-2.550*{color}|Sum of all trade quantities for the day / divided by the number of quarterly parts of each trade, i.e. (--4--4-4-4+3,25)/5=-12,75/5={color:#00875a}*-2.550 (x)*
{color}|
|25.09.2019|DE|1|{color:#de350b}*1.667* (10/6=1,667){color}| Sum of all trade quantities for the day / divided by the number of quarterly contracts where any trade was executed?, i.e. (-5-5-5-5+9+9+9+9-3-3)/4=10/4=*{color:#ff8b00}2,5{color}*? (/)|
|24.09.2019|APG|2,55|{color:#00875a}*2.550*{color}| |
|25.09.2019|APG|-1|{color:#de350b}*-1.667*{color}| |

Points to discuss:
 # the net position in MWh averaged per 15 min MTU across a month
 ## Average to be counted by division by number od *DAYS*?(/)
 ## Average to be counted by division by number of *TRADES*?(x)
 ## Average is achieved simply by conversion to MWh and split to 15min MTU, no more division is needed?(x)
 # the net position in MWh averaged per day.
 ## Average to be counted by division by number of *quarterly parts of all trades*(e.g. 1 hourly trade,18-19=4parts,1 quaterly,18:00-18:15 = 1 part)?(x)
 ## Average to be counted by division by number or *quarterly contracts* where any trade was executed?(/)
 ## No division needed, average meant by conversion to MWh and split in 15min MTU(x)","15/Jun/20 14:35;tr866;Successfully tested with version Report Tool 2.40-SNAPSHOT-2e01db832b8b3937ab2150932740f1a2f3f6af86
 After fix the daily net position averaged works as agreed and is averaged per contracts where any trade was executed.
|Daily net positions averaged|Expected Restult|Current Restult|
|24.09.2019|DE|-3,1875|*{color:#00875a}-3.188{color}*|
|25.09.2019|DE|2,5|*{color:#00875a}2.500{color}*|
|24.09.2019|APG|3,1875|*{color:#00875a}3.188{color}*|
|25.09.2019|APG|-2,5|*{color:#00875a}-2.500{color}*|

Retested also other previously failing scenarios and they all get expected result for daily net position averaged as attached [^Test Scenarios and Results.xlsx]","19/Jun/20 17:29;tr866;Successfully tested on Docker with version Report Tool 2.40-SNAPSHOT-95b9c2cc036ae794a9e0ba9900074401c6eaaa65
Among other reports were tested against trades for various products(Quarterly Hour, Half Hour, Intraday, Block orders, Continous Trading), trades were done for multiple days, also behaviour for recalled,recall rejected cancelled trades was observed. Reports were also generated for DST days with trades on boundary days/hours and also 29th February on leap year was tested. Trades were also executed on border with VDA and also cross-border trades were done passing through internal interconnector and then splitting in two paths.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AM - Ratio of order/trade report is not correctly calculated ,XP-3102,96617,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,od044,od044,od044,05/Jun/20 10:58,31/Aug/20 15:38,22/Feb/21 13:21,08/Jun/20 14:18,,,3.1.0,,,,,,,,,,"Ratio of order/trade report is not correctly calculated. 

Actual:
trade/order

Expect
order/trade

to align with CR description ",,od044,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,22377600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3448,,,,,,,,,,,,,,05/Jun/20 10:58,,,,,,,,,,,,,,,,,,,,,"1|y0azuw:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,Systemtest,,,Systemtest,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Jun/20 14:18;od044;Test passed",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Analysis of situation after introducing new validations in XP-3022,XP-3074,96321,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Critical,Not a Bug,radeale,qo794,qo794,27/May/20 13:20,20/Aug/20 17:06,22/Feb/21 13:21,24/Jun/20 16:20,,,3.1.0,,,,,,,,,,"2 new validations were introduced within XP-3022 for InterConnectors in common ATC border, all configurations of non-leading InterConnectors must have the same value as in related configurations of a leading IC for the following parameters:
* minimum capacity 
* maximum capacity

Once the change in question is deployed, InterConnectors that do not comply with the constraints above will not be able to modify at all, only if configurations breaching such validations are not valid in the past (meaning it's still possible to edit those 2 parameters). The only way how this situation could be fixed after deploying the new version would be to stop core, correct values and start core again. This is probably fine for customers' testing envs, but a *huge problem* for production.

The goal of this jira is to analyze the current production grid setup whether the situation might appear, inform customers about the risk and come up with a solution.

",,qo794,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4901,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,20908800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3448,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0ay6g:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 10 (S),HOT Sprint 11,HOT Sprint 12 (S),,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/May/20 13:40;qo794;h2. Production grid setup
h3. List of all common ATC borders
{code:sql}
select * from cmm_225_border_configuration where common_atc = true;
{code}
||id||base_entity_status||valid_from||valid_to||common_atc||border_id||leading_ic_id||leading_ic_name||
|38|ACTIVE|2017-12-07 23:00:00| |true| 5|45|TTG-TTN|
|40|ACTIVE|2017-12-07 23:00:00| |true| 7| 8|AMP-RTE|
|45|ACTIVE|2018-09-30 22:00:00| |true| 2| 7|AMP-APG|
|59|ACTIVE|2019-11-09 23:00:00| |true|42|56|CEPS-50HzT|
h3. Common ATC borders configurations
{code:sql}
select * from cmm_225_border_configuration where border_id in (2, 5, 7, 42);
{code}
||id||base_entity_status||valid_from||valid_to||common_atc||border_id||leading_ic_id||leading_ic_name||
|37|ACTIVE|2017-12-04 23:00:00|2017-12-07 23:00:00|false| 5|  | |
|38|ACTIVE|2017-12-07 23:00:00|                   |true| 5|45|TTG-TTN|
|39|ACTIVE|2017-12-04 23:00:00|2017-12-07 23:00:00|false| 7|  | |
|40|ACTIVE|2017-12-07 23:00:00|                   |true| 7| 8|AMP-RTE|
|44|ACTIVE|2017-12-04 23:00:00|2018-09-30 22:00:00|false| 2|  | |
|45|ACTIVE|2018-09-30 22:00:00|                   |true| 2| 7|AMP-APG|
|58|ACTIVE|2019-11-06 23:00:00|2019-11-09 23:00:00|false|42|  | |
|59|ACTIVE|2019-11-09 23:00:00|                   |true|42|56|CEPS-50HzT|

h3. InterConnector configurations within common ATC borders
{code:sql}
select area1.short_name,
       area2.short_name,
       ic.connector_id,
       b_config.border_id,
       b_config.leading_ic_name,
       ic_config.valid_from,
       ic_config.valid_to,
       ic_config.min_capacity,
       ic_config.max_capacity
from cmm_230_inter_connector ic
         join cmm_225_border_configuration b_config on b_config.border_id = ic.border_id
         join cmm_235_interconnector_configuration ic_config on ic.connector_id = ic_config.interconnector_id
         join cmm_200_area area1 on ic.area_1_eic = area1.area_eic
         join cmm_200_area area2 on ic.area_2_eic = area2.area_eic
where b_config.common_atc = true
order by b_config.border_id, ic_config.valid_from;
{code}
||short_name||short_name||connector_id||border_id||leading_ic_name||valid_from||valid_to||min_capacity||max_capacity||
|AMP        | APG        |            7 |         2 | AMP-APG         | 2017-12-05 23:00:00 | 2018-09-30 22:00:00 |   -100000000 |    100000000|
|TNG        | APG        |           47 |         2 | AMP-APG         | 2018-09-30 22:00:00 | 2019-03-18 23:00:00 |   -100000000 |      9000000|
|AMP        | APG        |            7 |         2 | AMP-APG         | 2018-09-30 22:00:00 | 2019-03-18 23:00:00 |   -100000000 |      9000000|
|TTG        | APG        |           48 |         2 | AMP-APG         | 2018-09-30 22:00:00 | 2019-03-18 23:00:00 |   -100000000 |      9000000|
|AMP        | APG        |            7 |         2 | AMP-APG         | 2019-03-18 23:00:00 | 2019-07-31 22:00:00 |   -100000000 |      9000000|
|TTG        | APG        |           48 |         2 | AMP-APG         | 2019-03-18 23:00:00 | 2019-07-31 22:00:00 |   -100000000 |      9000000|
|TNG        | APG        |           47 |         2 | AMP-APG         | 2019-03-18 23:00:00 | 2019-07-31 22:00:00 |   -100000000 |      9000000|
|TTG        | APG        |           48 |         2 | AMP-APG         | 2019-07-31 22:00:00 |                     |   -100000000 |      9000000|
|AMP        | APG        |            7 |         2 | AMP-APG         | 2019-07-31 22:00:00 |                     |   -100000000 |      9000000|
|TNG        | APG        |           47 |         2 | AMP-APG         | 2019-07-31 22:00:00 |                     |   -100000000 |      9000000|
|TTG        | TTN        |           45 |         5 | TTG-TTN         | 2017-12-05 23:00:00 | 2017-12-07 23:00:00 |     -9999900 |      9999900|
|AMP        | TTN        |           11 |         5 | TTG-TTN         | 2017-12-05 23:00:00 | 2017-12-07 23:00:00 |     -9999900 |      9999900|
|AMP        | TTN        |           11 |         5 | TTG-TTN         | 2017-12-07 23:00:00 | 2018-12-31 23:00:00 |     -9999900 |      9999900|
|TTG        | TTN        |           45 |         5 | TTG-TTN         | 2017-12-07 23:00:00 | 2018-12-31 23:00:00 |     -9999900 |      9999900|
|TTG        | TTN        |           45 |         5 | TTG-TTN         | 2018-12-31 23:00:00 |                     |     -9999900 |      9999900|
|AMP        | TTN        |           11 |         5 | TTG-TTN         | 2018-12-31 23:00:00 |                     |     -9999900 |      9999900|
|AMP        | RTE        |            8 |         7 | AMP-RTE         | 2017-12-05 23:00:00 | 2017-12-07 23:00:00 |     -9999900 |      9999900|
|TNG        | RTE        |           46 |         7 | AMP-RTE         | 2017-12-05 23:00:00 | 2017-12-07 23:00:00 |     -9999900 |      9999900|
|AMP        | RTE        |            8 |         7 | AMP-RTE         | 2017-12-07 23:00:00 | 2019-03-18 23:00:00 |     -9999900 |      9999900|
|TNG        | RTE        |           46 |         7 | AMP-RTE         | 2017-12-07 23:00:00 | 2019-03-18 23:00:00 |     -9999900 |      9999900|
|AMP        | RTE        |            8 |         7 | AMP-RTE         | 2019-03-18 23:00:00 |                     |    -99999900 |      9999900|
|TNG        | RTE        |           46 |         7 | AMP-RTE         | 2019-03-18 23:00:00 |                     |     -9999900 |      9999900|
|CEPS       | 50HzT      |           56 |        42 | CEPS-50HzT      | 2019-11-06 23:00:00 |                     |     -2800000 |      3200000|
|CEPS       | TTG        |           55 |        42 | CEPS-50HzT      | 2019-11-06 23:00:00 | 2019-11-09 23:00:00 |     -1400000 |      1600000|
|CEPS       | TTG        |           55 |        42 | CEPS-50HzT      | 2019-11-09 23:00:00 |                     |     -2800000 |      3200000|
","27/May/20 15:47;qo794;h2. Conclusion
Based on the analysis above, it looks like only the minimum capacity on TNG-RTE InterConnector will have to modified in order to comply with the new rules. This change can be done manually by a reference data admin via CMM GUI as the configuration with the wrong value is still valid, but *it must be done before deploying of XP-3022!*","27/May/20 16:02;qo794;[~radeale] could you please open discussion with customer regarding this topic, if there is a need of some automatic solution (a flyway migration script), we would need to think it through whether it is even possible.","01/Jun/20 11:06;radeale;Communicated to the MSD via XBID-4901 - [this comment|https://jira.deutsche-boerse.com/browse/XBID-4901?focusedCommentId=280622&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-280622].","24/Jun/20 16:20;radeale;Solution approved by the customer: They will modify the TNG-RTE configuration.",,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 2) Net Position averaged,XP-3070,96239,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tr866,zi174,ek176,27/May/20 09:21,04/Aug/20 19:53,22/Feb/21 13:21,10/Jun/20 11:00,,,3.1.0,,,,,,,,,,"|+Net Position averaged+
For each market area, the net position in MWh averaged per 15min MTU across a month (92-100  values one for each MTU of the day averaged over the month considering DST) and per day (28-31 values one for each day of the month averaged over the day) 
 
The values reported will be: (1) the net position in MWh averaged per 15 min MTU across a month, (2) the net position in MWh averaged per day.
Net position is calculated as total purchased quantity – total sold quantity in MWh within MA.
 
Example of MTUs consideration:
 
e.g. 3 trades are created (with purchase in MA only i.e. import):
Q1-2MW,
Q2-3MW,
Q3-4MW
and 1 trade is created for
H1-1MW.
The net position shall be calculated on quarterly basis:
Q1= 0,75 MWh,
Q2=1 MWh,
Q3=1,25 MWh,
Q4= 0,25MWh.|",,ek176,ll664,tr866,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3116,,,,,,,,,,,,,"04/Jun/20 17:42;tr866;Test Results.xlsx;https://jira.deutsche-boerse.com/secure/attachment/84475/Test+Results.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,21600000,,,,,,,,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y10:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 10,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-4273-owasp-zap-enable,XP-3070,XP-3012-deprecated-class-fix,XP-2979-postgresql,XP-3264,XP-3012,XP-4526-resource-managment-fix,develop,XP-3230,XP-2232,fixing-failover,master,,,,,,,,,,,,,,,,,,,,,,true,"29/May/20 07:24;ll664;Could be tested already. The only missing/unclear piece is DST. Currently, long DST hours are not distinguished in any way and are grouped into single 02:00-03:00 15 minutes interval. Which might be in the end what customer wants, waiting for their clarification.","03/Jun/20 12:16;tr866;Tested on docker with version Report Tool 2.39 SNAPSHOT, XB R2.0.41-SNAPSHOT (Build 0fc9d4a374565fa35eeeb9eb956a40b092bec057)
 It looks to me that net position is calculated wrong when BLOCK order is included.
 Scenario:
|Trade 1|17-18|Intraday_Power|AMP->APG|21/21|
|Trade 2|17-19(Block)|Intraday_Power|APG->AMP|17/17|

Expected result vs values from the report:
|Quarterly| | | | | |
|Contract|MA|Trade 1|Trade 2|Net Position|Current result from report|
|17:00-17:15|DE|-5,25|4,25|*{color:#00875a}-1,00{color}*|*{color:#de350b}-0,50{color}*|
|17:15-17:30|DE|-5,25|4,25|*{color:#00875a}-1,00{color}*|*{color:#de350b}-0,50{color}*|
|17:30-17:45|DE|-5,25|4,25|*{color:#00875a}-1,00{color}*|*{color:#de350b}-0,50{color}*|
|17:45-18:00|DE|-5,25|4,25|*{color:#00875a}-1,00{color}*|*{color:#de350b}-0,50{color}*|
|18:00-18:15|DE| |4,25|4,25|4,25|
|18:15-18:30|DE| |4,25|4,25|4,25|
|18:30-18:45|DE| |4,25|4,25|4,25|
|18:45-19:00|DE| |4,25|4,25|4,25|

Where as daily net position is counted correctly for the same case:
|Daily Sum|-21,00|34,00|
|Number of quarterlies|4,00|8,00|
|Daily Average|{color:#00875a}*1,083333333*{color}| |
|Daily Net Position from Report|{color:#00875a}*1,083*{color}| |","03/Jun/20 13:21;tr866;It actually rather looks like that the net position gets divided by number of different types products or types of orders. Either I am missing something or the same is happening when hourly, quarterly, half-hour are mixed up..
 Scenario:
|Trade 1|19-20|Intraday_Power|AMP->APG|65/65|
|Trade 2|Q19:00-19:15|Quarterly_Hour_Power|APG->AMP|78/78|
|Trade 3|H19:30-20:00|Half_Hour_Power|APG->AMP|5/5|
|Trade 4|H19:30-20:00|Half_Hour_Power|APG->AMP|4/4|
|Trade 5|Q19:45-20:00|Quarterly_Hour_Power|APG->AMP|8/8|


 Expected result vs values from the report:
|Quarterly| | | | | | | | |
|Contract|MA|Trade 1|Trade 2|Trade 3|Trade 4|Trade 5|Net Position|Current result from report|
|19:00-19:15|DE|-16,25|19,50| | | |{color:#00875a}*3,25*{color}|{color:#de350b}*1,625*{color}|
|19:15-19:30|DE|-16,25| | | | |{color:#00875a}*-16,25*{color}|{color:#00875a}*-16,25*{color}|
|19:30-19:45|DE|-16,25| |1,25|1,00| |{color:#00875a}*-14,00*{color}|{color:#de350b}*-7*{color}|
|19:45-20:00|DE|-16,25| |1,25|1,00|2,00|{color:#00875a}*-12,00*{color}|{color:#de350b}*-4*{color}|","04/Jun/20 07:15;ll664;You're right Tomas, currently the algorithm takes all quarters for a whole month (say, all netpositions for 00:00-00:15) and averages them, whereas it should first calculate netpositions for quarters on daily basis and *then* calculate monthly average.

I will prepare the fix.","04/Jun/20 17:18;tr866;Trades that were *{color:#de350b}cancelled{color}* or {color:#de350b}*recall request*{color} was {color:#de350b}*accepted*{color} for them are included in the calculations.
It's not specifically mentionned in the user story, but I assume the volumes of trade that were recalled or cancelled can't be considered as purchased or sold. I believe in this logic the other reports of AM indicators should be consistent and in the first report XP-3008 such trades were excluded.","06/Jun/20 12:01;tr866;Recall of trades retested on docker with version 2.39-SNAPSHOT-54008a1b283bc812f58e818c126f14749bf03693

Recalled, cancelled trades are omitted from am net position collector as expected.
----
|Recall, Cancel:| | | | | |
|Trades Executed:| | | | | |
|Number|Mod Type Code|Contract|Product|IC|Qty/Prc|
|Trade 1|RREQ (later auto RREJ)|15-16|Intraday_Power|LV->LT|77/77|
|Trade 2|RREJ|16-17|Intraday_Power|LT->LV|66/66|
|Trade 3|RGRA|17-18|Intraday_Power|LV->LT|16/16|
|Trade 4|CNCL|18-19|Intraday_Power|LT->LV|34/34|
|Trade 5|RREQ->CNCL|19-20|Intraday_Power|LV->LT|11/11|
|Trade 6|RREJ->CNCL|20-21|Intraday_Power|LT->LV|19/19|
|Trade 7|ACTI|15-00|Intraday_Power - Block|LV->LT|70/70|

 
|Expected result:| | | | | | |
|Quarterly Net Positions| | | | | | |
|Contract|MA|Trade 1|Trade 2|Trade 7|Expected Net Position|Current result from report|
|15:00-15:15|LV|-19,25| |-17,5|-36,75| *{color:#00875a}-36,75{color}*|
|15:15-15:30|LV|-19,25| |-17,5|-36,75| *{color:#00875a}-36,75{color}*|
|15:30-15:45|LV|-19,25| |-17,5|-36,75| *{color:#00875a}-36,75{color}*|
|15:45-16:00|LV|-19,25| |-17,5|-36,75| *{color:#00875a}-36,75{color}*|
|16:00-16:15|LV| |16,5|-17,5|-1| *{color:#00875a}-1{color}*|
|16:15-16:30|LV| |16,5|-17,5|-1| *{color:#00875a}-1{color}*|
|16:30-16:45|LV| |16,5|-17,5|-1| *{color:#00875a}-1{color}*|
|16:45-17:00|LV| |16,5|-17,5|-1| *{color:#00875a}-1{color}*|
|17:00-17:15|LV| | |-17,5|-17,5| *{color:#00875a}-17,5{color}*|
|17:15-17:30|LV| | |-17,5|-17,5| *{color:#00875a}-17,5{color}*|
|17:30-17:45|LV| | |-17,5|-17,5| *{color:#00875a}-17,5{color}*|
|17:45-18:00|LV| | |-17,5|-17,5| *{color:#00875a}-17,5{color}*|
|18:00-18:15|LV| | |-17,5|-17,5| *{color:#00875a}-17,5{color}*|
|18:15-18:30|LV| | |-17,5|-17,5| *{color:#00875a}-17,5{color}*|
|18:30-18:45|LV| | |-17,5|-17,5| *{color:#00875a}-17,5{color}*|
|18:45-19:00|LV| | |-17,5|-17,5| *{color:#00875a}-17,5{color}*|
|19:00-19:15|LV| | |-17,5|-17,5| *{color:#00875a}-17,5{color}*|
|19:15-19:30|LV| | |-17,5|-17,5| *{color:#00875a}-17,5{color}*|
|19:30-19:45|LV| | |-17,5|-17,5| *{color:#00875a}-17,5{color}*|
|19:45-20:00|LV| | |-17,5|-17,5| *{color:#00875a}-17,5{color}*|
|20:00-20:15|LV| | |-17,5|-17,5| *{color:#00875a}-17,5{color}*|
|20:15-20:30|LV| | |-17,5|-17,5| *{color:#00875a}-17,5{color}*|
|20:30-20:45|LV| | |-17,5|-17,5| *{color:#00875a}-17,5{color}*|
|20:45-21:00|LV| | |-17,5|-17,5| *{color:#00875a}-17,5{color}*|
|21:00-21:15|LV| | |-17,5|-17,5| *{color:#00875a}-17,5{color}*|
|...|LV| | |-17,5|-17,5| *{color:#00875a}-17,5{color}*|
|23:45-00:00|LV| | |-17,5|-17,5| *{color:#00875a}-17,5{color}*|

 
----
plus one simple recall
|Trades Executed:| | | | | |
|Number|Mod Type Code|Contract|Product|IC|Qty/Prc|
|Trade 1|RGRA|15-16|Intraday_Power|MALTA->SICI|13/13|

 
|Expected result:| | | | |
|Quarterly Net Positions| | | | |
|Contract|MA|Trade 1|Expected Net Position|Current result from report|
|15:00-15:15|MALTA|N/A|N/A| *{color:#00875a}N/A{color}*|
|15:15-15:30|MALTA|N/A|N/A| *{color:#00875a}N/A{color}*|
|15:30-15:45|MALTA|N/A|N/A| *{color:#00875a}N/A{color}*|
|15:45-16:00|MALTA|N/A|N/A| *{color:#00875a}N/A{color}*|","10/Jun/20 10:59;tr866;Issue split into:
|XP-3116|(Split 3) Net Position averaged|
","17/Jun/20 13:56;ll664;h2. Indicator summary

Data collection and generation follows the very same approach as described in details here.
h3. Net position calculation

Imagine we have following trades:
||ID||Contract||Buy Area||Sell Area||Qty||
|1|2020-05-01 12:15-12:30|AMP|APG|100 MW|
|2|2020-05-01 12:00-14:-00|AMP|APG|300 MW|
|3|2020-05-20 11:00-13:00|APG|AMP|250 MW|

Recalled/cancelled trades are not included in calculation.
h4. Quarterly net position

For quarterly average netposition, we calculate netposition for each quarter for the whole month and then average them throughout the whole month.

The table below show calculation for the 12:15-12:30 quarter
|| ||2020-05-01 12:15-12:30||2020-05-20 12:15-12:30||Monthly Average for 12:15-12:30||
|Net position MWH - AMP|100|-62.5|18.75|
|Net position MWH - APG|-100|62.5|-18.75|

Quarter 12:15-12:30 is affected by all three trades, so for the AMP area
 *  for 2020-05-01 12:15-12:30 we sum quantities for trade 1 and 2 and convert to MWHs: (100 + 300)/4 = 100
 * 2020-05-20 12:15-12:30 - only a single trade apply (3), hence just convert to MWHs: -250/4 = -62.5
 * now we average values: 100-62.5=18.75

h4. Daily net position

For the daily net position, we split the trades into respective quarters, calculate net positions for them and then calculate average for given day.

The following tables shows calculation for day 2020-05-01 and AMP area, quantities has been converted to MWH:
||Quarter||Trade 1||Trade 2||Net position||
|12:00-12:15| |75|75|
|12:15-12:30| 25|75|100|
|12:30-12:45| |75|75|
|12:45-13:00| |75|75|
|13:00-13:15| |75|75|
|13:15-13:30| |75|75|
|13:30-13:45| |75|75|
|13:45-14:00| |75|75|
|*Average*| | |*78.125*|

 

 ",,,,,,,,,,,,,,,,,,,,,,,,
Only latest ATCs should be reflected in OCC,XP-3048,95860,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tr866,tr866,tr866,19/May/20 14:21,04/Aug/20 16:11,22/Feb/21 13:21,15/Jun/20 18:07,,,2.0.31,3.0.1 OCC,CMM,,,,,,,,"h4. Description:

Only latest ATCs should be reflected in OCC files when no ATC changes happened during last 15 minutes, not history of all transactions for whole day.
 Basically after the implementation of BR03 the OCC files should contain the same number of time series with the same timestamps as before the changes [^13 - last 15 mins no change - 20200514_OCC_BRNN-SUD_013.xml] , just each time series now is supposed to cover ATC data for all delivery contracts of the day.
h4. Expected behaviour:

When multiple allocations were made at different times for the same contract and then OCC was downloaded after more than 15 mins it should contain only one record for the one contract with the latest timestamp, not records for all the changes made for the same contract during whole day
  
{quote}DFS800 Capacity Management TSO Interface, Chapter 4.1.12 Offered cross-zonal capacity (OCC)
 - In case of no changes in the ATC during the proceeding 15 minutes, the lates ATCs are reflected per CMM contract per direction with the timestamp of{quote}
2 Files from version 2.0.36 attached showing only last ATCs are included in OCC when no changes occured during last 15 minutes.
 First file [^08 - 2nd allocation same contract - 20200514_OCC_BRNN-SUD_008.xml] showing records for publish and 2 allocations at different times for contract H21.
 Second file [^13 - last 15 mins no change - 20200514_OCC_BRNN-SUD_013.xml] after 15 mins of no ATC changes showing only last ATCs are included for contract H21, not all history for the day.
h4. Current behaviour:

If multiple ATC changes were done on the same contract and OCC file is downloaded after more than 15 mins wihtout ATC changes, the OCC file contains history of all ATC changes, not just last ATCs.
 OCC covering publish, otc change for H22 and 2 allocations for H24 attached [^20200515_OCC_BRNN-SUD_IMPL_002.xml]
 OCC after more than 15 mins of inactivity containig both transactions for H24 contract, not just last ATC [^20200515_OCC_BRNN-SUD_IMPL_003.xml]",,od044,radeale,tr866,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/May/20 14:17;tr866;08 - 2nd allocation same contract - 20200514_OCC_BRNN-SUD_008.xml;https://jira.deutsche-boerse.com/secure/attachment/83981/08+-+2nd+allocation+same+contract+-+20200514_OCC_BRNN-SUD_008.xml","19/May/20 14:17;tr866;13 - last 15 mins no change - 20200514_OCC_BRNN-SUD_013.xml;https://jira.deutsche-boerse.com/secure/attachment/83980/13+-+last+15+mins+no+change+-+20200514_OCC_BRNN-SUD_013.xml","19/May/20 14:17;tr866;20200515_OCC_BRNN-SUD_IMPL_002.xml;https://jira.deutsche-boerse.com/secure/attachment/83979/20200515_OCC_BRNN-SUD_IMPL_002.xml","19/May/20 14:17;tr866;20200515_OCC_BRNN-SUD_IMPL_003.xml;https://jira.deutsche-boerse.com/secure/attachment/83978/20200515_OCC_BRNN-SUD_IMPL_003.xml","08/Jun/20 11:34;od044;20200608_OCC_RTE-DE_IMPL_001-2.xml;https://jira.deutsche-boerse.com/secure/attachment/84530/20200608_OCC_RTE-DE_IMPL_001-2.xml","08/Jun/20 11:34;od044;20200608_OCC_RTE-DE_IMPL_001.xml;https://jira.deutsche-boerse.com/secure/attachment/84531/20200608_OCC_RTE-DE_IMPL_001.xml","08/Jun/20 11:34;od044;20200608_OCC_RTE-DE_IMPL_011.xml;https://jira.deutsche-boerse.com/secure/attachment/84528/20200608_OCC_RTE-DE_IMPL_011.xml","08/Jun/20 11:34;od044;20200608_OCC_RTE-DE_IMPL_012.xml;https://jira.deutsche-boerse.com/secure/attachment/84529/20200608_OCC_RTE-DE_IMPL_012.xml","12/Jun/20 15:33;tr866;Syt2 - OCC - XP-3048.zip;https://jira.deutsche-boerse.com/secure/attachment/84839/Syt2+-+OCC+-+XP-3048.zip",,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,21945600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2609,,,,,,,,,,,,,,19/May/20 14:21,,,,,,,,,,,,,,,,,,,,,"1|y0avew:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 9,HOT Sprint 10 (S),HOT Sprint 11,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3233-acceptance-jgitflow,XP-3048-only-two-ts-in-case-of-no-atc-in-requested-time-range,hotfix,prod,XP-4211-perf-analysis-jh,master-prod,XP-4122-perf-analysis,develop,master-xbid-2.0.36.x,master-acceptance,master,XP-4250,XP-3233-prod-jgitflow,acceptance,XP-222-acceptance,XP-4526-resource-managment-fix,XP-3048-merge-to-xbid-2.0.36.x,XP-4152-acceptance,xbid-2.0.36.x,XP-3909,,,,,,,,,,,,,,true,"28/May/20 13:38;od044;Test passed on R2.0.40 on SYT3
- OCC file contains time-series with the latest ATC values for each delivery interval. 

File examples:
- after auto-publish
 [^20200608_OCC_RTE-DE_IMPL_011.xml] 
- ATC change during last interval
 [^20200608_OCC_RTE-DE_IMPL_001.xml] 
- ATC change during last interval
 [^20200608_OCC_RTE-DE_IMPL_001-2.xml] 
- no ATC change during last interval - contains only latest ATC change with regard to invidual contracts
 [^20200608_OCC_RTE-DE_IMPL_012.xml] 
","08/Jun/20 16:29;radeale;The desired solution as clarified by the customer. Please let's make one last fix :)

{code}With the new solution each timeserie cover all 24 hours, i.e. 2 timeseries (one per each direction) are providing the latest capacity information. The approach you described is not reflecting this situation.{code}","12/Jun/20 15:32;tr866;Successfully tested on Syt2 with version XB R2.0.36.5 (Build db12206677abaa7c78eb92fff0da8c5536746c74)

h4. Scenario of the test:
Created FTC on AMP-APG border to get generated every 5 mins:
# Capacity was published at 12.06. 14:22
# 1st file generated at 14:25 contains TimeSeries with Publishment of capactiy at 14:22 (/)
[20200612_OCC_DE-APG_IMPL_001.xml|https://jira.deutsche-boerse.com/secure/attachmentzip/unzip/95860/84839%5B0%5D/]
# Allocation was made at 14:29 on 20-21 contract for 61 MW in AMP->APG direction 
# 2nd file generated at 14:30 contains 2 TimeSeries with ATCs after Publishment of Capacity and allocation of 61 MW for 20-21 contract (/)
[20200612_OCC_DE-APG_IMPL_002.xml|https://jira.deutsche-boerse.com/secure/attachmentzip/unzip/95860/84839%5B3%5D/]
# Allocation was made at 14:34 on 20-21 contract and 21-22 contract for 20 MW in AMP->APG direction
# 3rd file generated at 14:35 contains 3 TimeSeries with ATCs after all the changes during last 15 mins, .i.e Publish, allocation for 20-21, allocation for 20-21 and 21-22(/)
[20200612_OCC_DE-APG_IMPL_003.xml|https://jira.deutsche-boerse.com/secure/attachmentzip/unzip/95860/84839%5B4%5D/]
# 4th file generated at 14:40 doesn't contain record about ATC after Publishment anymore, only 2 TimeSeries with ATCs after 2 actions from the last 15 mins, i.e. allocation for 20-21, allocation for 20-21 and 21-22
[20200612_OCC_DE-APG_IMPL_001.xml|https://jira.deutsche-boerse.com/secure/attachmentzip/unzip/95860/84839%5B5%5D/]
# 5th file generated at 14:45 contains record only 1 TimeSerie with ATC after the last allocation for 20-21 and 21-22 contracts, other actions were longer than 15 mins ago (/)
[20200612_OCC_DE-APG_IMPL_001.xml|https://jira.deutsche-boerse.com/secure/attachmentzip/unzip/95860/84839%5B6%5D/]
# 6th file generated at *14:50* after *15 mins of no ATC changes* still contains 1 TimeSerie with *only last ATCs* after the last action, when ATC was changed (/)
[6. 20200612_OCC_DE-APG_IMPL_002.xml|https://jira.deutsche-boerse.com/secure/attachmentzip/unzip/95860/84839%5B7%5D/]
# Allocation of 14MW was done at 14:54 for contract 22-23 in AMP->APG direction
# 7th file generated at 14:55 contains 1 TimeSeries with ATCs after the last allocation (/)
[20200612_OCC_DE-APG_IMPL_001.xml|https://jira.deutsche-boerse.com/secure/attachmentzip/unzip/95860/84839%5B8%5D/]
# after no changes in ATC were done new files with the same content keep to be generated with increasing version number no matter if it was less than 15 mins of inactivity or more as only 1 allocation happened during last 15 mins, and after 15 mins also last ATCs after the last action are stored (/)
files generated in less than 15 mins of no ATC changes:
[20200612_OCC_DE-APG_IMPL_002.xml|https://jira.deutsche-boerse.com/secure/attachmentzip/unzip/95860/84839%5B9%5D/]
[20200612_OCC_DE-APG_IMPL_003.xml|https://jira.deutsche-boerse.com/secure/attachmentzip/unzip/95860/84839%5B10%5D/]
files generated after more than 15 mins of no ATC changes:
[20200612_OCC_DE-APG_IMPL_004.xml|https://jira.deutsche-boerse.com/secure/attachmentzip/unzip/95860/84839%5B1%5D/]
[20200612_OCC_DE-APG_IMPL_005.xml|https://jira.deutsche-boerse.com/secure/attachmentzip/unzip/95860/84839%5B2%5D/]

h4. Summary: 
After 15 mins of no ATC changes a file with only 2 TimeSeries is generated containing latest ATCs for the two IC directions and with update_DateAndOrTime.dateTime having timestamp of the last ATC change. The versions of the files also were increasing correctly based on the oldest update_DateAndOrTime.dateTime.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Specification update,XP-3037,95776,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,zi174,zi174,zi174,18/May/20 09:25,02/Nov/20 13:06,22/Feb/21 13:21,26/Oct/20 10:11,,,3.1.3,,,,,,,,,,,,radeale,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/May/20 09:25;zi174;DFS910 - AM Indicators reporting.docx;https://jira.deutsche-boerse.com/secure/attachment/83908/DFS910+-+AM+Indicators+reporting.docx","18/May/20 17:19;radeale;DFS910 - AM Indicators reporting_revA.docx;https://jira.deutsche-boerse.com/secure/attachment/83942/DFS910+-+AM+Indicators+reporting_revA.docx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,24105600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y0m:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 13,HOT Sprint 14 (S),HOT Sprint 15,HOT Sprint 16 (S),HOT Sprint 17,HOT Sprint 18 (S),HOT Sprint 19,HOT Sprint 20 (S),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/May/20 17:19;radeale;A small review :)
 [^DFS910 - AM Indicators reporting_revA.docx] ","19/May/20 14:01;zi174;Waiting for development part",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 2) OCC files fixes (XBID-4913) - BR 3,XP-3026,95654,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,hj444,radeale,hj444,13/May/20 13:00,04/Aug/20 16:11,22/Feb/21 13:21,22/May/20 13:30,,,3.0.1 OCC,,Capacity,,,,,Package1,,,"For the up-to-date version of the complete US please see the most recent US document in XBID-4913.

This ticket is for implementing Business Rule 3.

*BR03*

Each timeseries within an OCC file will newly provide information not only about the value of offered capacity for changed contract (point) but for full delivery day using the break points features of Time series with A03 type (Curve where position 1 is mandatory) as described in the attached example and in the attached ENTSO-E document For avoidance of doubts the existing rule that in case of no changes in the ATC during the preceding 15 minutes, the latest ATCs are reflected per CMM contract per direction with the timestamp of the change is not affected.   

Note: In the AS IS, OCC files contains only the values of the periods where there is a change of ATC compared to previously sent file.

In the TO BE, each timeseries contains all the ATC values of the Business day. I.e. the actual frequency of reporting the ATC values is unchanged, but with every change reported there are all the ATCs in the TS using the so called ‘break points’ I.e. *if the ATC values for H03, H04 and H05 are the same, they are all reported in point 03.*

_For the file examples and additional information please look into the most recent US document in XBID-4913._",,hj444,tr866,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-5127,XP-3048,,,,,,"18/May/20 12:22;tr866;08 - 2nd allocation same contract - 20200514_OCC_BRNN-SUD_008.xml;https://jira.deutsche-boerse.com/secure/attachment/83922/08+-+2nd+allocation+same+contract+-+20200514_OCC_BRNN-SUD_008.xml","18/May/20 12:22;tr866;13 - last 15 mins no change - 20200514_OCC_BRNN-SUD_013.xml;https://jira.deutsche-boerse.com/secure/attachment/83923/13+-+last+15+mins+no+change+-+20200514_OCC_BRNN-SUD_013.xml","15/May/20 15:46;tr866;20200515_OCC_BRNN-SUD_IMPL_002.xml;https://jira.deutsche-boerse.com/secure/attachment/83887/20200515_OCC_BRNN-SUD_IMPL_002.xml","15/May/20 15:46;tr866;20200515_OCC_BRNN-SUD_IMPL_003.xml;https://jira.deutsche-boerse.com/secure/attachment/83888/20200515_OCC_BRNN-SUD_IMPL_003.xml","19/May/20 12:06;hj444;20200519_OCC_DK1-SE3_IMPL_004.xml;https://jira.deutsche-boerse.com/secure/attachment/83962/20200519_OCC_DK1-SE3_IMPL_004.xml","19/May/20 12:06;hj444;20200519_OCC_DK1A-DK1_IMPL_004.xml;https://jira.deutsche-boerse.com/secure/attachment/83961/20200519_OCC_DK1A-DK1_IMPL_004.xml","19/May/20 12:11;hj444;OCC_eventIterval_SYT3.png;https://jira.deutsche-boerse.com/secure/attachment/83963/OCC_eventIterval_SYT3.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,23846400,,,,,,,,,,XP-2609,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:400000000000000000300043i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 9 (S),,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/May/20 17:22;tr866;Remark: When trying to understand how OCC were behaving before and now I realized one thing, not sure if I had the most recent version proper for BR03:
* TC: when multiple allocations were made at different times for the same contract and then OCC was downloaded after more than 15 mins it should contain only one record for the one contract with the latest timestamp, not records for all the changes made for the same contract during whole day","15/May/20 16:12;tr866;Tested in R2.0.39-SNAPSHOT (Build ec3534620b878eff8bfa068e84a526b94da05823
Confirmed with the latest OCC fixes it happens too.
If multiple ATC changes were done on the same contract and OCC file is downloaded after more than 15 mins wihtout ATC changes, the OCC file contains history of all ATC changes, not just last ATCs.
OCC covering publish, otc change for H22 and 2 allocations for H24 attached [^20200515_OCC_BRNN-SUD_IMPL_002.xml]
OCC after more than 15 mins of inactivity containig both transactions for H24 contract, not just last ATC [^20200515_OCC_BRNN-SUD_IMPL_003.xml]
Note: Including all transactions for every contract would make the files also much bigger size..
{quote}DFS800 Capacity Management TSO Interface, Chapter 4.1.12 Offered cross-zonal capacity (OCC)
- In case of no changes in the ATC during the proceeding 15 minutes, the lates ATCs are reflected per CMM contract per direction with the timestamp of the change
{quote}
I'll attach the files from version 2.0.36 to show that only latest ATCs for every contract were contained in the file.","18/May/20 12:27;tr866;2 Files from verstion 2.0.36 attached showing only last ATCs are included in OCC when no changes occured during last 15 minutes.
 First file [^08 - 2nd allocation same contract - 20200514_OCC_BRNN-SUD_008.xml] showing records for publish and 2 allocations at different times for contract H21.
 Second file [^13 - last 15 mins no change - 20200514_OCC_BRNN-SUD_013.xml] after 15 mins of no ATC changes showing only last ATCs are included for contract H21, not all history for the day.","18/May/20 15:03;hj444;1. negative ATC == 0 is in timeseries
2. NTC change - new ATC is in timeseries.
3. VDA - Origin vs minimum configuration.
   
 ","19/May/20 12:18;hj444;tested SYT3 : Version R2.0.39 (Build c1cf3925de86304cb5eb65ee792532825638a5b9)
h3. TC: After manual publishing from Admin Console:
Publishing : for today+tomorrow : SuperAdmin console	
09:49:52		Capacity fully published for DK1A-DK1 on 20.05.	
09:49:48		Capacity fully published for DK1A-DK1 on 19.05.

{color:red}Both publishing update times are in today's OCC file{color}
OCC - Implicit+Minimum for DK1-DK1A + DK1A-SE3
see version of OCC v4

h3. TC: 0 in timeseries - values before publishing
{color:red} 0 in timeseries  for DK1A-SE3{color}
OCC - Implicit+Minimum for DK1-DK1A + DK1A-SE3
also see v4 file for DK1-SE3

*This is valid behavior - 0, as the time of publishing may differ in VDA_PDA, VDA-SE3. and for setting VDA value : minimum is taken minimum in timeseries.*

h3. TC- 2 files generation for one configuration :
In already existing configurations from 12.5.2020, today 19.5.2020 
2 Files are generated for one configuration. This could be cause after new changes were deployed at already existing configurations. Could affect already existing configurations. see added picture
When creating new configuration behaviour is ok.

","22/May/20 13:29;hj444;This Jira will be closed.

New Jira is created for covering last testing issues.

https://jira.deutsche-boerse.com/browse/XP-3057",,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 2) OCC files fixes (XBID-4913) - BRs 1+2+5+7,XP-3024,95645,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,uv683,radeale,uv683,13/May/20 12:40,31/Aug/20 15:38,22/Feb/21 13:21,15/May/20 16:23,,,3.0.1 OCC,,Capacity,,,,,Package1,,,"For the up-to-date version of the complete US please see the most recent US document in XBID-4913.

This ticket is for implementing Business Rules 1, 2, 5 and 7.

*BR01*

User creating FTC can select if the OCC file is created for implicit or explicit auction and if the original or minimum value is used for interconnectors impacted by virtual delivery area - a new drop-down menu Auction for selection of this configuration will appear in FTC when OCC file is selected below the current Receiver field with two options _(detailed to BR02)_
 * Implicit (the default one)
 * Explicit

and

a new drop-down menu VDA Quantity for selection of this configuration will appear in FTC when OCC file is selected below the current Receiver field with two options _(detailed in BR04b)_
 * Minimum (the default one)
 * Original

!image-2020-03-31-16-56-28-661.png!  

_It must be possible to create two entirely same FTCs with the only difference being selection of value for parameter Auction ""Implicit"" vs ""Explicit"". The same does not apply to Minimum/Original, i.e. existence of a 'Minimum' FTC prevents creation of another 'Original' FTC presuming all other FTC parameters all the same._

*BR02*

Tag ""auction.type"" value within the OCC file will include a value A01 (implicit auctions) or A02 (explicit auction) depending whether explicit or implicit auction was selected in relevant FTC producing the file.

Note: The same information will be reported in the 2 files, except that one will be explicit and the other will be implicit (as ATC is identical for both allocations). The new selection implicit/explicit doesn't thus provide any specific logic except the auction.type value in the xml and except as stated in BR07. I.e. the only difference is in the _auction.type_, the _mRID_ document identifier and the _file name_ template.

*BR05*

Document identifier stored in mRID - MD5 hashed identifier string - will be newly created using additional attribute per file type, i.e. combination of following attributes divided by underscores (""_"") put in a MD5 hashed identifier string will be used:
 * indicator of file type
 * the border/IC or area to which it applies
 * EIC of the receiving party
 * delivery date covered by the file in YYYYMMDD format
 * the oldest timeseries update_DateAndOrTime.dateTime within the file
 * auction.type (A01 or A02)

Note: For the avoidance of doubt, in case 2 files have the same mRID (because all the element in the MD5 hash are identical - case for instance where there is no ATC change during the last 15'), the version field is incremented as in the current behavior.

*BR07*

The name of the file is generated automatically by the system and follows the convention below

Where auction.type is A01           
 * YYYYMMDD_OCC_'DA1'-'DA2'_IMPL_V.xml
 * YYYYMMDD_OCC_'MA1'-'MA2'_IMPL_V.xml (for border-level file configurations)

Where auction.type is A02           
 * YYYYMMDD_OCC_'DA1'-'DA2'_EXPL_V.xml

YYYYMMDD_OCC_'MA1'-'MA2'_EXPL_V.xml (for border-level file configurations)",,tr866,uv683,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24364800,,,,,,,,,,XP-2609,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:4000000000000000003000439",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 9 (S),,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/May/20 16:18;tr866;Successfully tested in version R2.0.39-SNAPSHOT (Build ec3534620b878eff8bfa068e84a526b94da05823)
Schedule trigger is possible to get configured when two FTCs exist that are the same only auction.type differs. It is possible for the cases when new FTCs for future date are created, or already for active FTCs. It is possible also when Event Trigger are already existing too.
It's not possible to create two same FTCs only with different VDA Quantity, but that wasn't for me already in previous versions, so this stays correct.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split3) OCC files fixes (XBID-4913) - BR 6,XP-3021,95626,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,hj444,radeale,ek176,13/May/20 10:56,04/Aug/20 16:11,22/Feb/21 13:21,22/May/20 13:30,,,3.0.1 OCC,,Capacity,,,,,Package1,,,"For the up-to-date version of the complete US please see the most recent US document in XBID-4913.

This ticket is for implementing Business Rule 6.

*BR06*

Sending of OCC files is required to take place from configured time in D-1 until the end of the day D.

+Example of current behaviour:+

FTC 1:
 * starting time 15:00 on 05/02 for NEXT_DAY

FTC 2:
 * starting time 00:00 on 06/02 for CURRENT_DAY

Result:
 * for 06/02 delivery day are files generated from 15:00 05/02 to 24:00 based on FTC 1
 * for 06/02 delivery day are files generated from 00:00 06/02 to 24:00 based on FTC 2
 * for 07/02 delivery day are files generated from 00:00 06/02 to 24:00 based on FTC 1
 * for 07/02 delivery day are file generated from 00:00 07/02 to 24:00 based on FTC 2

+New behaviour:+

Should enable to avoid sending the files between 00:00 06/02 and 15:00 (configured time) 06/02 for delivery day 07/02 either by general change of all FTCs behaviour or via specific additional restrictions only for OCC file.

*New field will be added to the Distribution Scheduler Mapping pop-up named like ""Generate from"" and the time specified. This would mean that for the selected Range the generation of filed would start at the selected time. The default value would be 00:00.*

The field is to be added after the Range field (i.e. as a last in the list).

!image-2020-03-31-17-03-41-560.png!

 ",,ek176,hj444,tr866,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,23846400,,,,,,,,,,XP-2609,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:400000000000000000300043j",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 9 (S),,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/May/20 14:57;tr866;Notes:
- Looks like in DB ""Generate from"" is stored in CEST time in format ""01:00:00"" and then correctly used by CMI as CEST, where as probably all other times and dates in DB are in UTC same as ""start_date"" of distribution scheduler map in date time format ""2020-05-20 22:00:00""
** It would be good to verify if Generate from is really in CEST and make it probably consistant and save it in UTC
- Remark: If Unit of Repeats is equal or longer than Days and Generate from will be set at any later time than ""Start from"" the file will never get generated.
** May-be would-be good to add some warning for such cases. It doesn't make much sense to set ""Generate from"" for frequencies longer than 1 day at all, but accidentally customer can set it easily wrong without being aware of the consequence","22/May/20 13:29;hj444;This Jira will be closed.

New Jira is created for last testing questions.

https://jira.deutsche-boerse.com/browse/XP-3057","22/May/20 13:31;hj444;tested at docker: Version R2.0.40-SNAPSHOT (Build c448fe0f9277b37b22d2a982b074eb37576bb4ae)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
OCC - commonATC Border + IC configurations vs file content,XP-3020,95623,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Not a Bug,radeale,hj444,hj444,13/May/20 10:22,04/Aug/20 16:11,22/Feb/21 13:21,18/May/20 18:07,,,3.0.1 OCC,,,,,,,,,,"CommonATC OCC FTC configurations and ATC visibility in OCC files.
IC configurations are treated like separate IC and ATC is not shown like common.
Valid commonATC is shown only for border configuration.

Leading (RTE-AMP) vs non leading IC (RTE-TNG) OCC configurations.
Border OCC configuration.(DE_FR)
1. After Publish
* in Leading IC - published value is visible in timeseries.
* in nonleading IC - are 0 visible for timeseries
* in Border - published value is visible in timeseries.

2. Allocation at leading
* in Leading IC - allocated value is visible in timeseries.
* in nonleading IC - allocated value is not part of in timeseries.
* in Border - allocated value is visible in timeseries.

3. Allocation at non leading
* in Leading IC - allocated value is not part of in timeseries.
* in nonleading IC - allocated value is visible in timeseries.
* in Border - allocated value is visible in timeseries. 

files added.

OCC 
IC - distribution scheduler 15`
Border configuration : distribution scheduler 30`",,hj444,jy268,qo794,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3003,,,,,,,"13/May/20 09:50;hj444;20200512_OCC_RTE-DE_IMPL_019_DE_FR_afterPublish.xml;https://jira.deutsche-boerse.com/secure/attachment/83800/20200512_OCC_RTE-DE_IMPL_019_DE_FR_afterPublish.xml","13/May/20 09:54;hj444;20200512_OCC_RTE-DE_IMPL_020_DE_FR_afterAllocation.xml;https://jira.deutsche-boerse.com/secure/attachment/83791/20200512_OCC_RTE-DE_IMPL_020_DE_FR_afterAllocation.xml","13/May/20 09:50;hj444;20200512_OCC_RTE-DE_IMPL_037_RTE_AMP_afterPublish.xml;https://jira.deutsche-boerse.com/secure/attachment/83799/20200512_OCC_RTE-DE_IMPL_037_RTE_AMP_afterPublish.xml","13/May/20 09:50;hj444;20200512_OCC_RTE-DE_IMPL_037_RTE_TNG_afterPublish.xml;https://jira.deutsche-boerse.com/secure/attachment/83798/20200512_OCC_RTE-DE_IMPL_037_RTE_TNG_afterPublish.xml","13/May/20 09:51;hj444;20200512_OCC_RTE-DE_IMPL_038(1)RTE_TNG_afterAllocationAtRTE_AMP.xml;https://jira.deutsche-boerse.com/secure/attachment/83797/20200512_OCC_RTE-DE_IMPL_038%281%29RTE_TNG_afterAllocationAtRTE_AMP.xml","13/May/20 09:51;hj444;20200512_OCC_RTE-DE_IMPL_038_RTE_AMP_afterAllocation.xml;https://jira.deutsche-boerse.com/secure/attachment/83796/20200512_OCC_RTE-DE_IMPL_038_RTE_AMP_afterAllocation.xml","13/May/20 09:54;hj444;20200512_OCC_RTE-DE_IMPL_039_RTE_AMP_noAction15minutes.xml;https://jira.deutsche-boerse.com/secure/attachment/83790/20200512_OCC_RTE-DE_IMPL_039_RTE_AMP_noAction15minutes.xml","13/May/20 09:51;hj444;20200512_OCC_RTE-DE_IMPL_039_RTE_AMP_noAction15minutes.xml;https://jira.deutsche-boerse.com/secure/attachment/83795/20200512_OCC_RTE-DE_IMPL_039_RTE_AMP_noAction15minutes.xml","13/May/20 09:54;hj444;20200512_OCC_RTE-DE_IMPL_039_RTE_TNG_noAction15minutes.xml;https://jira.deutsche-boerse.com/secure/attachment/83789/20200512_OCC_RTE-DE_IMPL_039_RTE_TNG_noAction15minutes.xml","13/May/20 09:51;hj444;20200512_OCC_RTE-DE_IMPL_039_RTE_TNG_noAction15minutes.xml;https://jira.deutsche-boerse.com/secure/attachment/83794/20200512_OCC_RTE-DE_IMPL_039_RTE_TNG_noAction15minutes.xml","13/May/20 09:51;hj444;20200512_OCC_RTE-DE_IMPL_040(1)_RTE_TNG_afterAllocation.xml;https://jira.deutsche-boerse.com/secure/attachment/83793/20200512_OCC_RTE-DE_IMPL_040%281%29_RTE_TNG_afterAllocation.xml","13/May/20 09:51;hj444;20200512_OCC_RTE-DE_IMPL_040_RTE_AMP_afterRTE_TNGallocation.xml;https://jira.deutsche-boerse.com/secure/attachment/83792/20200512_OCC_RTE-DE_IMPL_040_RTE_AMP_afterRTE_TNGallocation.xml",,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,24105600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2609,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0atmc:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 9,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/May/20 15:21;qo794;Might be related to XP-3003","13/May/20 15:37;radeale;As for the functional part - the specification discourages creating an IC-based FTCs for Common ATC borders and such are probably not present in the PROD.","18/May/20 16:06;jy268;This is current behavior which shouldn't be changed as a part of this CR.","18/May/20 18:07;radeale;I agree, let's not modify the behavior at the moment.

But it is good that the situation is described.",,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 1) TO SFTP and consul server configuration,XP-3019,95591,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,iv732,zi174,zi174,12/May/20 15:14,04/Aug/20 19:53,22/Feb/21 13:21,22/Jul/20 13:02,,,3.1.0,,,,,,,,,,"h1. {color:#00875a}AM Indicators Reports SFTP Automation{color}
h2. Proposed solution 

Requirements:
 * Reports must be made available on a SFTP server hosted by DBAG and accessible to NEMOs and TSOs
 * Reports should remain available on the DBAG sFTP server for a period of at least 12 months after the end of the report period.

 

The expected behavior is described (in the spec) as follow:

Monthly reports generation produces report files each month. All generated reports are stored on the SFTP server which is accessible to NEMOs and TSOs. The reports are stored and available for a period of 12 months. During the defined period every report may be downloaded by NEMOs and TSOs. After 12 months the reports are deleted and cannot be accessible anymore. The files are available in a CSV format as is defined by each report format.

--------------

Please during implementation this solution, validate if the statement above is in accordance with the real implementation. Also if the description should be enhanced some important information, please let [~zi174] know.

*Hints:* 

 
 * Avoidance of duplicity because of master-master solution:
 ** Consul master election 
 *** new key/value store might be needed
 ** -Let files override themselves- (risk of race condition)
 * Monitoring
 ** 0 bytes files check 
 ** grafana 
 ** alert in xbid_prod_issues would be nice (create future task)

h2. Acceptance Criteria
 * reports automatically uploaded to SFTP server (Report Tool) - pay attention to FW restrictions
 * new subdirectory
 * reports automatically deleted after 12 months (Report Tool)
 * no duplicate files on sftp server
 * automatic monitoring - currently only in Grafana
 * create future task for automated alerting in case of problem ",,iv732,qo794,yo218,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3322,XP-3241,,,,,XP-3314,,,,,,,"14/Jul/20 12:39;yo218;xbid_amreports_inte;https://jira.deutsche-boerse.com/secure/attachment/85656/xbid_amreports_inte","14/Jul/20 12:39;yo218;xbid_amreports_inte.pub;https://jira.deutsche-boerse.com/secure/attachment/85657/xbid_amreports_inte.pub",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,18576000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y0o:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 13,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Jul/20 12:08;yo218;prepared the directory structure for all environments. I added <username>/OUT/am for all exisiting xbid_* users","14/Jul/20 12:38;yo218;I attached the keys for the sftp user for syt1","14/Jul/20 18:40;yo218;I prepared a jenkins job in case it is required to distribute the reports to the individual user accounts:

[https://englobjci1.deutsche-boerse.de/job/Energy-Operations/job/XBID%20Ansible%20Jobs/job/XBID-AM-Reports-Distribution/]","14/Jul/20 18:41;yo218;Prepared the PR for the consul agents for internal env: [https://github.deutsche-boerse.de/dev/energy.automation.inventory/pull/1967]","22/Jul/20 13:02;qo794;Issue split into:
|XP-3322|(Split 1) (Split 2) TO SFTP and consul server configuration|
","22/Jul/20 13:11;iv732;Tried to deploy Consul agent and got error:

{code:java}
 TASK [brianshumate.consul : Download Consul package] ***********************************************************
fatal: [xb-xbid-syt1-consul-sla1]: FAILED! => {}
MSG:
The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'stdout'
The error appears to have been in '/home/iv732/energy.automation.deployments/external_roles/brianshumate.consul/tasks/install.yml': line 57, column 3, but may
be elsewhere in the file depending on the exact syntax problem.
The offending line appears to be:
- name: Download Consul package
  ^ here
{code}

",,,,,,,,,,,,,,,,,,,,,,,,,,
Net position,XP-3018,95590,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,zi174,zi174,12/May/20 15:08,04/Aug/20 19:53,22/Feb/21 13:21,01/Jul/20 17:55,,,3.1.0,,,,,,,,,,"+Net position+

Net position in MWh for each Market Area per MTU level. [11.5 ID monitoring]

Net position is calculated as total purchased quantity – total sold quantity in MWh within MA.

the report also needs to include gross (i.e. not netted) values of import and export.",,od044,qo794,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Jul/20 17:55;od044;2018-02_NET_POSITION_2020-07-01-154136.csv;https://jira.deutsche-boerse.com/secure/attachment/85340/2018-02_NET_POSITION_2020-07-01-154136.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,20304000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0b2di:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 12 (S),,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,fake-failure,XP-3009-underscores,XP-3264,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Jun/20 11:09;qo794;For testing via report-tool-cli: a new job {{am-generate-net-position}} introduced generating the report in question, collecting of data is done via {{am-collect-net-positions}} already implemented within XP-3009 (data is the same as for Net Position averaged reports)","01/Jul/20 17:55;od044;- Test on report-tool v. 2.43 on docker - passed
- collecting job: 
-- am-collect-net-positions
- generating job:
-- am-generate-net-position
- report contains gross of import, export and net position for each market area per MTU
- EIC DA is used instead of MA EIC in case MA contains only one DA 
- Cancelled and Recalled trades are excluded from calculation
- gross of import,export and net values are calculated in MWh

Example of test data input (various contracts):
|id|DA buy|DA sell|state|MTU|quantity|Covert qty to MWh|
|6|10Y1001A1001A39I|10YNO-3--------J|ACTI|60|4000|4000|
|13|10Y1001A1001A39I|10YDOM-1001A084H|ACTI|60|1000|1000|
|16|10Y1001A1001A39I|10YNL----------L|ACTI|60|4000|4000|
|17|10Y1001A1001A39I|10YFI-1--------U|ACTI|60|1000|1000|
|21|10Y1001A1001A44P|10YDE-VE-------2|ACTI|60|6000|6000|
|24|10Y1001A1001A44P|10YBE----------2|ACTI|60|7000|7000|
|26|10Y1001A1001A46L|10Y1001A1001A39I|RGRA|60|7000|7000|
|2|10Y1001A1001A47J|10Y1001A1001A46L|ACTI|60|4000|4000|
|14|10Y1001A1001A47J|10YDOM-1001A084H|ACTI|60|4000|4000|
|15|10Y1001A1001A48H|10Y1001A1001A47J|ACTI|60|7000|7000|
|28|10YAT-APG------L|10YFI-1--------U|ACTI|240|25000|100000|
|25|10YBE----------2|10YLT-1001A0008Q|ACTI|60|1000|1000|
|37|10YBE----------2|10YAT-APG------L|ACTI|1D|2000|48000|
|38|10YBE----------2|10YAT-APG------L|ACTI|12h|3000|36000|
|9|10YDE-ENBW-----N|10YNO-4--------9|ACTI|60|3000|3000|
|11|10YDE-ENBW-----N|10YNO-1--------2|ACTI|60|2000|2000|
|20|10YDE-ENBW-----N|10YDOM-1001A084H|ACTI|60|1000|1000|
|10|10YDE-EON------1|10YDE-RWENET---I|ACTI|60|7000|7000|
|5|10YDE-RWENET---I|10YDOM-1001A084H|ACTI|60|8000|8000|
|22|10YDE-RWENET---I|10YDK-1--------W|ACTI|60|1000|1000|
|3|10YDE-VE-------2|10YNL----------L|ACTI|60|6000|6000|
|8|10YDOM-1001A084H|10YDE-ENBW-----N|ACTI|60|5000|5000|
|18|10YDOM-1001A084H|10YLT-1001A0008Q|ACTI|60|7000|7000|
|7|10YFI-1--------U|10Y1001A1001A44P|ACTI|60|2000|2000|
|29|10YFR-RTE------C|10YDE-VE-------2|ACTI|30|50000|25000|
|30|10YFR-RTE------C|10YFR-RTE------C|ACTI|15|6000|1500|
|19|10YLT-1001A0008Q|10Y1001A1001A45N|ACTI|60|7000|7000|
|23|10YLT-1001A0008Q|10YDK-1--------W|ACTI|60|4000|4000|
|12|10YLV-1001A00074|10YDK-2--------M|ACTI|60|2000|2000|
|31|10YNL----------L|10YNL----------L|ACTI|15|5000|1250|
|4|10YNO-2--------T|10YNO-3--------J|ACTI|60|1000|1000|
|27|10YNO-2--------T|10Y1001A1001A39I|CNCL|60|8000|8000|
|32|10YNO-3--------J|10YNO-3--------J|ACTI|15|15000|3750|
|1|10YNO-4--------9|10Y1001A1001A44P|ACTI|60|2000|2000|
|33|TS-DA1---------V|TS-DA3---------9|ACTI|45|20000|15000|
|34|TS-DA1---------V|TS-DA3---------9|ACTI|60|30000|30000|
|35|TS-DA1---------V|TS-DA2---------K|ACTI|30|3000|1500|
|36|TSDA11---------J|TSDA15---------C|ACTI|45|20000|15000|

Report calculated from data input above:
 [^2018-02_NET_POSITION_2020-07-01-154136.csv] ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ATC utilization rate,XP-3017,95589,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,zi174,zi174,12/May/20 15:08,04/Aug/20 19:53,22/Feb/21 13:21,08/Jul/20 12:21,,,3.1.0,,,,,,,,,,"ATC utilization rate
 ATC utilization ratio for each MTU calculated from the allocated netted intra-day capacity / offered intra-day capacity for each border in both directions [11.4 ID monitoring]

Ratio A→B=(Max(0;〖Net Total allocation〗_(A→B)))/(〖Last ATC〗_(A→B) +〖Net Total allocation〗_(A→B) )",,ll664,tr866,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3260,,,,,,,,,,,,,"02/Jul/20 13:55;ll664;da-setup2.png;https://jira.deutsche-boerse.com/secure/attachment/85362/da-setup2.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,19785600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0b3xg:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 12,,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,fake-failure,XP-3017,comtrader-2.5.x,XP-3264,develop,master,master-comtrader-2.5.x,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Jul/20 14:04;ll664;h2. How to calculate ATC utilization for paths with Virtual Area?

We understand that VAs are to be generally removed and the aim of the report is to provide ATC utilization data in between real areas. Now as the real flows include Virtual Areas, we would like to clarify how those should be translated to the real ones.

Imagine following grid:

!da-setup2.png!

_*VDA2 is virtual area with parent DA2_

 
Now we have two trades:

Trade 1:

Buy Area: DA1
Sell Area: DA3
Path: DA3-VDA2-DA1

Trade 2:

Buy Area: DA2
Sell Area: DA1
Path: DA1-VDA2-DA2

The question is how to calculate ATC utilization ratio between DA1-DA2 and DA3-DA2. More specifically, what would be the value of variables in the calculation formula.

_Ratio = NetTotalAllocation / (LastATC + NetTotalAllocation)_

h3. Suggested solution

We suggestion simple replacement of Virtual Area with its parent DA. For instance:

Trade 1:
.
We replace VDA2 with DA2 parent. That would give path DA3-DA2-DA1. 

Trade 2:

The paths would be DA1-DA2-DA2. Now the problem is how to calculate utilization between DA1-DA2? Do we take NetTotalAllocation/lastATC on DA1-VDA2 interconnector, or for VDA2-DA2?

We suggest to base the calculation on allocations registered on DA1-VDA2 interconnector. The allocations for VDA2-DA2 would be translated to DA2-DA2 area pair, which is would be omitted from the report, as there is no notion of direction between those.


","03/Jul/20 10:52;ll664;Ready to test except the cornercase with VAs, to be clarified in https://jira.deutsche-boerse.com/browse/XBID-5167.","08/Jul/20 12:20;tr866;Issue split into:
|XP-3260|(Split 1) ATC utilization rate|
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 1) The total number of trades grouped per contract - Development & Test,XP-3016,95588,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,zi174,zi174,12/May/20 15:07,04/Aug/20 19:53,22/Feb/21 13:21,24/Jun/20 10:52,,,3.1.0,,,,,,,,,,"The total number of trades grouped per contract, per market area and both grouped and not grouped according to the hours left to delivery from the trade timestamp, on a monthly basis. [11.1.c + 11.1.d ID monitoring]

Two types of reports will be generated: 
-	Per contract, MA and hours to delivery
-	Per contract and MA. 

For each month, MA and contract, we will get one figure for total number of trades and a set of values for total number of trades i hours before delivery, for all relevant values of i (from trade start until trade closure).
",,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3179,,,,,,,,,,,,,"23/Jun/20 10:51;lt112;2020-05_TOTAL_TRADES_2020-06-01-050000.csv;https://jira.deutsche-boerse.com/secure/attachment/85077/2020-05_TOTAL_TRADES_2020-06-01-050000.csv","23/Jun/20 10:52;lt112;2020-05_TOTAL_TRADES_WITH_HOURS_TO_DELIVERY_2020-06-01-050000.csv;https://jira.deutsche-boerse.com/secure/attachment/85078/2020-05_TOTAL_TRADES_WITH_HOURS_TO_DELIVERY_2020-06-01-050000.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,24624000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0azyn:y",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 11,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3009-underscores,XP-3008-virtual-das,XP-3015-underscores,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Total number of occurrences of ramping constraint,XP-3015,95587,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,zi174,zi174,12/May/20 15:07,06/Aug/20 09:45,22/Feb/21 13:21,24/Jun/20 11:18,,,2.0.31,3.1.0,,,,,,,,,"Total number of occurrences of ramping constraint being a potentially limiting one for the allocations per applicable DC interconnector, per MTU and per month (23-25, 46-50 or 92-100 values between 0 and 31 per interconnector per month, depending on the applicable MTU). An MTU on an interconnector on a given day would be considered restricted by ramping if the ATC value in one direction is zero AND it can be demonstrated that the last capacity change leading to this zero value was restricted by ramping - trade lead to a zero ATC in one direction and does display a difference with either (or both) neighbouring MTUs in the size of the ramping constraint. [10.a. ID monitoring]

 

Example:

interconnector xx-yy has a ramping constraint of 600MW

MTU is 15’

NTC is 1000 MW in the direction XX-YY for all hours/MTU of the day

NTC is 1000 MW in the direction YY-XX for all hours/MTU of the day

AAC in direction XX-YY is 1000MW for all hours

--> ATC without consideration of ramping is 0MW in direction XX-YY and 2000MW in direction YY-XX for all MTUs of the day

 

A trade would match 1000MW in direction YY-XX for MTU2

Due to the ramping constraint, if MTU 1 has 1000MW XX-YY net flow and MTU3 has 1000 MW XX-YY net flow, MTU2 is limited to 400MW net flow in direction XX-YY and the trade of 1000 MW could use the interconnector for 600MW only

--> In this case, this occurrence should be taken into account for the counting of ramping restriction for MTU 2 only, because the difference of AAC between MTU 2 and MTU1 (resp. MTU3) is 600MW",,hj444,ll664,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3185,,,,,,,,,,,,,"25/Jun/20 12:00;ll664;2020-04_RAMPING_OCCURRENCE_2020-05-20-134500.csv;https://jira.deutsche-boerse.com/secure/attachment/85155/2020-04_RAMPING_OCCURRENCE_2020-05-20-134500.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,20995200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0ay7n:zi",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 11 (S),,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3009-underscores,XP-3013-submitted-orders-product-grouping,XP-3015-underscores,acceptance,XP-3264,develop,XP-3015,master,XP-3011-fix,master-acceptance,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Jun/20 12:29;ll664;Ready to test, please note that it requires also latest XBID (develop) in order to work.","24/Jun/20 11:17;hj444;Issue split into:
|XP-3185|(Split 1) Total number of occurrences of ramping constraint|
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The total submitted order volume in MWh per market area,XP-3014,95586,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,od044,zi174,zi174,12/May/20 15:07,04/Aug/20 19:53,22/Feb/21 13:21,23/Jun/20 11:52,,,3.1.0,,,,,,,,,,"The total submitted order volume in MWh per market area, on a daily basis. [8.1.c. ID monitoring]",,od044,qo794,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jun/20 15:04;od044;2019-11_ORDERS_VOLUME_2020-06-23-123810.csv;https://jira.deutsche-boerse.com/secure/attachment/85091/2019-11_ORDERS_VOLUME_2020-06-23-123810.csv","23/Jun/20 15:04;od044;2020-05_ORDERS_VOLUME_2020-06-23-090126.csv;https://jira.deutsche-boerse.com/secure/attachment/85092/2020-05_ORDERS_VOLUME_2020-06-23-090126.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,21081600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0azyn:w",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 11,,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3008-virtual-das,XP-3009-underscores,XP-3013-submitted-orders-product-grouping,XP-3015-underscores,develop,master,XP-3011-fix,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Jun/20 07:28;qo794;The current implementation is in CET, conversion to UTC will be done together with other AM indicators within XP-3139","22/Jun/20 09:38;qo794;The current implementation with regards to order volumes counting as in BR05 confirmed as correct here XBID-5154","23/Jun/20 10:45;qo794;As per the internal agreement a space in a column name was replaced by underscore: ""orders volume"" -> orders_volume. Please retest.","23/Jun/20 11:49;od044;Test passed on Report-tool 2.41-snapshot
 - new job am-collect-orders-volume and am-generate-submitted-orders-report
 - report collects and aggregates order volumes per market area in MWh on daily basis
 - Delivery area EIC is used instead of MA EID in case MA has only one signle DA

Sample of test data:
|Order id|Single DA in MA|Delivery area|Market area|Delivery start|Delivery end|quaintity|Initial order Id|Order type|
|1| |TS-DA1---------V|TS-MA1---------P|2020-05-25 14:00:00|2020-05-25 15:00:00|1000| |Hourly|
|2| |TS-DA1---------V|TS-MA1---------P|2020-05-25 16:00:00|2020-05-25 17:00:00|1000| |Hourly|
|3| |TS-DA2---------K|TS-MA1---------P|2020-05-25 14:00:00|2020-05-25 15:00:00|1000| |Hourly|
|4| |TS-DA2---------K|TS-MA1---------P|2020-05-25 13:30:00|2020-05-25 14:00:00|1000| |Half-hourly|
|5| |TS-DA3---------9|TS-MA2---------E|2020-05-25 13:30:00|2020-05-25 14:00:00|1000| |Half-hourly|
|6| |TS-DA3---------9|TS-MA2---------E|2020-05-25 14:00:00|2020-05-25 14:30:00|1000| |Half-hourly|
|7| |TS-DA4---------Z|TS-MA2---------E|2020-05-25 17:30:00|2020-05-25 18:00:00|1000| |Half-hourly|
|8| |TS-DA4---------Z|TS-MA2---------E|2020-05-25 18:45:00|2020-05-25 19:00:00|1000| |Quarterly|
|9|x|TSDA17---------R|TSMA10---------F|2020-05-25 15:00:00|2020-05-25 16:00:00|1000| |Hourly|
|10|x|TSDA17---------R|TSMA10---------F|2020-05-25 15:30:00|2020-05-25 16:00:00|1000| |Half-hourly|
|11| |TS-DA1---------V|TS-MA1---------P|2020-05-25 15:00:00|2020-05-25 18:00:00|1000| |Block 3h|
|12| |TS-DA1---------V|TS-MA1---------P|2020-05-25 13:00:00|2020-05-25 16:00:00|1000| |Block 3h|
|13| |TS-DA1---------V|TS-MA1---------P|2020-05-25 15:00:00|2020-05-25 18:00:00|1000| |Block 3h|
|14| |10YDE-RWENET---I|10Y1001A1001A82H|2020-05-25 15:00:00|2020-05-25 16:00:00|1000| |Hourly|
|15| |10YDE-EON------1|10Y1001A1001A82H|2020-05-25 15:00:00|2020-05-25 16:00:00|1000| |Hourly|
|16| |10YDE-EON------1|10Y1001A1001A82H|2020-05-25 14:00:00|2020-05-25 15:00:00|1000| |Hourly|
|17| |10YDE-EON------1|10Y1001A1001A82H|2020-05-25 12:15:00|2020-05-25 12:30:00|1000| |Quarterly|
|18| |10YDE-EON------1|10Y1001A1001A82H|2020-05-25 12:00:00|2020-05-25 12:30:00|1000| |Half-hourly|
|19| |10YDE-EON------1|10Y1001A1001A82H|2020-05-25 22:00:00|2020-05-26 22:00:00|1000| |Base 24h|
|20| |10YDE-EON------1|10Y1001A1001A82H|2020-05-25 22:00:00|2020-05-26 10:00:00|1000| |Peak 12h|
|21| |10YDE-VE-------2|10Y1001A1001A82H|2020-05-25 22:00:00|2020-05-26 22:00:00|1000| |Base 24h|
|22| |10YDE-VE-------2|10Y1001A1001A82H|2020-05-25 22:00:00|2020-05-26 22:00:00|1000| |Base 24h|
|23|x|10YDK-1--------W|45Y-DUMMY-DK1--D|2020-05-25 16:00:00|2020-05-25 17:00:00|1000| |Peak 12h|
|24|x|10YFR-RTE------C|10YFR-RTE-TEST-W|2020-05-25 14:00:00|2020-05-25 15:00:00|1000| |Peak 12h|
|25|x|10YFR-RTE------C|10YFR-RTE-TEST-W|2020-05-25 14:00:00|2020-05-25 15:00:00|1000| |Peak 12h|
|26|x|10YFR-RTE------C|10YFR-RTE-TEST-W|2020-05-25 12:15:00|2020-05-25 12:30:00|1000| |Quarterly|
|27|x|10YFR-RTE------C|10YFR-RTE-TEST-W|2020-05-25 14:00:00|2020-05-25 15:00:00|2000|25|Hourly|
|28|x|10YFR-RTE------C|10YFR-RTE-TEST-W|2020-05-25 12:15:00|2020-05-25 12:30:00|1000|26|Quarterly|

Example of report Submited order volume content for data above
{code:java}
day,area,orders_volume
2020-05-25,10Y1001A1001A82H,87.75000
2020-05-25,10YFR-RTE------C,4.50000
2020-05-25,TS-MA1---------P,12.50000
2020-05-25,TS-MA2---------E,1.75000
2020-05-25,TSDA17---------R,1.50000
2020-05-25,10YDK-1--------W,1.00000
{code}
[^2020-05_ORDERS_VOLUME_2020-06-23-090126.csv]

Example of a report with a data dump from prod

[^2019-11_ORDERS_VOLUME_2020-06-23-123810.csv]

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,
The total number of submitted orders per product,XP-3013,95585,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,od044,zi174,zi174,12/May/20 15:06,04/Aug/20 19:53,22/Feb/21 13:21,10/Jun/20 11:57,,,3.1.0,,,,,,,,,,"The total number of submitted orders per product[^[1]^|#_ftn1] and market area, on a daily basis. [8.1.b. ID monitoring]

 

[[1]|#_ftnref1] 15mins, 30mins, 60mins product + user defined product, so four in total.",,od044,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jun/20 10:50;lt112;2020-05_SUBMITTED_ORDERS_2020-06-01-050000.csv;https://jira.deutsche-boerse.com/secure/attachment/85075/2020-05_SUBMITTED_ORDERS_2020-06-01-050000.csv","16/Jun/20 11:30;od044;2020-06_SUBMITTED_ORDERS_2020-06-08-103506.csv;https://jira.deutsche-boerse.com/secure/attachment/84874/2020-06_SUBMITTED_ORDERS_2020-06-08-103506.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,22204800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0atsi:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 10 (S),,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3008-virtual-das,XP-3009-underscores,XP-3013-submitted-orders-product-grouping,XP-3015-underscores,develop,master,XP-3011-fix,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jun/20 11:55;od044;Partially done, waiting for additional clarification from customer. 
- close this ticket
- additional work will be covered by new ticket XP-3119",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Order/trade ratio,XP-3012,95584,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,od044,zi174,zi174,12/May/20 15:06,04/Aug/20 19:53,22/Feb/21 13:21,10/Jun/20 11:59,,,3.1.0,,,,,,,,,,"+Order/trade ratio+

Per product[[1]|#_ftn1] the order/trade ratio aggregated per month.

All the order modifications resulting in new priority of the order (e.g. price modification, but this is not the case in all kind of volume modification) shall be handled as separate order.

 

[[1]|#_ftnref1] 15mins, 30mins, 60mins product + user defined product, so four in total.",,jy268,od044,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3102,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,21686400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0ats0:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 9,HOT Sprint 10 (S),,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3012-deprecated-class-fix,XP-3012,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Jun/20 17:02;od044;[~jy268] Is there reason why the ratio is reversed than in description?

Per the description, it is ""order/trade"", but actually it is ""trade/order"" ","10/Jun/20 11:58;od044;Partially done, waiting for additional clarification from customer.
- close this ticket
- additional work will be covered by new ticket XP-3120","15/Jun/20 15:07;jy268;h2. Report generation
The report is generated in two steps:

# Data collecting
# Report generating

h2. Data collecting

The data are taken from core's DB mainly from history tables and then inserted into Report Tool's DB.

The collecting must be executed at least once before the Report generating step is executed. The intended way though is to execute collecting every day.

h2. Report generating

The report is generated once a month. For this step there must be already all data prepared by the step Data Collecting. The report itself is a CSV file with following structure:


||month||product||order_to_trade_ratio||
|APRIL|example product name 1|5.0|
|APRIL|example product name 2|2.3|
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Evolution of number of trades,XP-3011,95583,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,uv683,zi174,zi174,12/May/20 15:05,04/Aug/20 19:53,22/Feb/21 13:21,10/Jun/20 11:20,,,3.1.0,,,,,,,,,,"+Evolution of number of trades+

Number of trades and traded volumes grouped by trade timestamp against contract delivery time, aggregated per month. In 15-minute increments, report the total monthly number of trades and the total monthly trade volume grouped according to the time lapse between the trade time stamp and the delivery start of the traded contract.

 

The values reported will be: (1) number of trades, (2) traded volumes.

The maximum number of both these values for each month will be the number of 15-minute increments from the earliest gate opening for trading until the last gate closure for trading.

For each 15-minute period between start of trading and end of trading, we will see the total number of trades in the given month and the total traded volume in the given month that was realised in this 15-minute period on every day of the month.

In which 15-minute bucket a trade falls is decided by the distance between trade timestamp and delivery start of the traded contract.

In effect, this report tells us: in month A, x trades for a volume of y were traded between i and i + 15 minutes before delivery, where the first i is start of trading and the last i + 15 is gate closure for trading. There is no splitting per contract and no splitting per MA/DA. The aggregation is a sum.

 ",,tr866,uv683,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3117,,,,,,,,,,,,,"22/Jun/20 13:11;uv683;2020-05_TRADES_EVOLUTION_2020-06-22-111029.csv;https://jira.deutsche-boerse.com/secure/attachment/85048/2020-05_TRADES_EVOLUTION_2020-06-22-111029.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,21168000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0ay7i:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 10,,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3013-submitted-orders-product-grouping,develop,master,XP-3011-fix,XP-3011-evolution-of-trades,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jun/20 11:20;tr866;Development part done, testing part is left.","22/Jun/20 13:13;uv683;h3. {color:#172b4d}How does computation of trade evolution works?{color}

There are two jobs, collector which is getting data from xbid core database every day and generator, which is producing the final report every month.
h4. Collector
 * every day all the trades which have contract's {{expiry point < today}} and are not collected already are obtained from xbid core database. Recalled and cancelled trades are not taken into account.
 * for every trade so called {{interval order}} is  then computed. It is {{( trade match time - contract activation point ) / 15 min}}. This splits the trading window for given contract into 15min intervals between {{activation point}} and {{expiry point}} and tell you in which interval given trade happened. First interval from activation point to activation point + 15min has interval order = 0.
 * all trade quantities are recalculated into MWh

h4. Generator
 * generator will produce final CSV report at the beginning of every month
 * please note that trade data are collected based on expiry point in UTC, this means that if contract will start trading on 31.5.2020 at 22CEST and ending trading on 1.6. 14:00 CEST it will not be part of May's report
 * here is an example of such report [^2020-05_TRADES_EVOLUTION_2020-06-22-111029.csv]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Indicator - Explicit/Implicit allocation volume,XP-3010,95582,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,jy268,zi174,zi174,12/May/20 15:05,04/Aug/20 19:53,22/Feb/21 13:21,08/Jul/20 09:46,,,3.1.0,,,,,,,,,,"+Indicator - Explicit/Implicit allocation volume+

For each border (not per IC) that allows for explicit allocation: the explicit and implicit allocation volume per day on that border.

For avoidance of doubts this report is generated only for borders where explicit allocation is allowed.",,jy268,od044,qo794,radeale,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3249,,,,,,,,,,,,,"03/Jul/20 17:29;od044;2018-02_EXPLICIT_IMPLICIT_ALLOCATIONS_2020-07-03-152331.csv;https://jira.deutsche-boerse.com/secure/attachment/85405/2018-02_EXPLICIT_IMPLICIT_ALLOCATIONS_2020-07-03-152331.csv","03/Jul/20 17:39;od044;cor_docker.dump;https://jira.deutsche-boerse.com/secure/attachment/85406/cor_docker.dump",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,19785600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0b2dg:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 12 (S),,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3264,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Jul/20 17:47;od044;[~jy268]
I did quick check the report on feature branch 
But I found some unclear result
- (?) how the explicit allocation is counting on IC that has contract resolution 15 and 30 min. 

I came across with some discrepancies between report and allocation in DB table cmm_100_allocation. 
Here is report, please have a look specially at border DE-AT and FR-DE in this report
[^2018-02_EXPLICIT_IMPLICIT_ALLOCATIONS_2020-07-03-152331.csv] 

DB check explicit allocation:
|border|sum|
|DE-AT|	110000|
|FR-DE	|160000|
|MADK1-MASE3|	40000|
|MADK1-NL|	20000|
|MADK2-MASE4|	105000|
|TSMA10-TSMA11	|45000|
TSMA9-TSMA11	45000
My query for checking explicit allocation looks like: 
{code}
select 
	((select ca.short_name from cmm_200_area ca where ca.area_eic = cb.market_1_id)||'-'||(select ca.short_name from cmm_200_area ca where ca.area_eic = cb.market_2_id)) as border, 
	sum(ca.allocated_quantity)
--	ca.allocated_quantity,
--	cic.area_1_eic,
--	cic.area_2_eic
from cmm_220_border cb, cmm_230_inter_connector cic, cmm_130_contract cc, cmm_100_allocation ca 
where ca.contract_id = cc.contract_id
and cc.connector_id = cic.connector_id
and cic.border_id = cb.border_id
and ca.user_balancing_group_eic = 'QA-BAL-ALL-----M' -- balancing group of explicipant user
--and cb.border_id=47
group by border
;
{code}

if you want to do more analysis here is my docker db cor dump:  [^cor_docker.dump]  

[~radeale] I hand over it to you from here. ","07/Jul/20 08:10;qo794;The answer to the comment above: *The allocation volume is always converted to MWh*","08/Jul/20 09:46;jy268;Issue split into:
|XP-3249|[SPLIT] Indicator - Explicit/Implicit allocation volume|
","08/Jul/20 12:07;zi174;Added an additional clarification to XP-3249",,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 1) Net Position averaged,XP-3009,95581,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ll664,zi174,zi174,12/May/20 15:05,04/Aug/20 19:53,22/Feb/21 13:21,27/May/20 09:27,,,3.1.0,,,,,,,,,,"|+Net Position averaged+
For each market area, the net position in MWh averaged per 15min MTU across a month (92-100  values one for each MTU of the day averaged over the month considering DST) and per day (28-31 values one for each day of the month averaged over the day) 
 
The values reported will be: (1) the net position in MWh averaged per 15 min MTU across a month, (2) the net position in MWh averaged per day.
Net position is calculated as total purchased quantity – total sold quantity in MWh within MA.
 
Example of MTUs consideration:
 
e.g. 3 trades are created (with purchase in MA only i.e. import):
Q1-2MW,
Q2-3MW,
Q3-4MW
and 1 trade is created for
H1-1MW.
The net position shall be calculated on quarterly basis:
Q1= 0,75 MWh,
Q2=1 MWh,
Q3=1,25 MWh,
Q4= 0,25MWh.|",,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3070,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,split,,,,,,,,,,24624000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y0t:x",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 9 (S),,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3009-underscores,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Indicator - Total traded volume per number of crossed borders ,XP-3008,95579,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,zi174,zi174,zi174,12/May/20 15:01,04/Aug/20 19:53,22/Feb/21 13:21,10/Jun/20 11:18,,,3.1.0,,,,,,,,,,"+Indicator - Total traded volume per number of crossed borders+ 

This indicates for each day the total volume in MWh allocated in trades that crossed 0, 1, 2 … (to the maximum number of borders crossed by any trade on that day) borders.

The sum of the values for each day should equal the total traded volume for that day.

 

Example:",,eh941,hj444,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3118,,,,,,,,,,,,,"09/Jun/20 11:58;hj444;RTM_US4932_AM_Indicators_TotalTradedVolume_v1.xlsx;https://jira.deutsche-boerse.com/secure/attachment/84560/RTM_US4932_AM_Indicators_TotalTradedVolume_v1.xlsx","20/May/20 17:10;eh941;VOLUME_PER_BORDER_2020-04.csv;https://jira.deutsche-boerse.com/secure/attachment/84043/VOLUME_PER_BORDER_2020-04.csv","29/May/20 11:52;tr866;cx_111_trade_history.csv;https://jira.deutsche-boerse.com/secure/attachment/84299/cx_111_trade_history.csv","29/May/20 11:52;tr866;cx_111_trade_history.html;https://jira.deutsche-boerse.com/secure/attachment/84300/cx_111_trade_history.html","29/May/20 11:52;tr866;cx_673_trade_flow_history.csv;https://jira.deutsche-boerse.com/secure/attachment/84301/cx_673_trade_flow_history.csv","29/May/20 11:52;tr866;cx_673_trade_flow_history.html;https://jira.deutsche-boerse.com/secure/attachment/84302/cx_673_trade_flow_history.html","04/Jun/20 15:26;eh941;trade_per_volume_v1.xlsx;https://jira.deutsche-boerse.com/secure/attachment/84473/trade_per_volume_v1.xlsx","05/Jun/20 08:29;eh941;trade_per_volume_v2.xlsx;https://jira.deutsche-boerse.com/secure/attachment/84476/trade_per_volume_v2.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,20736000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y13:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 9 (S),Alpha Sprint 10,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,fake-failure,XP-3009-underscores,XP-3008-virtual-das,XP-2506-xbid-dev-env,XP-3264,XP-2484,develop,XP-3110-deprecated-log,master,XP-2501-to-xbid-dev-env,xbid-dev-env,traversal-XP-2485,XP-3015-underscores,XP-2488-xbid-dev-env,,,,,,,,,,,,,,,,,,,,true,"20/May/20 17:09;eh941;h1. Report Generation

The report is generated in two steps:
 # Data collecting
 # Report generating

h2. Data Collecting

The data are taken *from core's DB* mainly from history tables and then *inserted into Report Tool's DB.*

The collecting must be executed at least once before the _Report generating_ step is executed. The intended way though is to *execute collecting every day*.
h2. Report Generating

The report is generated *once a month*. For this step there must be already all data prepared by the step _Data Collecting_. The report itself is a *CSV file* with a structure described bellow.
h1. Report Data Insight

The report is based on data which is collected for each day. It contains:
 # Day - e.g. {{2020-05-01}}
 # Number of borders - number of the border crossing needed to delivery the power from sell to buy side
 # Traded volume - quantities of the trades for the _Day_ and for the _Number of borders_

Example lines:
||day||number of borders||traded volume||
|2020-04-01|0|7000|
|2020-04-02|0|4000|
|2020-04-02|1|3600|

If there is no trade made for a particular day then there is no record for the day in the report.

Only used _Number of borders_ are in place. Example - if there is no trade with number of 3 crossed borders for {{2020-05-02}} then there is no record for this combination.
h2. Day

The day is a CET day that refers to the delivery start of the trade. The delivery start is taken originally from the contract on which the trade's orders were created.

It doesn't matter when the trade was created (the orders were matched)

E.g. A trade with delivery start {{2020-05-01 01:00:00 +0200}} made from orders based on contract {{01-02_XB}} belongs to day {{2020-05-01}}.
h2. Number of borders

Border is defined similarly as ACER's bidding zone. If a market area contains multiple delivery areas then the border is defined on market area level. If there is just one delivery area it's on the delivery area's level.

When a trade is created there might be multiple defined flows from bidding zone A to bidding zone B. In such case this border is taken only once for either continuous intervals or intervals with other borders between.

*Example 1 - continuous intervals*
 We're having a trade for one hour energy (conctract 13-14_XB) with delivery start at {{2020-05-02 13:00:00}}. On sell side there is an order in bidding zone BZ1 and on buy side in BZ2. There is capacity resolution set to 15 minutes on the There are following flows.
||Sell||Buy||Interval||
|BZ1|BZ2|13:00 - 13:15|
|BZ1|BZ2|13:15 - 13:30|
|BZ1|BZ2|13:30 - 13:45|
|BZ1|BZ2|13:45 - 14:00|

Although this trade contains 4 flows for the border {{BZ1-BZ2}} (for continuous interval {{13:00 - 14:00}}) it will be counted only as *1 border*.

*Example 2 - intervals with other borders between*
 The setup is the very same as for Example 1 except for the flows:
||Sell||Buy||Interval||
|BZ1|BZ2|13:00 - 13:15|
|BZ1|BZ2|13:15 - 13:30|
|BZ1|BZ3|13:30 - 13:45|
|BZ3|BZ2|13:30 - 13:45|
|BZ1|BZ2|13:45 - 14:00|

In this case for the interval {{13:30 - 13:45}} different path was picked. The border {{BZ1-BZ2}} was used for continuous interval {{13:00 - 13:30}} and interval {{13:45 - 14:00}}. Even though there was a _gap_ the border is counted as 1 border. There are other 2 border crossing {{BZ1-BZ3}} and {{BZ3-BZ2}}. The final *_Number of borders_ is therefore 3*.
h2. Traded volume

Traded volume is a sum of the trades quantity that *weren't cancelled nor recalled*. It's grouped by the _Day_ and by _Number of Borders_.","20/May/20 17:10;eh941;Full example can be found here - [^VOLUME_PER_BORDER_2020-04.csv]","04/Jun/20 09:47;hj444;Back to in progress - border number vs split path. ","04/Jun/20 15:36;eh941;I uploaded file [^trade_per_volume_v1.xlsx] which is meant for the customers in order to decide how exactly should be the indicator calculated.  As the comment to the file I suggest something like this:

{quote}
During AM indicator BR01 - total traded volume per number of crossed borders we found out that there are multiple ways how to understand the indicator calculation.  In order to prevent misunderstandings we provide 2 possible approaches even though there are many others - they can be found in the attached excel file (notice multiple sheets). The option A is the preferred one. It's rather simple yet it calculates most of the cases that occurs in production with the same numbers as the more complicated approaches.

Please let us know which option you prefer (if any).
{quote}","05/Jun/20 08:36;eh941;I uploaded a second version of the excel file which contains only current solution a doesn't suggest any changes. I discussed the issue with [~radeale] and he got a point that there might be no need to suggest multiple options and open unnecessary discussions.

For this version there is different summary to the customers as follows:

 {quote}
During AM indicator BR01 - total traded volume per number of crossed borders we found out that there are multiple ways how to calculate the indicator. In order to prevent misunderstandings we provide you an excel file in which there are multiple examples showing the algorithm we used. Please let us know if you agree with our approach.
{quote}","05/Jun/20 10:56;eh941;When [~zi174] reviews the answer we can send it out.","09/Jun/20 11:47;hj444;Added excel with Test scenarios:
RTM_US4932_AM_Indicators_TotalTradedVolume_v1
","10/Jun/20 11:18;hj444;Issue split into:
|XP-3118|(Split2) Indicator - Total traded volume per number of crossed borders |
","26/Jun/20 15:39;hj444;Tested scenarios, examples, results : see added excel
",,,,,,,,,,,,,,,,,,,,,,,
OCC file contains wrong data if two different Activities exist with same timestamp,XP-3003,95540,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,od044,jy268,jy268,11/May/20 16:31,04/Aug/20 16:11,22/Feb/21 13:21,20/May/20 18:05,,,3.0.1 OCC,,,,,,,,,,"According to manual investigation in DB it is possible that more than one activity log exists with same timestamp and same delivery intervals being modified but with different available capacity. It implies that one of changes will not be reflected in file.
In case of such situation another time serie has to be created but with the same timestamp.",,jy268,od044,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,23932800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2609,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0atiw:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 8 (S),HOT Sprint 9,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3233-acceptance-jgitflow,hotfix,prod,master-prod,XP-4211-perf-analysis-jh,XP-3055,XP-4122-perf-analysis,develop,master-xbid-2.0.36.x,master-acceptance,master,XP-4250,XP-3233-prod-jgitflow,acceptance,XP-3001-xbid-2.0.36.x,XP-222-acceptance,XP-4526-resource-managment-fix,XP-3048-merge-to-xbid-2.0.36.x,XP-4152-acceptance,xbid-2.0.36.x,XP-3909,,,,,,,,,,,,,true,"12/May/20 10:53;jy268;Please proceed with smoke test only as this situation is hardly reproducible.","13/May/20 10:59;od044;Step to reproduce of issue regarding multiple time-series with the same update timestamp and different ATC values

1. Have a grid that contains path DA1 - VDA - PDA , DA2 - DA1 - PDA
2. Set up OCC FTC on those ICs
3. Set up low capacity to lead to split path
4. Do trade from DA1 - PDA with allocation that has to split to two-path   
5. Check OCC files - issue in OCC file between DA1-VDA 
","20/May/20 18:05;od044;Test passed on R2.0.39",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses - rounding - analyze rounding occurrence HOT,XP-2967,95214,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,eg288,lt112,ei349,29/Apr/20 15:41,13/Aug/20 19:43,22/Feb/21 13:21,13/May/20 12:07,,,Losses ASR,,,,,,,Losses,,,"* consider unrounded output from routing library
** describe consequences for SOB, CMM, SM, API, OBK
** internal inconsistencies?
** order leftovers (Q < lot size) _note: cycles do not follow lot size restrictions as well_
** possibly cooperate with SG losses in case of questions about what happens with the data we send

See:
* https://jira.deutsche-boerse.com/browse/XBID-4983
* https://jira.deutsche-boerse.com/secure/attachment/82898/82898_Rounding+Issues+in+Losses+v2+%28for+DBAG%29.pptx",,ei349,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24537600,,,,,,,,,,XP-1914,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0arj0:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 8 (S),,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/May/20 08:51;lt112;https://github.deutsche-boerse.de/dev/xbid.routing/wiki/Rounding",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
LEFTOVER: OCC files fixes (XBID-4913) - BR 3,XP-2964,95196,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,hj444,radeale,uv683,29/Apr/20 13:46,04/Aug/20 16:11,22/Feb/21 13:21,13/May/20 13:02,,,3.0.1 OCC,,Capacity,,,,,Package1,,,"For the up-to-date version of the complete US please see the most recent US document in XBID-4913.

This ticket is for implementing Business Rule 3.

*BR03*

Each timeseries within an OCC file will newly provide information not only about the value of offered capacity for changed contract (point) but for full delivery day using the break points features of Time series with A03 type (Curve where position 1 is mandatory) as described in the attached example and in the attached ENTSO-E document For avoidance of doubts the existing rule that in case of no changes in the ATC during the preceding 15 minutes, the latest ATCs are reflected per CMM contract per direction with the timestamp of the change is not affected.   

Note: In the AS IS, OCC files contains only the values of the periods where there is a change of ATC compared to previously sent file.

In the TO BE, each timeseries contains all the ATC values of the Business day. I.e. the actual frequency of reporting the ATC values is unchanged, but with every change reported there are all the ATCs in the TS using the so called ‘break points’ I.e. *if the ATC values for H03, H04 and H05 are the same, they are all reported in point 03.*

_For the file examples and additional information please look into the most recent US document in XBID-4913._",,hj444,uv683,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3026,,,,,,,,,,,,,"30/Apr/20 10:35;hj444;20200501_OCC_DE-APG_IMPL_001.xml;https://jira.deutsche-boerse.com/secure/attachment/83212/20200501_OCC_DE-APG_IMPL_001.xml","30/Apr/20 10:33;hj444;20200501_OCC_DE-APG_IMPL_010.xml;https://jira.deutsche-boerse.com/secure/attachment/83211/20200501_OCC_DE-APG_IMPL_010.xml","30/Apr/20 10:33;hj444;20200501_OCC_DE-APG_IMPL_013.xml;https://jira.deutsche-boerse.com/secure/attachment/83210/20200501_OCC_DE-APG_IMPL_013.xml","05/May/20 14:51;hj444;20200504_OCC_RTE-DE_IMPL_043_beforePublish.xml;https://jira.deutsche-boerse.com/secure/attachment/83542/20200504_OCC_RTE-DE_IMPL_043_beforePublish.xml","05/May/20 14:51;hj444;20200504_OCC_RTE-DE_IMPL_044_afterPublish_noAllocations.xml;https://jira.deutsche-boerse.com/secure/attachment/83543/20200504_OCC_RTE-DE_IMPL_044_afterPublish_noAllocations.xml","05/May/20 14:51;hj444;20200504_OCC_RTE-DE_IMPL_045.xml;https://jira.deutsche-boerse.com/secure/attachment/83544/20200504_OCC_RTE-DE_IMPL_045.xml","05/May/20 14:52;hj444;20200504_OCC_RTE-DE_IMPL_046_noAllocation15minutes.xml;https://jira.deutsche-boerse.com/secure/attachment/83545/20200504_OCC_RTE-DE_IMPL_046_noAllocation15minutes.xml","12/May/20 13:28;hj444;20200512_ActivityReport_AMP-APG_20200512112730.csv;https://jira.deutsche-boerse.com/secure/attachment/83746/20200512_ActivityReport_AMP-APG_20200512112730.csv","12/May/20 12:18;hj444;20200512_OCC_DE-APG_IMPL_035_beforePublish.xml;https://jira.deutsche-boerse.com/secure/attachment/83737/20200512_OCC_DE-APG_IMPL_035_beforePublish.xml","12/May/20 12:18;hj444;20200512_OCC_DE-APG_IMPL_036_afterPublish.xml;https://jira.deutsche-boerse.com/secure/attachment/83738/20200512_OCC_DE-APG_IMPL_036_afterPublish.xml","12/May/20 12:18;hj444;20200512_OCC_DE-APG_IMPL_037_afterAllocation.xml;https://jira.deutsche-boerse.com/secure/attachment/83739/20200512_OCC_DE-APG_IMPL_037_afterAllocation.xml","12/May/20 12:18;hj444;20200512_OCC_DE-APG_IMPL_038_noAction15minutes.xml;https://jira.deutsche-boerse.com/secure/attachment/83740/20200512_OCC_DE-APG_IMPL_038_noAction15minutes.xml","12/May/20 12:22;hj444;20200512_OCC_DE-APG_IMPL_040_allocation_BG2.xml;https://jira.deutsche-boerse.com/secure/attachment/83741/20200512_OCC_DE-APG_IMPL_040_allocation_BG2.xml","12/May/20 13:26;hj444;20200512_OCC_DE-APG_IMPL_042_noAction30minutes.xml;https://jira.deutsche-boerse.com/secure/attachment/83744/20200512_OCC_DE-APG_IMPL_042_noAction30minutes.xml","12/May/20 12:26;hj444;20200512_OCC_DE-APG_IMPL_043_moreAllocationsInOneAction.xml;https://jira.deutsche-boerse.com/secure/attachment/83742/20200512_OCC_DE-APG_IMPL_043_moreAllocationsInOneAction.xml","12/May/20 13:26;hj444;20200512_OCC_DE-APG_IMPL_044_oneBeforeGeneration.xml;https://jira.deutsche-boerse.com/secure/attachment/83745/20200512_OCC_DE-APG_IMPL_044_oneBeforeGeneration.xml",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24624000,,,,,,,,,,XP-2609,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:400000000000000000300043k",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 8,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Apr/20 10:36;hj444;AMP-APG : OCC - Impl, Minimum, 
* TC1: publish and download OCC file:  OCC-v1 
* TC2: allocate capacity : OCC-v8
* TC3: allocate capacity and have negative ATC : OCC-v10
* TC4: allocate at more contracts: OCC-v13

 

 ","05/May/20 14:53;hj444;TCs
 Distribution scheduler set up - every 15minutes : files are generated successfully every 15'.
 V43 –before publishing - OK
 V44 – after publishing - OK
 V45 – 2x allocation within 15minutes - OK
 V46 – 15 minutes no action - *Expected previous ATC in files* - {color:#de350b}but 0 are present for the contracts where before allocation was done{color}.

Waiting for fix - in XP-2963","12/May/20 13:21;hj444;h3. TC2:
AMP-APG OCC 
Distribution scheduler set up - every 15minutes : files are generated successfully every 15'.
OBH Allocations for BG1
*    V35 –before publishing - OK
*    V36 – after publishing - OK
*    V37 – 2x allocation within 15minutes - OK
*    V38 – 15 minutes no action - Expected previous ATC in files 

h3. TC3: 
   allocation OBH for diff BG (BG2)
*  v40 - after allocation OBH for diff BG then in TC2

h3. TC4 :
* v43 - allocations for more contracts in one 'action' 

h3. TC5: 
* v44 allocation in last minute before file generation

h3. TC6:
* NTC change - Add files

h3. TC7:
* negative ATC - Add files

*commonATC*
a./Leading IC AMP-RTE : OCC
b./Border DE-FR : OCC
c./NonLeading IC : TNG-RTE


   ","13/May/20 10:27;hj444;test will continue with areas:
1. VDA IC OCC FTC
2. Negative ATC
3. NTC change
4. more ICs => more DAs in MA but no commonATC configuration.","13/May/20 13:00;hj444;Issue split into:
|XP-3026|(Split) OCC files fixes (XBID-4913) - BR 3|
",,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split 1) OCC files fixes (XBID-4913) - BRs 1+2+5+7,XP-2963,95194,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,uv683,radeale,uv683,29/Apr/20 13:39,04/Aug/20 16:11,22/Feb/21 13:21,13/May/20 12:49,,,3.0.1 OCC,,Capacity,,,,,Package1,,,"For the up-to-date version of the complete US please see the most recent US document in XBID-4913.

This ticket is for implementing Business Rules 1, 2, 5 and 7.

*BR01*

User creating FTC can select if the OCC file is created for implicit or explicit auction and if the original or minimum value is used for interconnectors impacted by virtual delivery area - a new drop-down menu Auction for selection of this configuration will appear in FTC when OCC file is selected below the current Receiver field with two options _(detailed to BR02)_
 * Implicit (the default one)
 * Explicit

and

a new drop-down menu VDA Quantity for selection of this configuration will appear in FTC when OCC file is selected below the current Receiver field with two options _(detailed in BR04b)_
 * Minimum (the default one)
 * Original

!image-2020-03-31-16-56-28-661.png!  

_It must be possible to create two entirely same FTCs with the only difference being selection of value for parameter Auction ""Implicit"" vs ""Explicit"". The same does not apply to Minimum/Original, i.e. existence of a 'Minimum' FTC prevents creation of another 'Original' FTC presuming all other FTC parameters all the same._

*BR02*

Tag ""auction.type"" value within the OCC file will include a value A01 (implicit auctions) or A02 (explicit auction) depending whether explicit or implicit auction was selected in relevant FTC producing the file.

Note: The same information will be reported in the 2 files, except that one will be explicit and the other will be implicit (as ATC is identical for both allocations). The new selection implicit/explicit doesn't thus provide any specific logic except the auction.type value in the xml and except as stated in BR07. I.e. the only difference is in the _auction.type_, the _mRID_ document identifier and the _file name_ template.

*BR05*

Document identifier stored in mRID - MD5 hashed identifier string - will be newly created using additional attribute per file type, i.e. combination of following attributes divided by underscores (""_"") put in a MD5 hashed identifier string will be used:
 * indicator of file type
 * the border/IC or area to which it applies
 * EIC of the receiving party
 * delivery date covered by the file in YYYYMMDD format
 * the oldest timeseries update_DateAndOrTime.dateTime within the file
 * auction.type (A01 or A02)

Note: For the avoidance of doubt, in case 2 files have the same mRID (because all the element in the MD5 hash are identical - case for instance where there is no ATC change during the last 15'), the version field is incremented as in the current behavior.

*BR07*

The name of the file is generated automatically by the system and follows the convention below

Where auction.type is A01           
 * YYYYMMDD_OCC_'DA1'-'DA2'_IMPL_V.xml
 * YYYYMMDD_OCC_'MA1'-'MA2'_IMPL_V.xml (for border-level file configurations)

Where auction.type is A02           
 * YYYYMMDD_OCC_'DA1'-'DA2'_EXPL_V.xml

YYYYMMDD_OCC_'MA1'-'MA2'_EXPL_V.xml (for border-level file configurations)",,hj444,radeale,tr866,uv683,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3024,,,,,,XBID-5087,XP-2964,,,,,,"13/May/20 12:39;tr866;BR07 - File Naming.xlsx;https://jira.deutsche-boerse.com/secure/attachment/83809/BR07+-+File+Naming.xlsx","29/Apr/20 15:48;hj444;OCC_config_AMP-RTE_IC_DE-FR_border.png;https://jira.deutsche-boerse.com/secure/attachment/83179/OCC_config_AMP-RTE_IC_DE-FR_border.png","13/May/20 12:39;tr866;R2.0.38-SNAPSHOT-b7003e46e3d7bd41c428ba483e8fddaf40bff21f.zip;https://jira.deutsche-boerse.com/secure/attachment/83810/R2.0.38-SNAPSHOT-b7003e46e3d7bd41c428ba483e8fddaf40bff21f.zip","05/May/20 16:23;tr866;Version Numbers - R2.0.38-SNAPSHOT (Build edb48011de11d32f3dbbaddd5f0aad75779a3dfa).zip;https://jira.deutsche-boerse.com/secure/attachment/83551/Version+Numbers+-+R2.0.38-SNAPSHOT+%28Build+edb48011de11d32f3dbbaddd5f0aad75779a3dfa%29.zip","30/Apr/20 13:59;tr866;Version Numbers R2.0.38-SNAPSHOT (Build 58613e2412f810011480548c45abd1bc0dfa86bf).zip;https://jira.deutsche-boerse.com/secure/attachment/83233/Version+Numbers+R2.0.38-SNAPSHOT+%28Build+58613e2412f810011480548c45abd1bc0dfa86bf%29.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24624000,,,,,,,,,,XP-2609,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:400000000000000000300043",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 8,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3233-acceptance-jgitflow,hotfix,prod,XP-4211-perf-analysis-jh,master-prod,XP-3055,XP-4122-perf-analysis,develop,master-xbid-2.0.36.x,master-acceptance,master,XP-3233-prod-jgitflow,acceptance,XP-4250,XP-3001-xbid-2.0.36.x,XP-222-acceptance,XP-4526-resource-managment-fix,XP-3048-merge-to-xbid-2.0.36.x,XP-3000-multiple-activity-logs-with-same-timestamp-problem,XP-4152-acceptance,xbid-2.0.36.x,XP-3909,,,,,,,,,,,,true,"29/Apr/20 13:54;tr866;# BR01 - Submenu - test and fix the problems with file generation by Event Trigger(+test Schedule) related to same FTCs but different action.type, possible problematic situations:
 ** event trigger for Service/alloc, Immediate Scheduling Type for OCC
 ** event mapping for IMPL auction type FTC when FTC with EXPL auction type exists already
 ** create a new ""Scheduler Mapping"" for OCC FTC, when Event Mapping exists already (currently error received ""Distributed file configuration for the same border/interconnector, receiver, scope, transport type, auction type and validity interval already exists"")-but it looks it might be also rather problem of co-existing IMPL and EXPL active FTCs, rather than creating event mapping and scheduler mapping for the same FTC
 ** 
 # BR07 - File naming
 ## Verify Filenames after BR04a from HOT is clarified
 ## Test fix of version numbers (also impacted by BR04a)","29/Apr/20 15:40;hj444;3. CMI -  inconsistency at Outbound GUI Overview - IC configuration vs Border configuration and Auction column.
 * IC configuration contains this column,
 * Border doesn't contain.

picture added","30/Apr/20 14:17;tr866;Test failed for version numbers with version XB R2.0.38-SNAPSHOT (Build 58613e2412f810011480548c45abd1bc0dfa86bf)
 Generated files and test results attached [^Version Numbers R2.0.38-SNAPSHOT (Build 58613e2412f810011480548c45abd1bc0dfa86bf).zip]

As mentionned in the related XP-2863
 https://jira.deutsche-boerse.com/browse/XP-2863?focusedCommentId=274114&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-274114

DFS800 Capacity Management TSO Interface, 4.1.14 Document Identifier:
{quote}The{color:#172b4d} *version number*{color} of any file produced by CMM is {color:#172b4d}*incremental for the combination of following attributes*{color} divided by underscores (“_”) put in a {color:#172b4d}*MD5*{color} hashed identifier string:
 * indicator of file type                                                       e.g. RCA, IAR, NSF, NetPI / NetPX
 * the border/IC or area to which it applies                        e.g. DA1-DA2, DA3
 * EIC of the receiving party                                               e.g. TSO1-----------S
 * delivery date covered by the file in YYYYMMDD format  e.g. 20170628
 * additional attribute per file type:..{quote}
Additional attributes from XBID-4913-BR05:
{quote} * {color:#172b4d}*the oldest timeseries update_DateAndOrTime.dateTime within the file*{color}
 * {color:#172b4d}*auction type*{color}{quote}

Currently the additional attributes *{color:#DE350B}update_DateAndOrTime.dateTime{color}* and *{color:#DE350B}auction type{color}* are not taken into account for file versiona as they are included in the mRID Document Identifier.","05/May/20 16:21;radeale;Hi there,

so the version has to increase also for the update_DateAndOrTime.dateTime as from the explanation from the customer (XBID-5087):

_Dear Alexandr,_

_Inclusion of update_DateAndOrTime.dateTime is intentional (i.e. file version will be nearly always 1) as we need each file has its own document identifier - Transparency Platform show in that case the values as separate records. If the files will be provided with the same document identifier and only the version would change, Transparency Platform consider such new submission as correction of data provided previously._

_Kind regards_

_David_","05/May/20 17:59;tr866;Tested in docker in version R2.0.38-SNAPSHOT (Build edb48011de11d32f3dbbaddd5f0aad75779a3dfa)
 Generated files and excel sheet with tracked filenames and versions attached [^Version Numbers - R2.0.38-SNAPSHOT (Build edb48011de11d32f3dbbaddd5f0aad75779a3dfa).zip]
# BR01 - Submenu changes resulting in problems with file generastion:
#- Event triggered file generation is working fine and not throwing exceptions (/)
#- Creation of event mapping for IMPL auction type FTC when EXPL type exists already and vice versa is working correctly (/)
#- Creation of  ""*{color:#DE350B}Scheduler Mapping{color}*"" for OCC FTC doesn't work, when two same FTCs only with different auction type exist already - (x)
Steps to reproduce:
### Create Outbound FTC on Interconnector level with following parameters: 
Border: MAEE-MAFI; Interconnector: EE-FI; File type: OCC; Receiver: 10V1001C--00001O; Auction: *Implicit*; VDA Quantity: Minimum; Allocation Scope: BOTH; Transport Type: ECP; Valid From: 06.05.2020; Valid To: x
### Create Outbound FTC on Interconnector level with following parameters: 
Border: MAEE-MAFI; Interconnector: EE-FI; File type: OCC; Receiver: 10V1001C--00001O; Auction: *Explicit*; VDA Quantity: Minimum; Allocation Scope: BOTH; Transport Type: ECP; Valid From: 06.05.2020; Valid To: x
### Modify any of the 2 FTCs
### Create a *Distribution Scheduler Mapping*
Distributed file configuration for the same border/interconnector, receiver, scope, transport type, auction type and validity interval already exists
# BR07 - File Naming:
#- Filenames look correct with the DA, MA, VDA replaced following BR04a (basic scenarios covered) (/)
#- Version number in filenames behaves
#-- correctly regarding auction type (/)
#-- wrong regarding  *{color:#DE350B}update_DateAndOrTime.dateTime{color}*, as customers decided differently in the end, than it looked logical to us, see comment from Alex above (x)
# CMI -  inconsistency at Outbound GUI Overview - IC configuration vs Border configuration and Auction column: column Auction is visible in both types of configurations now (/)","13/May/20 12:40;uv683;Issue split into:
|XP-3024|(Split 2) OCC files fixes (XBID-4913) - BRs 1+2+5+7|
","13/May/20 12:41;tr866;Tested in docker with version XB R2.0.38-SNAPSHOT (Build b7003e46e3d7bd41c428ba483e8fddaf40bff21f)
# BR01 - *{color:#DE350B}Scheduler Mapping{color}* - still not possible to create scheduler mapping for 2 existing FTCs, which are the same only with different auction.type (x)
# BR02 - version in filenames are working fine - (/)
test results [^BR07 - File Naming.xlsx] attached together with downloaded outbound files [^R2.0.38-SNAPSHOT-b7003e46e3d7bd41c428ba483e8fddaf40bff21f.zip]",,,,,,,,,,,,,,,,,,,,,,,,,
CLONE OCC files fixes (XBID-4913) - BRs 4a+4b,XP-2960,95180,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,od044,qo794,qo794,29/Apr/20 12:41,04/Aug/20 16:11,22/Feb/21 13:21,13/May/20 10:49,,,3.0.1 OCC,,Capacity,,,,,Package1,,,"For the up-to-date version of the complete US please see the most recent US document in XBID-4913.

This ticket is for implementing Business Rules 4a and 4b.

*BR04a*

*EIC codes replacement* *only for OCC files* when +_Interconnector_ based+ FTC is created:
 # If the DA is part of an MA with more than one non-virtual DA, the MA EIC code is used instead (e.g. Germany MA), this doesn't apply for internal ICs, no code translation is performed there
 # If the DA is a VDA and the IC is _not_ VDA-PDA, the VDA EIC code is replaced by its PDA EIC code
 # If the DA is a VDA and the IC is VDA-PDA IC, VDA EIC code is _not_ replaced by PDA EIC code
 # In all other cases no EIC codes translation apply

Example for rule 1 + 2: 50Hertz-PLC → change to DE-PSE

Example for rule 3: PSE-PLC → remains PSE-PLC

EIC codes replacement only for OCC files when +_Border_ based+ FTC is created:

OCC file configured for a border contains EIC codes of the Market Areas today. As Market Areas EIC codes are frequently dummy codes newly a Delivery Area EIC code shall be used when MA has only one DA.

_Example:  In case of the FR-DE border, it means that for the FR side the EIC of the DA shall be used and for the German side the EIC code of the MA._

*Additional note as of 21/04*: No delivery area name conversion will be applied to internal Interconnectors.

*BR04b*

*Quantity replacement for OCC files* when Interconnector based FTC is created
 # If one of IC delivery areas is VDA and the IC is not VDA-PDA IC, additional configuration is required within FTC for following options

 # offered capacity quantity remains as calculated for IC (Example: 50Hertz-PLC→ quantity 50Hertz-PLC) (""Original"" in BR01)
 # offered capacity quantity is a minimum of quantity of IC and VDA-PDA (Example 50Hertz-PLC→ quantity Min (50Hertz-PLC, PLC-PSE)) /this would be used equally for other CR common ATC/NTC/* (""Minimum"" in BR01)

 # If the IC is VDA-PDA IC no impact to offered capacity quantity

 * Example: PSE-PLC → quantity PSE-PLC

_*Note: Situation may arise that two OCC files will be generated with the same quantities for the DA1-VDA-PDA configuration when the changed ATC values are on the part of the virtual IC with a higher ATC than on the other virtual IC. In that case new timestamp and higher version of the file will be used although the reported quantities remain the same._",,od044,qo794,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2845,,,,,,,,,,XP-3003,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,24624000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2609,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0arf4:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 8 (S),,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/May/20 10:48;od044;Test partially done - closinng ticket
- new issue regarding BR04b (occurs in prod too) will be following up in XP-3003

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Split3) OCC files fixes (XBID-4913) - BR 6,XP-2957,95172,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ek176,radeale,ek176,29/Apr/20 11:27,04/Aug/20 16:11,22/Feb/21 13:21,13/May/20 10:57,,,3.0.1 OCC,,Capacity,,,,,Package1,,,"For the up-to-date version of the complete US please see the most recent US document in XBID-4913.

This ticket is for implementing Business Rule 6.

*BR06*

Sending of OCC files is required to take place from configured time in D-1 until the end of the day D.

+Example of current behaviour:+

FTC 1:
 * starting time 15:00 on 05/02 for NEXT_DAY

FTC 2:
 * starting time 00:00 on 06/02 for CURRENT_DAY

Result:
 * for 06/02 delivery day are files generated from 15:00 05/02 to 24:00 based on FTC 1
 * for 06/02 delivery day are files generated from 00:00 06/02 to 24:00 based on FTC 2
 * for 07/02 delivery day are files generated from 00:00 06/02 to 24:00 based on FTC 1
 * for 07/02 delivery day are file generated from 00:00 07/02 to 24:00 based on FTC 2

+New behaviour:+

Should enable to avoid sending the files between 00:00 06/02 and 15:00 (configured time) 06/02 for delivery day 07/02 either by general change of all FTCs behaviour or via specific additional restrictions only for OCC file.

*New field will be added to the Distribution Scheduler Mapping pop-up named like ""Generate from"" and the time specified. This would mean that for the selected Range the generation of filed would start at the selected time. The default value would be 00:00.*

The field is to be added after the Range field (i.e. as a last in the list).

!image-2020-03-31-17-03-41-560.png!

 ",,ek176,qo794,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3021,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Split,,,,,,,,,,25833600,,,,,,,,,,XP-2609,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:400000000000000000300043r",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 7 (S),Alpha Sprint 8,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CMI - Big reports generation improvement [Analysis],XP-2953,95123,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,ll664,ll664,29/Apr/20 09:04,31/Aug/20 15:38,16/Feb/21 13:31,19/May/20 13:21,,,3.1.0,,,,,,,,,,"big change - customers needs to be involved
h3. Update - refinement on 11.5.2020:
 * move ATC Report/Activity Report generation from CMI to CMM Inquiry to avoid RPCs between CMM/CMI and vice versa
 * resource usage restricted - choose proper threadpool size - 1-5 worker threads for report generation shall be ok?
 * verify queries are efficient - DB indexes (do not slow down insert oprations)
 * report metadata (user/BG, filename, status) stored in DB, content on a disk, a network mount is required to be accessible by both nodes
 * UI adjusted to show report(s) with it's status and download link
 * limit max. number of reports generated by single user, if reached, delete oldest one
 * reports stored only for a defined period of time (hours, days?)
 * housekeeping
 * notify user once a report is ready? (UI message or email)
 * gzip the CSV (already in place?)

-----------------------------------------------------------------------------------

This is a follow up for XP-2934.

CMI reports - ATC Report, Activity Report are very time consuming a requests often timeouts during generation. (XP-2890).

They could also crash the whole CMM Inquiry if generation is unlucky timed.

There has been a couple of attempts to fix, yet, the reporting is still quite brittle. We need to come with a fundamental redesign here:

Ideas:
 * do not generate the report ""online"", i.e. HTTP request waits for till it's finished
 * instead submit a task to a ""report generation queue"", generate asynchronously
 * create UI where a report could be downloaded
 * housekeep generated reports after some time

This is a functional change, a mandate from customers needed?",,ei349,ek176,ll664,radeale,ub113,uv683,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,SMXBID-1850,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,24105600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3045,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0ar2o:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/May/20 13:45;ei349;[~eg288]:

Please organize CMM expert group and align how to resolve this issue with enduring solution. ","18/May/20 17:42;radeale;The customers are aware of the upcoming changes and seem to be OK with it (XBID-5102).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses - rounding - analyze rounding occurrence Alpha,XP-2949,95060,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,lt112,lt112,28/Apr/20 16:10,13/Aug/20 19:43,22/Feb/21 13:21,13/May/20 10:40,,,Losses ASR,,,,,,,Losses,,,"* consider unrounded output from routing library
** describe consequences for SOB, CMM, SM, API, OBK
** internal inconsistencies?
** order leftovers (Q < lot size) _note: cycles do not follow lot size restrictions as well_
** possibly cooperate with SG losses in case of questions about what happens with the data we send

See:
* https://jira.deutsche-boerse.com/browse/XBID-4983
* https://jira.deutsche-boerse.com/secure/attachment/82898/82898_Rounding+Issues+in+Losses+v2+%28for+DBAG%29.pptx",,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2967,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,25833600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1914,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0ardq:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 8,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses - rounding - estimate maximum rounding difference,XP-2948,95059,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,lt112,lt112,28/Apr/20 16:05,13/Aug/20 19:43,22/Feb/21 13:21,13/May/20 12:06,,,Losses ASR,,,,,,,Losses,,,"Simulate production load and:
* estimate maximum rounding difference by #trades * % of lossy trades * 0.5 * avg. lot size
** this will give a rough estimate
** run against production grid and cross-reference with lossy grid (detect trade going through IC that should have a loss factor in the future)

optional:
* -calculate: sum trade -> (if nonlossy then 0 else lot_size * 0.5)-
** -should be close to the one above- _is exactly the same_
* calculate: sum trade -> Q_end - Q * cummulative_LC
** actual rounding difference
** for each trade get difference of rounded quantity versus unrounded quantity
** should be close to 0 (might be also used to show non-biased rounding for https://jira.deutsche-boerse.com/browse/XP-2947)",,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,24624000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1914,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0arj2:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 8 (S),,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/May/20 17:28;lt112;h1. Estimate maximum rounding difference by #trades * % of lossy trades * 0.5 * avg. lot size 

h2. Results
- avg lot size = 100
- #trades = 3 683 538
- #lossy_trades = 121 021
- %lossy_trades = 3.3%
- => 121 021 * 0.5 * 100 = 6 051 050 in 41 days
- => ~ 147 587 per day
- in comparison: traded quantity 11 276 457 300 in 41 days
- => ~ 275 035 544 per day
- => ~ 0.0536% of total volume per day

h3. Per day
{noformat}
#1: 2020-01-12T00:00:00Z to 2020-01-13T00:00:00Z: #trades=3957, #lossy=269, %percentage=6.79808
#2: 2020-01-13T00:00:00Z to 2020-01-14T00:00:00Z: #trades=92392, #lossy=3264, %percentage=3.53277
#3: 2020-01-14T00:00:00Z to 2020-01-15T00:00:00Z: #trades=88359, #lossy=3537, %percentage=4.00299
#4: 2020-01-15T00:00:00Z to 2020-01-16T00:00:00Z: #trades=105656, #lossy=3837, %percentage=3.6316
#5: 2020-01-16T00:00:00Z to 2020-01-17T00:00:00Z: #trades=96408, #lossy=2598, %percentage=2.6948
#6: 2020-01-17T00:00:00Z to 2020-01-18T00:00:00Z: #trades=99461, #lossy=3701, %percentage=3.72106
#7: 2020-01-18T00:00:00Z to 2020-01-19T00:00:00Z: #trades=75789, #lossy=1986, %percentage=2.62043
#8: 2020-01-19T00:00:00Z to 2020-01-20T00:00:00Z: #trades=64947, #lossy=1602, %percentage=2.46663
#9: 2020-01-20T00:00:00Z to 2020-01-21T00:00:00Z: #trades=93436, #lossy=1939, %percentage=2.07522
#10: 2020-01-21T00:00:00Z to 2020-01-22T00:00:00Z: #trades=89752, #lossy=2236, %percentage=2.49131
#11: 2020-01-22T00:00:00Z to 2020-01-23T00:00:00Z: #trades=107523, #lossy=2399, %percentage=2.23115
#12: 2020-01-23T00:00:00Z to 2020-01-24T00:00:00Z: #trades=98266, #lossy=1540, %percentage=1.56717
#13: 2020-01-24T00:00:00Z to 2020-01-25T00:00:00Z: #trades=91958, #lossy=2417, %percentage=2.62837
#14: 2020-01-25T00:00:00Z to 2020-01-26T00:00:00Z: #trades=74737, #lossy=2425, %percentage=3.24471
#15: 2020-01-26T00:00:00Z to 2020-01-27T00:00:00Z: #trades=71497, #lossy=1590, %percentage=2.22387
#16: 2020-01-27T00:00:00Z to 2020-01-28T00:00:00Z: #trades=98094, #lossy=2129, %percentage=2.17037
#17: 2020-01-28T00:00:00Z to 2020-01-29T00:00:00Z: #trades=109231, #lossy=3425, %percentage=3.13556
#18: 2020-01-29T00:00:00Z to 2020-01-30T00:00:00Z: #trades=93697, #lossy=1727, %percentage=1.84318
#19: 2020-01-30T00:00:00Z to 2020-01-31T00:00:00Z: #trades=93102, #lossy=2549, %percentage=2.73786
#20: 2020-01-31T00:00:00Z to 2020-02-01T00:00:00Z: #trades=95649, #lossy=2918, %percentage=3.05074
#21: 2020-02-01T00:00:00Z to 2020-02-02T00:00:00Z: #trades=78447, #lossy=2881, %percentage=3.67254
#22: 2020-02-02T00:00:00Z to 2020-02-03T00:00:00Z: #trades=91932, #lossy=3817, %percentage=4.15198
#23: 2020-02-03T00:00:00Z to 2020-02-04T00:00:00Z: #trades=108076, #lossy=5351, %percentage=4.95115
#24: 2020-02-04T00:00:00Z to 2020-02-05T00:00:00Z: #trades=132554, #lossy=8026, %percentage=6.05489
#25: 2020-02-05T00:00:00Z to 2020-02-06T00:00:00Z: #trades=103573, #lossy=2940, %percentage=2.83858
#26: 2020-02-06T00:00:00Z to 2020-02-07T00:00:00Z: #trades=89134, #lossy=2390, %percentage=2.68136
#27: 2020-02-07T00:00:00Z to 2020-02-08T00:00:00Z: #trades=82793, #lossy=2786, %percentage=3.36502
#28: 2020-02-08T00:00:00Z to 2020-02-09T00:00:00Z: #trades=70972, #lossy=1558, %percentage=2.19523
#29: 2020-02-09T00:00:00Z to 2020-02-10T00:00:00Z: #trades=70982, #lossy=1620, %percentage=2.28227
#30: 2020-02-10T00:00:00Z to 2020-02-11T00:00:00Z: #trades=91865, #lossy=2489, %percentage=2.70941
#31: 2020-02-11T00:00:00Z to 2020-02-12T00:00:00Z: #trades=87377, #lossy=3913, %percentage=4.4783
#32: 2020-02-12T00:00:00Z to 2020-02-13T00:00:00Z: #trades=103394, #lossy=2657, %percentage=2.56978
#33: 2020-02-13T00:00:00Z to 2020-02-14T00:00:00Z: #trades=99441, #lossy=7210, %percentage=7.25053
#34: 2020-02-14T00:00:00Z to 2020-02-15T00:00:00Z: #trades=95478, #lossy=4840, %percentage=5.06923
#35: 2020-02-15T00:00:00Z to 2020-02-16T00:00:00Z: #trades=87590, #lossy=3321, %percentage=3.79153
#36: 2020-02-16T00:00:00Z to 2020-02-17T00:00:00Z: #trades=72734, #lossy=1901, %percentage=2.61363
#37: 2020-02-17T00:00:00Z to 2020-02-18T00:00:00Z: #trades=93525, #lossy=2968, %percentage=3.17348
#38: 2020-02-18T00:00:00Z to 2020-02-19T00:00:00Z: #trades=100162, #lossy=4295, %percentage=4.28805
#39: 2020-02-19T00:00:00Z to 2020-02-20T00:00:00Z: #trades=94915, #lossy=4387, %percentage=4.62203
#40: 2020-02-20T00:00:00Z to 2020-02-21T00:00:00Z: #trades=94924, #lossy=1973, %percentage=2.0785
#41: 2020-02-21T00:00:00Z to 2020-02-22T00:00:00Z: #trades=89759, #lossy=1610, %percentage=1.79369
{noformat}

h2. Tools

h3. SQL command generator
{code}
import re

das_input = '''50HzT = 10YDE-VE-------2
AMP   = 10YDE-RWENET---I
APG   = 10YAT-APG------L
DK1   = 10YDK-1--------W
DK1A  = 10YDK-1-------AA
DK2   = 10YDK-2--------M
EE    = 10Y1001A1001A39I
ELES  = 10YSI-ELES-----O
FI    = 10YFI-1--------U
MAVIR = 10YHU-MAVIR----U
NO2   = 10YNO-2--------T
SE3   = 10Y1001A1001A46L
TTN   = 10YNL----------L'''

das_dict = dict([(x.split('=')[0].strip(), x.split('=')[1].strip()) for x in das_input.split('\n') if x])
print(das_dict)

ics_input = '''.put(""ic50HzTDK2"", 0.975)
.put(""icDK1ANO2"", 0.976)
.put(""icDK1ASE3"", 0.974)
.put(""icDK1DK2"", 0.985)
.put(""icDK1TTN"", 0.973)
.put(""icEEFI"", 0.949)
.put(""icFISE3"", 0.976)
.put(""icNO2TTN"", 0.968)'''

ics_short = [re.match(r'.*""([^""]*)"".*', x).group(1)[2:] for x in ics_input.split('\n') if x]
print(ics_short)

ics = list()
for ic in ics_short:
    da2 = None
    for i in range(2, 6):
        da2 = ic[-i:]
        if da2 in das_dict:
            break
    da1 = ic[:len(ic) - len(da2)]
    ics.append((da1, da2))

print(ics)

for ic in ics:
    print(""(tf.tso_area_eic_buy = '%s' AND tf.tso_area_eic_sell = '%s') OR"" % (das_dict[ic[0]], das_dict[ic[1]]))
    print(""(tf.tso_area_eic_buy = '%s' AND tf.tso_area_eic_sell = '%s') OR"" % (das_dict[ic[1]], das_dict[ic[0]]))
{code}

h3. SQL commands

h4. Number of trades
{code}
SELECT COUNT (DISTINCT t.trade_id) FROM cx_111_trade_history t
WHERE t.match_time BETWEEN '2020-01-12' AND '2020-02-22';
{code}

h4. Number of lossy trades
{code}
SELECT COUNT (DISTINCT t.trade_id) FROM cx_111_trade_history t JOIN cx_673_trade_flow_history tf ON t.trade_id = tf.trade_id
WHERE t.match_time BETWEEN '2020-01-12' AND '2020-02-22'
AND (
  (tf.tso_area_eic_buy = '10YDE-VE-------2' AND tf.tso_area_eic_sell = '10YDK-2--------M') OR
  (tf.tso_area_eic_buy = '10YDK-2--------M' AND tf.tso_area_eic_sell = '10YDE-VE-------2') OR
  (tf.tso_area_eic_buy = '10YDK-1-------AA' AND tf.tso_area_eic_sell = '10YNO-2--------T') OR
  (tf.tso_area_eic_buy = '10YNO-2--------T' AND tf.tso_area_eic_sell = '10YDK-1-------AA') OR
  (tf.tso_area_eic_buy = '10YDK-1-------AA' AND tf.tso_area_eic_sell = '10Y1001A1001A46L') OR
  (tf.tso_area_eic_buy = '10Y1001A1001A46L' AND tf.tso_area_eic_sell = '10YDK-1-------AA') OR
  (tf.tso_area_eic_buy = '10YDK-1--------W' AND tf.tso_area_eic_sell = '10YDK-2--------M') OR
  (tf.tso_area_eic_buy = '10YDK-2--------M' AND tf.tso_area_eic_sell = '10YDK-1--------W') OR
  (tf.tso_area_eic_buy = '10YDK-1--------W' AND tf.tso_area_eic_sell = '10YNL----------L') OR
  (tf.tso_area_eic_buy = '10YNL----------L' AND tf.tso_area_eic_sell = '10YDK-1--------W') OR
  (tf.tso_area_eic_buy = '10Y1001A1001A39I' AND tf.tso_area_eic_sell = '10YFI-1--------U') OR
  (tf.tso_area_eic_buy = '10YFI-1--------U' AND tf.tso_area_eic_sell = '10Y1001A1001A39I') OR
  (tf.tso_area_eic_buy = '10YFI-1--------U' AND tf.tso_area_eic_sell = '10Y1001A1001A46L') OR
  (tf.tso_area_eic_buy = '10Y1001A1001A46L' AND tf.tso_area_eic_sell = '10YFI-1--------U') OR
  (tf.tso_area_eic_buy = '10YNO-2--------T' AND tf.tso_area_eic_sell = '10YNL----------L') OR
  (tf.tso_area_eic_buy = '10YNL----------L' AND tf.tso_area_eic_sell = '10YNO-2--------T')
);
{code}

h4. Lot size
{code}
SELECT min(lot_size),max(lot_size),avg(lot_size) FROM cx_202_product_history;
{code}

h4. Total volume
{code}
SELECT sum(th.match_quantity) FROM (SELECT DISTINCT trade_id, match_quantity FROM cx_111_trade_history WHERE match_time BETWEEN '2020-01-12' AND '2020-02-22') AS th;
{code}

h3. Bash script
{code}
function execsql {
    psql -U m7 --dbname cor -c ""$1"" | egrep ""\s+[0-9]+"" | tr -d ""[:space:]""
}

function count_trades {
    execsql ""SELECT COUNT (DISTINCT t.trade_id) FROM cx_111_trade_history t WHERE t.match_time BETWEEN '$1' AND '$2';""
}

function count_lossy_trades {
    execsql ""SELECT COUNT (DISTINCT t.trade_id) FROM cx_111_trade_history t JOIN cx_673_trade_flow_history tf ON t.trade_id = tf.trade_id WHERE t.match_time BETWEEN '$1' AND '$2' AND ((tf.tso_area_eic_buy = '10YDE-VE-------2' AND tf.tso_area_eic_sell = '10YDK-2--------M') OR (tf.tso_area_eic_buy = '10YDK-2--------M' AND tf.tso_area_eic_sell = '10YDE-VE-------2') OR (tf.tso_area_eic_buy = '10YDK-1-------AA' AND tf.tso_area_eic_sell = '10YNO-2--------T') OR (tf.tso_area_eic_buy = '10YNO-2--------T' AND tf.tso_area_eic_sell = '10YDK-1-------AA') OR (tf.tso_area_eic_buy = '10YDK-1-------AA' AND tf.tso_area_eic_sell = '10Y1001A1001A46L') OR (tf.tso_area_eic_buy = '10Y1001A1001A46L' AND tf.tso_area_eic_sell = '10YDK-1-------AA') OR (tf.tso_area_eic_buy = '10YDK-1--------W' AND tf.tso_area_eic_sell = '10YDK-2--------M') OR (tf.tso_area_eic_buy = '10YDK-2--------M' AND tf.tso_area_eic_sell = '10YDK-1--------W') OR (tf.tso_area_eic_buy = '10YDK-1--------W' AND tf.tso_area_eic_sell = '10YNL----------L') OR (tf.tso_area_eic_buy = '10YNL----------L' AND tf.tso_area_eic_sell = '10YDK-1--------W') OR (tf.tso_area_eic_buy = '10Y1001A1001A39I' AND tf.tso_area_eic_sell = '10YFI-1--------U') OR (tf.tso_area_eic_buy = '10YFI-1--------U' AND tf.tso_area_eic_sell = '10Y1001A1001A39I') OR (tf.tso_area_eic_buy = '10YFI-1--------U' AND tf.tso_area_eic_sell = '10Y1001A1001A46L') OR (tf.tso_area_eic_buy = '10Y1001A1001A46L' AND tf.tso_area_eic_sell = '10YFI-1--------U') OR (tf.tso_area_eic_buy = '10YNO-2--------T' AND tf.tso_area_eic_sell = '10YNL----------L') OR (tf.tso_area_eic_buy = '10YNL----------L' AND tf.tso_area_eic_sell = '10YNO-2--------T'));""
}

if [ -n ""$3"" ]; then
  COUNT=$3
else
  COUNT=1
fi

START_DATE=`date -d ""$1"" --utc +%FT%TZ`

for (( i=1; i<=${COUNT}; i++ ))
do
    END_DATE=`date -d ""${START_DATE}+$2"" --utc +%FT%TZ`
    TRADES=`count_trades ""$START_DATE"" ""$END_DATE""`
    LOSSY_TRADES=`count_lossy_trades ""$START_DATE"" ""$END_DATE""`
    PERCENTAGE=`awk ""BEGIN {print 100*$LOSSY_TRADES/$TRADES}""`
    echo ""#$i: ${START_DATE} to ${END_DATE}: #trades=${TRADES}, #lossy=${LOSSY_TRADES}, %percentage=${PERCENTAGE}""
    START_DATE=${END_DATE}
done
{code}","11/May/20 16:56;lt112;h1. Actual rounding difference

h2. Results
* 9840.441197224787
* in comparison: traded quantity 11 276 457 300 in 41 days
* => ~ 0.0000873%

h3. Per day example
* {{quantity (rounded - unrounded)}}
{noformat}
2020-02-01: -1467
2020-02-02: -1076
2020-02-03: 237
2020-02-04: -1890
2020-02-05: 1432
2020-02-06: -744
2020-02-07: 176
2020-02-08: 285
2020-02-09: -639
2020-02-10: 697
{noformat}

h2. Tools

h3. Lossy trade flows view
{code}
CREATE VIEW lossy_trade_flows AS
SELECT DISTINCT tf.trade_flow_id, tf.delivery_startdate, tf.delivery_enddate, tf.quantity, tf.tso_area_eic_sell, tf.tso_area_eic_buy, t.trade_id, t.match_time FROM cx_111_trade_history t JOIN cx_673_trade_flow_history tf ON t.trade_id = tf.trade_id
WHERE
/*t.match_time BETWEEN '2020-02-01 00:00:00' AND '2020-02-02 00:00:00' AND*/
tf.revtype=2 AND (
  (tf.tso_area_eic_buy = '10YDE-VE-------2' AND tf.tso_area_eic_sell = '10YDK-2--------M') OR
  (tf.tso_area_eic_buy = '10YDK-2--------M' AND tf.tso_area_eic_sell = '10YDE-VE-------2') OR
  (tf.tso_area_eic_buy = '10YDK-1-------AA' AND tf.tso_area_eic_sell = '10YNO-2--------T') OR
  (tf.tso_area_eic_buy = '10YNO-2--------T' AND tf.tso_area_eic_sell = '10YDK-1-------AA') OR
  (tf.tso_area_eic_buy = '10YDK-1-------AA' AND tf.tso_area_eic_sell = '10Y1001A1001A46L') OR
  (tf.tso_area_eic_buy = '10Y1001A1001A46L' AND tf.tso_area_eic_sell = '10YDK-1-------AA') OR
  (tf.tso_area_eic_buy = '10YDK-1--------W' AND tf.tso_area_eic_sell = '10YDK-2--------M') OR
  (tf.tso_area_eic_buy = '10YDK-2--------M' AND tf.tso_area_eic_sell = '10YDK-1--------W') OR
  (tf.tso_area_eic_buy = '10YDK-1--------W' AND tf.tso_area_eic_sell = '10YNL----------L') OR
  (tf.tso_area_eic_buy = '10YNL----------L' AND tf.tso_area_eic_sell = '10YDK-1--------W') OR
  (tf.tso_area_eic_buy = '10Y1001A1001A39I' AND tf.tso_area_eic_sell = '10YFI-1--------U') OR
  (tf.tso_area_eic_buy = '10YFI-1--------U' AND tf.tso_area_eic_sell = '10Y1001A1001A39I') OR
  (tf.tso_area_eic_buy = '10YFI-1--------U' AND tf.tso_area_eic_sell = '10Y1001A1001A46L') OR
  (tf.tso_area_eic_buy = '10Y1001A1001A46L' AND tf.tso_area_eic_sell = '10YFI-1--------U') OR
  (tf.tso_area_eic_buy = '10YNO-2--------T' AND tf.tso_area_eic_sell = '10YNL----------L') OR
  (tf.tso_area_eic_buy = '10YNL----------L' AND tf.tso_area_eic_sell = '10YNO-2--------T')
) order by t.trade_id;
{code}

h3. Export lossy trade flows
{code}
SELECT * FROM lossy_trade_flows;
{code}

h3. Simulate lossy calculations
{code}
import datetime as dt


def round_half_up(number, base):
    scaled_down = number / base
    rounded = int(scaled_down + 0.5) if scaled_down > 0 else int(scaled_down - 0.5)
    return rounded * base


def rounded_recv(sent_flow, recv_flow, shift, loss_coefficient, resolution):
    if loss_coefficient >= 1:
        return round_half_up(- sent_flow - (-recv_flow - shift) * loss_coefficient, resolution)
    else:
        return round_half_up(loss_coefficient * (sent_flow + shift) - recv_flow, resolution)


def rounded_sent(sent_flow, recv_flow, shift, loss_coefficient, resolution):
    if loss_coefficient >= 1:
        return round_half_up(- recv_flow - (-sent_flow - shift) / loss_coefficient, resolution)
    else:
        return round_half_up((recv_flow + shift) / loss_coefficient - sent_flow, resolution)


def fix_zero(number):
    return 0 if -10E-3 < number < 10E-3 else number


class InterConnector:
    def __init__(self, capacity, resolution, loss_coefficient):
        self.capacity = capacity
        self.resolution = resolution
        self.loss_coefficient = loss_coefficient
        self.sent_flow = 0
        self.recv_flow = 0
        self.rounded_sent_flow = 0
        self.rounded_recv_flow = 0
        self.hybrid_sent_flow = 0
        self.hybrid_recv_flow = 0

    def send(self, flow, flow_rounded=None):
        flow_rounded = flow_rounded if flow_rounded else flow
        lc = self.get_loss_coefficient(flow)
        if lc > 1.0:
            sf = self.sent_flow
            rsf = self.rounded_sent_flow
            self.sent_flow = fix_zero(self.sent_flow + flow * lc)
            self.recv_flow = fix_zero(self.recv_flow + flow)
            self.rounded_sent_flow = fix_zero(self.rounded_sent_flow + rounded_recv(self.rounded_sent_flow,
                                                                                    self.rounded_recv_flow,
                                                                                    flow_rounded, lc,
                                                                                    self.resolution))
            self.rounded_recv_flow = fix_zero(self.rounded_recv_flow + flow_rounded)
            return (self.sent_flow - sf), (self.rounded_sent_flow - rsf)
        else:
            rf = self.recv_flow
            rrf = self.rounded_recv_flow
            self.sent_flow = fix_zero(self.sent_flow + flow)
            self.recv_flow = fix_zero(self.recv_flow + flow * lc)
            self.rounded_recv_flow = fix_zero(self.rounded_recv_flow + rounded_recv(self.rounded_sent_flow,
                                                                                    self.rounded_recv_flow,
                                                                                    flow_rounded, lc,
                                                                                    self.resolution))
            self.rounded_sent_flow = fix_zero(self.rounded_sent_flow + flow_rounded)
            return (self.recv_flow - rf), (self.rounded_recv_flow - rrf)

    # def send(self, flow, flow_rounded):
    #     lc = self.get_loss_coefficient()
    #     if lc > 0:
    #         pass
    #     else:
    #         pass

    def get_loss_coefficient(self, flow):
        return self.loss_coefficient if self.sent_flow * flow >= 0 else 1.0 / self.loss_coefficient
        # return self.loss_coefficient if self.sent_flow >= 0 else 1.0 / self.loss_coefficient

    def __str__(self):
        return 'InterConnector(sent=%f, recv=%f, rounded_sent=%d, rounded_recv=%d)' % (
            self.sent_flow, self.recv_flow, self.rounded_sent_flow, self.rounded_recv_flow)


def create_inter_connectors():
    d = dict()
    d[('10YDE-VE-------2', '10YDK-2--------M')] = InterConnector(1000000, 100, 0.975000)
    d[('10YDK-1-------AA', '10YNO-2--------T')] = InterConnector(1000000, 100, 0.976000)
    d[('10YDK-1-------AA', '10Y1001A1001A46L')] = InterConnector(1000000, 100, 0.974000)
    d[('10YDK-1--------W', '10YDK-2--------M')] = InterConnector(1000000, 100, 0.985000)
    d[('10YDK-1--------W', '10YNL----------L')] = InterConnector(1000000, 100, 0.973000)
    d[('10Y1001A1001A39I', '10YFI-1--------U')] = InterConnector(1000000, 100, 0.949000)
    d[('10YFI-1--------U', '10Y1001A1001A46L')] = InterConnector(1000000, 100, 0.976000)
    d[('10YNO-2--------T', '10YNL----------L')] = InterConnector(1000000, 100, 0.968000)
    return d


class TradeFlow:
    def __init__(self, id, trade_id, quantity, start_time, end_time, eic_sell, eic_buy, match_time):
        self.id = id
        self.trade_id = trade_id
        self.quantity = quantity
        self.start_time = start_time
        self.end_time = end_time
        self.eic_sell = eic_sell
        self.eic_buy = eic_buy
        self.match_time = match_time

    def __str__(self):
        return ""id=%d, trade_id=%d, quantity=%d, start_time=%s, end_time=%s, eic_sell=%s, eic_buy=%s, match_time=%s"" % (
            self.id, self.trade_id, self.quantity, self.start_time, self.end_time, self.eic_sell, self.eic_buy,
            self.match_time
        )


class SplitLine:
    def __init__(self, line):
        self.split = line.split('|')

    def __getitem__(self, item):
        return self.split[item].strip()

    def __len__(self):
        return len(self.split)

    def to_trade_flow(self):
        return TradeFlow(
            id=int(self[0]),
            start_time=self.to_time(self[1]),
            end_time=self.to_time(self[2]),
            quantity=int(self[3]),
            eic_sell=self[4],
            eic_buy=self[5],
            trade_id=int(self[6]),
            match_time=self.to_time(self[7][:19])
        )

    def to_time(self, time_as_string):
        return dt.datetime.strptime(time_as_string, '%Y-%m-%d %H:%M:%S')


def load_trade_flows(file_path):
    with open(file_path, 'r') as file:
        count = 0
        keys = None
        trade_flows = list()
        for line in file:
            if count == 0:
                keys = [x.strip() for x in line.split('|')]
            elif count == 1:
                pass
            elif 2 <= count:
                split = SplitLine(line)
                if len(split) == len(keys):
                    trade_flows.append(split.to_trade_flow())
            else:
                break
            count = count + 1
        return trade_flows


def diff(difference, rounded, unrounded):
    return difference + ((rounded - unrounded) if rounded > 0 else (unrounded - rounded))


def main():
    trade_flows = load_trade_flows('trade_flows.txt')
    # inter_connectors = create_inter_connectors()
    # print(inter_connectors)
    # print(trade_flows)

    trade_flows_by_time = dict()
    for tf in trade_flows:
        time = (tf.start_time, tf.end_time)
        if time not in trade_flows_by_time:
            trade_flows_by_time[time] = list()
        trade_flows_by_time[time].append(tf)

    # print(trade_flows_by_time)

    difference = 0
    differences_by_time = dict()
    for time, tf_list in trade_flows_by_time.items():
        inter_connectors = create_inter_connectors()  # init new per delivery interval
        time_difference = 0
        for tf in tf_list:
            eic_pair = (tf.eic_sell, tf.eic_buy)
            if eic_pair in inter_connectors:
                ic = inter_connectors[eic_pair]
                q = tf.quantity
            else:
                ic = inter_connectors[(tf.eic_buy, tf.eic_sell)]
                q = - tf.quantity
            qr, qrr = ic.send(q)
            difference = diff(difference, qrr, qr)
            time_difference = diff(time_difference, qrr, qr)
        differences_by_time[time] = time_difference

    for time, d in sorted(differences_by_time.items()):
        print(""quantity (rounded - unrounded) = %d"" % d)
    print(difference)
    # for trade_flow in trade_flows:
    #     ic = inter_connectors[(trade_flow.eic_sell, trade_flow.eic_buy)]
    # for tf in trade_flows:
    #     print(tf)


if __name__ == '__main__':
    main()
{code}","12/May/20 16:07;lt112;h1. Actual comment for customers

Dear David,
regarding the *impact in terms of maximum rounding difference* we have used data from production and cross-referenced with planned dataset containing information about which inter-connectors should have non-zero loss factor in the future. The results are below.

_Note: lossy trades = trades going through an inter-connector with non-zero loss factor_
* {{average lot size = 100}}
* {{number of trades = 3 683 538}}
* {{number of lossy trades = 121 021 => 3.3%}}
* {{maximum rounding difference = 121 021 * 0.5 * 100 = 6 051 050 in 41 days => ~ 147 587 per day}}
* in comparison: 
** {{traded quantity = 11 276 457 300 in 41 days}}
** {{=> ~ 275 035 544 per day}}
** {{=> ~ 0.0536% of total volume per day}}

h3. Detailed trade amounts per day
{noformat}
#1: 2020-01-12T00:00:00Z to 2020-01-13T00:00:00Z: #trades=3957, #lossy=269, %percentage=6.79808
#2: 2020-01-13T00:00:00Z to 2020-01-14T00:00:00Z: #trades=92392, #lossy=3264, %percentage=3.53277
#3: 2020-01-14T00:00:00Z to 2020-01-15T00:00:00Z: #trades=88359, #lossy=3537, %percentage=4.00299
#4: 2020-01-15T00:00:00Z to 2020-01-16T00:00:00Z: #trades=105656, #lossy=3837, %percentage=3.6316
#5: 2020-01-16T00:00:00Z to 2020-01-17T00:00:00Z: #trades=96408, #lossy=2598, %percentage=2.6948
#6: 2020-01-17T00:00:00Z to 2020-01-18T00:00:00Z: #trades=99461, #lossy=3701, %percentage=3.72106
#7: 2020-01-18T00:00:00Z to 2020-01-19T00:00:00Z: #trades=75789, #lossy=1986, %percentage=2.62043
#8: 2020-01-19T00:00:00Z to 2020-01-20T00:00:00Z: #trades=64947, #lossy=1602, %percentage=2.46663
#9: 2020-01-20T00:00:00Z to 2020-01-21T00:00:00Z: #trades=93436, #lossy=1939, %percentage=2.07522
#10: 2020-01-21T00:00:00Z to 2020-01-22T00:00:00Z: #trades=89752, #lossy=2236, %percentage=2.49131
#11: 2020-01-22T00:00:00Z to 2020-01-23T00:00:00Z: #trades=107523, #lossy=2399, %percentage=2.23115
#12: 2020-01-23T00:00:00Z to 2020-01-24T00:00:00Z: #trades=98266, #lossy=1540, %percentage=1.56717
#13: 2020-01-24T00:00:00Z to 2020-01-25T00:00:00Z: #trades=91958, #lossy=2417, %percentage=2.62837
#14: 2020-01-25T00:00:00Z to 2020-01-26T00:00:00Z: #trades=74737, #lossy=2425, %percentage=3.24471
#15: 2020-01-26T00:00:00Z to 2020-01-27T00:00:00Z: #trades=71497, #lossy=1590, %percentage=2.22387
#16: 2020-01-27T00:00:00Z to 2020-01-28T00:00:00Z: #trades=98094, #lossy=2129, %percentage=2.17037
#17: 2020-01-28T00:00:00Z to 2020-01-29T00:00:00Z: #trades=109231, #lossy=3425, %percentage=3.13556
#18: 2020-01-29T00:00:00Z to 2020-01-30T00:00:00Z: #trades=93697, #lossy=1727, %percentage=1.84318
#19: 2020-01-30T00:00:00Z to 2020-01-31T00:00:00Z: #trades=93102, #lossy=2549, %percentage=2.73786
#20: 2020-01-31T00:00:00Z to 2020-02-01T00:00:00Z: #trades=95649, #lossy=2918, %percentage=3.05074
#21: 2020-02-01T00:00:00Z to 2020-02-02T00:00:00Z: #trades=78447, #lossy=2881, %percentage=3.67254
#22: 2020-02-02T00:00:00Z to 2020-02-03T00:00:00Z: #trades=91932, #lossy=3817, %percentage=4.15198
#23: 2020-02-03T00:00:00Z to 2020-02-04T00:00:00Z: #trades=108076, #lossy=5351, %percentage=4.95115
#24: 2020-02-04T00:00:00Z to 2020-02-05T00:00:00Z: #trades=132554, #lossy=8026, %percentage=6.05489
#25: 2020-02-05T00:00:00Z to 2020-02-06T00:00:00Z: #trades=103573, #lossy=2940, %percentage=2.83858
#26: 2020-02-06T00:00:00Z to 2020-02-07T00:00:00Z: #trades=89134, #lossy=2390, %percentage=2.68136
#27: 2020-02-07T00:00:00Z to 2020-02-08T00:00:00Z: #trades=82793, #lossy=2786, %percentage=3.36502
#28: 2020-02-08T00:00:00Z to 2020-02-09T00:00:00Z: #trades=70972, #lossy=1558, %percentage=2.19523
#29: 2020-02-09T00:00:00Z to 2020-02-10T00:00:00Z: #trades=70982, #lossy=1620, %percentage=2.28227
#30: 2020-02-10T00:00:00Z to 2020-02-11T00:00:00Z: #trades=91865, #lossy=2489, %percentage=2.70941
#31: 2020-02-11T00:00:00Z to 2020-02-12T00:00:00Z: #trades=87377, #lossy=3913, %percentage=4.4783
#32: 2020-02-12T00:00:00Z to 2020-02-13T00:00:00Z: #trades=103394, #lossy=2657, %percentage=2.56978
#33: 2020-02-13T00:00:00Z to 2020-02-14T00:00:00Z: #trades=99441, #lossy=7210, %percentage=7.25053
#34: 2020-02-14T00:00:00Z to 2020-02-15T00:00:00Z: #trades=95478, #lossy=4840, %percentage=5.06923
#35: 2020-02-15T00:00:00Z to 2020-02-16T00:00:00Z: #trades=87590, #lossy=3321, %percentage=3.79153
#36: 2020-02-16T00:00:00Z to 2020-02-17T00:00:00Z: #trades=72734, #lossy=1901, %percentage=2.61363
#37: 2020-02-17T00:00:00Z to 2020-02-18T00:00:00Z: #trades=93525, #lossy=2968, %percentage=3.17348
#38: 2020-02-18T00:00:00Z to 2020-02-19T00:00:00Z: #trades=100162, #lossy=4295, %percentage=4.28805
#39: 2020-02-19T00:00:00Z to 2020-02-20T00:00:00Z: #trades=94915, #lossy=4387, %percentage=4.62203
#40: 2020-02-20T00:00:00Z to 2020-02-21T00:00:00Z: #trades=94924, #lossy=1973, %percentage=2.0785
#41: 2020-02-21T00:00:00Z to 2020-02-22T00:00:00Z: #trades=89759, #lossy=1610, %percentage=1.79369
{noformat}

h2. Actual rounding difference
* for more information we have also analyzed actual rounding difference that would occur (difference of rounded and unrounded values simulated on preexisting trade flows)

h3. Results
* {{rounding difference = 9 840.441}}
* in comparison:
** {{traded quantity 11 276 457 300 in 41 days}}
** => ~ 0.0000873%
** {{maximum rounding difference 6 051 050 in 41 days}}
** => ~ 0.16%

h3. Per day snippet
* {{quantity (rounded - unrounded)}}
{noformat}
2020-02-01: -1467
2020-02-02: -1076
2020-02-03: 237
2020-02-04: -1890
2020-02-05: 1432
2020-02-06: -744
2020-02-07: 176
2020-02-08: 285
2020-02-09: -639
2020-02-10: 697
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses - rounding - analyze possible rounding bias,XP-2947,95058,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ll664,lt112,lt112,28/Apr/20 15:54,13/Aug/20 19:43,22/Feb/21 13:21,12/May/20 10:46,,,Losses ASR,,,,,,,Losses,,,"We assume that the rounding deviation will be non-biased (meaning long-term it will be equally rounded down and up). Back this up with data and/or thorough analysis.

It is possible to create a rounding table:
* for each IC get NTC, LC (Loss Coefficient), LT (Lot Size) and do:
** for each N >= 0, N * LT <= NTC do: Q = N * LT * LC, R = round(Q)
** R should oscillate around 0 up and down, provide plot if helpful",,ek176,ll664,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/May/20 16:04;ll664;Rounding-bias.pdf;https://jira.deutsche-boerse.com/secure/attachment/83764/Rounding-bias.pdf",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,24624000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1914,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0ardo:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 8,,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/May/20 11:29;ll664;Analysis posted here: https://github.deutsche-boerse.de/dev/xbid.routing/wiki/Rounding-bias

","12/May/20 16:04;ll664;Exported to PDF, ready to send to customers:  [^Rounding-bias.pdf] ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
HLS100A Analyze VDA -> PDA translation,XP-2946,95052,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,28/Apr/20 12:55,04/Aug/20 16:11,22/Feb/21 13:21,07/May/20 10:29,,,3.0.1 OCC,,,,,,,,,,"*HLS100A*
{code}2.7.3 Allocation Files
 A capacity allocation between a VA and a non-virtual area which is not its PDA would result in the generation and sending of a new version of the allocation files if configured to do so. Within these files the VA EIC and name would be substituted with its PDA's. 
 The respective files which are generated and sent to the responsible TSOs may vary according to the border or interconnector configuration. For more information, please see document DFS800 Capacity Management TSO Interface.{code}

{code}From the code:
com.deutscheboerse.energy.cmminteg.filetype.cim
ATC
IAR
NSF
RCA
RID
TAR
com.deutscheboerse.energy.cmminteg.filetype.cim.occ
OCC
com.deutscheboerse.energy.cmminteg.filetype.ecan
BGACSV
BGAXml
RED
RID
com.deutscheboerse.energy.cmminteg.filetype.report
AllocatedCapacityReport{code}",,ei349,od044,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,25142400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2609,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0aqnc:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/May/20 13:46;ei349;[~od044] can you please have a look if it's still valid and resolve the issue if possible? ","06/May/20 16:31;od044;He [~radeale], please have a look at the conclusion below whether this is enough or do you need more input.

All file types mentioned in the description use VDA -> PDA translation in case a file is for IC between non-VDA and VDA delivery area.
The translation is used in the following way:
- file name - compose with PDA name  
- document mrid - compose with original VDA name 
- time-series mrid - compose with PDA EIC 

e.g.
IC: DKVA1(VDA with parent ENDK) - NO2DA
File name: 20200430_NSF_*ENDK*-NO2DA_001.xml
Document mRID: NSF_*DKVA1*-NO2DA_10XDE-RWENET---W_20200430_ALL = 8d8ae05b988e92858e586a1a3646ba50
Timeseries mRID: 20200430_NSF_*10YDK-1--------W*_10YNO-1--------2_ALL = d110d85e93e8df2480cd07701ecc8e95

In the case of IC VDA - PDA nothing is translated
e.g.
IC: DKVA1(VDA with parent ENDK) - ENDK
File name: 20200430_RCA_*DKVA1*-ENDK_001.xml 
Document mRID: RCA_*DKVA1*-ENDK_10XDE-RWENET---W_20200430 = a1df23c5e636b2dbae28f6a7291547eb
Timeseries mRID: 20200430_RCA_*11VID-CAPACITY-0*_10YDK-1--------W_IMPL-TRADING---L = a3846652869d11597f09358233432f7f","07/May/20 10:29;radeale;Thanks Duc. So it seems it works as described with the special case being the OCC files, but their behavior will be detailed in the upcoming documentation.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Initial analysis of corellation between xbid losses performance and HW performance,XP-2942,94985,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,lt112,lt112,27/Apr/20 09:59,15/Oct/20 12:11,22/Feb/21 13:21,04/Jun/20 14:16,,,3.1.0,,,,,,,,,,"# compare performance results between old hardware and a new one (available on host {{xbperfcorx.deutsche-boerse.de}})
# dive in optimization
{noformat}
One important thing about the new test server. The hardware comes with so-called ""Workload Profiles"", i.e. low level CPU, Memory and other IO settings that can affect system behaviour under heavy load.
8:43
I highly suggest to study this short document (in fact, pages 4 and 5 would be enough):  https://support.hpe.com/hpesc/public/docDisplay?docId=a00016408en_us (edited) 
8:44
After that you can decide which workload profile we should configure in the server system settings (needs a reboot) so that maximum performance can be achieved.
{noformat}
# compare results with SLA",,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/May/20 14:22;lt112;Performance-test.xlsx;https://jira.deutsche-boerse.com/secure/attachment/84226/Performance-test.xlsx","04/Jun/20 14:06;lt112;report.xlsx;https://jira.deutsche-boerse.com/secure/attachment/84464/report.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,22723200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1819,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0ap2p:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 7,HOT Sprint 8 (S),HOT Sprint 9,HOT Sprint 10 (S),,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2942,XP-2942-losses-perf,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/May/20 12:16;lt112;There is an issue with running tests, as it fails in CMM module. 
The idea why: ATC in CMM does not match ATC in routing -> due to AON restriction the allocated quantity gets zeroed and then all the zeroes are spread over all IC (due to another AON restriction) and then all the zeros are filtered out, resulting in no OUTPUT

Exception to be filled in
","13/May/20 17:52;lt112;{noformat}
Failed implicit allocation, allocationService INPUT: [CAI{qty=11000, ct=DI{332,13.05.2020 19:00,ELES-APG}, dir=FROM_2_TO_1, clientId=657, metadata=null, child=null}, CAI{qty=12000, ct=DI{1292,13.05.2020 19:00,MAVIR-APG}, dir=FROM_2_TO_1, clientId=658, metadata=null, child=null}, CAI{qty=393200, ct=DI{2924,13.05.2020 19:00,NO2-TTN}, dir=FROM_2_TO_1, clientId=659, metadata=null, child=null}, CAI{qty=406200, ct=DI{6668,13.05.2020 19:00,DK1A-NO2}, dir=FROM_2_TO_1, clientId=660, metadata=null, child=null}, CAI{qty=34100, ct=DI{5996,13.05.2020 19:00,50HzT-DK2}, dir=FROM_2_TO_1, clientId=661, metadata=null, child=null}, CAI{qty=23000, ct=DI{6860,13.05.2020 19:00,50HzT-AMP}, dir=FROM_1_TO_2, clientId=662, metadata=null, child=null}, CAI{qty=23000, ct=DI{7148,13.05.2020 19:00,AMP-APG}, dir=FROM_1_TO_2, clientId=663, metadata=null, child=null}, CAI{qty=382600, ct=DI{6380,13.05.2020 19:00,DK1-TTN}, dir=FROM_1_TO_2, clientId=664, metadata=null, child=null}, CAI{qty=416200, ct=DI{4460,13.05.2020 19:00,DK1A-DK1}, dir=FROM_1_TO_2, clientId=665, metadata=null, child=null}, CAI{qty=33600, ct=DI{4556,13.05.2020 19:00,DK1-DK2}, dir=FROM_1_TO_2, clientId=666, metadata=null, child=null}]
{noformat}

{noformat}
Handling error on event 'com.deutscheboerse.energy.m7.core.in.RequestEvent@5b061be6[error=<null>,input=Input:Message{receivedTime=1589380566896, rabbitReceivedTime=1589380566897, appId=DB-TestClient, userId=XBDBX001, applicationUserId=null, messageId=null, contentEncoding=null, contentType=x-m7/request; version=3, messageSource=TRADING_PMI, replyTo=amq.gen-KlAfnx6KCoHJXCErOPfErA, correlationId=[53, 49, 53, 57, 57], classId=null, contentClassId=null, keyClassId=null},request=com.deutscheboerse.energy.m7.core.in.req.OrderEntryRequest@1101864d]'
java.lang.IllegalStateException: allocateImplicit should never ever throw any Exception. This is a bug.
	at com.deutscheboerse.energy.m7.routing.AllocationResultService.allocate(AllocationResultService.java:40)
	at com.deutscheboerse.energy.m7.core.AuctionService.executeRoundOfAuction(AuctionService.java:308)
	at com.deutscheboerse.energy.m7.core.AuctionService.executeRoundOfAuction(AuctionService.java:254)
	at com.deutscheboerse.energy.m7.core.AuctionService.executeAuction(AuctionService.java:226)
	at com.deutscheboerse.energy.m7.core.AuctionService.handleDeliveryIntervalAuctionTrigger(AuctionService.java:148)
	at com.deutscheboerse.energy.m7.core.AuctionService.executeAuction(AuctionService.java:126)
	at com.deutscheboerse.energy.m7.core.RequestProcessor.process(RequestProcessor.java:37)
	at com.deutscheboerse.energy.m7.core.CoreService.doOnEvent(CoreService.java:89)
	at com.deutscheboerse.energy.m7.core.CoreService.doOnEvent(CoreService.java:32)
	at com.deutscheboerse.energy.m7.core.AbstractEventHandler.onEvent(AbstractEventHandler.java:72)
	at com.deutscheboerse.energy.m7.core.AbstractEventHandler.onEvent(AbstractEventHandler.java:29)
	at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:128)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: Allocations cannot be empty for non-empty allocation plan
	at com.deutscheboerse.energy.m7.routing.AllocationResultService.allocate(AllocationResultService.java:36)
	... 14 common frames omitted
{noformat}

{noformat}
Fatal error.
java.lang.IllegalStateException: allocateImplicit should never ever throw any Exception. This is a bug.
	at com.deutscheboerse.energy.m7.routing.AllocationResultService.allocate(AllocationResultService.java:40)
	at com.deutscheboerse.energy.m7.core.AuctionService.executeRoundOfAuction(AuctionService.java:308)
	at com.deutscheboerse.energy.m7.core.AuctionService.executeRoundOfAuction(AuctionService.java:254)
	at com.deutscheboerse.energy.m7.core.AuctionService.executeAuction(AuctionService.java:226)
	at com.deutscheboerse.energy.m7.core.AuctionService.handleDeliveryIntervalAuctionTrigger(AuctionService.java:148)
	at com.deutscheboerse.energy.m7.core.AuctionService.executeAuction(AuctionService.java:126)
	at com.deutscheboerse.energy.m7.core.RequestProcessor.process(RequestProcessor.java:37)
	at com.deutscheboerse.energy.m7.core.CoreService.doOnEvent(CoreService.java:89)
	at com.deutscheboerse.energy.m7.core.CoreService.doOnEvent(CoreService.java:32)
	at com.deutscheboerse.energy.m7.core.AbstractEventHandler.onEvent(AbstractEventHandler.java:72)
	at com.deutscheboerse.energy.m7.core.AbstractEventHandler.onEvent(AbstractEventHandler.java:29)
	at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:128)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: Allocations cannot be empty for non-empty allocation plan
	at com.deutscheboerse.energy.m7.routing.AllocationResultService.allocate(AllocationResultService.java:36)
	... 14 common frames omitted
{noformat}","18/May/20 10:16;lt112;Happens when the system is attempting to allocate a gainy cycle (among other things).
Still points to ATC inconsistency.
After auction.","27/May/20 08:40;lt112;Possibly caused by inconsistent processing of explicit allocations. Explicit allocations have been removed from the test-scenario and it started working.
However, it might also be caused by cycle, further investigation necessary.","04/Jun/20 14:16;lt112;Updated report:  [^report.xlsx] 

HW has been switched to a different profile (High Performance Compute)
The impact is not conclusive, no further investigation in this area necessary as the space for improvement appears to be insignificant at the moment (regarding workload profiles)

Further note: implemented script for generating the report above (aggregation of multiple executions)
https://github.deutsche-boerse.de/dev/xbid.utils-py/blob/develop/execution/aggregate_performance_reports.py
(a bit cumbersome, adjusting possible if necessary during next usage)",,,,,,,,,,,,,,,,,,,,,,,,,,,
Prepare User certificates into vault RUN2,XP-2938,94974,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,zi174,tm431,tm431,27/Apr/20 07:50,31/Aug/20 15:38,22/Feb/21 13:21,27/Apr/20 08:00,,,Agile Pilot,,,,,,,,,,"Please prepare User certificates for RUN2 according to attached excel.

 

it should be following pls double check

 
|XBEPEXA1|18.07.2020|XBEPEXA2|19.07.2020|

|SPMADM13|18.07.2020|SPMADM12|19.07.2020|



also create it for our users

DBAGREPO SOB 18.07.2020
DBAGSMOP SPM 19.07.2020


Deadline is tomorrow 28/4/2020 12:00",,tm431,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Apr/20 07:45;tm431;Failover XBID4876 XBID4877 users-certificates coverage_update_v2.xlsx;https://jira.deutsche-boerse.com/secure/attachment/83040/Failover+XBID4876+XBID4877+users-certificates+coverage_update_v2.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,26006400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0aq6w:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AMS sends warnings for deprecated certificates,XP-2931,94860,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,lt112,lt112,23/Apr/20 10:18,04/Aug/20 16:01,22/Feb/21 13:21,24/Apr/20 13:52,,,Agile Pilot,,,,,,,,,,"*GIANT ANTEATER* does not distinguish between new/old certificates in the vault, but it should send warnings only for the newest ones",,lt112,od044,qo794,tm431,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-5056,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,26006400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:400000000000000000300040000602000r",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 7,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Apr/20 12:50;lt112;Only the newest certificate is considered. Its expiration is not.
https://github.deutsche-boerse.de/dev/xbid.access-management/pull/57","27/Apr/20 11:53;od044;Test passed on docker 
- AMS sends a notification of certificate expiration only for the latest client certificate in the vault 
- smoke test on user email certificate - works correctly, this fix does not have an impact to it","27/Apr/20 12:13;tm431;OK. [~lt112]  can you prepare MR for this version to be deployed into SIMU? attach it here SERVICE-6183. Thankx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Split certificate expiration check into smaller jobs,XP-2918,94717,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,od044,qo794,qo794,20/Apr/20 17:25,06/Nov/20 10:42,22/Feb/21 13:21,25/Aug/20 11:41,,,3.1.1,,AMS,,,,,,,,"Currently all certificates are check within one job executed in com.deutscheboerse.energy.xbid.accessmanagement.certificate.CertificateExpirationService. If a vault is not reachable (or there another issue happens during that part of the job) the whole job fails, but some email notifications have already been sent (email certificates present in CMM/SOB/SPM database). Another job execution triggered that day processes the very same certificates again, therefore the app sends duplicate email notifications. This situation happened on simulation on 19.4. - a vault token expired and the job was failing, resulting in sending email certificates notifications every hour.

Also see comments in XP-3313 and change the vault health check.

h3. Solution
Split the job into smaller tasks executed separately to make the process more robust. It still may result in sending duplicate notifications, but this will mitigate the chance.",,jy268,od044,qo794,tm431,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3313,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,15638400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000xro:000d",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 16 (S),,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,acceptance,develop,master,master-acceptance,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Apr/20 19:56;jy268;IMHO, the best way would be to separate vault certs from db certs.","21/Apr/20 08:00;qo794;That's exactly what's been decided to do. It can be divided even into smaller jobs (separate jobs for different databases etc.). I haven't entered intentionally what and how exactly this jira should be sorted out, this task is a part of the scope of this jira.","21/Aug/20 12:27;jy268;[~od044] please proceed with smoke test","25/Aug/20 11:40;od044;Smoke test passed on docker (0b883832efbb60f25b9211530b2575d32e04f10a)
- all email notifications are sent (user email cert, user cert, user password expiration)
- triggered job by manual and cron as well 
",,,,,,,,,,,,,,,,,,,,,,,,,,,,
GA - exception thrown during locking,XP-2911,94662,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,od044,jy268,jy268,20/Apr/20 09:00,04/Aug/20 16:01,22/Feb/21 13:21,22/Apr/20 17:58,,,Agile Pilot,,GA,,,,,,,,"When locking mechanism is triggered following exception is thrown:

{code}
HHH000327: Error performing load command
org.hibernate.PessimisticLockException: could not extract ResultSet
	at org.hibernate.dialect.PostgreSQL81Dialect$4.convert(PostgreSQL81Dialect.java:457)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:67)
{code}",,jy268,od044,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,26352000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0aocg:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 7,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Apr/20 17:56;od044;Test passed on Docker with two AMS instances 
- AMS intances run via Intelj with VM options:
{code}
-Dapp.node-id=test1
-Dserver.port=8081
-Dapp.scheduler.password.cron=""0 */1 * * * *""
-Dapp.scheduler.certificate.cron=""0 */1 * * * *""

-Dapp.node-id=test2
-Dserver.port=8081
-Dapp.scheduler.password.cron=""0 */1 * * * *""
-Dapp.scheduler.certificate.cron=""0 */1 * * * *""
{code}
- an error does not occur after fix anymore 
- notification is sent ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support for VDA-VDA configuration,XP-2900,94598,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,ll664,radeale,radeale,16/Apr/20 13:44,04/Aug/20 16:22,22/Feb/21 13:21,22/Apr/20 08:57,,,3.2.x,,,,,,,Package1,,,"+Short story+
 Please investigate whether it is possible to implement VDA-VDA configuration and what changes would have to be done to achieve it in the following areas:
 - CMM
 - SOB
 - SM

There is already a historic ticket XBID-3751 with the following structure:
 XP-59 Virtual areas configuration for Poland
 - XP-102 VDA-VDA Configuration - H2H Matrix impact
 - XP-103 VDA-VDA Configuration - SM impact

Please check whether the finding in these tickets are still valid.

+Long story+
 The customers (Polish TSO to be precise) would like to achieve a specific configuration enabling them to control NTC in a specific way described (in quite complicated way) in XBID-4936.

_Current configuration:_

!image-2020-04-16-13-42-39-673.png|width=364,height=367!

_Desired configuration:_

!image-2020-04-16-13-43-19-459.png|width=361,height=351!

(The parent of the VDA2 would be either 50HzT, CEPS or SEPS.)",,ll664,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4936,,,,,,,"16/Apr/20 13:42;radeale;image-2020-04-16-13-42-39-673.png;https://jira.deutsche-boerse.com/secure/attachment/82690/image-2020-04-16-13-42-39-673.png","16/Apr/20 13:43;radeale;image-2020-04-16-13-43-19-459.png;https://jira.deutsche-boerse.com/secure/attachment/82689/image-2020-04-16-13-43-19-459.png","17/Apr/20 15:21;radeale;image-2020-04-17-15-21-21-755.png;https://jira.deutsche-boerse.com/secure/attachment/82767/image-2020-04-17-15-21-21-755.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,26611200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2640,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0amaf:r",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 7 (S),,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Apr/20 11:51;ll664;Conceptually, the idea is feasible and can be implemented. We propose to allow a configuration of chain of VDAs that ultimately ends with DA as a parent:
{code:java}
VDA1 -> VDA2 -> ... VDAn -> DA
{code}
To each of those VDAs another DAs can be connected to make group constraints as on the examples above possible.

Things to watch for:
h4. Routing
 * the cost of route DA1 -> VDA1 -> VDA2 -> ... -> VDAn -> DA2 has to be that same as the cost of route without virtual areas (DA1 -> DA2).

h4. CMM
 * there are restrictions on on the configurations of the ICs in ""virtual"" setup at the moment - same contract resolution, qty limits etc. For the example above it would force all Inteconnectors to have same resolution. Verify if acceptable from business perspective.
 * Explicit participants should always see interoconnections between real areas.

h4. Shipping Module
 * as shipping module captures flows between real areas, the translation logic has to be adjusted for VDA-chain cases.

Overall, I cannot give estimate here, the issue should undergo proper team refinement process.","17/Apr/20 12:46;radeale;Dear David, MSD members,

currently we are on a good track with the VDA-VDA solution. It will be refined in a broader audience.

_Current working assumptions are:_
 - It will be possible to create the VDA2-VDA1-PDA chain where the VDA1 is parent of VDA2 (and also VDA3 and so on). For the purposes of explicit allocations, and more importantly the SM reporting, the PDA will be parent of both VDAs. Which means both VDAs are part of the Polish market area.
 - Explicit allocations are expected to be possible, in case a significant obstacle is uncovered during development or testing, it will be communicated with the MSD without undue delay.
 - As shipping module captures flows between real areas, the translation logic has to be adjusted for VDA-chain cases.

_Points to consider:_
 - The routing cost (cost coefficient) of PDA-VDA is currently 0.5 of a regular IC. If the VDA2-VDA1-PDA solution is created the cost of such ""1/3 ICs"" has to be lowered in the relation. The value is kept in the DB and would be changed by DBAG based on an agreement. Alternatively the field will be exposed to the parties as a new IC Reference Data parameter.
 - As there are currently enforced configuration parameters for DA-VDA-PDA setup, it means the same parameters would have to be enforced for the involved grid. But it seems it is already that case in the see the current setup.

More information to be provided at Monday.

!image-2020-04-17-15-21-21-755.png!

Best regards
 Alexandr","20/Apr/20 11:55;radeale;Internal assessment 2-3 sprints, *40*-60 SP.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deploy AMS in SIMU to new infrastructure,XP-2888,94472,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,yo218,tm431,tm431,14/Apr/20 10:45,31/Aug/20 15:38,22/Feb/21 13:21,20/Apr/20 12:45,,,Agile Pilot,,,,,,,,,,"Please deploy AMS to new infrastructure in SIMU to both Nodes.

make sure that everything is up and running, and that thera are logs in Kibana

[~jy268] please add more details, and then assign to [~yo218] 

*TODO:*
# Stop current running AMS on shared VM
# Deploy AMS to xbsimuams1 and xbsimuams2 using Ansible
# Verify that monitoring works fine
# Verify that Kibana logs are present
# Verify logs are copied to ebsm server


After this is done we will run failovers",,jy268,od044,qo794,tm431,yo218,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,26611200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09n2w:s3u",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 6 (S),HOT Sprint 7,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Apr/20 10:54;jy268;Hi [~yo218] ansible scripts are prepared, new nodes `xbsimuams1` and `xbsimuams2` should be used.

1. Stop current running AMS on shared VM
2. Deploy AMS to xbsimuams1 and xbsimuams2 using Ansible
3. Verify that monitoring works fine
4. Verify that Kibana logs are present","14/Apr/20 11:07;tm431;[~jy268] is it possible to prepare also following configuration

 

{color:#1d1c1d} Node1 and Node2 is configured to trigger the job for PWDs every hour starting at 8:00 PWD and CERT check at 9:00 each day, next attempt will be at 9:00 and 10:00 etc. Last run will be at 22:00 pwd and 23:00 CERT
{color}","14/Apr/20 11:49;jy268;Pull request prepared https://github.deutsche-boerse.de/dev/xbid.access-management/pull/55","14/Apr/20 14:00;od044;Hi [~yo218] Could you also set up password expiration for this user BSPADM01 to 25.04.2020. It is for testing purpose regarding ticket XP-2864","14/Apr/20 14:13;tm431;Deployment request is in SERVICE-6077","20/Apr/20 12:45;yo218;Firewall has been implemented, routing fixed, application is running on new hosts now",,,,,,,,,,,,,,,,,,,,,,,,,,
Application did not send a PCF files for all NTC in case NTC files were upload at once,XP-2879,94311,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,od044,od044,od044,07/Apr/20 15:50,13/Aug/20 19:41,22/Feb/21 13:21,15/Apr/20 18:02,,,3.1.0,,,,,,,,,,"The application did not send a PCF files for all NTC in case NTC files were upload at once

Step to reproduce:
1. Upload 3 NTC files for the same IC or Border (BOTH,1->2, 2->1) at once to sftp server

Error exception:
{code:java}
2018-02-15T19:06:19.599Z [mportExecutor-2][][] ERROR o.s.a.i.SimpleAsyncUncaughtExceptionHandler - Unexpected exception occurred invoking async method: public void com.deutscheboerse.energy.cmminteg.service.AsyncFileImporte
rImpl.importFile(com.deutscheboerse.energy.cmminteg.api.transport.ImportFileDescriptor)
java.lang.reflect.UndeclaredThrowableException: null
        at com.deutscheboerse.energy.cmminteg.capacitypreview.PreviewCapacityFileService$$EnhancerBySpringCGLIB$$d38817b4.schedulePreviewCapacityFile(<generated>)
        at com.deutscheboerse.energy.cmminteg.service.publish.ImportFilePostProcessor$SchedulePreview.perform(ImportFilePostProcessor.kt:170)
        at com.deutscheboerse.energy.cmminteg.service.publish.ImportFilePostProcessor.process(ImportFilePostProcessor.kt:84)
        at com.deutscheboerse.energy.cmminteg.service.AsyncFileImporterImpl.importFile(AsyncFileImporterImpl.java:98)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
        at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
        at com.deutscheboerse.energy.cmminteg.ctx.aop.RunAsSystemAspect.runAsSystem(RunAsSystemAspect.java:34)
        at sun.reflect.GeneratedMethodAccessor271.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
        at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
        at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
        at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115)
        at java.util.concurrent.FutureTask.run(FutureTask.java:266)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
        at java.lang.Thread.run(Thread.java:748)
Caused by: org.quartz.SchedulerException: Trigger's related Job's name cannot be null
        at org.quartz.impl.triggers.AbstractTrigger.validate(AbstractTrigger.java:763)
        at org.quartz.impl.triggers.SimpleTriggerImpl.validate(SimpleTriggerImpl.java:867)
        at org.quartz.core.QuartzScheduler.scheduleJob(QuartzScheduler.java:915)3:43at org.quartz.impl.StdScheduler.scheduleJob(StdScheduler.java:258)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
        at com.sun.proxy.$Proxy144.scheduleJob(Unknown Source)
        at com.deutscheboerse.energy.cmminteg.service.scheduler.OneShotJobScheduler.scheduleTrigger(OneShotJobScheduler.kt:59)
        at com.deutscheboerse.energy.cmminteg.service.scheduler.OneShotJobScheduler.scheduleJob(OneShotJobScheduler.kt:39)
        at com.deutscheboerse.energy.cmminteg.service.DistributionScheduler.schedule(DistributionScheduler.java:67)
        at com.deutscheboerse.energy.cmminteg.capacitypreview.PreviewCapacityFileService.schedulePreviewCapacityFile(PreviewCapacityFileService.kt:51)
        at com.deutscheboerse.energy.cmminteg.capacitypreview.PreviewCapacityFileService$$FastClassBySpringCGLIB$$db54e0d9.invoke(<generated>)
        at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:746)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
        at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
        at com.deutscheboerse.energy.cmminteg.capacitypreview.PreviewCapacityFileService$$EnhancerBySpringCGLIB$$d38817b4.schedulePreviewCapacityFile(<generated>)
        at com.deutscheboerse.energy.cmminteg.service.publish.ImportFilePostProcessor$SchedulePreview.perform(ImportFilePostProcessor.kt:170)
        at com.deutscheboerse.energy.cmminteg.service.publish.ImportFilePostProcessor.process(ImportFilePostProcessor.kt:84)
        at com.deutscheboerse.energy.cmminteg.service.AsyncFileImporterImpl.importFile(AsyncFileImporterImpl.java:98)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
 {code}",,ll664,od044,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Apr/20 16:29;od044;cmi-app-emb.log;https://jira.deutsche-boerse.com/secure/attachment/82385/cmi-app-emb.log","07/Apr/20 16:31;od044;db.xlsx;https://jira.deutsche-boerse.com/secure/attachment/82386/db.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,26956800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2592,,,,,,,,,,,,,,07/Apr/20 15:50,,,,,,,,,,,,,,,,,,,,,"1|000y5p:400000000000000000300040000602",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 6,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-4211-perf-analysis-jh,XP-2903,XP-3055,master-xbid-2.0.36.x,XP-3001-xbid-2.0.36.x,XP-3048-merge-to-xbid-2.0.36.x,XP-4152-acceptance,XP-3909,XP-3233-acceptance-jgitflow,hotfix,prod,master-prod,XP-4122-perf-analysis,develop,master-acceptance,master,XP-2476,XP-2843-BR01,acceptance,XP-4250,XP-3233-prod-jgitflow,XP-4526-resource-managment-fix,XP-222-acceptance,xbid-2.0.36.x,XP-2843-BR07,,,,,,,,,true,"14/Apr/20 08:20;ll664;[~od044], merged to develop  and ready to test. Have fun.","15/Apr/20 18:02;od044;Test passed on R2.0.37-SNAPSHOT (Build 2d6dfb39fb42d50a3e03c2cd0519579e1a2597a1)
- multiple files are processed at once ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Losses ""-2"" ID for cycles explanation",XP-2878,94295,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,uv683,radeale,radeale,07/Apr/20 13:58,31/Aug/20 15:38,22/Feb/21 13:21,16/Apr/20 08:08,,,Losses ASR,,Trading,,,,,Losses,,,"The customers are increasingly curious about the fact we changed the ID of cycles from ""-1"" to ""-2"". Please provide an explanation, in can be technical.

Thanks",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,27734400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0ama8:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 6,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Disable PCF manual modification via GUI,XP-2873,94257,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,od044,qo794,qo794,06/Apr/20 15:36,13/Aug/20 19:41,22/Feb/21 13:21,26/May/20 17:18,,,3.1.0,,CMM,,,,,,,,"It's possible to manually trigger a PCF file generation via CMM in ""Download files box"" and ""Change"" button. It obviously always fails with an error ""Invalid value : NTC_FILE_ID has to be set in export metadata"".

Disable/hide the button for manual file generation for PCF.",,od044,qo794,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,22896000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2592,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0am1s:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 9,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,acceptance,develop,master,master-acceptance,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/May/20 10:19;qo794;Hiding or disabling the button for PCF files would be too complicated, this simply does not fit to the current CMM/CMI architecture, therefore I introduced a new validation in CMI that rejects manual generation of PCF files and an error message is displayed in CMM afterwards.","22/May/20 16:11;od044;Test passed on docker v R2.0.40
- it not able to manually generate the PCF file via ""Change"" button on GUI anymore. 
- the application will notify validation error in message panel with the following error in case of user try to generate the file via the ""Change"" button 
{code}
Invalid value : Validation error: Manual generation is not supported for PCF files
{code}
[~radeale] FYI, for review ","01/Jun/20 16:15;radeale;Well done guys, I like the solution! :)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses - rounding issue - examples for customer,XP-2854,94097,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,lt112,lt112,02/Apr/20 09:54,13/Aug/20 19:43,22/Feb/21 13:21,06/Apr/20 09:18,,,Losses ASR,,,,,,,Losses,,,"h1. Issue description
Create more examples for customer and further explain the issue. Also tackle their questions about suggested options. See related issues.



h1. Output

h2. Examples for *option 1* and *2*

h3. *Option 1*
_Allow 1 extra decimal for trades compared to order entry (but not unlimited). E.g. min order unit = 1000, min trade unit = 100 (or 100 vs 10 if this is supported by nominations)_

# Consider the following setup (the same as in the description, just also taking cents into consideration)
  {noformat}
  interconnector A->B
  - capacity = 1 000 000
  - loss coefficient = 0.975
  - lot size = 100
  - min order unit = 1000
  - min trade unit = 100
  {noformat}
# Put *S10000@100.00* to area *A*
# Due to rounding, we can see it as *S9800@102.040* in area *B* # Put *B9800@105.00* to area *B*, a trade is created and implicit allocation is made ({{10000 -> 9800}}) # Put *S4000@100.00* to area *A* # Due to rounding, we can see it as *S3900@102.19* in area *B* # Put *B1000@102.19* to area *B* # We expect it to match, BUT due to rounding, in order to get *1000* quantity in area *B*, we have to send *1100* quantity from area *A*, which causes the price of the sell order to jump up to *102.78*, which cannot be matched with the buy order with price *102.19*, causing crossed orderbook 


h3. *Option 2*
_Separately define the min order lot size & min order size (which is a multiple of the min order lot size). E.g. if the min order lot size is 100kW, the min order size would be 1000 kW. Then you are not able to enter an order smaller than 1000, but you can enter 1100, 1200 etc. If after a partial match the remaining quantity is smaller than the min order size then the remainder would be automatically deleted by the LTS and/or SOB._

# Consider the following setup (the same as in the description, just also taking cents into consideration)
  {noformat}
  interconnector A->B
  - capacity = 1 000 000
  - loss coefficient = 0.975
  - lot size = 100
  - min order size = 1000
  - min order lot size = 100
  {noformat}
# Put *S10000@100.00* to area *A*
# Due to rounding, we can see it as *S9800@102.05* in area *B* # Put *B9800@105.00* to area *B*, a trade is created and implicit allocation is made ({{10000 -> 9800}}) # Put *S4000@100.00* to area *A* # Due to rounding, we can see it as *S3900@102.19* in area *B* # Put *B1100@102.50* to area *B* # We expect it to match, BUT due to rounding, in order to get *1100* quantity in area *B*, we have to send *1200* quantity from area *A*, which causes the price of the sell order to jump up to *102.76*, which cannot be matched with the buy order with price *102.50*, causing crossed orderbook  


h2. Additional examples
Take the following setup and table and apply the algorithm below for generating various examples (and observing the behavior).

h3. Setup
Consider the following setup (also applying *options* *1* and *2*):
  {noformat}
  interconnector DA1->DA2
  - capacity = 1 000 000
  - loss coefficient = 0.975
  - min trade unit = 10
  - min order size = 100
  - min order lot size = 10
  {noformat}

h3. Input table
* *quantity sent* is a quantity on the sending end, can represent an input quantity of a sell order in *DA1*
* *quantity received* is a quantity visible on the receiving end, can represent a quantity of sell order from *DA1* displayed in *DA2*
* *price* is a price required by the sell order from *DA1* if matched in *DA2* at given quantity

||quantity sent||quantity received||price||
|1000|980|102.040816|
|2000|1950|102.564103|
|3000|2930|102.389078|
|4000|3900|102.564103|
|5000|4880|102.459016|
|6000|5850|102.564103|
|7000|6830|102.489019|
|8000|7800|102.564103|
|9000|8780|102.505695|
|10000|9750|102.564103|
|11000|10730|102.516309|

h3. Algorithm for example creation
# Look at the table above,
# select a single row
# take the value in column *quantity sent* as a Sell order quantity {{Q_s}}, the value in column *quantity received* as {{Q_r}} and the value in column *price* as {{P}} # put a Sell order {{Q_s@100}} in *DA1* # this will be displayed as {{Q_r@P}} in *DA2* # now select any row above the previously selected with *price* _HIGHER_ than {{P}}, let's take values from this row: *quantity received* as {{Q_B}} and *price* as {{P_B}} # put in a Buy order {{Q_B@P}} in *DA2* # as the prices match, we would expect the orders to match as well, but once we require _only_ {{Q_B}} and not {{Q_s}} to be sent, the executed price ({{P_B}}) would be higher than what the buyer is willing to pay ({{P < P_B}}), causing crossed order-book

h4. Example
* {{Q_s = 11000}}
* put {{O1 = S11000@100}} in *DA1*
* {{O1}} displayed in *DA2* as {{S10730@102.516309}}
* put {{O2 = B9750@102.516309}} in *DA2*
* orders cannot match, because price to receive {{9750}} in *DA2* from {{O2}} would be {{102.564103}}
* in cash value:
** {{CV:O1 = 10000 * 100 = 1 000 000}}, {{CV:O2 = 9750 * 102.516309 = ~ 999 534}} 


h3. Additional tables
The following tables can be used as an input to the *Algorithm for example creation* above. We can observe the price moving up and down based on the transferred quantity.

h4. Sell 1000 + step * 100

||quantity sent||quantity received||executed price||
|1000|1000|100.000000|
|1100|1100|100.000000|
|1200|1200|100.000000|
|1300|1300|100.000000|
|1400|1400|100.000000|
|1500|1500|100.000000|
|1600|1600|100.000000|
|1700|1700|100.000000|
|1800|1800|100.000000|
|1900|1900|100.000000|
|2000|2000|100.000000|
|2100|2000|105.000000|
|2200|2100|104.761905|
|2300|2200|104.545455|
|2400|2300|104.347826|
|2500|2400|104.166667|
|2600|2500|104.000000|
|2700|2600|103.846154|
|2800|2700|103.703704|
|2900|2800|103.571429|
|3000|2900|103.448276|
|3100|3000|103.333333|
|3200|3100|103.225806|
|3300|3200|103.125000|
|3400|3300|103.030303|
|3500|3400|102.941176|
|3600|3500|102.857143|
|3700|3600|102.777778|
|3800|3700|102.702703|
|3900|3800|102.631579|
|4000|3900|102.564103|
|4100|4000|102.500000|
|4200|4100|102.439024|
|4300|4200|102.380952|
|4400|4300|102.325581|
|4500|4400|102.272727|
|4600|4500|102.222222|
|4700|4600|102.173913|
|4800|4700|102.127660|
|4900|4800|102.083333|
|5000|4900|102.040816|
|5100|5000|102.000000|
|5200|5100|101.960784|
|5300|5200|101.923077|
|5400|5300|101.886792|
|5500|5400|101.851852|
|5600|5500|101.818182|
|5700|5600|101.785714|
|5800|5700|101.754386|
|5900|5800|101.724138|
|6000|5900|101.694915|
|6100|5900|103.389831|
|6200|6000|103.333333|
|6300|6100|103.278689|
|6400|6200|103.225806|
|6500|6300|103.174603|
|6600|6400|103.125000|
|6700|6500|103.076923|
|6800|6600|103.030303|
|6900|6700|102.985075|
|7000|6800|102.941176|
|7100|6900|102.898551|
|7200|7000|102.857143|
|7300|7100|102.816901|
|7400|7200|102.777778|
|7500|7300|102.739726|
|7600|7400|102.702703|
|7700|7500|102.666667|
|7800|7600|102.631579|
|7900|7700|102.597403|
|8000|7800|102.564103|
|8100|7900|102.531646|
|8200|8000|102.500000|
|8300|8100|102.469136|
|8400|8200|102.439024|
|8500|8300|102.409639|
|8600|8400|102.380952|
|8700|8500|102.352941|
|8800|8600|102.325581|
|8900|8700|102.298851|
|9000|8800|102.272727|
|9100|8900|102.247191|
|9200|9000|102.222222|
|9300|9100|102.197802|
|9400|9200|102.173913|
|9500|9300|102.150538|
|9600|9400|102.127660|
|9700|9500|102.105263|
|9800|9600|102.083333|
|9900|9700|102.061856|
|10000|9800|102.040816|
|10100|9800|103.061224|
|10200|9900|103.030303|
|10300|10000|103.000000|
|10400|10100|102.970297|
|10500|10200|102.941176|
|10600|10300|102.912621|
|10700|10400|102.884615|
|10800|10500|102.857143|
|10900|10600|102.830189|
|11000|10700|102.803738|
|11100|10800|102.777778|
|11200|10900|102.752294|
|11300|11000|102.727273|

h4. Sell 1000 + step * 100 with preexisting 10000 -> 9800

||quantity sent||quantity received||executed price||
|10000|9800|102.040816|
|11000|10700|111.111111|
|11100|10800|110.000000|
|11200|10900|109.090909|
|11300|11000|108.333333|
|11400|11100|107.692308|
|11500|11200|107.142857|
|11600|11300|106.666667|
|11700|11400|106.250000|
|11800|11500|105.882353|
|11900|11600|105.555556|
|12000|11700|105.263158|
|12100|11800|105.000000|
|12200|11900|104.761905|
|12300|12000|104.545455|
|12400|12100|104.347826|
|12500|12200|104.166667|
|12600|12300|104.000000|
|12700|12400|103.846154|
|12800|12500|103.703704|
|12900|12600|103.571429|
|13000|12700|103.448276|
|13100|12800|103.333333|
|13200|12900|103.225806|
|13300|13000|103.125000|
|13400|13100|103.030303|
|13500|13200|102.941176|
|13600|13300|102.857143|
|13700|13400|102.777778|
|13800|13500|102.702703|
|13900|13600|102.631579|
|14000|13700|102.564103|
|14100|13700|105.128205|
|14200|13800|105.000000|
|14300|13900|104.878049|
|14400|14000|104.761905|
|14500|14100|104.651163|
|14600|14200|104.545455|
|14700|14300|104.444444|
|14800|14400|104.347826|
|14900|14500|104.255319|
|15000|14600|104.166667|
|15100|14700|104.081633|
|15200|14800|104.000000|
|15300|14900|103.921569|
|15400|15000|103.846154|
|15500|15100|103.773585|
|15600|15200|103.703704|
|15700|15300|103.636364|
|15800|15400|103.571429|
|15900|15500|103.508772|

h3. Notes
* As you can observe from the tables, it is not so much a corner-case, but rather a standard behavior
* If you multiply both quantities and units by X, you will get the same issue -> meaning having units e.g. 10 times smaller just means the same cases appearing for quantities 10 times smaller.
",,ek176,lt112,radeale,,,,,,,,,,,,,,,60,60,,0%,60,60,,,,,,,,,,,,,,,XP-2566,XP-2453,XP-2692,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,27820800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1914,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0al3s:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 5,HOT Sprint 6 (S),,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Apr/20 09:55;lt112;Provide answers to customers options","02/Apr/20 10:10;lt112;||quantity sent||quantity received||price||
|1000|980|102.040816|
|2000|1950|102.564103|
|3000|2930|102.389078|
|4000|3900|102.564103|
|5000|4880|102.459016|
|6000|5850|102.564103|
|7000|6830|102.489019|
|8000|7800|102.564103|
|9000|8780|102.505695|
|10000|9750|102.564103|
|11000|10730|102.516309|","02/Apr/20 10:16;lt112;Consider the following setup (also applying *options* *1* and *2*):
* IC = (DA1 <-> DA2)
* IC.capacity = 1 000 000
* IC.loss_coefficient = 0.975
* min trade unit = 10
* min order size = 100
* min order lot size = 10","02/Apr/20 10:36;lt112;# Look at one of the tables above (one is with shifts of 100, second with shifts of 1000),
# select a single row
# take the value in column *quantity sent* as a Sell order quantity {{Q_s}}, the value in column *quantity received* as {{Q_r}} and the value in column *price* as {{P}}
# put a Sell order {{Q_s@100}} in *DA1*
# this will be displayed as {{Q_r@P}} in *DA2*
# now select any row above the previously selected with *price* _HIGHER_ than {{P}}, let's take values from this row: *quantity received* as {{Q_B}} and *price* as {{P_B}}
# put in a Buy order {{Q_B@P}} in *DA2*
# as the prices match, we would expect the orders to match as well, but once we require _only_ {{Q_B}} and not {{Q_s}} to be sent, the executed price ({{P_B}}) would be higher than what the buyer is willing to pay ({{P < P_B}}), causing crossed order-book","02/Apr/20 10:46;lt112;h3. Example
* {{Q_s = 11000}}
* put {{O1 = S11000@100}} in *DA1*
* {{O1}} displayed in *DA2* as {{S10730@102.516309}}
* put {{O2 = B9750@102.516309}} in *DA2*
* orders cannot match, because price to receive {{9750}} in *DA2* from {{O2}} would be {{102.564103}}
* in cash value:
** {{CV:O1 = 10000 * 100 = 1 000 000}}, {{CV:O2 = 9750 * 102.516309 = ~ 999 534}} 
","02/Apr/20 14:18;lt112;h2. Standalone examples

h3. *Option 1*
# Consider the following setup (the same as in the description, just also taking cents into consideration)
  {noformat}
  interconnector A->B
  - capacity = 1 000 000
  - loss coefficient = 0.975
  - lot size = 100
  - min order unit = 1000
  - min trade unit = 100
  {noformat}
# Put *S10000@100.00* to area *A*
# Due to rounding, we can see it as *S9800@102.040* in area *B*
# Put *B9800@105.00* to area *B*, a trade is created and implicit allocation is made ({{10000 -> 9800}})
# Put *S4000@100.00* to area *A*
# Due to rounding, we can see it as *S3900@102.19* in area *B*
# Put *B1000@102.19* to area *B*
# We expect it to match, BUT due to rounding, in order to get *1000* quantity in area *B*, we have to send *1100* quantity from area *A*, which causes the price of the sell order to jump up to *102.78*, which cannot be matched with the buy order with price *102.19*, causing crossed orderbook 


h3. *Option 2*
# Consider the following setup (the same as in the description, just also taking cents into consideration)
  {noformat}
  interconnector A->B
  - capacity = 1 000 000
  - loss coefficient = 0.975
  - lot size = 100
  - min order size = 1000
  - min order lot size = 100
  {noformat}
# Put *S10000@100.00* to area *A*
# Due to rounding, we can see it as *S9800@102.05* in area *B*
# Put *B9800@105.00* to area *B*, a trade is created and implicit allocation is made ({{10000 -> 9800}})
# Put *S4000@100.00* to area *A*
# Due to rounding, we can see it as *S3900@102.19* in area *B*
# Put *B1100@102.50* to area *B*
# We expect it to match, BUT due to rounding, in order to get *1100* quantity in area *B*, we have to send *1200* quantity from area *A*, which causes the price of the sell order to jump up to *102.76*, which cannot be matched with the buy order with price *102.50*, causing crossed orderbook  ","03/Apr/20 09:49;lt112;h2. Additional tables

h3. Sell 1000 + step * 100

||quantity sent||quantity received||executed price||
|1000|1000|100.000000|
|1100|1100|100.000000|
|1200|1200|100.000000|
|1300|1300|100.000000|
|1400|1400|100.000000|
|1500|1500|100.000000|
|1600|1600|100.000000|
|1700|1700|100.000000|
|1800|1800|100.000000|
|1900|1900|100.000000|
|2000|2000|100.000000|
|2100|2000|105.000000|
|2200|2100|104.761905|
|2300|2200|104.545455|
|2400|2300|104.347826|
|2500|2400|104.166667|
|2600|2500|104.000000|
|2700|2600|103.846154|
|2800|2700|103.703704|
|2900|2800|103.571429|
|3000|2900|103.448276|
|3100|3000|103.333333|
|3200|3100|103.225806|
|3300|3200|103.125000|
|3400|3300|103.030303|
|3500|3400|102.941176|
|3600|3500|102.857143|
|3700|3600|102.777778|
|3800|3700|102.702703|
|3900|3800|102.631579|
|4000|3900|102.564103|
|4100|4000|102.500000|
|4200|4100|102.439024|
|4300|4200|102.380952|
|4400|4300|102.325581|
|4500|4400|102.272727|
|4600|4500|102.222222|
|4700|4600|102.173913|
|4800|4700|102.127660|
|4900|4800|102.083333|
|5000|4900|102.040816|
|5100|5000|102.000000|
|5200|5100|101.960784|
|5300|5200|101.923077|
|5400|5300|101.886792|
|5500|5400|101.851852|
|5600|5500|101.818182|
|5700|5600|101.785714|
|5800|5700|101.754386|
|5900|5800|101.724138|
|6000|5900|101.694915|
|6100|5900|103.389831|
|6200|6000|103.333333|
|6300|6100|103.278689|
|6400|6200|103.225806|
|6500|6300|103.174603|
|6600|6400|103.125000|
|6700|6500|103.076923|
|6800|6600|103.030303|
|6900|6700|102.985075|
|7000|6800|102.941176|
|7100|6900|102.898551|
|7200|7000|102.857143|
|7300|7100|102.816901|
|7400|7200|102.777778|
|7500|7300|102.739726|
|7600|7400|102.702703|
|7700|7500|102.666667|
|7800|7600|102.631579|
|7900|7700|102.597403|
|8000|7800|102.564103|
|8100|7900|102.531646|
|8200|8000|102.500000|
|8300|8100|102.469136|
|8400|8200|102.439024|
|8500|8300|102.409639|
|8600|8400|102.380952|
|8700|8500|102.352941|
|8800|8600|102.325581|
|8900|8700|102.298851|
|9000|8800|102.272727|
|9100|8900|102.247191|
|9200|9000|102.222222|
|9300|9100|102.197802|
|9400|9200|102.173913|
|9500|9300|102.150538|
|9600|9400|102.127660|
|9700|9500|102.105263|
|9800|9600|102.083333|
|9900|9700|102.061856|
|10000|9800|102.040816|
|10100|9800|103.061224|
|10200|9900|103.030303|
|10300|10000|103.000000|
|10400|10100|102.970297|
|10500|10200|102.941176|
|10600|10300|102.912621|
|10700|10400|102.884615|
|10800|10500|102.857143|
|10900|10600|102.830189|
|11000|10700|102.803738|
|11100|10800|102.777778|
|11200|10900|102.752294|
|11300|11000|102.727273|

h3. Sell 1000 + step * 100 with preexisting 10000 -> 9800

||quantity sent||quantity received||executed price||
|10000|9800|102.040816|
|11000|10700|111.111111|
|11100|10800|110.000000|
|11200|10900|109.090909|
|11300|11000|108.333333|
|11400|11100|107.692308|
|11500|11200|107.142857|
|11600|11300|106.666667|
|11700|11400|106.250000|
|11800|11500|105.882353|
|11900|11600|105.555556|
|12000|11700|105.263158|
|12100|11800|105.000000|
|12200|11900|104.761905|
|12300|12000|104.545455|
|12400|12100|104.347826|
|12500|12200|104.166667|
|12600|12300|104.000000|
|12700|12400|103.846154|
|12800|12500|103.703704|
|12900|12600|103.571429|
|13000|12700|103.448276|
|13100|12800|103.333333|
|13200|12900|103.225806|
|13300|13000|103.125000|
|13400|13100|103.030303|
|13500|13200|102.941176|
|13600|13300|102.857143|
|13700|13400|102.777778|
|13800|13500|102.702703|
|13900|13600|102.631579|
|14000|13700|102.564103|
|14100|13700|105.128205|
|14200|13800|105.000000|
|14300|13900|104.878049|
|14400|14000|104.761905|
|14500|14100|104.651163|
|14600|14200|104.545455|
|14700|14300|104.444444|
|14800|14400|104.347826|
|14900|14500|104.255319|
|15000|14600|104.166667|
|15100|14700|104.081633|
|15200|14800|104.000000|
|15300|14900|103.921569|
|15400|15000|103.846154|
|15500|15100|103.773585|
|15600|15200|103.703704|
|15700|15300|103.636364|
|15800|15400|103.571429|
|15900|15500|103.508772|
","06/Apr/20 09:18;lt112;Answer provided in https://jira.deutsche-boerse.com/browse/XBID-4983",,,,,,,,,,,,,,,,,,,,,,,,
OCC files fixes (XBID-4913) - BR 6 (Split1),XP-2846,93981,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ek176,radeale,radeale,31/Mar/20 17:02,04/Aug/20 16:11,22/Feb/21 13:21,29/Apr/20 11:27,,,3.0.1 OCC,,Capacity,,,,,Package1,,,"For the up-to-date version of the complete US please see the most recent US document in XBID-4913.

This ticket is for implementing Business Rule 6.

*BR06*

Sending of OCC files is required to take place from configured time in D-1 until the end of the day D.

+Example of current behaviour:+

FTC 1:
 * starting time 15:00 on 05/02 for NEXT_DAY

FTC 2:
 * starting time 00:00 on 06/02 for CURRENT_DAY

Result:
 * for 06/02 delivery day are files generated from 15:00 05/02 to 24:00 based on FTC 1
 * for 06/02 delivery day are files generated from 00:00 06/02 to 24:00 based on FTC 2
 * for 07/02 delivery day are files generated from 00:00 06/02 to 24:00 based on FTC 1
 * for 07/02 delivery day are file generated from 00:00 07/02 to 24:00 based on FTC 2

+New behaviour:+

Should enable to avoid sending the files between 00:00 06/02 and 15:00 (configured time) 06/02 for delivery day 07/02 either by general change of all FTCs behaviour or via specific additional restrictions only for OCC file.

*New field will be added to the Distribution Scheduler Mapping pop-up named like ""Generate from"" and the time specified. This would mean that for the selected Range the generation of filed would start at the selected time. The default value would be 00:00.*

The field is to be added after the Range field (i.e. as a last in the list).

!image-2020-03-31-17-03-41-560.png!

 ",,ek176,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2845,,,,XP-2957,,,,,,,,,,,,,"31/Mar/20 17:03;radeale;image-2020-03-31-17-03-41-560.png;https://jira.deutsche-boerse.com/secure/attachment/82102/image-2020-03-31-17-03-41-560.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,24105600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2609,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0amaf:i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 7 (S),,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3233-acceptance-jgitflow,hotfix,prod,master-prod,XP-4211-perf-analysis-jh,XP-3055,XP-4122-perf-analysis,develop,master-xbid-2.0.36.x,master-acceptance,master,acceptance,XP-4250,XP-3233-prod-jgitflow,XP-3001-xbid-2.0.36.x,XP-222-acceptance,XP-4526-resource-managment-fix,XP-3048-merge-to-xbid-2.0.36.x,XP-4152-acceptance,xbid-2.0.36.x,XP-3909,,,,,,,,,,,,,true,"19/May/20 09:38;ek176;Implementation details:
 * generateFrom is valid for ALL file types (not only OCC)
 * ""Generate from"" value is displayed in the ""distrbutedFilesDetail.xhtml"" page in the ""Distribution Scheduler Mappings"" section",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
OCC files fixes (XBID-4913) - BRs 4a+4b,XP-2845,93980,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Incomplete,qo794,radeale,radeale,31/Mar/20 17:00,04/Aug/20 16:11,22/Feb/21 13:21,29/Apr/20 12:42,,,3.0.1 OCC,,Capacity,,,,,Package1,,,"For the up-to-date version of the complete US please see the most recent US document in XBID-4913.

This ticket is for implementing Business Rules 4a and 4b.

*BR04a*

*EIC codes replacement* *only for OCC files* when _Interconnector_ based FTC is created:
 # If DA is part of MA with more than one non-virtual DA Use MA EIC code (example: Germany MA)
 # If DA is VDA and the IC is not VDA-PDA IC, VDA EIC code will be replaced by PDA EIC code

Example for rule 1 + 2: 50Hertz-PLC → change to DE-PSE
 # If DA is VDA and the IC is VDA-PDA IC, VDA EIC code will not be replaced by PDA EIC code

Example for rule 3: PSE-PLC → remains PSE-PLC

EIC codes replacement only for OCC files when _Border_ based FTC is created:

OCC file configured for a border contains EIC codes of the Market Areas today. As Market Areas EIC codes are frequently dummy codes newly a Delivery Area EIC code shall be used when MA has only one DA.

_Example:  In case of the FR-DE border, it means that for the FR side the EIC of the DA shall be used and for the German side the EIC code of the MA._

*Additional note as of 21/04*: No delivery area name conversion will be applied to internal Interconnectors.

*BR04b*

*Quantity replacement for OCC files* when Interconnector based FTC is created
 # If one of IC delivery areas is VDA and the IC is not VDA-PDA IC, additional configuration is required within FTC for following options

 # offered capacity quantity remains as calculated for IC (Example: 50Hertz-PLC→ quantity 50Hertz-PLC) (""Original"" in BR01)
 # offered capacity quantity is a minimum of quantity of IC and VDA-PDA (Example 50Hertz-PLC→ quantity Min (50Hertz-PLC, PLC-PSE)) /this would be used equally for other CR common ATC/NTC/* (""Minimum"" in BR01)

 # If the IC is VDA-PDA IC no impact to offered capacity quantity

 * Example: PSE-PLC → quantity PSE-PLC

_*Note: Situation may arise that two OCC files will be generated with the same quantities for the DA1-VDA-PDA configuration when the changed ATC values are on the part of the virtual IC with a higher ATC than on the other virtual IC. In that case new timestamp and higher version of the file will be used although the reported quantities remain the same._",,qo794,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2844,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,Follow up jira created XP-2960,,,,,,,,,,26524800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2609,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:40000000000000000030004000061w",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 7,,,,,,,,,,,,,,,,13.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2844,occ-migration,XP-2943,XP-4211-perf-analysis-jh,XP-3055,worker-test,master-xbid-2.0.36.x,XP-2843-BR-07-fix,XP-3001-xbid-2.0.36.x,XP-3048-merge-to-xbid-2.0.36.x,XP-4152-acceptance,XP-3909,XP-3233-acceptance-jgitflow,hotfix,prod,master-prod,xp-2860,XP-4122-perf-analysis,develop,XP-2860-fix,master-acceptance,master,XP-3233-prod-jgitflow,acceptance,XP-4250,XP-222-acceptance,XP-4526-resource-managment-fix,XP-3000-multiple-activity-logs-with-same-timestamp-problem,xbid-2.0.36.x,,,,,true,"21/Apr/20 09:05;qo794;Additional comment to BR 4a:
No delivery area name conversion will be applied to internal Interconnectors.

[~radeale] please include this rule to a specification, thanks.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
OCC files fixes (XBID-4913) - BR 3,XP-2844,93979,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,hj444,radeale,radeale,31/Mar/20 16:58,04/Aug/20 16:11,22/Feb/21 13:21,29/Apr/20 13:47,,,3.0.1 OCC,,Capacity,,,,,Package1,,,"For the up-to-date version of the complete US please see the most recent US document in XBID-4913.

This ticket is for implementing Business Rule 3.

*BR03*

Each timeseries within an OCC file will newly provide information not only about the value of offered capacity for changed contract (point) but for full delivery day using the break points features of Time series with A03 type (Curve where position 1 is mandatory) as described in the attached example and in the attached ENTSO-E document For avoidance of doubts the existing rule that in case of no changes in the ATC during the preceding 15 minutes, the latest ATCs are reflected per CMM contract per direction with the timestamp of the change is not affected.   

Note: In the AS IS, OCC files contains only the values of the periods where there is a change of ATC compared to previously sent file.

In the TO BE, each timeseries contains all the ATC values of the Business day. I.e. the actual frequency of reporting the ATC values is unchanged, but with every change reported there are all the ATCs in the TS using the so called ‘break points’ I.e. *if the ATC values for H03, H04 and H05 are the same, they are all reported in point 03.*

_For the file examples and additional information please look into the most recent US document in XBID-4913._",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2843,,,,XP-2964,,,,,,,,,,,,,"27/Apr/20 10:27;tr866;10_Timeseries-curve-types_v1r1.pdf;https://jira.deutsche-boerse.com/secure/attachment/83049/10_Timeseries-curve-types_v1r1.pdf","27/Apr/20 10:27;tr866;Example Files Desctiption.docx;https://jira.deutsche-boerse.com/secure/attachment/83053/Example+Files+Desctiption.docx","27/Apr/20 10:27;tr866;c559368ae67f037f04a12e7c7af4aaaa_v1.xml;https://jira.deutsche-boerse.com/secure/attachment/83050/c559368ae67f037f04a12e7c7af4aaaa_v1.xml","27/Apr/20 10:27;tr866;c559368ae67f037f04a12e7c7af4aaba_v2.xml;https://jira.deutsche-boerse.com/secure/attachment/83051/c559368ae67f037f04a12e7c7af4aaba_v2.xml","27/Apr/20 10:27;tr866;c559368ae67f037f04a12e7c7af4aaca_v4.xml;https://jira.deutsche-boerse.com/secure/attachment/83052/c559368ae67f037f04a12e7c7af4aaca_v4.xml",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,28252800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2609,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0amaf:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 7 (S),,,,,,,,,,,,,,,,4.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,occ-migration,XP-2943,XP-2844,XP-4211-perf-analysis-jh,XP-3055,worker-test,master-xbid-2.0.36.x,XP-2843-BR-07-fix,XP-3001-xbid-2.0.36.x,XP-3048-merge-to-xbid-2.0.36.x,XP-4152-acceptance,XP-3909,XP-3233-acceptance-jgitflow,hotfix,prod,master-prod,xp-2860,XP-4122-perf-analysis,develop,XP-2860-fix,master-acceptance,master,XP-4250,XP-3233-prod-jgitflow,acceptance,XP-4526-resource-managment-fix,XP-222-acceptance,XP-3000-multiple-activity-logs-with-same-timestamp-problem,xbid-2.0.36.x,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
OCC files fixes (XBID-4913) - BRs 1+2+5+7,XP-2843,93978,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,radeale,radeale,31/Mar/20 16:57,04/Aug/20 16:11,22/Feb/21 13:21,29/Apr/20 13:45,,,3.0.1 OCC,,Capacity,,,,,Package1,,,"For the up-to-date version of the complete US please see the most recent US document in XBID-4913.

This ticket is for implementing Business Rules 1, 2, 5 and 7.

*BR01*

User creating FTC can select if the OCC file is created for implicit or explicit auction and if the original or minimum value is used for interconnectors impacted by virtual delivery area - a new drop-down menu Auction for selection of this configuration will appear in FTC when OCC file is selected below the current Receiver field with two options _(detailed to BR02)_
 * Implicit (the default one)
 * Explicit

and

a new drop-down menu VDA Quantity for selection of this configuration will appear in FTC when OCC file is selected below the current Receiver field with two options _(detailed in BR04b)_
 * Minimum (the default one)
 * Original

!image-2020-03-31-16-56-28-661.png!  

_It must be possible to create two entirely same FTCs with the only difference being selection of value for parameter Auction ""Implicit"" vs ""Explicit"". The same does not apply to Minimum/Original, i.e. existence of a 'Minimum' FTC prevents creation of another 'Original' FTC presuming all other FTC parameters all the same._

*BR02*

Tag ""auction.type"" value within the OCC file will include a value A01 (implicit auctions) or A02 (explicit auction) depending whether explicit or implicit auction was selected in relevant FTC producing the file.

Note: The same information will be reported in the 2 files, except that one will be explicit and the other will be implicit (as ATC is identical for both allocations). The new selection implicit/explicit doesn't thus provide any specific logic except the auction.type value in the xml and except as stated in BR07. I.e. the only difference is in the _auction.type_, the _mRID_ document identifier and the _file name_ template.

*BR05*

Document identifier stored in mRID - MD5 hashed identifier string - will be newly created using additional attribute per file type, i.e. combination of following attributes divided by underscores (""_"") put in a MD5 hashed identifier string will be used:
 * indicator of file type
 * the border/IC or area to which it applies
 * EIC of the receiving party
 * delivery date covered by the file in YYYYMMDD format
 * the oldest timeseries update_DateAndOrTime.dateTime within the file
 * auction.type (A01 or A02)

Note: For the avoidance of doubt, in case 2 files have the same mRID (because all the element in the MD5 hash are identical - case for instance where there is no ATC change during the last 15'), the version field is incremented as in the current behavior.

*BR07*

The name of the file is generated automatically by the system and follows the convention below

Where auction.type is A01           
 * YYYYMMDD_OCC_'DA1'-'DA2'_IMPL_V.xml
 * YYYYMMDD_OCC_'MA1'-'MA2'_IMPL_V.xml (for border-level file configurations)

Where auction.type is A02           
 * YYYYMMDD_OCC_'DA1'-'DA2'_EXPL_V.xml

YYYYMMDD_OCC_'MA1'-'MA2'_EXPL_V.xml (for border-level file configurations)",,ek176,radeale,uv683,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2963,,,,,,XP-2964,,,,,,,"31/Mar/20 16:56;radeale;image-2020-03-31-16-56-28-661.png;https://jira.deutsche-boerse.com/secure/attachment/82100/image-2020-03-31-16-56-28-661.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,25833600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2609,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:400000000000000000300042",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 6,Alpha Sprint 7 (S),,,,,,,,,,,,,,,4.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,occ-migration,XP-2943,XP-4211-perf-analysis-jh,XP-2843-BR7,XP-2903,XP-3055,worker-test,master-xbid-2.0.36.x,XP-2843-BR-07-fix,XP-3001-xbid-2.0.36.x,XP-3048-merge-to-xbid-2.0.36.x,XP-4152-acceptance,XP-3909,XP-3233-acceptance-jgitflow,hotfix,prod,master-prod,xp-2860,XP-4122-perf-analysis,develop,XP-2860-fix,master-acceptance,master,XP-2476,XP-2843-BR01,XP-3233-prod-jgitflow,acceptance,XP-4250,XP-4526-resource-managment-fix,XP-222-acceptance,XP-3000-multiple-activity-logs-with-same-timestamp-problem,xbid-2.0.36.x,XP-2843-BR07,true,"08/Apr/20 10:43;ek176;Ad BR05: the oldest timeseries update_DateAndOrTime.dateTime within the file: The timeseries last update date is added in the format 'yyyyMMddThh:mm:ss.SSSZ'","29/Apr/20 13:39;uv683;Issue split into:
|XP-2963|LEFTOVER: OCC files fixes (XBID-4913) - BRs 1+2+5+7|
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Finish US Electronic handshake testing,XP-2762,93552,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,,qo794,qo794,19/Mar/20 10:51,13/Aug/20 19:45,22/Feb/21 13:21,25/Mar/20 08:56,,,3.1.0,,,,,,,,,,,,qo794,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,28771200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2592,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0aeyv:i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 5 (S),,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Mar/20 18:39;radeale;All in all I see two issues actually to be reported to the customer:

XP-2765 *Fix/enhance a handling PCC for NTC file that has been already published*

Current behavior:
1. Upload NTC v1 via some channel except GUI to get PCF
2. Publish the NTC either with PCC or via GUI
3. Send PCC for the PCF of NTC v1 again - App accept the PCC file successfully and send OK ACK back to the sender and nothing happen in XBID
Impact: Sender does not know about that the NTC file has been already published

Fix:
A negative ACK is returned when an NTC is already published.

XP-2754 *ACK file name for PCC contains null*

Description:
Since PCC file does not contain a version, the ACK sent back to a sender contains NULL

Fix: Add 1 instead of NULL as for negative ACKs as default.

XP-2782 *NTC File Received event must be available only for PCF files*",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACK file name for PCC contains null,XP-2754,93502,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,uv683,qo794,qo794,18/Mar/20 12:51,13/Aug/20 19:41,22/Feb/21 13:21,23/Mar/20 15:44,,,3.1.0,,CMM,,,,,,,,"Since PCC file does not contain a version, the ACK sent back to a sender contains NULL, see:

com.deutscheboerse.energy.cmminteg.service.AckServiceImpl#sendAcknowledgementForFile

I would add 1 as for negative ACKs as default or come up with a different solution.",,hj444,qo794,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,28944000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2592,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0aeyv:r",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 5 (S),,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Mar/20 12:21;hj444;PCF ACK : ACK_NTC6_200325_6_20200325000000.xml
PCC ACK : ACK_PCCReject_1_20200323000000.xml",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Certificate expiration testing - creation of the certificates,XP-2716,93022,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,zi174,zi174,09/Mar/20 12:58,31/Aug/20 15:39,22/Feb/21 13:21,03/Jun/20 10:24,,,Agile Pilot,,,,,,,,,,We would need to create a user's certificates for SIMu environment. Please see the attached excel. ,,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Mar/20 13:00;zi174;User_list_to_BizOps.xlsx;https://jira.deutsche-boerse.com/secure/attachment/81243/User_list_to_BizOps.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,30240000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:400000000000000000300040000v",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix XBID-4876 based on US 0.6 version ,XP-2705,92924,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,ei349,ei349,05/Mar/20 15:05,04/Aug/20 16:02,22/Feb/21 13:21,11/Mar/20 16:21,,,Agile Pilot,,,,,,,,,,,,ei349,od044,qo794,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Mar/20 14:25;od044;Screenshot_20200311_142229.png;https://jira.deutsche-boerse.com/secure/attachment/81368/Screenshot_20200311_142229.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,29980800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0a9h9:z",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 4 (S),,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Mar/20 15:55;ei349;please deliver it on monday to staging area.","06/Mar/20 08:18;qo794;Please do not start with the implementation, based on the latest info we have to wait for a green light from the customers, they have to discuss it internally due to some possible problems on their side. [~ei349] please keep us up to date and tell us once/if we can proceed with this ticket, thanks.","11/Mar/20 13:23;qo794;Implemented.","11/Mar/20 14:26;od044;Test passed on docker with v R2.0.33-SNAPSHOT
- all recipient email addresses (users, parties) are taken from an application 

 !Screenshot_20200311_142229.png|thumbnails! ",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create demo for sprint 4,XP-2693,92901,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,ei349,ei349,05/Mar/20 13:05,13/Aug/20 19:45,22/Feb/21 13:21,19/Mar/20 10:54,,,3.1.0,,,,,,,,,,,,ei349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,30585600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2592,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0adbb:i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 4,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses - prepare answer for customers about our findings,XP-2692,92900,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ei349,ei349,ei349,05/Mar/20 13:04,13/Aug/20 19:43,22/Feb/21 13:21,19/Mar/20 16:10,,,Losses ASR,,,,,,,,,,"h1. Rounding

During testing various corner-cases we have encountered an issue with the rounding, which led to an investigation. An issue has been found in the rounding model itself (as described in HLFC). Please, see the following example.

h2. Example

# Consider the following setup
  {noformat}
  interconnector A->B
  - capacity = 1 000 000
  - loss coefficient = 0.975
  - lot size = 100
  {noformat}
# Put *S10000@100* to area *A*
# Due to rounding, we can see it as *S9800@103* in area *B*
# Put *B9800@105* to area *B*, a trade is created and implicit allocation is made ({{10000 -> 9800}})
# Put *S4000@100* to area *A*
# Due to rounding, we can see it as *S3900@103* in area *B*
# Put *B100@105* to area *B*
# We expect it to match, BUT due to rounding, in order to get *100* quantity in area *B*, we have to send *200* quantity from area *A* (see rounding formulas in HLFC 4.2.4.5, Rule 4-8 and 4-9), which causes the price of the sell order to jump up to *200*, which cannot be matched with the buy order with price *105*, causing crossed orderbook

h2. Problem

This in conclusion shows that with the rounding the final price does not only depend on the original order and losses along the way, but also on the required quantity, which makes it a non-polynomial problem to solve (we would have to perform routing for every possible quantity and then display prices in the order-book based on the required quantity).

This discovery results in performance issues and would necessitate a change to the orderbook model we have today.

h3. Notes

* To some extent this happens for all the combinations of flows, in the given example it is just easily visible
* Given proper conditions, seemingly worse (slightly) order can in the end offer better price due to ""more fitting"" quantity than a better order (meaning order with better price)
* To maximize welfare it also might be beneficial to send a chunk of quantity via some path and then the rest via another (in order to create the best fitting chunks based on rounding)  
* Different preexisting flows over multiple sub-intervals can also cause different sent/received ratio, causing a lot of inter-connectors to be invalid for routing at some point

h2. Possible solution

In order to solve this issue, we propose a new rounding model as follows.

* Real trades must be calculated unrounded (to some extent - with technical limitations of representations of the real numbers).
* Rounding occurs only for ""display purposes"" - this has to be discussed (when, why and how)
* Redefine minimal tradeable unit as an input restriction, not a trading restriction
** minimal quantity entering the system is X
** minimal quantity being trade in the system is not restricted

h3. Examples

h4. Solved example from above

# Consider the following setup
  {noformat}
  interconnector A->B
  - capacity = 1 000 000
  - loss coefficient = 0.975
  - lot size = 100
  {noformat}
# Put *S10000@100* to area *A*
# Due to rounding, we can see it as *S9750@102.5642* in area *B* (rounding for display purposes to be discussed)
# Put *B9800@105* to area *B*, a trade is created and implicit allocation is made ({{10000 -> 9750}})
# *B50@105* remains in area *B* and is visible as *B51.283@102.375* in area *A*
# Put *S4000@100* to area *A*, a trade is created and implicit allocation is made ({{51.283 -> 50}})
# *S3948.72@100* remains in area *A* and is visible as *S3850@102.5642* in area *B*
# Put *B100@105* to area *B*, a trade is created and implicit allocation is made ({{102.5642 -> 100}})
# *S3846.153@100* remains in area *A* and is visible as *S3750@102.5642* in area *B*

h4. Minimal tradable unit

# Consider the following setup
  {noformat}
  interconnector A->B
  - capacity = 1 000 000
  - loss coefficient = 0.975
  - minimal tradeable unit = 100
  {noformat}
# Put *S100@100* to area *A*
# We can see it as *S97.5@102.5642* in area *B*
# Put *B100@105* to area *B*
# A trade is created, *B2.5@105* remains in area *B*
# NOTE: Applying minimal tradeable unit as a trading restriction would not permit the trade and cause crossed order-book
",,ei349,lt112,radeale,rg535,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4983,,,,,,,,XP-2295,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,29894400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1914,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0a9h9:zz",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 4 (S),HOT Sprint 5,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Mar/20 11:58;lt112;[~radeale] please check if it is understandable and correct","10/Mar/20 11:51;radeale;Checked, minor corrections done to terminology. Understandable for me and the outcome is clear - minimize rounding where possible.","10/Mar/20 12:04;radeale;Removed from the text:

TODO: please recheck/change the terms (lot size, min tradable unit etc.) with properly defined ones
","12/Mar/20 13:19;rg535;Assigned back to AR. SV did her task!","12/Mar/20 16:16;radeale;Thanks for the check, Suzanna.",,,,,,,,,,,,,,,,,,,,,,,,,,,
Email addresses modification for password and certificate warnings,XP-2690,92840,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,yo218,zi174,zi174,04/Mar/20 10:08,04/Aug/20 16:01,22/Feb/21 13:21,19/Mar/20 09:11,,,Agile Pilot,,,,,,,,,,"It's necessary to *create new internal* ([~lt112] is aware of these steps) mail addresses and *change an email address* which is used for sending notification from AMS. 
 * expiration_alert@xbid.deutsche-boerse.com - for production environment
 * expiration_alert@xbid-test.deutsche-boerse.com - for other environment 

 ",,ei349,gd553,jy268,lt112,yo218,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,29376000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:40000000ezwv",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 4 (S),,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Mar/20 10:44;lt112;[~zi174]
please provide answers to the following (as it is necessary to fill in in the email creation form):
Who should be the main owner (maintainer)? <name and user_id>
Who else should have access? <names with user_ids>","04/Mar/20 10:46;zi174;[~lt112] thank you for info, we will discuss that on the refinement ","06/Mar/20 10:56;zi174;Hi [~lt112],

please see the inputs for both email addresses:

Main Owner - [~ei349] ei349

Accessible for - [~zi174] zi174, [~gd553] gd553, [~tm431] tm431, [~ub113] ub113, [~radeale] radeale, [~qm925] qm925

 

[~ei349] might you please validate and confirm my proposal,

thank you","06/Mar/20 11:11;gd553;[~zi174] [~ei349] maybe you want 2 people from BusOps.","06/Mar/20 11:40;zi174;[~gd553]

yes, but I believe we will be able to add more people afterwards, this is only for an initial configuration.

 ","10/Mar/20 10:47;lt112;[~ei349] please confirm, it'd be better to deal with this sooner than later, as my email is still figuring as the sender and they don't quite like it.","11/Mar/20 11:15;ei349;Confirmed. I agree that some BOs should have access to this mailbox. Include at least Ana for now. 

Please be aware that my Correct user id is ei349","11/Mar/20 11:24;jy268;Hi Niklas, we can proceed with emails creation.","11/Mar/20 13:07;yo218;why not using our xbid mail domains? Like
 * expiration_alert@xbid.deutsche-boerse.com - for production environment
 * expiration_alert@xbid-test.deutsche-boerse.com - for other environments","11/Mar/20 13:07;yo218;What do you think [~zi174] and [~ei349]?","11/Mar/20 13:13;zi174;Are these mail domains accessible via Outlook and works as normal email addresses (sending, receiving emails etc.) without any issue? I know we have some email users with @xbid-test.deutsche-boerse.com, however we were not able to receive emails from AMS.

 

 ","12/Mar/20 09:20;lt112;[~yo218] [~zi174] we were able to receive emails from AMS. However, we were not able to receive notifications about undelivered emails for some reason.","13/Mar/20 09:58;yo218;I just tried on syt1 and it works like a charm. I [used expiration_alert@xbid-test.deutsche-boerse.com|mailto:used%C2%A0expiration_alert@xbid-test.deutsche-boerse.com] in the configuration and together with [~qo794] we triggered the certification check:
{noformat}
2020-03-13T08:35:44.553Z [io-18080-exec-3] INFO  c.d.e.x.a.m.MailService - Sending certificate expiring reminder email to niklas.albers@deutsche-boerse.com.
2020-03-13T08:35:44.557Z [io-18080-exec-3] WARN  c.d.e.x.a.m.MailService - Encryption DISABLED, email will be sent unencrypted even if matching certificate exists.
2020-03-13T08:35:44.576Z [io-18080-exec-3] INFO  c.d.e.x.a.m.MailService - Email to niklas.albers@deutsche-boerse.com was successfully sent
2020-03-13T08:35:44.577Z [io-18080-exec-3] INFO  c.d.e.x.a.m.MailService - Sending certificate expiring reminder email to fake-email@this-is-for-sure-non-existing-server.com.
2020-03-13T08:35:44.580Z [io-18080-exec-3] WARN  c.d.e.x.a.m.MailService - Encryption DISABLED, email will be sent unencrypted even if matching certificate exists.
2020-03-13T08:35:44.595Z [io-18080-exec-3] INFO  c.d.e.x.a.m.MailService - Email to fake-email@this-is-for-sure-non-existing-server.com was successfully sent
2020-03-13T08:35:44.595Z [io-18080-exec-3] INFO  c.d.e.x.a.m.MailService - Sending certificate expiring reminder email to kamil.nezval@deutsche-boerse.com.
2020-03-13T08:35:44.598Z [io-18080-exec-3] WARN  c.d.e.x.a.m.MailService - Encryption DISABLED, email will be sent unencrypted even if matching certificate exists.
2020-03-13T08:35:44.615Z [io-18080-exec-3] INFO  c.d.e.x.a.m.MailService - Email to kamil.nezval@deutsche-boerse.com was successfully sent {noformat}
One email arrived at my mailbox and two ""email is undeliverable"" messages arrived in the mailbox of [expiration_alert@xbid-test.deutsche-boerse.com. |mailto:used%C2%A0expiration_alert@xbid-test.deutsche-boerse.com]

I was able to forward both messages from the mailbox to my personal email address. Now I am trying to setup an automatic forwarding of the messages to the  people who would like to access those messages. In worst case a cronjob will send the mails every day, but I am pretty sure there will be s smarter solution.

Can I proceed with this approach or do you insist do have central @deutsche-boerse.com accounts?","13/Mar/20 10:24;zi174;Are we 100% sure that these email addresses will work as we need? (sorry for that, but we have some issues with the giant anteater so I would like to avoid every potential obstacle :)) 

 

However, this needs to be discussed with the customer as we agreed on the firstly mentioned email address. [~yo218] might you please share with me where we use the email domain you provided? Some cases which already use that so that this modification makes sense to customer to have one email domain cross XBID? 

Thank you","13/Mar/20 10:38;yo218;We are using those domains for all kind off email communications from and to XBID application","13/Mar/20 12:38;zi174;Ok, I am going to contact the customer and we will see. ","17/Mar/20 10:32;zi174;Hello [~yo218]

the customer confirmed they are ok with our proposal, please implement the email address as you provided :) 
 * expiration_alert@xbid.deutsche-boerse.com - for production environment
 * expiration_alert@xbid-test.deutsche-boerse.com - for other environments

 

thank you ","19/Mar/20 09:11;yo218;Changed the address for Simu as discussed. Production email is also prepared in inventory",,,,,,,,,,,,,,
Email encryption for password and certificate notification,XP-2689,92839,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,zi174,zi174,04/Mar/20 10:07,04/Aug/20 16:01,22/Feb/21 13:21,11/Mar/20 16:18,,,Agile Pilot,,,,,,,,,,"According to triplet discussion and customer's request, the would like to have a possibility to encrypt all emails send by AMS (for passwords expiration warnings and certificate expiration warnings). A user needs to have possibility to decide if the email is encrypted or not.

 

+The warning is an automatic email+ sent to SMTP e-mail address defined in XBID when the user/party using the certificate is created (where the password is sent). +The warning might be encrypted+
 * The possibility is given to decide whether the warning is sent in an encrypted or non-encrypted way _(similar to what is already in place for the email received in case of password reset)_",,ei349,od044,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Mar/20 15:37;od044;CXNORT01-user-cer-receive-decrypted.txt;https://jira.deutsche-boerse.com/secure/attachment/81392/CXNORT01-user-cer-receive-decrypted.txt","11/Mar/20 15:37;od044;CXNORT01-user-cert-encrypted.eml;https://jira.deutsche-boerse.com/secure/attachment/81393/CXNORT01-user-cert-encrypted.eml","11/Mar/20 15:37;od044;NCG2-sm-user-email-encypted.txt;https://jira.deutsche-boerse.com/secure/attachment/81391/NCG2-sm-user-email-encypted.txt","11/Mar/20 15:37;od044;NCG2-sm-user-email-receive-decrypted.txt;https://jira.deutsche-boerse.com/secure/attachment/81390/NCG2-sm-user-email-receive-decrypted.txt","11/Mar/20 15:37;od044;amp-encrypted.eml;https://jira.deutsche-boerse.com/secure/attachment/81395/amp-encrypted.eml","11/Mar/20 15:37;od044;apm-receive-decrypted.txt;https://jira.deutsche-boerse.com/secure/attachment/81394/apm-receive-decrypted.txt","11/Mar/20 16:17;od044;cxdbsa01-pass-decrypted.txt;https://jira.deutsche-boerse.com/secure/attachment/81399/cxdbsa01-pass-decrypted.txt","11/Mar/20 16:17;od044;cxdbsa01-pass-encrypted.eml;https://jira.deutsche-boerse.com/secure/attachment/81400/cxdbsa01-pass-encrypted.eml","11/Mar/20 15:31;od044;user-mail10-private.crt;https://jira.deutsche-boerse.com/secure/attachment/81381/user-mail10-private.crt","11/Mar/20 15:30;od044;user-mail10.crt;https://jira.deutsche-boerse.com/secure/attachment/81380/user-mail10.crt",,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,29980800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:40000000ezwu",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 4 (S),,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Mar/20 15:48;ei349;[~zi174]

please note that this feature is not possible for the parties certificate - implication: recipient of the notification would need to have all parties private certificates to decrypt the message. ","11/Mar/20 15:39;od044;Test passed on docker R2.0.33-SNAPSHOT
- public test cert:  [^user-mail10.crt] 
- private test cert:  [^user-mail10-private.crt] 
- test with openssl e.g:
{code}
openssl smime -decrypt -in NCG2-sm-user-email.txt -out NCG2-sm-user-email-receive.txt -recip user-mail10.crt -inkey user-mail10-private.crt
{code}

Some example of encrypted email and their decrypted email contents:
[^NCG2-sm-user-email-encypted.txt] ->  [^NCG2-sm-user-email-receive-decrypted.txt]  
[^CXNORT01-user-cert-encrypted.eml] - > [^CXNORT01-user-cer-receive-decrypted.txt]   
[^amp-encrypted.eml]  -> [^apm-receive-decrypted.txt]
 [^cxdbsa01-pass-encrypted.eml]  ->  [^cxdbsa01-pass-decrypted.txt] 


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
XBID CLONE: NTC Scheduling function of NTC Preview Window does not function with 30M resolution,XP-2680,92665,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,28/Feb/20 10:49,31/Aug/20 15:39,22/Feb/21 13:21,05/Mar/20 10:50,Agile Pilot,,Agile Pilot,,CMM,,,,,,,,"*Preconditions:* Default capacity published; preview functionality enabled; NTC uploaded; NTC file scheduled for publication on delivery day

*Steps to reproduce*
 * Upload a valid, unpublished NTC file
 * Press _Preview NTC_
 * Choose today’s date (27-02-2020) and a time in the future
 * Schedule the publication
 * Wait until scheduled time

 

(/)*Expected result:* 
 * Upon scheduling, system displays message about publication
 * Upon reaching scheduled time; changed NTC values are updated

(x) *Current result:* 
 * Upon scheduling, system displays no message about publication
 * Upon reaching scheduled time; nothing happens in the screen and new NTC is not taken into account

(i) *Environment details*
 * CMM Simu 1; capacity overview window
 * AMP-RTE (DE-FR) Interconnector
 * User XBRTE010
 * Occurence: uploaded NTC at 17:44 - scheduled publish for 17:50 (27-02-2020)

(i) Reqtest ID: 23",,qo794,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4962,,,,,,,,,,,,,,,,,"28/Feb/20 10:49;radeale;10VAMP-ECP-MC-PY_10V000000000020P_NTC_813ba767-0053-4a9a-a651-c3318763a74513.xml;https://jira.deutsche-boerse.com/secure/attachment/80922/10VAMP-ECP-MC-PY_10V000000000020P_NTC_813ba767-0053-4a9a-a651-c3318763a74513.xml","28/Feb/20 10:49;radeale;No_Publish.PNG;https://jira.deutsche-boerse.com/secure/attachment/80923/No_Publish.PNG",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,30585600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2382,,,,,,,,,,,,,,27/Feb/20 18:31,,,,,,,,,,,,,,,,,,,,,"1|y0aclk:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 3,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,Simulation,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Feb/20 11:55;qo794;{code:title=simu_cmi.log}
2020-02-27T16:46:28.830Z [sumerExecutor-2][][] TRACE c.d.a.c.M.incomingInfo - Incoming message props: MessageProperties [headers={timestamp_in_ms=1582821988818, spring_request_return_correlation=11573, spring_listener_return_correlation=08208846-f54c-4dec-b666-15e887675f9c, cmm.user.id=XBRTE010, __TypeId__=com.deutscheboerse.energy.cmminteg.ext.req.capaci
typreview.ScheduleNtcPubRequest}, timestamp=Thu Feb 27 17:46:28 CET 2020, correlationId=11573, replyTo=cmminteg.requests.cmi.reply2, contentType=application/json, contentLength=0, receivedDeliveryMode=PERSISTENT, priority=0, redelivered=false, receivedExchange=, receivedRoutingKey=cmminteg.requests.cmi, deliveryTag=7168, consumerTag=amq.ctag-L3ft8z7NrX3YH
kYWXa0P-Q, consumerQueue=cmminteg.requests.cmi]
2020-02-27T16:46:28.830Z [sumerExecutor-2][][] TRACE c.d.a.c.M.incomingMessage - Incoming message body: {""scheduledAt"":1582822200000,""fileIds"":[29803109]}
2020-02-27T16:46:28.855Z [uestExecutor-14][][] INFO  c.d.e.c.c.NtcPublicationScheduler - NTC file 10VAMP-ECP-MC-PY_10V000000000020P_NTC_813ba767-0053-4a9a-a651-c3318763a74513.xml(interconnectorId=47) has been scheduled to run at 2020-02-27T17:50:00.000+01:00
2020-02-27T16:46:28.855Z [executor-10][][] TRACE c.d.a.c.M.outcomingInfo - Outcoming message props: MessageProperties [headers={cmm.user.id=SYSTEM, __TypeId__=com.deutscheboerse.energy.m7.cmi.event.FileScheduledEvent}, userId=cmminteg-app, contentType=application/json, contentEncoding=UTF-8, contentLength=569, deliveryMode=PERSISTENT, priority=0, delivery
Tag=0]
2020-02-27T16:46:28.855Z [executor-10][][] TRACE c.d.a.c.M.outcomingMessage - Outcoming message body: {""fileData"":{""fileId"":29803109,""partyId"":""10XDE-RWENET---W"",""borderId"":37,""type"":""com.deutscheboerse.energy.cmminteg.filetype.cim.NTC"",""typeName"":""NTC"",""mimeType"":""text/xml"",""lastUpdateTime"":1582821893972,""fileName"":""10VAMP-ECP-MC-PY_10V000000000020P_NTC_
813ba767-0053-4a9a-a651-c3318763a74513.xml"",""version"":13,""description"":"""",""optional"":true,""conditional"":false,""priority"":9,""fileCategory"":""CAPACITY"",""directionScope"":""BOTH"",""fileInterval"":""1582758000000-1582844400000"",""discarded"":false,""mandatory"":false},""scheduledAt"":1582822200000,""filesDeliveryDay"":[2020,2,27]}
2020-02-27T16:46:28.856Z [sumerExecutor-2][][] TRACE c.d.a.c.M.outcomingInfo - Outcoming message props: MessageProperties [headers={cmm.user.id=XBRTE010, __TypeId__=com.deutscheboerse.energy.cmminteg.ext.req.SuccessResponse}, contentType=application/json, contentEncoding=UTF-8, contentLength=15, deliveryMode=PERSISTENT, priority=0, deliveryTag=0]
2020-02-27T16:46:28.856Z [sumerExecutor-2][][] TRACE c.d.a.c.M.outcomingMessage - Outcoming message body: {""status"":""OK""}

2020-02-27T16:50:00.031Z [executor-11][][] ERROR o.q.core.JobRunShell - Job NTC_PUBLICATION.47@2020-02-27 threw an unhandled Exception: 
java.lang.IllegalStateException: connectorId must not be null
        at com.deutscheboerse.energy.cmminteg.capacitypreview.NtcPublicationJob.execute(NtcPublicationJob.kt:38)
        at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
        at java.lang.Thread.run(Thread.java:748)
2020-02-27T16:50:00.031Z [executor-11][][] ERROR o.q.core.ErrorLogger - Job (NTC_PUBLICATION.47@2020-02-27 threw an exception.
org.quartz.SchedulerException: Job threw an unhandled exception.
        at org.quartz.core.JobRunShell.run(JobRunShell.java:213)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
        at java.lang.Thread.run(Thread.java:748)
Caused by: java.lang.IllegalStateException: connectorId must not be null
        at com.deutscheboerse.energy.cmminteg.capacitypreview.NtcPublicationJob.execute(NtcPublicationJob.kt:38)
        at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
        ... 3 common frames omitted
{code}","28/Feb/20 12:01;qo794;h2. Root cause
An invalid IC detection in scheduler for NTCs configured on common ATC Border.

*Already fixed on 21.2. in a non-released version.*","05/Mar/20 10:50;radeale;Test OK, Docker. The cause of the bug in this case was that the file uploaded was for the border, not for an IC, so the updated *Steps to reproduce* could be:

# Have a border with an inbound NTC configuration for the border, not IC (e.g. FR-DE)
# Upload a valid, unpublished NTC file for the border
# Press Preview NTC
# Choose today’s date and time + a few minutes more
# Schedule the publication
# Wait until scheduled time

+Expected result+: The file is published correctly.

The fix is ready and can be deployed to the SIMU when requested.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[Capacity Preview] Schedule publish via preview screen leads to invalid reply from CMI,XP-2677,92622,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,27/Feb/20 09:44,31/Aug/20 15:39,22/Feb/21 13:21,02/Mar/20 15:44,,,3.1.0,,Capacity,,,,,,,,"Update:

Preconditions: Preview Functionality is enabled for IC (Elia/TTN) / Initial Capacity has been published (either via Default Capacity or publish)

*Step 1*: Upload unpublished NTC and CBS file for IC Elia/TTN (Attached as CBS/NTC for 26-02-2020)

*Step 2:* Open preview functionality for 26-02-2020

*Step 3:* Schedule NTC publish for 20 minutes later than current timing

*Step 4:* Check if NTC is published after confirming the schedule publication

 

(!) *Expected result:* NTC is published at scheduled timing

(x)*Current result:* E{color:#172b4d}rror message occurs saying that an invalid reply comes from CMI (see screenshot - Invalid reply from CMI){color}

 

(i) *Environment details:* SIMU - CMM - User: XBTTN010 

 

(i) *Test case ID from ReqTest :* ID 23

 ----

I've enabled one of the interconnectors (Elia/TTN) and I've uploaded a CBS/NTC file for that IC, then I'm opening the preview screen, and I'm setting a time to have the NTC published in like 20 minutes from now. Then I receive the error message that an invalid reply comes from CMI. 

See screenshot: TC02, attached. 

I've also added the CBS/NTC file which I've used to schedule a publication. 

For additional information including the files and screenshot please look to XBID-4956.",,od044,qo794,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,30672000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2382,,,,,,,,,,,,,,27/Feb/20 09:44,,,,,,,,,,,,,,,,,,,,,"1|y0acc8:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 3,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,Simulation,,,,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Feb/20 14:55;qo794;{code:title=simu_cmi.log}
2020-02-26T10:14:10.525Z [sumerExecutor-2][][] TRACE c.d.a.c.M.incomingInfo - Incoming message props: MessageProperties [headers={timestamp_in_ms=1582712050522, spring_request_return_correlation=8247, spring_listener_return_correlation=08208846-f54c-4dec-b666-15e887675f9c, cmm.user.id=XBTTN010, __TypeId__=com.deutscheboerse.energy.cmminteg.ext.req.capacitypreview.ScheduleNtcPubRequest}, timestamp=Wed Feb 26 11:14:10 CET 2020, correlationId=8247, replyTo=cmminteg.requests.cmi.reply2, contentType=application/json, contentLength=0, receivedDeliveryMode=PERSISTENT, priority=0, redelivered=false, receivedExchange=, receivedRoutingKey=cmminteg.requests.cmi, deliveryTag=5435, consumerTag=amq.ctag-L3ft8z7NrX3YHkYWXa0P-Q, consumerQueue=cmminteg.requests.cmi]
2020-02-26T10:14:10.525Z [sumerExecutor-2][][] TRACE c.d.a.c.M.incomingMessage - Incoming message body: {""scheduledAt"":1582712940000,""fileIds"":[29802514]}
2020-02-26T10:14:10.542Z [uestExecutor-11][][] ERROR c.d.e.c.c.a.RequestHandlerErrorAspect - Error while processing of: com.deutscheboerse.energy.cmminteg.ext.req.capacitypreview.ScheduleNtcPubRequest@3035a6ce
java.lang.NullPointerException: null
        at com.deutscheboerse.energy.cmminteg.service.ExpectedFilesConfigurationService.lambda$getConditionalFileConfigurations$1(ExpectedFilesConfigurationService.java:98)
        at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:174)
        at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)
        at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
        at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
        at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)
        at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
        at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)
        at com.deutscheboerse.energy.cmminteg.service.ExpectedFilesConfigurationService.getConditionalFileConfigurations(ExpectedFilesConfigurationService.java:100)
        at com.deutscheboerse.energy.cmminteg.service.ExpectedFilesConfigurationService.getExpectedFileConfigurationForDay(ExpectedFilesConfigurationService.java:65)
        at com.deutscheboerse.energy.cmminteg.service.ExpectedFilesConfigurationService$$FastClassBySpringCGLIB$$b9997fc3.invoke(<generated>)
        at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:746)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
        at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
        at com.deutscheboerse.logging.sla.performance.PerformanceAroundAdvice.proceed(PerformanceAroundAdvice.java:26)
        at com.deutscheboerse.logging.sla.performance.PerformanceAroundAdvice.proceed(PerformanceAroundAdvice.java:13)
        at com.deutscheboerse.logging.sla.performance.AbstractPerformanceAroundAdvice.invoke(AbstractPerformanceAroundAdvice.java:20)
        at com.deutscheboerse.logging.sla.performance.PerformanceAroundAdvice.aroundAdvice(PerformanceAroundAdvice.java:40)
        at sun.reflect.GeneratedMethodAccessor117.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
        at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
        at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
        at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
        at com.deutscheboerse.energy.cmminteg.service.ExpectedFilesConfigurationService$$EnhancerBySpringCGLIB$$2963c5c.getExpectedFileConfigurationForDay(<generated>)
        at com.deutscheboerse.energy.cmminteg.capacitypreview.NtcPublicationScheduler.verifyThisIsLatestFile(NtcPublicationScheduler.kt:136)
        at com.deutscheboerse.energy.cmminteg.capacitypreview.NtcPublicationScheduler.schedule(NtcPublicationScheduler.kt:70)
        at com.deutscheboerse.energy.cmminteg.service.RequestHandler.handle(RequestHandler.java:284)
        at com.deutscheboerse.energy.cmminteg.service.RequestHandler$$FastClassBySpringCGLIB$$e90bc36.invoke(<generated>)
        at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:746)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
2020-02-26T10:14:10.542Z [sumerExecutor-2][][] TRACE c.d.a.c.M.outcomingInfo - Outcoming message props: MessageProperties [headers={cmm.user.id=XBTTN010, __TypeId__=com.deutscheboerse.energy.cmminteg.ext.req.ErrorResponse}, contentType=application/json, contentEncoding=UTF-8, contentLength=2, deliveryMode=PERSISTENT, priority=0, deliveryTag=0]
{code}","02/Mar/20 10:21;qo794;h2. Root cause
A party is empty (null) for conditional files, therefore the NPE, a sender must be taken.","02/Mar/20 15:44;radeale;Test OK, XBID R2.0.31-SNAPSHOT, Docker.","04/Mar/20 10:22;radeale;Tested also by Duc:

Test passed on R2.0.31
- NTC conditional configuration can be scheduled and publish properly. )",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Password expiration testing - date modification - US-XBID-4876,XP-2656,92438,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,zi174,zi174,zi174,24/Feb/20 13:59,31/Aug/20 15:38,22/Feb/21 13:21,08/Apr/20 13:33,,,Agile Pilot,,,,,,,,,,"Please change an expiration date of password for the users in attachment in LDAP on SIMu environment due to password warning testing. 

 

*The date is in format:*

*YYYY-MM-DD*",,iv732,yo218,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Mar/20 11:32;zi174;User_list_to_TO.xlsx;https://jira.deutsche-boerse.com/secure/attachment/82023/User_list_to_TO.xlsx","04/Mar/20 17:24;yo218;expiration1.ldif;https://jira.deutsche-boerse.com/secure/attachment/81094/expiration1.ldif","09/Mar/20 13:02;yo218;expiration_simu_090320.ldif;https://jira.deutsche-boerse.com/secure/attachment/81245/expiration_simu_090320.ldif","09/Mar/20 13:02;yo218;expiration_simu_090320.ldif.log;https://jira.deutsche-boerse.com/secure/attachment/81244/expiration_simu_090320.ldif.log","11/Mar/20 15:36;yo218;simu_expiration_110320.ldif;https://jira.deutsche-boerse.com/secure/attachment/81389/simu_expiration_110320.ldif","11/Mar/20 15:36;yo218;simu_expiration_110320.ldif.log;https://jira.deutsche-boerse.com/secure/attachment/81388/simu_expiration_110320.ldif.log","12/Mar/20 16:49;yo218;simu_expiration_120320.ldif;https://jira.deutsche-boerse.com/secure/attachment/81457/simu_expiration_120320.ldif","12/Mar/20 16:49;yo218;simu_expiration_120320.ldif.log;https://jira.deutsche-boerse.com/secure/attachment/81456/simu_expiration_120320.ldif.log","13/Mar/20 20:40;yo218;simu_expiration_130320.ldif;https://jira.deutsche-boerse.com/secure/attachment/81524/simu_expiration_130320.ldif","13/Mar/20 20:40;yo218;simu_expiration_130320.ldif.log;https://jira.deutsche-boerse.com/secure/attachment/81523/simu_expiration_130320.ldif.log","16/Mar/20 12:46;yo218;simu_expiration_160320.ldif;https://jira.deutsche-boerse.com/secure/attachment/81552/simu_expiration_160320.ldif","16/Mar/20 12:46;yo218;simu_expiration_160320.ldif.log;https://jira.deutsche-boerse.com/secure/attachment/81553/simu_expiration_160320.ldif.log","17/Mar/20 14:25;yo218;simu_expiration_170320.ldif;https://jira.deutsche-boerse.com/secure/attachment/81631/simu_expiration_170320.ldif","17/Mar/20 14:25;yo218;simu_expiration_170320.ldif.log;https://jira.deutsche-boerse.com/secure/attachment/81632/simu_expiration_170320.ldif.log","23/Mar/20 09:49;yo218;simu_expiration_230320.ldif;https://jira.deutsche-boerse.com/secure/attachment/81774/simu_expiration_230320.ldif","23/Mar/20 09:49;yo218;simu_expiration_230320.ldif.log;https://jira.deutsche-boerse.com/secure/attachment/81773/simu_expiration_230320.ldif.log","24/Mar/20 12:35;yo218;simu_expiration_240320.ldif;https://jira.deutsche-boerse.com/secure/attachment/81831/simu_expiration_240320.ldif","24/Mar/20 12:35;yo218;simu_expiration_240320.ldif.log;https://jira.deutsche-boerse.com/secure/attachment/81832/simu_expiration_240320.ldif.log","25/Mar/20 12:30;yo218;simu_expiration_250320.ldif;https://jira.deutsche-boerse.com/secure/attachment/81865/simu_expiration_250320.ldif","25/Mar/20 12:30;yo218;simu_expiration_250320.ldif.log;https://jira.deutsche-boerse.com/secure/attachment/81864/simu_expiration_250320.ldif.log","26/Mar/20 12:54;yo218;simu_expiration_260320.ldif;https://jira.deutsche-boerse.com/secure/attachment/81911/simu_expiration_260320.ldif","26/Mar/20 12:54;yo218;simu_expiration_260320.ldif.log;https://jira.deutsche-boerse.com/secure/attachment/81912/simu_expiration_260320.ldif.log","27/Mar/20 16:36;yo218;simu_expiration_270320.ldif;https://jira.deutsche-boerse.com/secure/attachment/82009/simu_expiration_270320.ldif","27/Mar/20 16:36;yo218;simu_expiration_270320.ldif.log;https://jira.deutsche-boerse.com/secure/attachment/82008/simu_expiration_270320.ldif.log","30/Mar/20 13:11;iv732;simu_expiration_300320.ldif.log;https://jira.deutsche-boerse.com/secure/attachment/82035/simu_expiration_300320.ldif.log","26/Feb/20 14:34;yo218;simu_expiration_4.ldif;https://jira.deutsche-boerse.com/secure/attachment/80816/simu_expiration_4.ldif","28/Feb/20 10:48;yo218;simu_expiration_6.ldif;https://jira.deutsche-boerse.com/secure/attachment/80921/simu_expiration_6.ldif","02/Mar/20 09:46;yo218;simu_expiration_7.ldif;https://jira.deutsche-boerse.com/secure/attachment/80943/simu_expiration_7.ldif","03/Mar/20 14:38;yo218;simu_expiration_8.ldif;https://jira.deutsche-boerse.com/secure/attachment/81023/simu_expiration_8.ldif",,,,,,sw455,,,,,,,,,,,,,,,28425600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0abbs:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Feb/20 16:45;iv732;Done","26/Feb/20 14:35;yo218;Updated the values using the attached ldif script","27/Feb/20 16:07;yo218;all passwords have been extended for one day","28/Feb/20 10:52;yo218;updated it as requested","02/Mar/20 09:46;yo218;updated as requested","03/Mar/20 14:38;yo218;done","04/Mar/20 17:24;yo218;created the ldif with the new tool from [~lt112] and imported it","11/Mar/20 15:36;yo218;executed updated ldif file","13/Mar/20 20:41;yo218;Friday updates are in place","23/Mar/20 09:51;yo218;On Friday I changed the values for the backend IP for cmi-web1 and spm-web1 to use dow1 host instead of enq1. Firewall rule is missing for that host, I raised it and started discussion with GIS","30/Mar/20 12:51;iv732;password set to expire on Apr 1, 2020 1:00 AM CEST",,,,,,,,,,,,,,,,,,,,,
Encrypted emails sent from Giant Anteater,XP-2637,92100,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,ei349,ei349,12/Feb/20 14:40,13/Aug/20 20:01,22/Feb/21 13:21,23/Mar/20 09:33,,,Agile Pilot,,,,,,,,,,,,ei349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,32400000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0aau7:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Analyze rounding in routing library,XP-2634,92085,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,eh941,eh941,eh941,12/Feb/20 10:42,31/Aug/20 15:37,22/Feb/21 13:21,14/Feb/20 10:25,,,3.1.0,,,,,,,,,,,,eh941,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2566,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,32313600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1914,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0a994:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 2,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Feb/20 10:25;eh941;Analysis uploaded in XP-2566",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
US - Electronic Handshake - Preview Capacity Confirmation (C05-2),XP-2633,92007,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,qo794,radeale,radeale,10/Feb/20 12:03,13/Aug/20 20:10,22/Feb/21 13:21,19/Mar/20 11:23,,,Agile Pilot,,Capacity,,,,,C05-2,,,"Preview Capacity Confirmation for the Electronic Handshake functionality.

The confirmation file:
https://jira.deutsche-boerse.com/secure/attachment/80568/iec62325-451-2-confirmation_v5_0.xsd

Please find the newest file to be used as a basis for the refinement in XBID-4909: https://jira.deutsche-boerse.com/secure/attachment/81566/81566_US+XBID-4881+-+Electronic+handshake_v0.6.docx",,qo794,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4909,,,,,,,"13/Feb/20 15:28;radeale;confirmation.txt;https://jira.deutsche-boerse.com/secure/attachment/80351/confirmation.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,29376000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2382,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0a9h9:zi",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 4 (S),,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2633,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Feb/20 13:45;radeale;We suggest to use iec62325-451-2-confirmation_v5_0.xsd. The acknowledgement is only to be used to confirm the exchange of the PCF/PCC files and not to confirm or reject the content of the PCF.

Regarding the content the use of the received_MarketDocument.mRid is fine.

Regarding the reason codes we suggest the following

A06 = Schedule accepted
A08 = Schedule rejected
Any other reason means the file is not published, but is not discarded (if XBID received a newer valid and relevant NTC version, the previous version is discarded)","10/Feb/20 13:45;radeale;Dear Chris,

thanks for the reply. I summarized the points together before I add them to the US document, please confirm.

+_PCC_+
Confirmation of the PCF.
# File format used to be based on _iec62325-451-2-confirmation_v5_0.xsd_. _received_MarketDocument.mRID_ refers to the PCF being approved/discarded. (/)
# The reason codes to be used:
-- A06 = Schedule accepted
-- A08 = Schedule rejected (the file is discarded)
-- Any other reason means the file is not published, but is not discarded (if XBID received a newer valid and relevant NTC version, the previous version is discarded) (/)

An open point:
- There can be a list of reasons in the file, how that should be processed by XBID?
-- Ignore a file containing more than one reason
-- Process only the first reason and ignore the rest

Generally we recommend MSD generates a test file and provides it to XBID before the development of this US can begin.

Best regards
Alexandr

The confirmation file:
https://jira.deutsche-boerse.com/secure/attachment/80252/iec62325-451-2-confirmation_v5_0.xsd","19/Mar/20 11:23;qo794;Follow up jira for further testing: XP-2762",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
US - Electronic Handshake - Preview Capacity File (C05-1),XP-2632,92006,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,uv683,radeale,radeale,10/Feb/20 12:02,13/Aug/20 20:04,22/Feb/21 13:21,18/Mar/20 13:48,,,Agile Pilot,,Capacity,,,,,C05-1,,,"Preview Capacity File for the Electronic Handshake functionality.

Please find the newest file to be used as a basis for the refinement in https://jira.deutsche-boerse.com/secure/attachment/81566/81566_US+XBID-4881+-+Electronic+handshake_v0.6.docx

+ECP message type:+
*PCF: MRC-XBID-A31A49-516*
PCC: MRC-XBID-A31A49-517
ACKs are constructed in the standard way the ECP message type being enhanced by ""-ACK"".",,hj444,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Mar/20 10:11;hj444;20200317_PCF_AMP-APG_001.xml;https://jira.deutsche-boerse.com/secure/attachment/81538/20200317_PCF_AMP-APG_001.xml","16/Mar/20 10:09;hj444;A0001_AMP_APG_NTC15min_200317_v2.xml;https://jira.deutsche-boerse.com/secure/attachment/81537/A0001_AMP_APG_NTC15min_200317_v2.xml","16/Mar/20 13:22;hj444;A0001_DE_FR_NTC30min_200317_v7.xml;https://jira.deutsche-boerse.com/secure/attachment/81563/A0001_DE_FR_NTC30min_200317_v7.xml","16/Mar/20 14:31;hj444;DE-FR_PCF1.png;https://jira.deutsche-boerse.com/secure/attachment/81573/DE-FR_PCF1.png","06/Mar/20 11:00;radeale;iec62325-451-3-capacity_v8_0.xsd;https://jira.deutsche-boerse.com/secure/attachment/81172/iec62325-451-3-capacity_v8_0.xsd",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,29635200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2382,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0adba:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 4,,,,,,,,,,,,,,,,13.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Feb/20 12:18;radeale;_From Chris:_

Ad 1. We suggest to use iec62325-451-3-capacity_v8_0.xsd with processType A49 = Intraday Capacity Determination.

Ad 2. We agree

Ad 3. We agree and we have the following suggestions for the businessType

for newNTC A27 (NTC)
 for newATC A26 (ATC)
 for deltaNTC A31 (Offered Capacity) but we are still looking for a more suitable code
 Ad 4. We agree 

Ad 5. We agreed. This can be handled at the messagelevel using received_MarketDocument.mRID and received_MarketDocument.revisionNumber

Ad 6. Filling for the mandatory attributes is quit obvious, especially when using the capacity_MarketDocument. Any other attribute we can leave empty or discuss any proposed filling.","10/Feb/20 12:18;radeale;Dear Chris,

thanks for the reply. I summarized the points together before I add them to the US document, please confirm.

+*PCF*+
 The PCF holds time series per combination of direction and type of value (new NTC, new ATC, delta NTC).
 # The file format to be used is iec62325-451-3-capacity_v8_0.xsd with processType A49 = Intraday Capacity Determination. (/)
 # PCF mRID to be created as a hash from the following elements and in accordance to the practice already used and described in DFS800, chapter _4.1.14 Document Identifier_:
 -- Indicator of the file type - PCF
 -- The border/IC or area to which it applies - e.g. AMP-TTN
 -- EIC of the receiving party - e.g. 10X1001A1001A361
 -- Delivery date covered by the file in YYYYMMDD format, e.g. 20201128
 -- Version of the NTC file being referred to, e.g. 2 (/)
 Example: MD5 hashed value of PCF_AMP-TTN_10X1001A1001A361_20201128_2
 # Contains three time series per direction - newNTC, newATC or deltaNTC. For each TimeSeries its type is to be stored in the _businessType_ element with the following values:
-- newNTC A27 (NTC) (/)
-- newATC A26 (ATC) (/)
-- deltaNTC A31 (Offered Capacity) - this is still under investigation by the MSD members (?)
 # The TimeSeries mRID is enhanced also by adding the type of the TS (newNTC, newATC or deltaNTC) as a new additional attribute (as specified in DFS800, chapter _4.1.13 Time series Identifier_) (/)
 # Contains the mRID of the NTC file being referred to - handled at the messagelevel using received_MarketDocument.mRID and received_MarketDocument.revisionNumber (/)
 # All the remaining fields not explicitly mentioned to be filed based on the _capacity_MarketDocument_ standard, in case of doubts the values can left empty or discussed (/)

Best regards
Alexandr","25/Feb/20 10:05;radeale;Kamil,

please take a look and either put your comments in or make an opinion and we can discuss this later on.

 [^US XBID-4881 - Electronic handshake_v0.3.docx] 

Thanks
Alexandr","03/Mar/20 16:41;radeale;Please find the newest file to be used as a basis for the refinement in XBID-4909.","16/Mar/20 10:11;hj444;Uploaded NTC file [^A0001_AMP_APG_NTC15min_200317_v2.xml] 
generated PCF file :
# Expected attribute processType A49 = Intraday Capacity Determination
##   Actual in generated xml process.processType A15
 [^20200317_PCF_AMP-APG_001.xml] ","16/Mar/20 10:40;hj444;??? from document mRID:
{code}The mRID of the message is to be created as a hash from the following elements and in accordance to the practice already used and described in DFS800, chapter 4.1.14 Document Identifier:
-	Indicator of the file type – PCF
-	The border/IC or area to which it applies - e.g. AMP-TTN
-	EIC of the receiving party - e.g. 10X1001A1001A361
-	Delivery date covered by the file in YYYYMMDD format, e.g. 20201128
-	Version of the NTC file being referred to, e.g. 2
Example: MD5 hashed value of PCF_AMP-TTN_10X1001A1001A361_20201128_2 {code}


This will be clarified with Alex and verified by Chris","16/Mar/20 11:33;radeale;Janette, regarding the document ID mRID, please see the latest discussion in https://jira.deutsche-boerse.com/browse/XBID-4909 as well as the updated US document (in this ticket description).","16/Mar/20 12:08;hj444;PCF border configuration - file is not generated.
* DE-FR commonATC 
* PCF configured for border configuration+AMP-RTE interconnector configuration
* File is visible at GUI TSO Admin download tab for both interconnectors - leading (AMP-RTE), nonleading (TNG-RTE)
* NTC file succesfully uploaded 
* _PCF generated for AMP-RTE configuration_
* _PCF not generated for border configuration_
retested - OK - file is gnerated, 
when NTC Sender == PCF Receiver
",,,,,,,,,,,,,,,,,,,,,,,,
Prepare the demo for sprint 2,XP-2628,91899,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,eh941,ei349,ei349,06/Feb/20 15:25,13/Aug/20 19:45,22/Feb/21 13:21,20/Feb/20 15:34,,,3.1.0,,,,,,,,,,,,ei349,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,32918400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2382,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:40000000ez9",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 2,Alpha Sprint 3 (S),,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[US02] Deployment,XP-2627,91898,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,yo218,ei349,ei349,06/Feb/20 15:24,13/Aug/20 19:45,22/Feb/21 13:21,20/Feb/20 15:27,,,3.1.0,,,,,,,,,,,,ei349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,32918400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2382,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:40000000ezws9",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 2 (S),HOT Sprint 3,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
US04/CR018 - Scheduling - Preview Function before Publish Capacity,XP-2626,91897,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,od044,jj069,ei349,06/Feb/20 15:13,13/Aug/20 19:40,22/Feb/21 13:21,05/Mar/20 10:43,,,3.1.0,,,,,,,,,,"Find the most recent version of the specification here:

https://jira.deutsche-boerse.com/secure/attachment/79959/US%20XBID-4880%20-%20Capacity%20preview%20window_v0.81_DBAG.docx",,ei349,od044,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,30585600,,,,,,,,,,XP-2382,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0aa4c:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 2,HOT Sprint 3,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2626-2.0.25.x,XP-2658,XP-PULL-JOB,XP-PULLS-TEST-XBID,develop,xbid-2.0.25.x,master-xbid-2.0.25.x,XP-PULL-JOB-2,master,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Mar/20 10:43;od044;Test passed ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
US04/CR018 - RefData - Preview Function before Publish Capacity,XP-2625,91896,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,radeale,jj069,ei349,06/Feb/20 15:13,13/Aug/20 19:41,22/Feb/21 13:21,19/Feb/20 16:33,,,3.1.0,,,,,,,,,,"Find the most recent version of the specification here:

https://jira.deutsche-boerse.com/secure/attachment/79959/US%20XBID-4880%20-%20Capacity%20preview%20window_v0.81_DBAG.docx",,ei349,jy268,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Feb/20 16:56;radeale;screenshot-1.png;https://jira.deutsche-boerse.com/secure/attachment/80487/screenshot-1.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,31795200,,,,,,,,,,XP-2382,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:40000000ezws",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 2 (S),,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Feb/20 11:18;radeale;Some testing notes:

- Change the tooltip to ""Enables the Preview functionality.""
- Please add the Preview configuration visibility also to the Interconnector Configurations overview as a last column.

Thanks,
Alexandr","17/Feb/20 15:18;jy268;Changes implemented, ready for testing.","17/Feb/20 16:56;radeale;Hi Michal,

nice job, please also add the option to the _Interconnector Configurations_ as the last column.

Thanks,
Alexandr

 !screenshot-1.png! ","19/Feb/20 14:26;jy268;Implemented in XP-2626-integration-to-ui branch, please test and close.","19/Feb/20 16:33;radeale;Test OK in the branch, tested in Docker.",,,,,,,,,,,,,,,,,,,,,,,,,,,
Create new AMS DB for SYT1,XP-2618,91828,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,jy268,jy268,jy268,05/Feb/20 12:55,04/Aug/20 16:02,22/Feb/21 13:21,05/Feb/20 15:48,,,Agile Pilot,,,,,,,,,,"* create new xbsyt1ams DB with schema
* create ams users in xbsyt1ams: app, dev. (admin user for flyway execution during ansible deployment?)
* readonly access to ams user for: xbsyt1cor and xbsyt1spm DBs

Please provide passwords.",,jy268,qo794,yo218,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Feb/20 10:39;qo794;application.yml;https://jira.deutsche-boerse.com/secure/attachment/80201/application.yml",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,33004800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:4000000000000000003",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 1,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Feb/20 13:13;yo218;Proposing the following commands:
{noformat}
CREATE ROLE       xbsyt1ams WITH LOGIN;
CREATE DATABASE   xbsyt1ams WITH OWNER         xbsyt1ams;
ALTER  DATABASE   xbsyt1ams SET SEARCH_PATH TO xbsyt1ams;
CREATE ROLE uapp01xbsyt1ams WITH LOGIN;
CREATE ROLE udev01xbsyt1ams WITH LOGIN;

CREATE SCHEMA xbsyt1ams AUTHORIZATION xbsyt1ams;
DROP SCHEMA public;

ALTER ROLE xbsyt1ams WITH PASSWORD 'pw3DBAxbsyt1ams';
ALTER ROLE udev01xbsyt1ams WITH PASSWORD 'TESTdev01xbsyt1ams';
ALTER ROLE uapp01xbsyt1ams WITH PASSWORD 'nFk2nA_:Y!';

ALTER DEFAULT PRIVILEGES IN SCHEMA xbsyt1ams GRANT SELECT, INSERT, UPDATE, DELETE ON TABLES TO uapp01xbsyt1ams;
ALTER DEFAULT PRIVILEGES IN SCHEMA xbsyt1ams GRANT USAGE ON SEQUENCES TO uapp01xbsyt1ams;
ALTER DEFAULT PRIVILEGES IN SCHEMA xbsyt1ams GRANT EXECUTE ON FUNCTIONS TO uapp01xbsyt1ams;
GRANT CONNECT ON DATABASE xbsyt1ams TO uapp01xbsyt1ams;
GRANT USAGE ON SCHEMA xbsyt1ams TO uapp01xbsyt1ams;

ALTER DEFAULT PRIVILEGES IN SCHEMA xbsyt1ams GRANT SELECT, INSERT, UPDATE, DELETE ON TABLES TO udev01xbsyt1ams;
ALTER DEFAULT PRIVILEGES IN SCHEMA xbsyt1ams GRANT USAGE ON SEQUENCES TO udev01xbsyt1ams;
ALTER DEFAULT PRIVILEGES IN SCHEMA xbsyt1ams GRANT EXECUTE ON FUNCTIONS TO udev01xbsyt1ams;
GRANT CONNECT ON DATABASE xbsyt1ams TO udev01xbsyt1ams;
GRANT USAGE ON SCHEMA xbsyt1ams TO udev01xbsyt1ams;

GRANT SELECT ON ALL TABLES IN SCHEMA xbsyt1cor TO uapp01xbsyt1ams;
GRANT SELECT ON ALL SEQUENCES IN SCHEMA xbsyt1cor TO uapp01xbsyt1ams;
GRANT EXECUTE ON ALL FUNCTIONS IN SCHEMA xbsyt1cor TO uapp01xbsyt1ams;
GRANT CONNECT ON DATABASE          xbsyt1cor                            TO uapp01xbsyt1ams;
GRANT USAGE ON SCHEMA              xbsyt1cor                            TO uapp01xbsyt1ams;

GRANT SELECT ON ALL TABLES IN SCHEMA xbsyt1spm TO uapp01xbsyt1ams; 
GRANT SELECT ON ALL SEQUENCES IN SCHEMA xbsyt1spm TO uapp01xbsyt1ams; 
GRANT EXECUTE ON ALL FUNCTIONS IN SCHEMA xbsyt1spm TO uapp01xbsyt1ams; 
GRANT CONNECT ON DATABASE xbsyt1spm TO uapp01xbsyt1ams; 
GRANT USAGE ON SCHEMA xbsyt1spm TO uapp01xbsyt1ams; {noformat}","05/Feb/20 13:18;yo218;DB exists on syt1 for sync cluster, permissions added for cor db on async cluster

 
{noformat}
postgres=# \l
                                     List of databases
   Name    |   Owner   | Encoding |   Collate   |    Ctype    |      Access privileges
-----------+-----------+----------+-------------+-------------+-----------------------------
 postgres  | postgres  | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =Tc/postgres               +
           |           |          |             |             | postgres=CTc/postgres      +
           |           |          |             |             | pg_watch2=c/postgres
 template0 | postgres  | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres                +
           |           |          |             |             | postgres=CTc/postgres
 template1 | postgres  | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres                +
           |           |          |             |             | postgres=CTc/postgres      +
           |           |          |             |             | pg_watch2=c/postgres
 xbsyt1ams | xbsyt1ams | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =Tc/xbsyt1ams              +
           |           |          |             |             | xbsyt1ams=CTc/xbsyt1ams    +
           |           |          |             |             | uapp01xbsyt1ams=c/xbsyt1ams+
           |           |          |             |             | udev01xbsyt1ams=c/xbsyt1ams
 xbsyt1cmi | xbsyt1cmi | UTF8     | en_US.UTF-8 | en_US.UTF-8 | xbsyt1cmi=CTc/xbsyt1cmi    +
           |           |          |             |             | uapp01xbsyt1cmi=c/xbsyt1cmi+
           |           |          |             |             | udev01xbsyt1cmi=c/xbsyt1cmi+
           |           |          |             |             | umon01xbsyt1cmi=c/xbsyt1cmi+
           |           |          |             |             | dev_users=c/xbsyt1cmi      +
           |           |          |             |             | pg_watch2=c/xbsyt1cmi
 xbsyt1rep | xbsyt1rep | UTF8     | en_US.UTF-8 | en_US.UTF-8 | xbsyt1rep=CTc/xbsyt1rep    +
           |           |          |             |             | uapp01xbsyt1rep=c/xbsyt1rep+
           |           |          |             |             | udev01xbsyt1rep=c/xbsyt1rep+
           |           |          |             |             | umon01xbsyt1rep=c/xbsyt1rep+
           |           |          |             |             | dev_users=c/xbsyt1rep      +
           |           |          |             |             | pg_watch2=c/xbsyt1rep
 xbsyt1spm | xbsyt1spm | UTF8     | en_US.UTF-8 | en_US.UTF-8 | xbsyt1spm=CTc/xbsyt1spm    +
           |           |          |             |             | uapp01xbsyt1spm=c/xbsyt1spm+
           |           |          |             |             | udev01xbsyt1spm=c/xbsyt1spm+
           |           |          |             |             | umon01xbsyt1spm=c/xbsyt1spm+
           |           |          |             |             | uapp01xbsyt1sla=c/xbsyt1spm+
           |           |          |             |             | dev_users=c/xbsyt1spm      +
           |           |          |             |             | pg_watch2=c/xbsyt1spm
{noformat}","05/Feb/20 15:27;yo218;Created the tables and updated pg_hba.conf
{noformat}
xbsyt1ams=# \dt
                    List of relations
  Schema   |          Name           | Type  |   Owner
-----------+-------------------------+-------+-----------
 xbsyt1ams | passwd_expiration_check | table | xbsyt1ams
 xbsyt1ams | table_lock              | table | xbsyt1ams
(2 rows)xbsyt1ams=# \ds
                         List of relations
  Schema   |              Name              |   Type   |   Owner
-----------+--------------------------------+----------+-----------
 xbsyt1ams | passwd_expiration_check_id_seq | sequence | xbsyt1ams
(1 row)xbsyt1ams=# \dp
                                                   Access privileges
  Schema   |              Name              |   Type   |       Access privileges        | Column privileges | Policies
-----------+--------------------------------+----------+--------------------------------+-------------------+----------
 xbsyt1ams | passwd_expiration_check        | table    | xbsyt1ams=arwdDxt/xbsyt1ams   +|                   |
           |                                |          | uapp01xbsyt1ams=arwd/xbsyt1ams+|                   |
           |                                |          | udev01xbsyt1ams=arwd/xbsyt1ams |                   |
 xbsyt1ams | passwd_expiration_check_id_seq | sequence | xbsyt1ams=rwU/xbsyt1ams       +|                   |
           |                                |          | uapp01xbsyt1ams=U/xbsyt1ams   +|                   |
           |                                |          | udev01xbsyt1ams=U/xbsyt1ams    |                   |
 xbsyt1ams | table_lock                     | table    | xbsyt1ams=arwdDxt/xbsyt1ams   +|                   |
           |                                |          | uapp01xbsyt1ams=arwd/xbsyt1ams+|                   |
           |                                |          | udev01xbsyt1ams=arwd/xbsyt1ams |                   |
(3 rows) {noformat}","05/Feb/20 15:48;qo794;Everything is working fine, only {{xbsyt1ams}} not tested as the deployment script is not ready yet.",,,,,,,,,,,,,,,,,,,,,,,,,,,,
[TODO] HLS100 - Price per unit clarification,XP-2606,91703,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,31/Jan/20 13:10,31/Aug/20 15:39,22/Feb/21 13:21,14/Aug/20 16:13,,,3.1.1,,,,,,,,,,"Once XBID-4894 is concluded, think about whether we have clearly defined, that the limit and execution price is actually per unit (1MW per 60 min contract in case of hourly product), it is not explicitly mentioned at least in HLS100.

*Document*: HLS100

*Chapter*: 1.3.1 Orders

*Details*: Description of the Price enhanced:

_The buy price / sell price_

To:

_The limit buy price / sell price per 1 MWh_

*Chapter*: 1.3.2 Trades

*Details*: Description of the Price enhanced:

_The trade execution price_

To:

_The trade execution price_ _per 1 MWh_

*Reason*: Absence of such clarification raises sometime issue as in case of XBID-4894.",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,16502400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0a70g:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,Production,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Jan/20 13:38;radeale;David says it could be said in an easier form like euro / MW.","14/Aug/20 16:13;radeale;Propsal accepted by TWG, better get it to the specs as soon as possible.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[US01] Add tests to Xp 2580 event log,XP-2604,91688,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,jy268,jy268,jy268,31/Jan/20 07:55,04/Aug/20 16:01,22/Feb/21 13:21,06/Feb/20 08:10,,,Agile Pilot,,,,,,,,,,Please add tests to code created during `Xp 2580 event log`,,eg288,jy268,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,33177600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:4000000000000000006",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 1,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Feb/20 17:03;eg288;implemented PasswdExpirationLockingCheckServiceTest",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[US01] Endpoint for manual triggering,XP-2587,91551,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,jy268,jy268,jy268,28/Jan/20 10:57,04/Aug/20 16:01,22/Feb/21 13:21,31/Jan/20 14:34,,,Agile Pilot,,,,,,,,,,,,jy268,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,33436800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:40000000ezx",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 1,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Jan/20 14:34;jy268;Manual endpoint exposed as GET /sendExpiringPasswordsManually",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Password expiration - Docker image,XP-2581,91392,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,jj069,jj069,23/Jan/20 15:47,31/Aug/20 15:38,22/Feb/21 13:21,27/Jan/20 09:46,,,Agile Pilot,,,,,,,,,,,,jj069,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,34128000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:40000000es",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Password expiration - Core/SM DB integration to fetch user emails,XP-2580,91391,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,eh941,jj069,jj069,23/Jan/20 15:47,31/Aug/20 15:39,22/Feb/21 13:21,24/Jan/20 09:16,,,Agile Pilot,,,,,,,,,,,,jj069,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,34128000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:40000000eq",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Password expiration - Application scaffolding,XP-2579,91390,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ll664,jj069,jj069,23/Jan/20 15:47,31/Aug/20 15:38,22/Feb/21 13:21,24/Jan/20 09:14,,,Agile Pilot,,,,,,,,,,,,jj069,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,34128000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:40000000ep",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Password expiration - Deployment,XP-2578,91388,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,jj069,jj069,23/Jan/20 15:45,31/Aug/20 15:38,22/Feb/21 13:21,30/Jan/20 10:42,,,Agile Pilot,,,,,,,,,,,,jj069,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,34128000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s000104220082di",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Password expiration - Email sending,XP-2577,91387,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,jj069,jj069,23/Jan/20 15:45,31/Aug/20 15:39,22/Feb/21 13:21,30/Jan/20 10:41,,,Agile Pilot,,,,,,,,,,,,jj069,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,34128000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s000104220082d",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Password expiration - Ldap query,XP-2576,91386,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,jj069,jj069,23/Jan/20 15:45,31/Aug/20 15:38,22/Feb/21 13:21,30/Jan/20 10:41,,,Agile Pilot,,,,,,,,,,,,jj069,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,34128000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s000104220082ci",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prepare presentation to customers (demo),XP-2575,91384,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,ei349,ei349,23/Jan/20 15:17,04/Aug/20 16:02,22/Feb/21 13:21,06/Feb/20 09:02,,,Agile Pilot,,,,,,,,,,Execute manually endpoint is /sendExpiringPasswordsManually,,ei349,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,33264000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:40000000ezxc",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 1,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Feb/20 13:11;lt112;h2. Preparation
* Deploy to syt1 (/)
* Select target e-mail {{target.email@deutsche-boerse.com}} (={{michael.blaha@deutsche-boerse.com}}) (/)
* Set-up in-box folder just for mails from GA (look for {{Warning - user password is expiring!}})
* Set-up in-box folder just for undelivered emails from GA (TODO)
* Set callback in case of invalid mail to {{target-email@deutsche-boerse.com}}
 * Set password expiration for 3 users to 1/7/20 days from the day of presentation (2020-02-06T16:00:00) (/)
 ** {{2020-02-07T20:00:00}} (/)
 ** {{2020-02-13T20:00:00}} (/)
 ** {{2020-02-26T20:00:00}} (/)
* Set emails of the users to {{jiri.vlasimsky@deutsche-boerse.com}} (/)
* Set password expiration for 1 user to {{2020-02-08T20:00:00}} and set his e-mail to {{fake.xbid.email@deutsche-boerse.com}} (/)","03/Feb/20 13:12;lt112;h1. Presentation

h2. Introduction
* Users will receive password expiration notice on e-mail prior to it's expiration (with currently hardcoded days 1, 7, 20)
* In case of invalid e-mail address DBAG is informed

h2. Demonstration
* Observe e-mail in-boxes
* Trigger {{/sendExpiringPasswordsManually}}
* Observe e-mail in-boxes",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[US01] Docker image,XP-2572,91363,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ll664,ll664,ll664,23/Jan/20 10:47,04/Aug/20 16:01,22/Feb/21 13:21,27/Jan/20 15:36,,,Agile Pilot,,,,,,,,,,Setup  Docker image build.,,ll664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,34214400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:40000000eti",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 1 (S),,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[US01] Deployment,XP-2571,91362,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,yo218,ll664,ll664,23/Jan/20 10:42,04/Aug/20 16:01,22/Feb/21 13:21,05/Mar/20 15:19,,,Agile Pilot,,,,,,,,,,"* fat JAR
* Ansible (?), could be done by Kent/Anh Tuan
",,ll664,nv190,qo794,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,32400000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:40000000ezwsi",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 1,HOT Sprint 2 (S),HOT Sprint 3,HOT Sprint 4 (S),,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jan/20 16:48;ll664;The first version of service fat jar has been released and could be used to automate the deployment - http://artifactory.dbgcloud.io/artifactory/eex-dev-local/com/deutscheboerse/energy/xbid/access-management-service/0.0.1/access-management-service-0.0.1.jar

[~nv190] FYI","13/Feb/20 10:18;qo794;Already started by Kent:
https://github.deutsche-boerse.de/dev/energy.automation.deployments/pull/649/commits/8a4b9cf929291dcf1bd798e8b64f440addbed8c4",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[US01] Core/SM DB integration to fetch user emails,XP-2570,91360,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ll664,ll664,ll664,23/Jan/20 10:39,04/Aug/20 16:02,22/Feb/21 13:21,27/Jan/20 15:36,,,Agile Pilot,,,,,,,,,,"* no ORM, use plain JDBC",,ll664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,34214400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:40000000et",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 1 (S),,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[US01] Email sending,XP-2569,91359,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,ll664,ll664,23/Jan/20 10:38,04/Aug/20 16:01,22/Feb/21 13:21,29/Jan/20 10:30,,,Agile Pilot,,,,,,,,,,"Implement warning emails:

* use template from US01-BR05
* set reply-to so we know about rejected e-mails (US01-BR04)
* spring scheduled jobs",,ll664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,34214400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:40000000ezx9",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 1,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[US01] LDAP query,XP-2568,91358,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,qo794,ll664,ll664,23/Jan/20 10:35,04/Aug/20 16:01,22/Feb/21 13:21,30/Jan/20 13:30,,,Agile Pilot,,,,,,,,,,Design a serivce that connects to LDAP and fetches passwords to expire.,,ll664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,34214400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:40000000ezwc",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 1,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[US01] Application scaffolding,XP-2567,91357,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ll664,ll664,ll664,23/Jan/20 10:34,04/Aug/20 16:01,22/Feb/21 13:21,24/Jan/20 16:48,,,Agile Pilot,,,,,,,,,,"* github repo (spring initializr - spring boot/kotlin)
* jenkins builds (continuous/pulls/nightly/release)
",,ll664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,34214400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:40000000esi",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 1 (S),,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses - rounding - rounding is not part of path-search but rather for display purpose,XP-2566,91352,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,lt112,lt112,lt112,23/Jan/20 09:19,13/Aug/20 19:41,22/Feb/21 13:21,28/Feb/20 09:32,,,3.1.0,,,,,,,Losses,,,"* real trades are calculated unrounded
* rounding happens for display and report purposes
* it is recommended to implement a rule, that minimal quantity >= lcm(lot size, capacity resolution) in order to prevent corner cases from emerging (e.g. creating trade without any change to a flow, because it gets rounded down)

h2. Notes
* thorough analysis recommended before implementation
** is rounding formula still valid? Is it consistent with the new approach?
** at which moment is it actually correct to round the values?
** what information should the customer get?
** etc.",,eh941,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Feb/20 09:34;eh941;rounding_calculations.ods;https://jira.deutsche-boerse.com/secure/attachment/80369/rounding_calculations.ods",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,31104000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1914,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:40000000000000000030004i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 2 (S),,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Feb/20 14:39;lt112;So far it's either round after every trade and use the rounded values for further calculations OR round at the end of trading phase or just for display purposes during the trading phase.
First approach encounters the issue mentioned in XP-2453
Second approach makes forward/backward rounding formula obsolete, ale we are calculating with unrounded values and thus the resulting flow does not encounter issues with returning different amount when splitting the flows. This appears to be contradictory to the belief in HLFC of Losses.
It also divers from the amounts sent to TSOs. As at some point we promise to deliver quantity of 1949 to the delivery area B, but due to rounding, we order only 1900. This has to be either resolved with some post-processing during clearing, or other solution has to be found (???).","14/Feb/20 09:36;eh941;I put an example of current calculation (old) and the proposed (new) into an excel file [^rounding_calculations.ods] ","28/Feb/20 09:17;lt112;h1. Rounding

h2. Meeting notes
* we should go with the proposed solution about rounding at the end of trading phase
* redefine minimal tradable unit as an input restriction, not a trading restriction
** minimal quantity entering the system is X
** minimal quantity being traded in the system is not restricted

h3. Double comparison note

** do not compare by Epsilon constant
** compare using raw bytes - omit first bit and last X bits

h2. To discuss with customers

* Everything is matchable with reasonable precision (e.g. we can match against quantity of 2397.69) => reasonable as limited by technology and agreed upon
* The only restrictions are made on input values - minimal quantity, price etc., but the real traded numbers can be of any amount
* Based on requirements we can send out rounded values - with expected imprecision up to rounding unit (e.g. trade has q=49.5, we round down to 0 and they have to deal with it somehow), or unrounded (reasonable) or both

h1. AON

* AON restriction does not go with losses and continuous trading
* AON restriction can be respected with losses and continuous auction using linear programming (currently a POC)

h2. To discuss with customers

* Discussions have to be reopened, further analysis required - what restrictions could help us support AON?
* Motivation behind AON: usually they care less about the executed price and more about the executed amount, use that when thinking about possible restrictions that would help us get from NP complexity to polynomial complexity",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CR1 - US2 - Certificates expiration management,XP-2565,91351,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,ei349,ei349,23/Jan/20 08:59,04/Aug/20 16:02,22/Feb/21 13:21,05/Mar/20 10:40,,,Agile Pilot,,,,,,,,,,"This specification looks like the latest version:
https://jira.deutsche-boerse.com/secure/attachment/79395/US02_Certificate_Expiration_v0.4.docx",,ei349,od044,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,30585600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:40000000000000000030003",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 3,,,,,,,,,,,,,,,,13.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2565-suppress-warnings,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Mar/20 10:39;od044;Test passed",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses - analyze impact of different flows over multiple instants in a longer period on rounding,XP-2457,90731,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ll664,lt112,lt112,06/Jan/20 15:32,13/Aug/20 20:11,22/Feb/21 13:21,10/Jan/20 15:45,,,Losses ASR,,,,,,,Losses,,,"Consider the following:

||Instant ||Flow A->B||
|0| 1000 |
|1| -1000 |
|2| 3000 |
|3| -2500 |

with loss coefficient = 0.975

* rounding formula takes into account current sent, received flow and shift - what flow should be used for period 0-4???
* play with the numbers in order to invoke inconsistency or prove it's not an issue
* currently the first instant is used for the rounding formula, which is almost certainly incorrect (analyze impact)",,ll664,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Jan/20 10:27;ll664;WS Losses Prag - Session 2a - Special Topics.pptx;https://jira.deutsche-boerse.com/secure/attachment/79063/WS+Losses+Prag+-+Session+2a+-+Special+Topics.pptx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,35337600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1914,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:40000000ex",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 0,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jan/20 10:26;ll664;The problem was already captured by Herbert (see attached presentation, slide 18). He suggest that the IC should be considered for routing only in case there's consistent effective loss factor across all involved instants, otherwise the residual capacity would be 0 and the IC is skipped from routing. 

Discussed with [~lt112], we agreed this is the way to go.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses - Fuzzy testing scenarios and metrics,XP-2454,90724,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,eh941,ei349,ei349,06/Jan/20 15:00,13/Aug/20 20:11,22/Feb/21 13:21,15/Jan/20 10:41,,,Losses ASR,,,,,,,,,,"AC: 

random testing scenarios - please define before the development

output should be easily reproducible scenario 

time limitations for run 

short running tests in the beginning 

demo during the review

static grid",,eh941,ei349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Jan/20 10:41;eh941;chaos-tests-in-build.png;https://jira.deutsche-boerse.com/secure/attachment/79206/chaos-tests-in-build.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,34905600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1819,,,,,,,,,,,,,,06/Jan/20 15:00,,,,,,,,,,,,,,,,,,,,,"1|000y5p:40000000ey",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 0,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,chaos-testing,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Jan/20 10:41;eh941;Done. Added pull request build as can be seen in test pull request:

 !chaos-tests-in-build.png! ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses - Rounding - fix of small shift is not propagated while big flow is in the grid,XP-2453,90722,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,ei349,ei349,06/Jan/20 14:56,13/Aug/20 20:11,22/Feb/21 13:21,23/Jan/20 09:20,,,Losses ASR,,,,,,,Losses,,,"While having sufficient capacity, small quantity (~size of capacity resolution) does not always propagate due to rounding formula rounding it to zero because of preexisting flow. This currently causes zero trade, which shuts down the core.

Example:
{code}
capacity = 10 000 000
flow_sent = 4 280 359
flow_recv = 4 173 400
capacity_resolution = 100
sent_shift = 100
recv_shift = 0
{code}

This might be harder to explain if the customer sees sufficient capacity in the H2H matrix and the orders do not match.

Possible issue should such case be overriden by exception (if):
So called Ceskin's theorem says, that the trader can effectively overcome loss if he sends orders of small enough quantities to exploit this exceptional behaviour.",,ei349,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2566,,,,,,,,,"09/Jan/20 10:01;lt112;graph.png;https://jira.deutsche-boerse.com/secure/attachment/79012/graph.png","15/Jan/20 09:22;lt112;graph2.png;https://jira.deutsche-boerse.com/secure/attachment/79195/graph2.png","20/Jan/20 11:21;lt112;presentation.pdf;https://jira.deutsche-boerse.com/secure/attachment/79317/presentation.pdf","17/Jan/20 12:50;lt112;presentation.pdf;https://jira.deutsche-boerse.com/secure/attachment/79283/presentation.pdf",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,34214400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1914,,,,,,,,,,,,,,06/Jan/20 14:56,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s0001042200824",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 0 (S),,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2453-small-shift-causes-zero-trade,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Jan/20 10:05;lt112;New findings:
consider capacity = 1 000 000, loss coefficient = 0.975, lot size = 100 and a situation in !graph.png! 

the first sell order cannot be propagated due to rounding to 0, no further orders are examined (since we only consider the best one). However, the following orders are matchable with the buy order on the other end. This can be abused to block the market with a cheap small-quantity order.

Should we allow the small order through, trader can abuse it using iceberg order 3000@10 at 100 step instead of open 3000@10, overcoming the loss coefficient and in the end trading equal order.","09/Jan/20 10:15;lt112;Possible solution:
Detect rounding to 0 and remember it. Once the result is done, track back all the ""blocked"" orders, compare them with the ""winner"" and if none matches, remove them temporarily and restart the calculation. Repeat until no rounding to 0 is detected and select the best result.
* think of some heuristics","09/Jan/20 10:25;lt112;Only orders with quantity = common quantity unit are causing this issue. Only track and remove those down, for other orders the situation is valid (e.g. capacity on the previous ic = common quantity unit, thus any order taking this path WILL be rounded to zero anyway and thus the path is correctly invalid).

Thus:
Detect rounding to 0 and remember it. Once the result is done, track back all the ""blocked"" orders, compare them with the ""winner"" and if none matches, select the ones with quantity=common quantity unit and remove them temporarily and restart the calculation. If no such order exists (no order Q=CQU), end, otherwise repeat until no rounding to 0 is detected and select the best result.","10/Jan/20 10:14;lt112;Question:
should the first order be skipped and whole next order used or just 2*common_quantity_unit part of the second order and then attempt to match the first order again?
Because after matching sufficient quantity, the flows on the interconnector change, causing the first order to be passable.","14/Jan/20 10:32;lt112;The real issue is when attempting to make a trade. As routing is done, trade just follows the found path. Consider capacity = 1 000 000, loss coefficient = 0.975, lot size = 100 and a situation in !graph2.png!

The order is propagated and visible as {{S3900@103}}. Now we want to match it at the second area with a new order {{B100@105}}, which seems fine. But due to rounding, we need to send 200 in order to get 100 quantity at the end, thus increasing the sell price to 200, making the trade impossible.

Thus the final price does not only depend on the original order and effective losses along the way, but also on the REQUIRED QUANTITY. We might do some adjustments with matcher, but how to deal with auction and how to display such thing in the orderbook???","14/Jan/20 14:54;lt112;Previous comment also means that an order with worse price can in the end make a better match due to different quantity.","14/Jan/20 16:18;lt112;Example of shifts and resulting prices. We can observe, that the real price goes up and down
{noformat}
shift_sent=100, shift_recv=0, real_price=Infinity
shift_sent=200, shift_recv=100, real_price=200.000000
shift_sent=300, shift_recv=200, real_price=150.000000
shift_sent=400, shift_recv=300, real_price=133.333333
shift_sent=500, shift_recv=400, real_price=125.000000
shift_sent=600, shift_recv=500, real_price=120.000000
shift_sent=700, shift_recv=600, real_price=116.666667
shift_sent=800, shift_recv=700, real_price=114.285714
shift_sent=900, shift_recv=800, real_price=112.500000
shift_sent=1000, shift_recv=900, real_price=111.111111
shift_sent=1100, shift_recv=1000, real_price=110.000000
shift_sent=1200, shift_recv=1100, real_price=109.090909
shift_sent=1300, shift_recv=1200, real_price=108.333333
shift_sent=1400, shift_recv=1300, real_price=107.692308
shift_sent=1500, shift_recv=1400, real_price=107.142857
shift_sent=1600, shift_recv=1500, real_price=106.666667
shift_sent=1700, shift_recv=1600, real_price=106.250000
shift_sent=1800, shift_recv=1700, real_price=105.882353
shift_sent=1900, shift_recv=1800, real_price=105.555556
shift_sent=2000, shift_recv=1900, real_price=105.263158
shift_sent=2100, shift_recv=2000, real_price=105.000000
shift_sent=2200, shift_recv=2100, real_price=104.761905
shift_sent=2300, shift_recv=2200, real_price=104.545455
shift_sent=2400, shift_recv=2300, real_price=104.347826
shift_sent=2500, shift_recv=2400, real_price=104.166667
shift_sent=2600, shift_recv=2500, real_price=104.000000
shift_sent=2700, shift_recv=2600, real_price=103.846154
shift_sent=2800, shift_recv=2700, real_price=103.703704
shift_sent=2900, shift_recv=2800, real_price=103.571429
shift_sent=3000, shift_recv=2900, real_price=103.448276
shift_sent=3100, shift_recv=3000, real_price=103.333333
shift_sent=3200, shift_recv=3100, real_price=103.225806
shift_sent=3300, shift_recv=3200, real_price=103.125000
shift_sent=3400, shift_recv=3300, real_price=103.030303
shift_sent=3500, shift_recv=3400, real_price=102.941176
shift_sent=3600, shift_recv=3500, real_price=102.857143
shift_sent=3700, shift_recv=3600, real_price=102.777778
shift_sent=3800, shift_recv=3700, real_price=102.702703
shift_sent=3900, shift_recv=3800, real_price=102.631579
shift_sent=4000, shift_recv=3900, real_price=102.564103
shift_sent=4100, shift_recv=3900, real_price=105.128205
shift_sent=4200, shift_recv=4000, real_price=105.000000
shift_sent=4300, shift_recv=4100, real_price=104.878049
shift_sent=4400, shift_recv=4200, real_price=104.761905
shift_sent=4500, shift_recv=4300, real_price=104.651163
shift_sent=4600, shift_recv=4400, real_price=104.545455
shift_sent=4700, shift_recv=4500, real_price=104.444444
shift_sent=4800, shift_recv=4600, real_price=104.347826
shift_sent=4900, shift_recv=4700, real_price=104.255319
shift_sent=5000, shift_recv=4800, real_price=104.166667
shift_sent=5100, shift_recv=4900, real_price=104.081633
shift_sent=5200, shift_recv=5000, real_price=104.000000
shift_sent=5300, shift_recv=5100, real_price=103.921569
shift_sent=5400, shift_recv=5200, real_price=103.846154
shift_sent=5500, shift_recv=5300, real_price=103.773585
shift_sent=5600, shift_recv=5400, real_price=103.703704
shift_sent=5700, shift_recv=5500, real_price=103.636364
shift_sent=5800, shift_recv=5600, real_price=103.571429
shift_sent=5900, shift_recv=5700, real_price=103.508772
shift_sent=6000, shift_recv=5800, real_price=103.448276
shift_sent=6100, shift_recv=5900, real_price=103.389831
shift_sent=6200, shift_recv=6000, real_price=103.333333
shift_sent=6300, shift_recv=6100, real_price=103.278689
shift_sent=6400, shift_recv=6200, real_price=103.225806
shift_sent=6500, shift_recv=6300, real_price=103.174603
shift_sent=6600, shift_recv=6400, real_price=103.125000
shift_sent=6700, shift_recv=6500, real_price=103.076923
shift_sent=6800, shift_recv=6600, real_price=103.030303
shift_sent=6900, shift_recv=6700, real_price=102.985075
shift_sent=7000, shift_recv=6800, real_price=102.941176
shift_sent=7100, shift_recv=6900, real_price=102.898551
shift_sent=7200, shift_recv=7000, real_price=102.857143
shift_sent=7300, shift_recv=7100, real_price=102.816901
shift_sent=7400, shift_recv=7200, real_price=102.777778
shift_sent=7500, shift_recv=7300, real_price=102.739726
shift_sent=7600, shift_recv=7400, real_price=102.702703
shift_sent=7700, shift_recv=7500, real_price=102.666667
shift_sent=7800, shift_recv=7600, real_price=102.631579
shift_sent=7900, shift_recv=7700, real_price=102.597403
shift_sent=8000, shift_recv=7800, real_price=102.564103
shift_sent=8100, shift_recv=7800, real_price=103.846154
shift_sent=8200, shift_recv=7900, real_price=103.797468
shift_sent=8300, shift_recv=8000, real_price=103.750000
shift_sent=8400, shift_recv=8100, real_price=103.703704
shift_sent=8500, shift_recv=8200, real_price=103.658537
shift_sent=8600, shift_recv=8300, real_price=103.614458
shift_sent=8700, shift_recv=8400, real_price=103.571429
shift_sent=8800, shift_recv=8500, real_price=103.529412
shift_sent=8900, shift_recv=8600, real_price=103.488372
shift_sent=9000, shift_recv=8700, real_price=103.448276
shift_sent=9100, shift_recv=8800, real_price=103.409091
shift_sent=9200, shift_recv=8900, real_price=103.370787
shift_sent=9300, shift_recv=9000, real_price=103.333333
shift_sent=9400, shift_recv=9100, real_price=103.296703
shift_sent=9500, shift_recv=9200, real_price=103.260870
shift_sent=9600, shift_recv=9300, real_price=103.225806
shift_sent=9700, shift_recv=9400, real_price=103.191489
shift_sent=9800, shift_recv=9500, real_price=103.157895
shift_sent=9900, shift_recv=9600, real_price=103.125000
{noformat}

We can also try that with different flows, e.g. {{flow_sent =  13 500, flow_recv = 13 200}}
{noformat}shift_sent=100, shift_recv=100, real_price=100.000000
shift_sent=200, shift_recv=200, real_price=100.000000
shift_sent=300, shift_recv=300, real_price=100.000000
shift_sent=400, shift_recv=400, real_price=100.000000
shift_sent=500, shift_recv=500, real_price=100.000000
shift_sent=600, shift_recv=500, real_price=120.000000
shift_sent=700, shift_recv=600, real_price=116.666667
shift_sent=800, shift_recv=700, real_price=114.285714
shift_sent=900, shift_recv=800, real_price=112.500000
shift_sent=1000, shift_recv=900, real_price=111.111111
shift_sent=1100, shift_recv=1000, real_price=110.000000
shift_sent=1200, shift_recv=1100, real_price=109.090909
shift_sent=1300, shift_recv=1200, real_price=108.333333
shift_sent=1400, shift_recv=1300, real_price=107.692308
shift_sent=1500, shift_recv=1400, real_price=107.142857
shift_sent=1600, shift_recv=1500, real_price=106.666667
shift_sent=1700, shift_recv=1600, real_price=106.250000
shift_sent=1800, shift_recv=1700, real_price=105.882353
shift_sent=1900, shift_recv=1800, real_price=105.555556
shift_sent=2000, shift_recv=1900, real_price=105.263158
shift_sent=2100, shift_recv=2000, real_price=105.000000
shift_sent=2200, shift_recv=2100, real_price=104.761905
shift_sent=2300, shift_recv=2200, real_price=104.545455
shift_sent=2400, shift_recv=2300, real_price=104.347826
shift_sent=2500, shift_recv=2400, real_price=104.166667
shift_sent=2600, shift_recv=2500, real_price=104.000000
shift_sent=2700, shift_recv=2600, real_price=103.846154
shift_sent=2800, shift_recv=2700, real_price=103.703704
shift_sent=2900, shift_recv=2800, real_price=103.571429
shift_sent=3000, shift_recv=2900, real_price=103.448276
shift_sent=3100, shift_recv=3000, real_price=103.333333
shift_sent=3200, shift_recv=3100, real_price=103.225806
shift_sent=3300, shift_recv=3200, real_price=103.125000
shift_sent=3400, shift_recv=3300, real_price=103.030303
shift_sent=3500, shift_recv=3400, real_price=102.941176
shift_sent=3600, shift_recv=3500, real_price=102.857143
shift_sent=3700, shift_recv=3600, real_price=102.777778
shift_sent=3800, shift_recv=3700, real_price=102.702703
shift_sent=3900, shift_recv=3800, real_price=102.631579
shift_sent=4000, shift_recv=3900, real_price=102.564103
shift_sent=4100, shift_recv=4000, real_price=102.500000
shift_sent=4200, shift_recv=4100, real_price=102.439024
shift_sent=4300, shift_recv=4200, real_price=102.380952
shift_sent=4400, shift_recv=4300, real_price=102.325581
shift_sent=4500, shift_recv=4400, real_price=102.272727
shift_sent=4600, shift_recv=4400, real_price=104.545455
shift_sent=4700, shift_recv=4500, real_price=104.444444
shift_sent=4800, shift_recv=4600, real_price=104.347826
shift_sent=4900, shift_recv=4700, real_price=104.255319
shift_sent=5000, shift_recv=4800, real_price=104.166667
shift_sent=5100, shift_recv=4900, real_price=104.081633
shift_sent=5200, shift_recv=5000, real_price=104.000000
shift_sent=5300, shift_recv=5100, real_price=103.921569
shift_sent=5400, shift_recv=5200, real_price=103.846154
shift_sent=5500, shift_recv=5300, real_price=103.773585
shift_sent=5600, shift_recv=5400, real_price=103.703704
shift_sent=5700, shift_recv=5500, real_price=103.636364
shift_sent=5800, shift_recv=5600, real_price=103.571429
shift_sent=5900, shift_recv=5700, real_price=103.508772
shift_sent=6000, shift_recv=5800, real_price=103.448276
shift_sent=6100, shift_recv=5900, real_price=103.389831
shift_sent=6200, shift_recv=6000, real_price=103.333333
shift_sent=6300, shift_recv=6100, real_price=103.278689
shift_sent=6400, shift_recv=6200, real_price=103.225806
shift_sent=6500, shift_recv=6300, real_price=103.174603
shift_sent=6600, shift_recv=6400, real_price=103.125000
shift_sent=6700, shift_recv=6500, real_price=103.076923
shift_sent=6800, shift_recv=6600, real_price=103.030303
shift_sent=6900, shift_recv=6700, real_price=102.985075
shift_sent=7000, shift_recv=6800, real_price=102.941176
shift_sent=7100, shift_recv=6900, real_price=102.898551
shift_sent=7200, shift_recv=7000, real_price=102.857143
shift_sent=7300, shift_recv=7100, real_price=102.816901
shift_sent=7400, shift_recv=7200, real_price=102.777778
shift_sent=7500, shift_recv=7300, real_price=102.739726
shift_sent=7600, shift_recv=7400, real_price=102.702703
shift_sent=7700, shift_recv=7500, real_price=102.666667
shift_sent=7800, shift_recv=7600, real_price=102.631579
shift_sent=7900, shift_recv=7700, real_price=102.597403
shift_sent=8000, shift_recv=7800, real_price=102.564103
shift_sent=8100, shift_recv=7900, real_price=102.531646
shift_sent=8200, shift_recv=8000, real_price=102.500000
shift_sent=8300, shift_recv=8100, real_price=102.469136
shift_sent=8400, shift_recv=8200, real_price=102.439024
shift_sent=8500, shift_recv=8300, real_price=102.409639
shift_sent=8600, shift_recv=8300, real_price=103.614458
shift_sent=8700, shift_recv=8400, real_price=103.571429
shift_sent=8800, shift_recv=8500, real_price=103.529412
shift_sent=8900, shift_recv=8600, real_price=103.488372
shift_sent=9000, shift_recv=8700, real_price=103.448276
shift_sent=9100, shift_recv=8800, real_price=103.409091
shift_sent=9200, shift_recv=8900, real_price=103.370787
shift_sent=9300, shift_recv=9000, real_price=103.333333
shift_sent=9400, shift_recv=9100, real_price=103.296703
shift_sent=9500, shift_recv=9200, real_price=103.260870
shift_sent=9600, shift_recv=9300, real_price=103.225806
shift_sent=9700, shift_recv=9400, real_price=103.191489
shift_sent=9800, shift_recv=9500, real_price=103.157895
shift_sent=9900, shift_recv=9600, real_price=103.125000
{noformat}

Last selected existing flow is in no way special, but let's also try that with no preexisting flow.
{noformat}
shift_sent=100, shift_recv=100, real_price=100.000000
shift_sent=200, shift_recv=200, real_price=100.000000
shift_sent=300, shift_recv=300, real_price=100.000000
shift_sent=400, shift_recv=400, real_price=100.000000
shift_sent=500, shift_recv=500, real_price=100.000000
shift_sent=600, shift_recv=600, real_price=100.000000
shift_sent=700, shift_recv=700, real_price=100.000000
shift_sent=800, shift_recv=800, real_price=100.000000
shift_sent=900, shift_recv=900, real_price=100.000000
shift_sent=1000, shift_recv=1000, real_price=100.000000
shift_sent=1100, shift_recv=1100, real_price=100.000000
shift_sent=1200, shift_recv=1200, real_price=100.000000
shift_sent=1300, shift_recv=1300, real_price=100.000000
shift_sent=1400, shift_recv=1400, real_price=100.000000
shift_sent=1500, shift_recv=1500, real_price=100.000000
shift_sent=1600, shift_recv=1600, real_price=100.000000
shift_sent=1700, shift_recv=1700, real_price=100.000000
shift_sent=1800, shift_recv=1800, real_price=100.000000
shift_sent=1900, shift_recv=1900, real_price=100.000000
shift_sent=2000, shift_recv=2000, real_price=100.000000
shift_sent=2100, shift_recv=2000, real_price=105.000000
shift_sent=2200, shift_recv=2100, real_price=104.761905
shift_sent=2300, shift_recv=2200, real_price=104.545455
shift_sent=2400, shift_recv=2300, real_price=104.347826
shift_sent=2500, shift_recv=2400, real_price=104.166667
shift_sent=2600, shift_recv=2500, real_price=104.000000
shift_sent=2700, shift_recv=2600, real_price=103.846154
shift_sent=2800, shift_recv=2700, real_price=103.703704
shift_sent=2900, shift_recv=2800, real_price=103.571429
shift_sent=3000, shift_recv=2900, real_price=103.448276
shift_sent=3100, shift_recv=3000, real_price=103.333333
shift_sent=3200, shift_recv=3100, real_price=103.225806
shift_sent=3300, shift_recv=3200, real_price=103.125000
shift_sent=3400, shift_recv=3300, real_price=103.030303
shift_sent=3500, shift_recv=3400, real_price=102.941176
shift_sent=3600, shift_recv=3500, real_price=102.857143
shift_sent=3700, shift_recv=3600, real_price=102.777778
shift_sent=3800, shift_recv=3700, real_price=102.702703
shift_sent=3900, shift_recv=3800, real_price=102.631579
shift_sent=4000, shift_recv=3900, real_price=102.564103
shift_sent=4100, shift_recv=4000, real_price=102.500000
shift_sent=4200, shift_recv=4100, real_price=102.439024
shift_sent=4300, shift_recv=4200, real_price=102.380952
shift_sent=4400, shift_recv=4300, real_price=102.325581
shift_sent=4500, shift_recv=4400, real_price=102.272727
shift_sent=4600, shift_recv=4500, real_price=102.222222
shift_sent=4700, shift_recv=4600, real_price=102.173913
shift_sent=4800, shift_recv=4700, real_price=102.127660
shift_sent=4900, shift_recv=4800, real_price=102.083333
shift_sent=5000, shift_recv=4900, real_price=102.040816
shift_sent=5100, shift_recv=5000, real_price=102.000000
shift_sent=5200, shift_recv=5100, real_price=101.960784
shift_sent=5300, shift_recv=5200, real_price=101.923077
shift_sent=5400, shift_recv=5300, real_price=101.886792
shift_sent=5500, shift_recv=5400, real_price=101.851852
shift_sent=5600, shift_recv=5500, real_price=101.818182
shift_sent=5700, shift_recv=5600, real_price=101.785714
shift_sent=5800, shift_recv=5700, real_price=101.754386
shift_sent=5900, shift_recv=5800, real_price=101.724138
shift_sent=6000, shift_recv=5900, real_price=101.694915
shift_sent=6100, shift_recv=5900, real_price=103.389831
shift_sent=6200, shift_recv=6000, real_price=103.333333
shift_sent=6300, shift_recv=6100, real_price=103.278689
shift_sent=6400, shift_recv=6200, real_price=103.225806
shift_sent=6500, shift_recv=6300, real_price=103.174603
shift_sent=6600, shift_recv=6400, real_price=103.125000
shift_sent=6700, shift_recv=6500, real_price=103.076923
shift_sent=6800, shift_recv=6600, real_price=103.030303
shift_sent=6900, shift_recv=6700, real_price=102.985075
shift_sent=7000, shift_recv=6800, real_price=102.941176
shift_sent=7100, shift_recv=6900, real_price=102.898551
shift_sent=7200, shift_recv=7000, real_price=102.857143
shift_sent=7300, shift_recv=7100, real_price=102.816901
shift_sent=7400, shift_recv=7200, real_price=102.777778
shift_sent=7500, shift_recv=7300, real_price=102.739726
shift_sent=7600, shift_recv=7400, real_price=102.702703
shift_sent=7700, shift_recv=7500, real_price=102.666667
shift_sent=7800, shift_recv=7600, real_price=102.631579
shift_sent=7900, shift_recv=7700, real_price=102.597403
shift_sent=8000, shift_recv=7800, real_price=102.564103
shift_sent=8100, shift_recv=7900, real_price=102.531646
shift_sent=8200, shift_recv=8000, real_price=102.500000
shift_sent=8300, shift_recv=8100, real_price=102.469136
shift_sent=8400, shift_recv=8200, real_price=102.439024
shift_sent=8500, shift_recv=8300, real_price=102.409639
shift_sent=8600, shift_recv=8400, real_price=102.380952
shift_sent=8700, shift_recv=8500, real_price=102.352941
shift_sent=8800, shift_recv=8600, real_price=102.325581
shift_sent=8900, shift_recv=8700, real_price=102.298851
shift_sent=9000, shift_recv=8800, real_price=102.272727
shift_sent=9100, shift_recv=8900, real_price=102.247191
shift_sent=9200, shift_recv=9000, real_price=102.222222
shift_sent=9300, shift_recv=9100, real_price=102.197802
shift_sent=9400, shift_recv=9200, real_price=102.173913
shift_sent=9500, shift_recv=9300, real_price=102.150538
shift_sent=9600, shift_recv=9400, real_price=102.127660
shift_sent=9700, shift_recv=9500, real_price=102.105263
shift_sent=9800, shift_recv=9600, real_price=102.083333
shift_sent=9900, shift_recv=9700, real_price=102.061856
{noformat}","14/Jan/20 16:25;lt112;This also means, that it can be beneficial (maximizing the welfare) to send one chunk of quantity via some path and then the rest via another (or split even more), bringing even more complexity to the calculation.","15/Jan/20 13:27;lt112;Different preexisting flows over multiple subintervals can also cause different sent/recv ratio, causing the inter-connector to be unusable. But that would mean the shift gets rounded differently, which happens, but rarely.","16/Jan/20 12:02;lt112;Notes (that do not have to make sense):
* propagate as aggressor, search for counter-orders, propagation of counter-orders still has to be done to discover cycles, can this be used?
* round at the point of sending flows out, otherwise calculate with unrounded values, might cause high error (how high?), which all the traders using lossy paths would somehow pay for, there might be corner-cases (only a single trader)","17/Jan/20 12:50;lt112;Summarizing presentation  [^presentation.pdf] ","23/Jan/20 09:11;lt112;h2. Meeting notes:
- real trades are calculated unrounded
- rounding happens for display and report purposes
- it is recommended to implement a rule, that {{minimal quantity >= lcm(lot size, capacity resolution)}} in order to prevent corner cases from emerging (e.g. creating trade without any change to a flow, because it gets rounded down)

h2. Conclusion
This issue is no longer valid - a new one will be created consisting of implementing the points above",,,,,,,,,,,,,,,,,,,,
Generate H2 2019 Acer Reports and send them to customers,XP-2444,90655,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tr866,ei349,ei349,02/Jan/20 10:11,31/Aug/20 15:39,22/Feb/21 13:21,13/Jan/20 11:21,,,3.1.0,,,,,,,Acer,,,,,eh941,ei349,tr866,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,TECHLOG-3102,,,,,,,"03/Jan/20 10:22;eh941;ACER_2019_H2.zip;https://jira.deutsche-boerse.com/secure/attachment/78886/ACER_2019_H2.zip","03/Jan/20 10:22;eh941;ACER_2019_H2_2.zip;https://jira.deutsche-boerse.com/secure/attachment/78887/ACER_2019_H2_2.zip","03/Jan/20 14:39;eh941;ACER_2019_H2_CUSTOM.zip;https://jira.deutsche-boerse.com/secure/attachment/78901/ACER_2019_H2_CUSTOM.zip","07/Jan/20 14:08;eh941;ACER_2019_H2_CUSTOM_V2.zip;https://jira.deutsche-boerse.com/secure/attachment/78971/ACER_2019_H2_CUSTOM_V2.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,35078400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:400000005",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Christmasprint,Alpha Sprint 0,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Jan/20 10:22;eh941;Files  [^ACER_2019_H2.zip]  and  [^ACER_2019_H2_2.zip]  include the files that are on the sla servers without any modifications.","03/Jan/20 14:40;eh941;I had to recreate all the reports manually from my computer. The result is  [^ACER_2019_H2_CUSTOM.zip] . It seems to be fine to me - no file is empty nor close to empty but I didn't check the files individually. Please [~tr866] take a look.","06/Jan/20 08:44;ei349;Dear [~tr866], can you please check the results and provide us the feedback if reports can sent to customers? ","06/Jan/20 10:44;tr866;Hi [~ei349], I am on it, trying to do some sanity check.","06/Jan/20 16:48;tr866;First finding:
report: 2019-07_INTRADAY_TRADE_VOLUME_2020-01-03-124316.xml
EICs of the following german delivery areas can be found in the report as areaSellID and areaBuyID:
10YDE-ENBW-----N (DA TNG)
10YDE-EON------1 (DA TTG)
10YDE-RWENET---I (DA AMP)

Looks like some invalid mapping of Market Area EICs to Delivery Area EICs as only EIC 10Y1001A1001A82H of MA Germany should appear in the reports.
I noticed it only in one report of Intraday Trade Volume and only for ther first month of July.","06/Jan/20 18:21;tr866;So the last problem occurred not only in
*2019-07_INTRADAY_TRADE_VOLUME_2020-01-03-124316.xml*
but also in reports
*2019-07_WEIGHTED_AVERAGE_PRICE_2020-01-03-124510.xml*
*2019-07_WEIGHTED_AVERAGE_PRICE_LAST_TRADING_HOUR_2020-01-03-124406.xml*

EICs of German DAs shouldn't occur in the reports:
{color:red}*10YDE-ENBW-----N (DA TNG)*
*10YDE-EON------1 (DA TTG)*
*10YDE-RWENET---I (DA AMP)*{color}

Also EIC of Morocco *{color:#FF8B00}10YMA-ONE------O{color}* appears suspiciously only in the above mentioned reports and nowhere else. In reports for H1 when there were problems with wrong mapping Morocco was also appearing in the reports and after the fix it wasn't included as it had no trades. Most probably it shouldn't be there this time again and will be result of the same problem as german DAs.","07/Jan/20 11:43;eh941;Added new version  [^ACER_2019_H2_CUSTOM_V2.zip] . There should be no record with mentioned DAs

{code}
odehfra@odehfra:~/ACER_2019_H2_CUSTOM/ACER_2019_H2_CUSTOM_V2$ grep '10YMA-ONE------O' *
odehfra@odehfra:~/ACER_2019_H2_CUSTOM/ACER_2019_H2_CUSTOM_V2$ grep '10YDE-ENBW-----N' *
odehfra@odehfra:~/ACER_2019_H2_CUSTOM/ACER_2019_H2_CUSTOM_V2$ 
{code}

I edited only files:
* {{2019-07_INTRADAY_TRADE_VOLUME_2020-01-07-103104.xml}}
* {{2019-07_TRADE_VOLUME_HOUR_TO_DELIVERY_2020-01-07-103005.xml}}
* {{2019-07_TRADE_VOLUME_HOUR_TO_DELIVERY_2020-01-07-103129.xml}}
* {{2019-07_WEIGHTED_AVERAGE_PRICE_LAST_TRADING_HOUR_2020-01-07-103138.xml}}
","07/Jan/20 16:31;tr866;- In the corrected files the unwanted EICs don't appear anymore.
 - The other problematic points found last time for H1 reports look good too.:
 -- Decimal shift values look ok in all reports and not having just 0 values starting from 2nd decimal shift as used to be before the fix.
 -- OMIE (DA with EIC 10YES-REE------0) is still having records for X04 block product only in Bid Ask Spread report, which we concluded last time that it's correct
 -- the records for products X02(Half Hourly) and X03(Quarter Hourly) are also present only for the expected bidding zones:
 --- X02: DE (10Y1001A1001A82H), FR (10YFR-RTE------C)
 --- X03: DE (10Y1001A1001A82H) , AT (10YAT-APG------L) , SI (10YAT-APG------L - only from November)
- Only from November when new bidding zones joined with GoLive the new EICs start to appear in all reports:
-- 10YCA-BULGARIA-R
-- 10YCA-BULGARIA-R
-- 10YHR-HEP------M
-- 10YHU-MAVIR----U
-- 10YPL-AREA-----S
-- 10YPL-AREA-----S
-- 10YSI-ELES-----O","07/Jan/20 16:48;tr866;From my point of view the reports look OK now, I don't know much how I could check them more.","08/Jan/20 12:20;eh941;The checked and ready to sent ACER reports are ready in *this file:  [^ACER_2019_H2_CUSTOM_V2.zip]*. The same XML files (it's just repackaged) are included in attached file of TECHLOG-3102 which should be uploaded to the SFTP","13/Jan/20 11:21;tr866;Reports generated, checked and uploaded to SFTP",,,,,,,,,,,,,,,,,,,,,
Performance Scenario re-run with 60 minute IC only,XP-2432,90363,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ei349,eh941,eh941,12/Dec/19 15:58,13/Aug/20 19:43,22/Feb/21 13:21,08/Jan/20 12:39,,,Losses ASR,,,,,,,Losses,,,"We were told to re-run the performance tests with following setup:
* using the same grid as defined by the customer but only with 60 minute IC
* using block orders

The description itself is a bit different - they mix up product and interconnectors but it's in comment here - https://jira.deutsche-boerse.com/browse/XBID-4789?focusedCommentId=253464&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-253464

I created a new dataset called {{losses-60min-perf-data}} which is available in version {{2.0.8}}


*I already re-run the test with following setups:*

# 60 minute IC, no blocks, all products, positive prices only - see the report  [^all-products-no-blocks-only-positive-prices.xls] 
# 60 mintue IC, no blocks, all products - see the report  [^all-products-no-blocks.xls] 

The results are better than we presented to customers - see https://projects.deutsche-boerse.de/sites/ps0080/Shared%20Documents/Forms/AllItems.aspx?RootFolder=%2Fsites%2Fps0080%2FShared%20Documents%2F01%20XBID%20Meetings%2FExternal%20Meetings%2FWorkshops%2F2019%20-%20Losses%20Workshop%203&FolderCTID=0x0120001EB961193A6D2F4CA27436315BDB6B44&View=%7B6C81558C-B2AA-42D3-A854-B2860B7C1829%7D

It might be caused by the facts that for *~ 50 % (I'm not not sure) of the orders no routing* is effectively possible because of capacity resolution.

So I updated the scenario to contain hourly contracts only - it's on the server as file {{/xbid/performance/test-client/scenarios_input/xbid-losses-align-SLA-woBlock-v2-only-hour-contracts.xlsx}}. 

Unfortunately it never finished due to core down right after the scenario was started. I tried it twice with the same result:

{noformat}
2019-12-12T14:17:34.371Z [CoreService][][] ERROR c.d.e.m.c.e.XbidExceptionHandler - Handling error on event 'com.deutscheboerse.energy.m7.core.in.RequestEvent@33cb766e[error=<null>,input=Input:Message{receivedTime=1576160254306, rabbitReceivedTime=1576160254307, appId=DB-TestClient, userId=XBDBX001, applicationUserId=null, messageId=null, contentEncoding=null, contentType=x-m7/request; version=3, messageSource=TRADING_PMI, replyTo=amq.gen-dvvjOXrxETZ0yEDkjbirPw, correlationId=[56, 55], classId=null, contentClassId=null, keyClassId=null},request=com.deutscheboerse.energy.m7.core.in.req.OrderEntryRequest@a9d17ab]'
com.deutscheboerse.energy.m7.exception.M7FatalError: Exception (possibly validation exception) detected after adding orders to order pool. Stopping m7-core to prevent inconsistent state. New order was 77Sell NON  Contract{id=754, shortName='TT00-TT01_XB', longName='20191214 00:00-20191214 01:00'} 3*466.00 EUR 10YDE-RWENET---I/AMP 5 BG-BGPX-------01
        at com.deutscheboerse.energy.m7.trade.OrderAddService.addOrder(OrderAddService.java:149)
        at com.deutscheboerse.energy.m7.trade.OrderAddService.addIndependentOrders(OrderAddService.java:117)
        at com.deutscheboerse.energy.m7.trade.OrderAddService.addOrders(OrderAddService.java:75)
        at com.deutscheboerse.energy.m7.trade.OrderAddService.addOrders(OrderAddService.java:65)
        at com.deutscheboerse.energy.m7.trade.ContinuousTradingService.addOrders(ContinuousTradingService.java:105)
        at com.deutscheboerse.energy.m7.core.in.req.OrderEntryRequest.process(OrderEntryRequest.java:35)
        at com.deutscheboerse.energy.m7.core.in.req.OrderEntryRequest.process(OrderEntryRequest.java:18)
        at com.deutscheboerse.energy.m7.core.RequestProcessor.process(RequestProcessor.java:33)
        at com.deutscheboerse.energy.m7.core.CoreService.doOnEvent(CoreService.java:89)
        at com.deutscheboerse.energy.m7.core.CoreService.doOnEvent(CoreService.java:32)
        at com.deutscheboerse.energy.m7.core.AbstractEventHandler.onEvent(AbstractEventHandler.java:72)
        at com.deutscheboerse.energy.m7.core.AbstractEventHandler.onEvent(AbstractEventHandler.java:29)
        at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:128)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.ArrayIndexOutOfBoundsException: 288
        at com.deutscheboerse.energy.routing.datastructure.impl.MoveShiftableList.get(MoveShiftableList.java:62)
        at com.deutscheboerse.energy.routing.model.GridImpl.getSentFlow(GridImpl.java:105)
        at com.deutscheboerse.energy.routing.model.GridImpl.addFlow(GridImpl.java:244)
        at com.deutscheboerse.energy.routing.model.GridImpl.apply(GridImpl.java:177)
        at com.deutscheboerse.energy.routing.model.TransactionGridImpl.apply(TransactionGridImpl.java:321)
        at com.deutscheboerse.energy.m7.routing.TransactionGridContainer.commitFlows(TransactionGridContainer.java:38)
        at com.deutscheboerse.energy.m7.trade.order.persist.RegularMatchPersister.persistMatch(RegularMatchPersister.java:32)
        at com.deutscheboerse.energy.m7.trade.order.persist.OrderMatchPersister.persistMatches(OrderMatchPersister.java:19)
        at com.deutscheboerse.energy.m7.trade.order.execution.RegularMatchExecutor.matchOrder(RegularMatchExecutor.java:31)
        at com.deutscheboerse.energy.m7.trade.OrderAddService.addOrder(OrderAddService.java:145)
        ... 15 common frames omitted
2019-12-12T14:17:34.373Z [CoreService][][] ERROR c.d.e.m.c.CoreServiceExceptionHandlerStrategy - Fatal error.
com.deutscheboerse.energy.m7.exception.M7FatalError: Exception (possibly validation exception) detected after adding orders to order pool. Stopping m7-core to prevent inconsistent state. New order was 77Sell NON  Contract{id=754, shortName='TT00-TT01_XB', longName='20191214 00:00-20191214 01:00'} 3*466.00 EUR 10YDE-RWENET---I/AMP 5 BG-BGPX-------01
        at com.deutscheboerse.energy.m7.trade.OrderAddService.addOrder(OrderAddService.java:149)
        at com.deutscheboerse.energy.m7.trade.OrderAddService.addIndependentOrders(OrderAddService.java:117)
        at com.deutscheboerse.energy.m7.trade.OrderAddService.addOrders(OrderAddService.java:75)
        at com.deutscheboerse.energy.m7.trade.OrderAddService.addOrders(OrderAddService.java:65)
        at com.deutscheboerse.energy.m7.trade.ContinuousTradingService.addOrders(ContinuousTradingService.java:105)
        at com.deutscheboerse.energy.m7.core.in.req.OrderEntryRequest.process(OrderEntryRequest.java:35)
        at com.deutscheboerse.energy.m7.core.in.req.OrderEntryRequest.process(OrderEntryRequest.java:18)
        at com.deutscheboerse.energy.m7.core.RequestProcessor.process(RequestProcessor.java:33)
        at com.deutscheboerse.energy.m7.core.CoreService.doOnEvent(CoreService.java:89)
        at com.deutscheboerse.energy.m7.core.CoreService.doOnEvent(CoreService.java:32)
        at com.deutscheboerse.energy.m7.core.AbstractEventHandler.onEvent(AbstractEventHandler.java:72)
        at com.deutscheboerse.energy.m7.core.AbstractEventHandler.onEvent(AbstractEventHandler.java:29)
        at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:128)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.ArrayIndexOutOfBoundsException: 288
        at com.deutscheboerse.energy.routing.datastructure.impl.MoveShiftableList.get(MoveShiftableList.java:62)
        at com.deutscheboerse.energy.routing.model.GridImpl.getSentFlow(GridImpl.java:105)
        at com.deutscheboerse.energy.routing.model.GridImpl.addFlow(GridImpl.java:244)
        at com.deutscheboerse.energy.routing.model.GridImpl.apply(GridImpl.java:177)
        at com.deutscheboerse.energy.routing.model.TransactionGridImpl.apply(TransactionGridImpl.java:321)
        at com.deutscheboerse.energy.m7.routing.TransactionGridContainer.commitFlows(TransactionGridContainer.java:38)
        at com.deutscheboerse.energy.m7.trade.order.persist.RegularMatchPersister.persistMatch(RegularMatchPersister.java:32)
        at com.deutscheboerse.energy.m7.trade.order.persist.OrderMatchPersister.persistMatches(OrderMatchPersister.java:19)
        at com.deutscheboerse.energy.m7.trade.order.execution.RegularMatchExecutor.matchOrder(RegularMatchExecutor.java:31)
        at com.deutscheboerse.energy.m7.trade.OrderAddService.addOrder(OrderAddService.java:145)

{noformat}

Then I tried to run the scenario with blocks {{/xbid/performance/test-client/scenarios_input/xbid-losses-align-SLA-withBlock-v2.xlsx}} but there was the very same exception as mentioned above. 

I think it has nothing to do with the blocks nor scenarios. It *might be caused by the time I executed it*. The earlier runs usually finish, the afternoon don't. At least it looks like to me. It needs further investigation.",,eh941,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4789,,,,,,,,,,,,,,,,,"12/Dec/19 15:49;eh941;all-products-no-blocks-only-positive-prices.xls;https://jira.deutsche-boerse.com/secure/attachment/78605/all-products-no-blocks-only-positive-prices.xls","12/Dec/19 15:50;eh941;all-products-no-blocks.xls;https://jira.deutsche-boerse.com/secure/attachment/78604/all-products-no-blocks.xls","16/Dec/19 13:15;eh941;hourly-products-only.xls;https://jira.deutsche-boerse.com/secure/attachment/78667/hourly-products-only.xls","16/Dec/19 13:16;eh941;with-blocks-hrourly-products-only-but-only-90-seconds.xls;https://jira.deutsche-boerse.com/secure/attachment/78668/with-blocks-hrourly-products-only-but-only-90-seconds.xls",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,37411200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1819,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:400000000000009",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Christmasprint,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Dec/19 10:54;lt112;It appears to attempt to use time instant more than 72 hours from the grid start time. If the grid covers 72 hour-interval, then there might be an attempt to add order on a contract outside this interval.
Just a quick thought though, it can be something else.","16/Dec/19 11:50;eh941;Yes, it very much looks like.","16/Dec/19 13:22;eh941;I was finally able to re-run the test scenario with following setup:
 * only hourly inter-connectors
 * orders on hourly products only

The results are better than with the customer based grid for Order Exe report. The order book is on the other hand a bit worse.
|| ||All inter-connectors/products - no blocks||Only hourly - no blocks [^hourly-products-only.xls]||All inter-connectors/products - with blocks||Only hourly - with blocks [^with-blocks-hrourly-products-only-but-only-90-seconds.xls]||SLA||
|Order Exe p96.50|563ms|259ms|? (7094ms\*\*)|4392ms|1790ms|
|Order Exe p93.00|242ms|194ms|? (6332ms\*\*)|4014ms|895ms|
|Order book 96.50|482ms|574ms|? (9058ms\*\*) | 1542ms\*|2530ms|
|Order book 93.00|346ms|412 ms|? (7281ms\*\*)|1542ms\*|1265ms|
 \* there were only 3 calculation in total so this value is totally misleading
\*\* presented value

For the block setups - unfortunately I don't have the original numbers (they're on David's PC and he'll be back in January). Because the run never survived more than 90 seconds we used heuristic estimate for the presentation. But if I remember them correctly they were a bit worse then the new ones but not significantly.","16/Dec/19 14:24;eh941;Based on discussion with Jirka please communicate out following text and figures:


----


Run with
 * only hourly inter-connectors
 * orders on hourly products only

h3. Results Without Blocks

Order Execution Time
|| ||XBID-3.0.16||SLA||
|p96.50|259ms|1790ms|
|p93.00|194ms|895ms|

Orderbook Computation Time
|| ||XBID-3.0.16||SLA||
|p96.50|574ms|2530ms|
|p93.00|412ms|1265ms|
h3. Results With Blocks

Order Execution Time
|| ||XBID-3.0.16||SLA||
|p96.50|6358ms|1790ms|
|p93.00|5912ms|895ms|

Orderbook Computation Time
|| ||XBID-3.0.16||SLA||
|p96.50|9562ms|2530ms|
|p93.00|7649ms|1265ms|",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses - core module failure when perf test executed,XP-2424,90313,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,eg288,eg288,eg288,11/Dec/19 12:44,13/Aug/20 20:11,22/Feb/21 13:21,26/Feb/20 10:06,,,Losses ASR,,,,,,,Losses,,,"The core module gets stuck soon when a performance test without blocks is executed. The failure happens soon after the end of the prefill part.

Analyses outcome:
The failure is caused by several overlapping cycles in the production grid. To fix it price propagators must be enhanced to support several overlapping cycles in the grid.",,eg288,,,,,,,,,,,,,,,,,,,,,,,,,XP-2346,,,,,,XP-2652,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,31276800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1819,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:400000000000000002",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Christmasprint,HOT Sprint 0 (S),,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Feb/20 10:07;eg288;some commit messages starts with ticket number XP-2345",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"PMI (SOB,CMM) impact analysis ",XP-2397,89768,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,zi174,zi174,27/Nov/19 10:10,04/Aug/20 19:35,22/Feb/21 13:21,11/Dec/19 13:36,,,Pre2020,,,,,,,,,,".Analyze the impact of Losses on (to be used in the presentation)

* PMI SOB (was already presented on the 2nd workshop, [~ll664] to verify
* PMI CMM

Also, create XP implementation tasks as needed.",,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,39139200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2018,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09n2w:s",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 40 [S],Christmasprint,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[LossWorkshop3] Create presentation,XP-2396,89755,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,zi174,ek176,ek176,26/Nov/19 17:06,31/Aug/20 15:38,22/Feb/21 13:21,11/Dec/19 12:39,,,Pre2020,,,,,,,Losses,Losses_final,," 

Create presentation for Losses Workshop (Dec, 10): Needs to be sent on Dec, 03.
 * Select driving/presenting person(s) (?[~radeale]), topics:
 * DB entities changed (i.e.: No significant change, only attr level)
 * perf test results wrt. SLA 2.0
 * summarize impact on PMI  (XP-2018)
 * summarize impact on operations, maintenance: no special impact
 * split path (XP-2346) [~eg288]
 * key findings: summarize workshops (?[~radeale])
 * Customer feedback ([~radeale] knows): XP-2328
 * Explicit Allocations XBID-4684, XP-1926: Spec clarification/Should be closed ([~radeale] to confirm)

 Deliverable checklist: [ASR010c Delivery Status|https://confluence.energy.svc.dbgcloud.io/display/XBID/ASR010c+Delivery+Status] and [Losses project tasks and status|https://confluence.energy.svc.dbgcloud.io/display/XBID/XBID+Losses+Project#XBIDLossesProject-Lossesprojecttasksandstatus] 

LW3 folder:
[Losses Workshop 3 folder|https://projects.deutsche-boerse.de/sites/ps0080/Shared Documents/01 XBID Meetings/External Meetings/Workshops/2019 - Losses Workshop 3]

 ",,ek176,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2316,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,38448000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3369,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09wiv:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 40,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Nov/19 10:30;radeale;Currently the performance tasks are carried out by Duc (scenario preparation).
The dev is being done by the teams.","05/Dec/19 10:49;radeale;Hi Jakub,

as I see it, you have two-three tasks regarding the presentation:
 * Make sure the stakeholders review it - especially JirkaV and Suzanna (in this order)
 * Make sure the devs fill in the results of the perf tests and some comments. It is clearly marked where their input is needed ([RED])
 * Either make JirkaV send it out or send it out via a Jira ticket and assign it to David Myska

Thanks, /A/",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
US04/CR018 - Preview Window - Preview Function before Publish Capacity,XP-2385,89561,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,od044,jj069,jj069,21/Nov/19 13:41,13/Aug/20 19:41,22/Feb/21 13:21,27/Feb/20 17:40,,,3.1.0,,,,,,,,,,"Find the most recent version of the specification here:

https://jira.deutsche-boerse.com/secure/attachment/79959/US%20XBID-4880%20-%20Capacity%20preview%20window_v0.81_DBAG.docx",,ei349,jj069,od044,qo794,radeale,tr866,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2626,XP-2625,,,,,XBID-4880,XP-1765,,,,,,"21/Nov/19 13:41;jj069;ID117 - Preview function before capacity publish.docx;https://jira.deutsche-boerse.com/secure/attachment/77519/ID117+-+Preview+function+before+capacity+publish.docx","21/Nov/19 13:41;jj069;image-2019-06-05-13-45-59-488.png;https://jira.deutsche-boerse.com/secure/attachment/77520/image-2019-06-05-13-45-59-488.png","21/Nov/19 13:41;jj069;image-2019-06-05-13-46-17-339.png;https://jira.deutsche-boerse.com/secure/attachment/77521/image-2019-06-05-13-46-17-339.png","21/Nov/19 13:41;jj069;image-2019-06-05-13-46-47-168.png;https://jira.deutsche-boerse.com/secure/attachment/77522/image-2019-06-05-13-46-47-168.png","21/Nov/19 13:41;jj069;image-2019-06-05-13-46-56-289.png;https://jira.deutsche-boerse.com/secure/attachment/77523/image-2019-06-05-13-46-56-289.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,31708800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2382,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:40000000000000000030002",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 2 (S),HOT Sprint 3,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-PULL-TEST,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Nov/19 13:41;radeale;We would like to know the business reasoning (scenarios/use cases) behind the request, it always helps to provide the best service, especially while solving corner  and unforseen situations. It may be also helpful to offer the customer a slightly or more different solution to the actual business needs.

As the new functionality is implemented in the GUI, please consider implementing it only for the GUI-uploaded files (which are not auto-published).

There are many uncertainties, for example:
- What if there are more unpublished files at the moment waiting in the queue? Does ""Discard"" discard them all or only the newest unpublished? The oldest unpublished? Does the ""Preview"" button count with all files in the queue or only with the newest?
- While the screen is open, the actual market situation may change, should the ""Preview"" button consider the values displayed in the GUI or load the newest?
- What it the Holding Time expires while the GUI is displayed?

Notes to the implementation of proceeding as planned:
- The Preview and Discard buttons are disabled when the Publish button is also inactive including situation when the capacity has not been published yet and not all mandatory files have been provided to the XBID.","10/Jan/20 10:35;radeale;Dear @Chris, @Dirk and @Joey Bolman,

we are going to be working on US04 and US05. Thank you for well prepared User Stories. For the beginning let me ask you some preliminary questions or extend some remarks, I hope we can get the User Stories prepared for implementation as soon possible with the highest possible quality.

We would like to know the business reasoning behind the request. We can deduct it, but anyway it can help with deeper understanding of the requested functionality, especially when solving corner and unforeseen situations.

US04 and US05:
- Only NTC files are covered by the functionality, is it so? Not CAS/CBS.
- _""AAC refers to all allocations on the interconnector""_
-- Does this cover the usual meaning of the AAC, i.e. CAS/CBS files, or also other kind of allocations (implicit, explicit, special)? In case it is the latter we propose to replace it with a better term (All Allocations?) to prevent misunderstanding.

US04:
- _""With this functionality it is no longer necessary to halt the allocation process""_
-- Note: Currently halting is not required to publish new capacity files.
- What if there are more unpublished files at the moment waiting in the queue?
-- Does ""Discard"" discard them all or only the newest unpublished? The oldest unpublished?
-- Does the ""Preview"" button count with all files in the queue or only with the newest?
- What happens, if a publish of an NTC file is planned, but in the meantime a new NTC file arrives?
- What happens, if a publish of an NTC file is planned, but in the meantime a new NTC file publish is planned? Are these two published in sequence, or the older NTC file publish is discarded?
- _""If this preview function is configured for an interconnector/border capacity the only way to publish new capacities is through the publish button on the upload panel or the buttons on the preview window.""_
-- Does this mean that even the auto-publish of capacity is deactivated for such IC? This includes both auto-publish of incoming capacity files and auto-publish of default capacity.
- If there is configured a mandatory AAC file for the IC and there is none published yet, does this mean an NTC file capacity cannot be published?
- _""When pushing the ""Discard"" button the system has to remove the new capacities from the system.""_
-- What should happen with the file? Does it stay in the system or is it deleted?
- When an NTC file publish is scheduled:
-- What happens, if the Max Capacity changes in the meantime? This new limit may violate the already planned capacity publish.
-- What is a new NTC file capacities are published in the meantime? Or scheduled?


US05:
- US05 to be implemented once the US04 is implemented and accepted, correct?
- What about time difference between the preview ATC values sending and the confirmation receiving? After the new NTC values publish the values may be different.
- What if another NTC is received in the meantime the PCF is sent?
- How long the system should wait for a PCC file before discarding the NTC file?
- When happens when the system is waiting for a confirmation of an older NTC file and a new one comes?
- _""The PCF file distribution can be triggered by (amongst other events) a new event ""NTC file receipt"".""_
-- We suggest the event is only used for PCF file distribution triggering and the PCF file distribution triggering is used only by this event, not other events (or is there any other use case being expected?).","16/Jan/20 13:37;radeale;Dear Chris, Dirk, Joey & Joey,

thank you for the provided answers. We have additional points regarding the changes.

US04 and US05:
 # From the description of the changes it seems that both the preview functionality and the electronic handshake are intended for republish of capacity provided by NTC files. If not, we need to solve situations when there has not been an initial publish of capacity.
 - So in effect this text (and likely) should be replaced: _Activating the electronic handshake function disables automatic capacity publication_ => _automatic capacity *re*_-_publication_
 # DBAG proposes to support more than one schedule at a time (additional clarifications may follow depending on the answer)
 - If only one schedule is supported, then the newest planned schedule always takes precedence regardless of the file version (for example in case two operators plan an NTC publish in close sequence)
 # Please note that the in-GUI planned schedules (US04) and the electronic-handshake agreed capacity publication may interfere with each other (this closely relates to the previous suggestion)

US04:
 # DBAG proposes to implement a new window showing the currently planned schedule(s) and offering these functions: _View NTC_, _Delete_, _Re-Schedule_ (alternatively this may be made into the new planned Preview window)
 # When in the GUI a NTC file and a new CAS/CBS are uploaded and the _Preview_ button is pressed, should the CAS/CBS file be also taken into account or not?
 # US04 changes are related only to the GUI uploaded files, is it so? Automatic publish of capacity files is not to be disabled for non-GUI provided capacity files.
 # We confirm the Max Capacity value of an IC can be changed on the fly. Related to this is whether you want the Preview functionality is to be configurable in the same way (deactivating it would also delete all planned schedules).

US05:
 # Consider a use-case:
 ## NTC1 is received by the CMM, PCF1 is sent out
 ## NTC2 is received by the CMM, PCF2 is sent out
 ## NTC2 publication is confirmed with a valid PCC2, NTC2 is published
 ## NTC1 publication is confirmed with a valid PCC1, NTC1 is published
 - Is this correct?
 # DBAG considers the option *2* of the NTC-PCF-PCC linking as preferable for implementation
- PCF contains the NTC file mRID as well as its own unique reference
- PCC contains reference to the PCF file and may or may not also contain reference to the NTC file (may be useful when solving some corner cases)","17/Jan/20 14:40;radeale;Dear Chris, Dirk, Joey & Joey,

let me summarize the outcome of the 17/01 US04/05 triplet call.

# The US04/05 functionality is intended only the for re-publish of the capacity of the NTC files. Initial capacity publish is not handled by this functionality.
# CAS/CBS files are not affected by US04/05.
# When the Preview function is activated for an IC, the auto-publish of incoming NTC *and CAS/CBS* files is disabled (but they appear in the Capacity Management window, so can be published manually).
# Newest NTC file version always takes precedence.
-- E.g. when a there is planned publish of NTCv4 and NTCv5 is received and accepted by the system, NTCv4 publication is discarded.
# Only one planned schedule is supported.
# The new buttons will be named ""Preview NTC"" and ""Publish NTC"" (or with added ""(only)"").
# DBAG will, during the implementation, come with an idea how to show the already planned NTC file publish (time, possibility to discard or modify the publish time) - either a new window or implementing it to the current _Upload_ panel.
# The Preview functionality for an IC can be activated and deactivated on the fly, i.e. editing the current IC configuration. Deactivating it also discards a planned schedule.
# NTC-PCF-PCC linking agreed as a preferable for implementation.
# DBAG to propose the PCC and PCF file format according to the CIM standard.
# PCF file distribution to be sent out only as a reaction to the NTC File Received event. This can be changed in future in case it is demanded.

_Agreed use cases:_
(1)
# NTC1 is received by the CMM, PCF1 is sent out
# NTC2 is received by the CMM, PCF2 is sent out => NTC1 is discarded
# NTC2 publication is confirmed with a valid PCC2, NTC2 is published
# NTC1 publication is confirmed with a valid PCC1, NTC1 *is NOT* published

(2)
# NTC1 is received by the CMM, PCF1 is sent out
# NTC2 is received by the CMM, PCF2 is sent out => NTC1 is discarded
# NTC1 publication is confirmed with a valid PCC1, NTC1 *is NOT* published
# NTC2 publication is confirmed with a valid PCC2, NTC2 is published

Additional points from DBAG
# The current functionality changes doesn't interfere with manual NTC changes. I.e. a planned schedule may overwrite manually changed NTC values. Please feel free to let us know whether you want to handle this in a different way.
","06/Feb/20 15:13;ei349;Issue split into:
|XP-2625|SMXBID CLONE: CR018  - RefData - Preview Function before Publish Capacity|
|XP-2626|SMXBID CLONE: CR018  - Scheduling - Preview Function before Publish Capacity|
","17/Feb/20 12:20;radeale;+Testing notes+

To be fixed:
- Rename the _Preview_ button to _Preview NTC_

To consider/nice to have:
- When the Preview functionality is not active for an IC, the Preview button is not visible
- When a file is discarded, its name is stroked through","18/Feb/20 09:24;qo794;See the list of changes in https://github.deutsche-boerse.de/dev/xbid/pull/580","20/Feb/20 14:16;od044;*Bugs or missing features*

*Improvements (open for discussion)*
- WIP add more junit tests - PublishController, etc.
- enhance a date calendar to reflect schedule date options
- enhance a time format in validation error messages, actual is still in format 2020-02-19T13:33:00.000+01:00
- don't discard all uploaded NTC files while update one NTC with new version
- add a file version into info, validation messages
","20/Feb/20 17:26;tr866;Bug found: When uploading file with lower or duplicate revisionNumber by other channels(tested with email) the existing schedule is discarded even if the file is rejected
Retested with success (/): in docker with version R2.0.31-SNAPSHOT (Build a73369da5b2d3caea8a8b0307e27f257ee13cb30) retested via SFTP and behaviour looks now correct",,,,,,,,,,,,,,,,,,,,,,,
 ID37 - FullOrderCaptureReq overview,XP-2384,89560,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,tm431,jj069,jj069,21/Nov/19 13:40,13/Aug/20 20:15,22/Feb/21 13:21,05/Mar/20 15:18,Agile Pilot,,Agile Pilot,,Inquiry,Trading,,,,,,,"{color:#00875a}*[ Exchange user's insight into detailed orders history ]*{color}
h1. Original requirement:
{code:java}
Allow for Exchange user to search for _FullOrdrCaptureReq _(ref. DFS510) and for specific timeperiod. At the moment only possible for Admin User.
{code}
h1. Refined description:
h2. Current situation

Only Admin user can get response after request for the Full Order Capture Request (_FullOrdrCaptureReq_). 
 Info from DFS510:
{code:java}
FullOrdrCaptureReq - This message is used to retrieve a historical list of all orders entered into the system including the order maintenance steps either triggered by the PX or by the XBID SOB (order execution, order inactivation). 
As a response to this request a list of Full Order Capture Responses is returned.
{code}
h2. Proposed solution 

Exchange user will be allowed to send the _FullOrderCaptureReq_ to the system and will receive the _FullOrderCaptureResp_ containing requested data.
h2. Acceptance criteria

After Exchange user sends the _FullOrderCaptureReq _he will receive response from the system in the format of FullOrderCaptureResp_ with the agreed level of details (see questions section).
h2. Questions from DBAG
 - same level of details on FullOrderCaptureresp as current admin solution for every exchange user?
 - what is meant by ""specific time period""? Is it 60 minutes from the start date on input as it is now?
 - limit to prevent system overloading?",,eg288,jj069,tm431,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4879,XBID-4844,,,,,,"17/Jan/20 14:27;tm431;US 06 Full Order Capture Request_draft_0_2_no_api_change.docx;https://jira.deutsche-boerse.com/secure/attachment/79288/US+06+Full+Order+Capture+Request_draft_0_2_no_api_change.docx","31/Jan/20 08:52;tm431;US XBID-4879 Full Order Capture Request_draft_0_7.docx;https://jira.deutsche-boerse.com/secure/attachment/79940/US+XBID-4879+Full+Order+Capture+Request_draft_0_7.docx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,31276800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2381,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0a9h9:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 3,HOT Sprint 4 (S),,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2633,XBID-4909,XP-456,XP-2979-postgresql,XP-3264,XP-2382,develop,XP-3230,XP-2694,XP-2232,master,XP-4273-owasp-zap-enable,XP-3070,inline-tomcat-params,XP-4526-resource-managment-fix,fixing-failover,,,,,,,,,,,,,,,,,,true,"07/Jan/20 10:32;tm431;Do they want to retrieve only Own Orders? as on OrdrReq? Or All orders from all PX Users incl full info as Admin currently gets? This is done on acctId (balancing group level). Add AccitId into Request, Mandatory only for PX User?

For how long we store ""history "" the orders?

FullOrdrCaptureReq was send by ADMIN user
{code:java}
<?xml version=""1.0"" encoding=""UTF-8""?>
<FullOrdrCaptureReq xmlns=""http://www.deutsche-boerse.com/m7/v1"" startDate=""2020-01-07T11:00:00.000Z"">
    <StandardHeader marketId=""XSOB""/>
 </FullOrdrCaptureReq>
 {code}
EXAMPLE of FullOrdrCaptureResp in 2.0.25.5
{code:java}
<?xml version=""1.0"" encoding=""UTF-8""?>
<FullOrdrCaptureResp xmlns=""http://www.deutsche-boerse.com/m7/v1"">
    <StandardHeader marketId=""XSOB""/>
    <OrdrList>
        <Ordr ordrId=""7"" initialOrdrId=""7"" acctId=""BG-EPEX-------01"" contractId=""12904"" side=""BUY"" px=""1000"" qty=""10000"" initialQty=""10000"" ordrExeRestriction=""NON"" txt="""" dlvryAreaId=""10Y1001A1001A39I"" clOrdrId=""1578395756200"" preArranged=""false"" type=""O"" state=""ACTI"" usrCode=""TRD001"" revisionNo=""1"" timestmp=""2020-01-07T11:14:52.361Z"" validityDate=""2020-01-07T17:00:00.000Z"" validityRes=""GFS"" action=""UADD"" lastUpdateUsrInfo=""BG-EPEX-------01TRD001""/>
        <Ordr ordrId=""8"" initialOrdrId=""8"" acctId=""BG-EPEX-------01"" contractId=""12904"" side=""SELL"" px=""1000"" qty=""0"" initialQty=""5000"" ordrExeRestriction=""NON"" txt="""" dlvryAreaId=""10Y1001A1001A39I"" clOrdrId=""1578395761432"" preArranged=""false"" type=""O"" state=""IACT"" usrCode=""TRD001"" revisionNo=""2"" timestmp=""2020-01-07T11:14:57.592Z"" validityDate=""2020-01-07T17:00:00.000Z"" validityRes=""GFS"" action=""FEXE"" lastUpdateUsrInfo=""BG-EPEX-------01TRD001""/>
        <Ordr ordrId=""7"" initialOrdrId=""7"" acctId=""BG-EPEX-------01"" contractId=""12904"" side=""BUY"" px=""1000"" qty=""5000"" initialQty=""10000"" ordrExeRestriction=""NON"" txt="""" dlvryAreaId=""10Y1001A1001A39I"" clOrdrId=""1578395756200"" preArranged=""false"" type=""O"" state=""ACTI"" usrCode=""TRD001"" revisionNo=""2"" timestmp=""2020-01-07T11:14:57.592Z"" validityDate=""2020-01-07T17:00:00.000Z"" validityRes=""GFS"" action=""PEXE"" lastUpdateUsrInfo=""BG-EPEX-------01TRD001""/>
        <Ordr ordrId=""8"" initialOrdrId=""8"" acctId=""BG-EPEX-------01"" contractId=""12904"" side=""SELL"" px=""1000"" qty=""5000"" initialQty=""5000"" ordrExeRestriction=""NON"" txt="""" dlvryAreaId=""10Y1001A1001A39I"" clOrdrId=""1578395761432"" preArranged=""false"" type=""O"" state=""ACTI"" usrCode=""TRD001"" revisionNo=""1"" timestmp=""2020-01-07T11:14:57.592Z"" validityDate=""2020-01-07T17:00:00.000Z"" validityRes=""GFS"" action=""UADD"" lastUpdateUsrInfo=""BG-EPEX-------01TRD001""/>
        <Ordr ordrId=""9"" initialOrdrId=""9"" acctId=""BG-OMIE-------01"" contractId=""12904"" side=""SELL"" px=""1000"" qty=""0"" initialQty=""2000"" ordrExeRestriction=""NON"" txt="""" dlvryAreaId=""10YPT-REN------W"" clOrdrId=""1578396819078"" preArranged=""false"" type=""O"" state=""IACT"" usrCode=""TRD001"" revisionNo=""2"" timestmp=""2020-01-07T11:32:35.089Z"" validityDate=""2020-01-07T17:00:00.000Z"" validityRes=""GFS"" action=""FEXE"" lastUpdateUsrInfo=""BG-OMIE-------02TRD001""/>
        <Ordr ordrId=""7"" initialOrdrId=""7"" acctId=""BG-EPEX-------01"" contractId=""12904"" side=""BUY"" px=""1000"" qty=""3000"" initialQty=""10000"" ordrExeRestriction=""NON"" txt="""" dlvryAreaId=""10Y1001A1001A39I"" clOrdrId=""1578395756200"" preArranged=""false"" type=""O"" state=""ACTI"" usrCode=""TRD001"" revisionNo=""3"" timestmp=""2020-01-07T11:32:35.089Z"" validityDate=""2020-01-07T17:00:00.000Z"" validityRes=""GFS"" action=""PEXE"" lastUpdateUsrInfo=""BG-OMIE-------02TRD001""/>
        <Ordr ordrId=""9"" initialOrdrId=""9"" acctId=""BG-OMIE-------01"" contractId=""12904"" side=""SELL"" px=""1000"" qty=""2000"" initialQty=""2000"" ordrExeRestriction=""NON"" txt="""" dlvryAreaId=""10YPT-REN------W"" clOrdrId=""1578396819078"" preArranged=""false"" type=""O"" state=""ACTI"" usrCode=""TRD001"" revisionNo=""1"" timestmp=""2020-01-07T11:32:35.089Z"" validityDate=""2020-01-07T17:00:00.000Z"" validityRes=""GFS"" action=""UADD"" lastUpdateUsrInfo=""BG-OMIE-------02TRD001""/>
    </OrdrList>
</FullOrdrCaptureResp>
{code}
 Example of OrdrReq and OrdrExeRprt sent by PX User
{code:java}
<?xml version=""1.0"" encoding=""UTF-8""?>
 <OrdrReq xmlns=""http://www.deutsche-boerse.com/m7/v1"" acctId=""BG-EPEX-------01"" inclPreArranged=""false"">
 <StandardHeader marketId=""XSOB""/>
 </OrdrReq>
 
<?xml version=""1.0"" encoding=""UTF-8""?>
 <OrdrExeRprt xmlns=""http://www.deutsche-boerse.com/m7/v1"">
 <StandardHeader marketId=""XSOB""/>
 <OrdrList>
 <Ordr ordrId=""7"" initialOrdrId=""7"" acctId=""BG-EPEX------01"" contractId=""12904"" side=""BUY"" px=""1000"" qty=""3000"" initialQty=""10000"" ordrExeRestriction=""NON"" txt="""" dlvryAreaId=""10Y1001A1001A39I"" clOrdrId=""1578395756200"" preArranged=""false"" type=""O"" state=""ACTI"" usrCode=""TRD001"" revisionNo=""3"" timestmp=""2020-01-07T11:14:52.361Z"" validityDate=""2020-01-07T17:00:00.000Z"" validityRes=""GFS"" action=""PEXE"" lastUpdateUsrInfo=""BG-OMIE------02TRD001""/>
 </OrdrList>
 </OrdrExeRprt>{code}
 

On OrdrReq we retrieve only ACTI or HIBE orders

 Do they want to add prodName as in OrdrReq into FullOrdrCaptureReq?

 

ComTrader does not send FullOrdrCaptureReq during login procedure","15/Jan/20 13:45;tm431;Dear Patrik,

Thank you for your elaborate comments. Let me go through them one by one.

*US06-VR01 - The API user can send Full Order Capture Requests for its own orders.*

Q: Can you retrieve the orders *entered in the BG(s) where the user was assigned at the time of Req was sent* instead of by the exact user ID?

A: Yes you can. The intention is to avoid at all cost (see BR05) that NEMOs (i.e. LTSs, i.e. API users) can see each others' orders. I assume (others may confirm this) that BGs are not shared between NEMOs (API users).

{color:#00875a}DBAGA: BGs are always unique per MEMBER, you cannot have one BG shared with two Members{color}

Q: API user should not be used as the technical term, because it could also be implicit participant.

A: This is fine. Any term that is unambiguous is OK. Let's agree on the term to use in the triplet.

{color:#00875a}DBAGA: Ok, but for the future stop using terms such as NEMOs, Exchange etc. always use names/entities as are used in the system. e.g. Member, or User created with user Role Exchange and with assigned additional rights API. Only then we will understand what you are speaking about. {color}

*US06-BR03 - The number of Full Order Capture Requests that an API user is allowed to send, each request being for the set of orders that was submitted within on 60-minute period, is restricted in such a way that the API user can receive all its orders that were active in the XBID SOB until [one hour ] before the time of sending the request.*

Q:  You stated active orders but I assume that you want to retrieve also orders which were in HIBE status etc. right? 

A: Yes. Please understand orders that had not reached the end of their lifecycle (expired, matched, cancelled) at the start of the time window for which they are requested, i.e. the startDate in the request, which is defined as ""Start of the period for which the order list is retrieved. The request returns all orders executed in the next 60 minutes beginning with startDate."" Perhaps the phrasing was redundant, since orders that have reached the end of their lifecycle before the startDate cannot be executed after that moment. (Please correct me if my understanding is wrong).

{color:#00875a}DBAGA: I think that you have confirmed this in approval of ""in resp PX user will get same/all/statesof orders as is currently developed for Admin user but only entered in BGs he is assigned on.{color}

{color:#00875a}A: This seems fine."" So you will get what you are currently getting{color}

 
 The ultimate intention is that the requester retrieves all the orders that had not yet reached the end of their lifecycle at the moment the LTS disconnected, because on these orders there will have been some activity (e.g. matching, expiration, hibernation) during the period the LTS was disconnected. The moment of disconnection obviously lies in the past. I assumed it would not be longer than 60 minutes ago, but this assumption probably is wrong. Establishing the correct value for the [one hour] will require some internal research. If the disconnect moment was 80 minutes before the moment of sending the request, I assume that two requests must be sent, since the order execution/activity period to be covered is more than 60 minutes and less than 120 minutes.  

Q:  1) request limits will stay the same 1/10 (short/long) I think it is 1per min 10 per hour as is specified in DFS510. 

A: As per the above, this will not do. More than one request may be needed at the same moment.

{color:#00875a}DBAGA: If you need to increase this limit no problems for us, we can change it per request. What do you suggests? 
{color}

{color:#00875a}We cannot change 60min interval with this current approach(startDate), but you will be able to send more request in one min. {color}

{color:#00875a}Or (see below) we can also introduce new attributes in Req as Lara suggested from - to. But this will need API change and is of course more complicated to develod and could be more time-consuming for processing.  {color}

Q:  2) in resp PX user will get same/all/statesof orders as is currently developed for Admin user but only entered in BGs he is assigned on.

A: This seems fine.

Q: 3) you can send as much request as you want for the past, we will always retrieve orders for next 60mins from timestamps in req. Currently we retrieve history for I think last 3Days, just check with ADMIN user how the req/resp works.

A: We won't need longer than 3 days. However, we will need sending more than one request at the same moment (see above).

{color:#00875a}DBAGA: Yup, we can increase the request limits{color}

Q:  4) If you enter request e.g. for future we will response with blank reps. as is currently for admin, or do you want some errresps?

A: That should be fine. Sending a request for the future can only result from a faulty business process (and, since this will be automated, that means a bug).

Q: In a nutshell just provide me with examples if you need to change anything as is currently developed for Admin. Or if you can provide me with the examples how you want the req/resp should behave because I did not get it from your description.

A: See above answers.

{color:#00875a}DBAGA: I understand that the current behavior for admin stays{color}

*US06-BR04 - If the API user sends a Full Order Capture Request for a time period that does not comply with what has been specified in US06-BR03, this request is rejected.*

Q: Should be clear after point above is clarified. Or can you give me examples when we should reject the Req?

A: Should be tackled by above answers.

 {color:#00875a}DBAGA: I understand that the current behavior for admin stays{color}

*US06-BR05 - A Full Order Capture Response which is sent to an API user shall never contain orders that are not owned by this API user.*

Q: Again easiest for us is to retrieve based on assigned BG(s). With this request should ADMIN user be still able to retrieve all Orders for all BG(s)? Or do you want to cancel this functionality?

A: For BGs see above answer. Please do not cancel the ADMIN functionality.

 {color:#00875a}DBAGA: OK, functionality for ADMIN will stay.{color}
 added a comment - 15/Jan/20 10:55 - edited
 *US06-VR01 - The API user can send Full Order Capture Requests for its own orders*
 Q: The use of BG is Ok, but can you clarify if this means that acctId field will we required in the FullOrdrCaptureReq message?

{color:#00875a}DBAGA: No that will not be needed. No new attributes in req. {color}

Or will we receive the information of all the orders sent in all the BGs where the member who requesting the information is assigned?

 

Member never ever can request anything, only user can.

{color:#00875a}DBAGA:Member never ever can request anything, only user can.  Only user with additional API request right can request. {color}

{color:#00875a} Only for those BGs in which the *user* is assigned *at the time* the request is send. {color}

{color:#00875a}Example: TRM01 Member has 3BGs. BG1, BG2 and BG3. User XBOMIEX1 is assigned in BG1, BG2, BG3 and enters orders in all BGs. BG1, BG2, BG3. You send Req, you get resp for all Ordrs entered in BG1, BG2, BG3. Then the order in BG3 is e.g. filled (end of life cycle as you call it), and you can de assign XBOMIEX1 user from BG3 (no active orders), then  you send request, and get orders only for BG1 and BG2, you will not get filled order for BG3 because at the time the req wa send the user was not assigned into BG3{color}
  
 *US06-BR03 - The number of Full Order Capture Requests that an API user is allowed to send, each request being for the set of orders that was submitted within on 60-minute period, is restricted in such a way that the API user can receive all its orders that were active in the XBID SOB until [one hour ] before the time of sending the request.* 
 Q: is the ""3 days in the past"" principle the same as the one for TradeCaptureReq? I mean, is SOB configured in order that it allows to ask for information in the past only up until the 3 days before? Is it something that cannot be changed? 
 If that cannot be changed, instead of limiting the lag of time starting from the start date, why don't we just apply the same rule as for the TradeCaptureReq, meaning that the FullOrdrCaptureReq can be sent related to a period starting up until 3 days before the start date time, covering maximum of 24 hours? 

{color:#00875a}DBAGA: This is also possible to introduce new from - to attributes in but will result in API change and will be more complicated to develop. And  Currently we have not strong opinion what will be better for you, but of course to generate bigger response will be more time consuming for the system. {color:#00875a}Plase note that we do no guarantee any resp times for inquiry request (Routing Key: comxerv.request.inquiry).{color}{color}

{color:#00875a}Easiest is of course not to change API and you will send just more requests.{color}

 

In that way, the user can just choose how much time he needs, instead of performing several requests with different start date time. 

Q: in any case, how would be the impact of having a longer lag in the past (for example: a week ago, 2 weeks ago, ...). How would be the impact of making the user able to perform a request related to a specific time starting more than 3 days before in the past? 

{color:#00875a}DBAGA: this is not possible and in no way we will change this. I think you get same info in one of the reports Reporting Engine generates every day.{color}

Thank you ","30/Jan/20 15:01;tm431;Dear All,

 

Please find attached new version of US. We have couple of comments there.

We also tried to sum up all business rules into one example - proposed update of functional specification, including proposed API change and design of message FullOrdrCaptureReq. We hope that this proposal covers all your business rules. I just highlighted in grey background color all new proposed changes. I tried to come up with two variants for endDate parameter, one to be VAR1 MANDATORY, other VAR2 to be OPTIONAL, as this was not clear to me from updated business Rules. Please decide which will suit you best.

We are happy to discuss our proposal or consider any new suggestions you could have. We can discuss this here in Jira or schedule joint call whatever fits you.

 

Coming back to you request from our triplet meeting to provide you with written analyzis regarding 2h limit interval and number of short/long request please consider following:

 

1) The easiest way what you can also check on your side and what we believe will give you the overall picture about this discussion is size and number of entries in TC540 Daily Order Maintenance report and compare it with TC810 Daily Trade Confirmation report. This pretty much reflects why we have concerns between FullTradeCaptureReq (TC810) covering maximum of 24hour interval and our proposal of 2h for FullOrderCaptureReq (TC540). E.g. in SMXBID-1715 where we have generated report for TRM02 from prod DB. You can see that size of TC810 is cca 650kb, whereas for TC540 size is 7-10MB zipped. These reports covers 24hour period.

2) We also checked the tables which covers all new entries per DAY in TRADE_HISTORY (this table is covered by FullTradeCaptureReq), and ORDER_HISTORY (this table is covered by FullOrderCaptureReq). Please note that with each request we must search all data in the table, create XML from them, and send it to RabbitMQ etc.

 

*ORDER_HISTORY*
 2020-01-20 00:00:00 2892700
 2020-01-21 00:00:00 3420784
 2020-01-22 00:00:00 3432173
 2020-01-23 00:00:00 3339426
 2020-01-24 00:00:00 3517804

*TRADE_HISTORY*
 2020-01-20 00:00:00 186872
 2020-01-21 00:00:00 179504
 2020-01-22 00:00:00 215046
 2020-01-23 00:00:00 196532
 2020-01-24 00:00:00 183916

I think that it is clear that we have for each day on average less then 200k Trades, and 3M order changes. So lets say we have 15x more order maintenance steps then trades each day. Please let us know if this is clear for you or you need more explanation.

 

 ","30/Jan/20 16:52;eg288;xbid prod stats for order and trade history tables:

*ORDER_HISTORY*
 2020-01-20 00:00:00 2892700
 2020-01-21 00:00:00 3420784
 2020-01-22 00:00:00 3432173
 2020-01-23 00:00:00 3339426
 2020-01-24 00:00:00 3517804
 2020-01-25 00:00:00 2813578
 2020-01-26 00:00:00 2534858
 2020-01-27 00:00:00 2889228
 2020-01-28 00:00:00 2856077
 2020-01-29 00:00:00 2404184

*TRADE_HISTORY*
 2020-01-20 00:00:00 186872
 2020-01-21 00:00:00 179504
 2020-01-22 00:00:00 215046
 2020-01-23 00:00:00 196532
 2020-01-24 00:00:00 183916
 2020-01-25 00:00:00 149474
 2020-01-26 00:00:00 141888
 2020-01-27 00:00:00 137168
 2020-01-28 00:00:00 109231
 2020-01-29 00:00:00 93697

*SQL queries used to obtain the data*
{code}
SELECT date_trunc('day', last_update_time), count(\*) from cx_101_order_history where date_trunc('month', last_update_time) = '2020-01-01 00:00:00' group by date_trunc('day', last_update_time)
SELECT date_trunc('day', last_update_time), count(*) from cx_111_trade_history where date_trunc('month', last_update_time) = '2020-01-01 00:00:00' group by date_trunc('day', last_update_time)
{code}","13/Feb/20 09:12;tm431;Can be developed according to v.17 in external ticket","26/Feb/20 08:41;tm431;Why do we not send PARRENTORDRID in Resp? Are there any other parameters which are not send back?",,,,,,,,,,,,,,,,,,,,,,,,,,
SMXBID CLONE: ID115 - Certificates and password expiration management change (linked to ID84),XP-2383,89559,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,zi174,jj069,jj069,21/Nov/19 13:38,31/Aug/20 15:38,22/Feb/21 13:21,30/Apr/20 14:33,,,Agile Pilot,,,,,,,,,,"{color:#00875a}*[ Avoid recurring problems with expiring authentication methods ]*{color}
|FIY: Extension/detailing of requirements addressed previously under ID 84|
h1. Current situation

In the current specification for XBID personal passwords of end users have to be changed every X days and if the password has expired already, the user must request a password reset from the security administrator.

Worst-case scenario, if not changing current certificate/password policy, is that for example Shipping Module API user expires and ACK messages are blocked. This leads to imbalance in nomination.
h1. Change description

For individual reminders for the certificate/password expiration of each user:
 - Automatic email warning will be sent to SMTP address defined in XBID web client (SOB, SM and CMM)
 ** Email addresses associated to these reminders are the ones provided when setting up the user i.e. there is no need for additional email address for the new reminder functionality.
 - Warning needed about user’s password and/or certificate which will be expiring

h2. Solution in detailed level
 - it would be possible to choose whether the email warning is received or not
 - it would be possible to choose how many warnings and when the warning will be sent out. For example:
 ** 1st warning need to be sent out 20 days prior the expiration
 ** 2nd warning need to be sent out 5 days before the expiration
 ** 3rd warning need to be sent out 1 day before the expiration
 - The message regarding to *User Name* should include following items:
 ** Message headline:
{noformat}
Warning – user password is expiring!{noformat}

 * 
 ** Message body:
{noformat}
[shipping module] password for user XX is expiring soon, please reset the password.{noformat}

 - The message regarding to *Certificate* should include following items:
 ** Message headline:
{noformat}
Warning – user certificate is expiring!{noformat}

 * 
 ** Message body:
{noformat}
[shipping module] certificate for user XX is expiring soon, please renew the certificate.{noformat}

 - If the SMTP address is not valid, then DBAG should get warning and inform the organization in question.

For possibility to unlock the user account without support of other user/3rd party, it is requested that:
 - User could reset the password via XBID web client when login to system already before the account is locked (warnings visible in login window).
 - User can unlock account without 3rd party support when password has already expired. DBAG to propose feasible mechanism that does not require the user to be logged in via XBID web client.

h1. Questions from the DBAG
 * For our analysts: what passwords and certificates are involved in our system? 
 * is it applicable for API (PMI)? 
 * is it applicable for explicit participants? 
 * Can we avoid the expiration policy completely? 

Notes: 
 * Ana to check common storage for all user certificates 
 * Server certificates are under control of the Techops
 * User certs. are involved only on Production 
 * Password/Ldap: 
 ** Dev can connect to LDAP and check expiration date
 ** If not further discussion with TO is needed about some interface
 * User Certificates
 ** we can update the jenkins job for generation of certificates and create accessible place where the information about expiration 

 * 
 ** BizOps to create common storage for storage
 ** Dev to scan regulary the storage and send the emails about expiration info ",,ei349,ek176,jj069,ne232,qo794,zi174,,,,,,,,,,,,,,,,,,,,,,XBID-4840,,,,,,,,,,,,,,,,,"21/Nov/19 13:38;jj069;ID115 - Password expire warning-enhanced.docx;https://jira.deutsche-boerse.com/secure/attachment/77518/ID115+-+Password+expire+warning-enhanced.docx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,34819200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2380,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5p:400000000004",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Nov/19 13:38;radeale;First of all please inquiry with the customer whether they want to keep the current password policy or adjust it to increase its reliability and robustness (i.e. get rid of the forced password change, feel free to ask David M. for more details about the current trades in password policies).

Open points:
- The customer wants many configuration options, where these should be configured? The best is to have it accessible to the customer, I believe - a new screen? Or new administrative interface?","21/Nov/19 15:17;ei349;TechOps resp: client certificates for webgui and connectivity. TO is sending information about expirations to BOs every day. 
- client certs - stored in vault
- server certs - stored in vault
SSL Admins: server certificates. Published in Slack channel. ([~ne232] FYI)

We need to check which recipients should receive the notification. 

what about PMi users? 

Steps for resetting password 
- option 1: 
-- apache password auth escaped and then the page with possiblity to reset the password
- option 2: 
-- dedicated LDAP connected application 
-- LDAP needs to contain the emails as well. 

EST: 
- Certificates - 10
- Passwords - 5
- LDAP resets: 
-- possibility 1 - removing the basic Auth - 40
-- posibility 2 - dedicated webApp - 
","22/Nov/19 13:33;ek176;Regarding password reset, there should be some measures so that it cannot be mis-used (easily):
 * [DOS] The link/button cannot be utilized by an automated robot (exhaust of resources). Solution: CAPTCHA, random delay
 * [Guessing] The link/button should not be usable in automated way, i.e.: Trying to guess (oraculum) the valid e-mail via side channels (timing attack). Solution: random delay
 * [Misuse/SPAM] The link/button should not be used to try dictionary-generated e-mails, resetting various user passwords. Or, at least spamming their e-mails with excessive no. of e-mails. Solution: dynamic (progressively increasing delay, captcha(s), request_limit, ...)

Also, the password reset procedure should need at least two information. Pwd-change-link possession (and e-mail access) should not be sufficient to reset the pwd. Additional info should be provided by the user, such as old password, or pre-shared one-time PIN codes shared via secure way (as Google does), ... And, always provide fallback via a hotline (BO).","14/Jan/20 13:19;zi174;Dear Triplet members,

please see our initial comments to the user story below. 

*+US 01: Password expiration+*

_US1-BR01_
 * Each user can choose *for each module* whether he will receive a warning for password expiration or no ---> {color:#4c9aff}Might you list meant modules? Our assumption is: CMM, SOB, SPM, ComTrader and CMI, might you please confirm?{color}
 * (to be defined where it can be chosen, if the same user is propagated from one to another module 2 reminders will be received?) ---> {color:#4c9aff}We are unsure if this can be answered during the refinement because we expect some code possibility research during development. So, from our point of view, we'll be likely able to answer afterwards.{color} 

_US1-BR02_
 * If the user choose to receive a warning, *he can configure* in an interface *(to be defined where)*: ---> *1.* {color:#4c9aff}Our understanding is that the each user will be responsible for setting of this functionality, no super admin will be created for that purpos{color}{color:#4c9aff}e{color}. *2.* {color:#4c9aff}Our initial vision is to create a new GUI for that purpose{color}
 * The numbers of warnings to be received ---> {color:#4c9aff}Please confirm the values{color}
 * The number of days prior to the password expiration day when he receives the warning ---> {color:#4c9aff}Please confirm the values{color}

{color:#172b4d}_US1-BR03_{color}
 * {color:#172b4d}The warning is an automatic email sent to SMTP e-mail address defined in XBID web client when the user is created (where the password is sent) *(are there any users without an email address?)* ---> We need to chec{color}k

_US1-BR05_
 * _*If the SMTP e-mail address is not valid, the user should receive an information from DBAG (How XBID recognize the email address is not valid? – to be discussed)* ---> {color:#4c9aff}Before sending is not possible to recognize that – a potential solution – use «reply to» which means that in case of invalid email, the BizOps team will be informed as the BizOps will receive a feedback that the email cannot be delivered.{color}_

_US1-BR07_
 * Warnings about password expiration shall be visible in login window – applicable to all modules ---> {color:#4c9aff}Currently, this is not possible, we don’t have any login window – we need internal alignment also with regard to PenTest (we use basic authentication){color}

 

*+US 02: Certificate expiration+*

_US2-BR01 (the same question as in US1)_
 * Each user can choose *for each module* whether he will receive a warning for password expiration or no ---> {color:#4c9aff}Might you list meant modules? Our assumption is: CMM, SOB, SPM, ComTrader and CMI, might you please confirm?{color}

_US2-BR02_ _(the same questions as in US1)_
 * If the user choose to receive a warning, *he can configure* in an interface *(to be defined where)*: ---> *1.* {color:#4c9aff}Our understanding is that the each user will be responsible for setting of this functionality, no super admin will be created for that purpose. *2.*{color} Our initial vision is to create a new GUI for that purpose
 * The numbers of warnings to be received ---> {color:#4c9aff}Please confirm the values{color}
 * The number of days prior to the password expiration day when he receives the warning ---> {color:#4c9aff}Please confirm the values{color}

_US2-BR03_
 * The warning is an automatic email sent to SMTP e-mail address defined in XBID web client when the user using the certificate is created (where the password is sent) (This will result in multiple warnings if not centralized.)
 {color:#172b4d}When it comes to certificates not related to a user but to a party (e.g. email certificate) the SMTP e-mail address defined in XBID web client when the party is registered shall be used. *(This need to be further considered which email address is used as these emails are not used for password distribution but for data exchanges, alternatively the configuration of warnings should include email to be used for warning message)* ---> {color:#4c9aff}This could be solved by choosing an user which will be set as recipient of the certificate{color}{color}{color:#4c9aff}.{color} 

_US2-BR05_ _(the same question as in US1)_
 * If the SMTP e-mail address is not valid, the user should receive an information from DBAG *(How XBID recognize the email address is not valid? – to be discussed)* ---> {color:#4c9aff}Before sending is not possible to recognize that – a potential solution – use «reply to» which means that in case of invalid email, the BizOps team will be informed as the BizOps will receive a feedback that the email cannot be delivered{color}{color:#4c9aff}.{color}

 

*+US 03: Account Unlock+*

_US03-BR01_
 * Each user is able to reset the password via XBID web client *(to be detailed where)* when logged in to system already before the account is locked ---> {color:#4c9aff}Our initial vision is to create a new GUI for that purpose because of current authentication limitation (please see US03-BR03 answer){color}

_US03-BR02_
 * Each user is able to reset the password via XBID web client when password has already expired (DBAG to propose feasible mechanism – which will be added here when aligned) ---> {color:#4c9aff}Please keep in mind that an user must know the old password – without that he/she cannot do anything (neither password reset nor opening locked account){color}

_US3-BR03_
 * Each module should inform the user about a locked password or an expired password during unsuccessful login attempt. ---> {color:#4c9aff}Unfortunately, this is a bit tricky. Currently used basic authentication is not allowed to this functionality. Thus, the modules don't know if the user is locked or has an expired password. This information can be provided by the new GUI for password and certificates as part of best practices like in case of X unsuccessful login, please check your account in the GUI. {color}

 

{color:#172b4d}*Other question as part of commented* *+US 03: Account Unlock+**:*{color}

OTE: An locked account could be also a result of a wrong password, couldn't, not only expiration? We speak only expiration here. ---> {color:#4c9aff}From our point of view, we cannot recommend to have a possibility to unlock the account locking by filling (e. g. five) wrong passwords. This can be a potential security attack and, from our point of view, it makes sense to contact 3rd party support so that they check what happened.  {color}

{color:#172b4d}OTE: {color}CR says for the context: Worst-case scenario, if not changing current certificate/password policy, is that for example Shipping Module API user expires and ACK messages are blocked. This leads to imbalance in nomination. ---> {color:#4c9aff}we need to check{color}

 

 

{color:#172b4d}[~ek176] please check and let me know if provided technical detail is ok from development point of view.{color}

Thanks","15/Jan/20 12:17;zi174;David Myska answer: XBID-4878
  
 Dear Jakub,

Can you clarify if the new GUI you mention in relation to US03-BR01 is created as 1 GUI covering all modules? How such a GUI would be accessible? With any of the User IDs and relevant password for own access management? Or with a separate login and password for the Web GUI will there be a password reset function for this new Web GUI as well in that case?

Kind regards

David

 

ANSWER DRAFT

---------------------------------------------

Dear David,

You are correct, as I confirmed in XBID-4876. 

The GUI will be accessible by same way as other GUI (i. e. browser link). No separate login or password. Users will need to use their User Id and password. Example - if you log in with the Shipping user, you will have possibility to set password warnings for shipping etc. In case user will forget the password, the new GUI will offer the same password reset function as other modules. 

 

 

Please also see our update for the 2nd OTE's question:

_CR says for the context: Worst-case scenario, if not changing current certificate/password policy, is that for example Shipping Module API user expires and ACK messages are blocked. This leads to imbalance in nomination._
 _Is this risk removed with this US ? Or it means the ACK messages are blocked but only till the user renews (by himself, so fast) his password ? Can he recover ACK messages sent meanwhile ? Is API user safe ?_

_*Is this risk removed with this US ?*_
 * {color:#4c9aff}_No, the risk is not removed. If a certificate/password expires, the technical account can no longer access the SM API._{color}

_*Or it means the ACK messages are blocked but only till the user renews (by himself, so fast) his password?*_
 * {color:#4c9aff}_The SM API works differently._ _SM files are available to download via API and client systems send ACK messages for them (not the SM). The API is pull-based, i.e. the client system has to actively pull the available files and acknowledge them. The unacknowledged files are available for download for a long as file retention period is, the fact that particular user account is expired/blocked has no effect here._{color}

_*Can he recover ACK messages sent meanwhile ?*_
 * {color:#4c9aff}_No, ACK messages are not produced by SM. If we talk about the SM files, then yes, see answer above._{color}

_*Is API user safe ?*_
 * {color:#4c9aff}_What does the term ""user safe"" mean?_{color}","16/Jan/20 10:51;zi174;XBID-4876

_US1-BR02_
 * If the user choose to receive a warning, *he can configure* in an interface *(to be defined where)*: ---> *1.* {color:#4c9aff}Our understanding is that the each user will be responsible for setting of this functionality, no super admin will be created for that purpos{color}{color:#4c9aff}e{color}. *2.* {color:#4c9aff}Our initial vision is to create a new GUI for that purpose
 -->{color}under internal review
 * The numbers of warnings to be received ---> Please confirm the values
 {color:#4c9aff}-->{color} values will be finally confirmed on 22/01 but no need to be monitored as open point
 * The number of days prior to the password expiration day when he receives the warning ---> Please confirm the values
 {color:#4c9aff}-->{color} values to be changed to *20, 7, 1* (values will be finally confirmed on 22/01 but no need to be monitored as open point)
 *From DBAG point of view, this point is clear and can be closed*

_US1-BR03_ - UPDATE
 * The warning is an automatic email sent to SMTP e-mail address defined in XBID web client when the user is created (where the password is sent) (are there any users without an email address?) ---> {color:#4c9aff}We have checked the system and all users are associated with emails - {color}
 *From DBAG point of view,* *this point is clear and* *can be closed*

_US1-BR05_
 * _*If the SMTP e-mail address is not valid, the user should receive an information from DBAG (How XBID recognize the email address is not valid? – to be discussed)* --->_ {color:#4c9aff}Before sending is not possible to recognize that – a potential solution – use «reply to» which means that in case of invalid email, the BizOps team will be informed as the BizOps will receive a feedback that the email cannot be delivered.
 -->{color}proposed solution OK
 *From DBAG point of view,* *this point is clear and* *can be closed*

 

+Please see our answers to the pendings question:+
 _US1-BR01_
 * Each user can choose *for each module* whether he will receive a warning for password expiration or no ---> {color:#4c9aff}Might you list meant modules? Our assumption is: CMM, SOB, SPM, ComTrader and CMI, might you please confirm?{color}
 --> We believe PMI is missing ---> {color:#4c9aff}PMI uses same credential as CMM and SOB. Thus, this is covered by these modules and from our perspective is not necessary to explicit list here, but it's up to your decision if you would like to list it here{color}
 * (to be defined where it can be chosen, if the same user is propagated from one to another module 2 reminders will be received?) ---> {color:#4c9aff}We are unsure if this can be answered during the refinement because we expect some code possibility research during development. So, from our point of view, we'll be likely able to answer afterwards. {color}
 --> Can you clarify what are the approaches/options, i.e. we get either one reminder or more depending on result of your code research? ---> {color:#4c9aff}We discussed it in more detail and we prefer to approach it as one. It means that in case of one user account is shared for more modules (e. g. SOB, CMM and PMI), the user will be able to set rules which will be applied for all modules which are linked with the user. Thus, you will receive only one reminder that a password is expiring and you should change it.
An another feasible option is to set rules for each module, but from functional perspective it wouldn't have any benefit since an user cannot set a different password for module 1 or module 2 when an account is same for both modules. {color}

_US1-BR07_
 * Warnings about password expiration shall be visible in login window – applicable to all modules ---> {color:#4c9aff}Currently, this is not possible, we don’t have any login window – we need internal alignment also with regard to PenTest (we use basic authentication){color}
 --> under internal review

Another question from D. Myska:
_Can you please explain again more in detail why you propose to create a separate GUI and what would be alternative options if we want to avoid it?_
---> {color:#4C9AFF}The vision of the separate GUI is to have all functionality of passwords and certificates on one place. If we implement this functionality to the separate modules, it would be hardly maintainable as well as reset password *would not be* supported due to basic authentication. In addition, each module should not be responsible for password and certificate settings as it's not their main focus as well as the new GUI offers us a possibility to have a room for potential enhancement and development linked with password and certificate management. {color}","16/Jan/20 10:59;zi174;XBID-4877

*+US 02: Certificate expiration+*
 _US2-BR05_ _(the same question as in US1)_
 * If the SMTP e-mail address is not valid, the user should receive an information from DBAG *(How XBID recognize the email address is not valid? – to be discussed)* ---> {color:#4c9aff}Before sending, it is not possible to recognize that – a potential solution – use «reply to» which means that in case of invalid email, the BizOps team will be informed as the BizOps will receive a feedback that the email cannot be delivered.
 --->{color} proposed solution OK

*From DBAG point of view, this point is clear and can be closed*

 

_US2-BR02_ _(the same questions as in US1)_
 * If the user choose to receive a warning, *he can configure* in an interface *(to be defined where)*: ---> *1.* Our understanding is that the each user will be responsible for setting of this functionality, no super admin will be created for that purpose. *2.*{color:#4c9aff} Our initial vision is to create a new GUI for that purpose
 ---> {color}under internal review

 * The numbers of warnings to be received ---> Please confirm the values
 ---> values will be finally confirmed on 22/01 but no need to be monitored as open point
 * The number of days prior to the password expiration day when he receives the warning ---> Please confirm the values
 ---> values will be finally confirmed on 22/01 but no need to be monitored as open point

*From DBAG point of view, this point is clear and can be closed*

 

_US2-BR05_ _(the same question as in US1)_
 * If the SMTP e-mail address is not valid, the user should receive an information from DBAG *(How XBID recognize the email address is not valid? – to be discussed)* ---> {color:#4c9aff}Before sending, it is not possible to recognize that – a potential solution – use «reply to» which means that in case of invalid email, the BizOps team will be informed as the BizOps will receive a feedback that the email cannot be delivered.
 --->{color} proposed solution OK

*From DBAG point of view, this point is clear and can be closed*

 

 +Please see our answers to the pendings question:+

_US2-BR01 (the same question as in US1)_
 * Each user can choose *for each module* whether he will receive a warning for password expiration or no ---> {color:#4c9aff}Might you list meant modules? Our assumption is: CMM, SOB, SPM, ComTrader and CMI, might you please confirm?{color}
 --> We believe PMI is missing ---> {color:#4c9aff}PMI uses same credential as CMM and SOB. Thus, this is covered by these modules and from our perspective is not necessary to explicit list here, but it's up to your decision if you would like to list it here{color}

_US2-BR03_
 * The warning is an automatic email sent to SMTP e-mail address defined in XBID web client when the user using the certificate is created (where the password is sent) (This will result in multiple warnings if not centralized.) When it comes to certificates not related to a user but to a party (e.g. email certificate) the SMTP e-mail address defined in XBID web client when the party is registered shall be used. *(This need to be further considered which email address is used as these emails are not used for password distribution but for data exchanges, alternatively the configuration of warnings should include email to be used for warning message)* ---> {color:#4c9aff}This could be solved by choosing an user which will be set as recipient of the certificate{color}. 
 {color:#4c9aff}---> {color}{color:#de350b}under internal review{color} but foreseen to be accepted ---> {color:#4c9aff}We're waiting for final confirmation{color}.","16/Jan/20 13:00;zi174;XBID-4878

 

Dear Jakub,

referring to _US03-BR02_ and your feedback, the CR mentioned that password reset should be possible without login to XBID, i.e. although we are assessing your concerns regarding security aspects we would like to further explore the options how to address this BR/situation when password is not known to the user. Please suggest some options.

Kind regards

David

-----------------------------------------

Dear David,

let me make it more clear. Users will be able to reset password without log in to the XBID via the new GUI (if password expired, user forget the password). It means that on the login page of the new GUI, there will be a password reset link. 

The open point is that in case an user's account is locked due to many wrong passwords, shall be the user able to unlock his/her account? From security perspective, it can be classified as a potential security attack. Thus, we wouldn't recommend to give a permission to users to do that. But it's basically up to triplet's (or maybe PO) decision how to approach it. From technical solution point of view it can be solved by a same way as password reset. It means, that if an account is locked - an user will unlock the account by resetting new password. ",,,,,,,,,,,,,,,,,,,,,,,,
Alpha Finalize PoC Losses Development,XP-2350,89116,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ll664,ei349,ei349,13/Nov/19 10:37,06/Nov/20 09:23,22/Feb/21 13:21,11/Dec/19 12:35,,,Losses ASR,,,,,,,Losses,,,"h1. {color:#00875a}Losses POC finished development{color}
h2. {color:#172b4d}Current Situation{color}

{color:#172b4d}Block orders and rounding are tackled already in the tasks which are in the previous sprint. This task is a follow up of them. {color}

{color:#172b4d}There is scheduled handover to customers on 28th November. They expect from DBAG to present our outcomes of the Losses POC. {color}

{color:#172b4d}What is expected from DBAG: {color}
 * matching and routing algorithm;
 * auction algorithm;
 * local view algorithm and depth;
 * evaluation of algorithm with losses;
 * price and quantity rounding as well as rounding during computation;
 * changes to the existing XBID Solution APIs;
 * impact on block contracts; and
 * description of the impact on the Shipping Module files and description of impact on the Shipping Module file definitions and specifications.

*Any other tasks and duties by DBAG not specifically listed above are outside the scope of this Additional Service Request.*
h2. {color:#172b4d}Proposed Solution{color}

Fix of missing features like block orders, finalize rounding, check explicit allocations, etc. 

We need to finalize items mentioned items to the state where we can perform: 
 * analyze impacts on XBID Solution, such as change to PMI, performance (including potential gap analysis compared to the SLAs agreed in the 102^nd^ JSC on 4. December 2018, operation, and maintenance;
 * create a set of performance test scenarios (including 15-minute products) for analysing the impact of including losses in the XBID Solution;
 ** 3 datasets: 
 *** 15 minutes resolution on ICs
 *** Lossless interconnectors
 **** run against 2.0 and 3.0 
 *** Lossy interconnectors
 * conduct performance tests based on created test scenarios",,eh941,ei349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Nov/19 13:36;eh941;data.dmp;https://jira.deutsche-boerse.com/secure/attachment/77580/data.dmp","22/Nov/19 14:08;eh941;performance-internal-report.xls;https://jira.deutsche-boerse.com/secure/attachment/77582/performance-internal-report.xls","22/Nov/19 14:16;eh941;xb_xbid_perf_cor_gc_ixe.log.0.current;https://jira.deutsche-boerse.com/secure/attachment/77583/xb_xbid_perf_cor_gc_ixe.log.0.current",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,39484800,,,,,,,,,,XP-1934,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09n2w:i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 39,Alpha Team Sprint 40 [S],,,,,,,,,,,,,,,10.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2635-redo-fix-3.0,XP-2521-cmm-cmi-labeling,XP-2942-losses-perf,xbid-losses-poc,XP-2521-labeling-cmi-leftovers,XP-2694-xbid-3.0.x-latest-tag-fix,testing-new-stages-3.0,master-xbid-losses-poc,XP-139-xbid-3,master,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Nov/19 14:15;eh941;I ran an hour test with arguments:

{code}
/xbid/performance/test-client/scripts/generateAndRunForPxXbid3.sh XBDBX001 /xbid/performance/test-client/scenarios_input/xbid-rts3b-2019-sc15-v01_wave3_final.xlsx > /tmp/perf_run.log&
{code}

It failed after several minutes of run though on out of memory.

I generated report (see the attached excel file  [^performance-internal-report.xls]). 

{code}
java -Xmx4096m -jar report-tool-2.25-SNAPSHOT.jar --spring.profiles.active=dev --actions=internal-generate --from=2019-11-22T09:54:20.000 --to=2019-11-22T10:01:24.202
{code}

The results are terrible. Order execution time for 93 percentile 159631 ms

I added some manual profiling for the test.

The data is taken from  [^data.dmp] 

{code}
pg_restore -Fc -U m7 -h localhost -d report_generator ./data.dmp
{code}

The results are quite surprising.

For matching as you can see the *matching itself (routing library) takes always less than 1 ms*. The most time consuming is the *grid creation time and then the wrapping of the orders.* I analyzed the GC log and there are many full GC and a lot of young GC. 

*All values are in ms.*

|| name || percentile_50 || percentile_95 || percentile_99 || percentile_99_5 || max ||
|matchingtime|2|7|12|17|405|
|selecting_matching_time|0|0|0|0|14|
|wrapping_matching_time|1|4|4|7|74|
|grid_creation_time|1|3|4|10|404|
|reg_matching_time|0|0|0|0|0|
|aon_matching_time|0|0|0|0|0|
|match_handling_time|0|0|0|0|44|

For the auction the results are quite similar,

|| name || percentile_50 || percentile_95 || percentile_99 || percentile_99_5 || max ||
|auction_time|0|131|227|251|2900|
|order_select_time|0|4|7|7|44|
|order_wrap_time|0|5|10|10|27|
|grid_creation_time|0|46|88|99|2838|
|aon_auction_matching_time|0|0|0|0|0|
|reg_auction_matching_time|0|0|0|0|0|
|trade_handling_time|0|0|0|0|61|

Note that the {{*_handling_time}} refer to the match handling and {{Trade, Flow}} entity creation and so on.

I'm pretty convinced that the poor performance isn't caused by the routing itself but *by memory allocations and garbage collections.*",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Home Office Dev Support for Losses Workshop 3,XP-2349,89099,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,ei349,ei349,13/Nov/19 09:40,06/Nov/20 09:10,22/Feb/21 13:21,11/Dec/19 12:39,,,Losses ASR,,,,,,,,,,,,ei349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,40348800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3369,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09wiv:i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 40,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Alpha Dev support for Losses Workshop 3 ,XP-2348,89098,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,ei349,ei349,13/Nov/19 09:39,06/Nov/20 09:10,22/Feb/21 13:21,11/Dec/19 12:36,,,Losses ASR,,,,,,,,,,,,ei349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,40348800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3369,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09tac:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 40 [S],,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
HOT Finalize PoC Losses Development,XP-2345,89091,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,ei349,ei349,13/Nov/19 09:13,06/Nov/20 09:23,22/Feb/21 13:21,11/Dec/19 12:39,,,Losses ASR,,,,,,,Losses,,,"h1. {color:#00875a}Losses POC finished development{color}
h2. {color:#172b4d}Current Situation{color}

{color:#172b4d}Block orders and rounding are tackled already in the tasks which are in the previous sprint. This task is a follow up of them. {color}

{color:#172b4d}There is scheduled handover to customers on 28th November. They expect from DBAG to present our outcomes of the Losses POC. {color}

{color:#172b4d}What is expected from DBAG: {color}
 * matching and routing algorithm;
 * auction algorithm;
 * local view algorithm and depth;
 * evaluation of algorithm with losses;
 * price and quantity rounding as well as rounding during computation;
 * changes to the existing XBID Solution APIs;
 * impact on block contracts; and
 * description of the impact on the Shipping Module files and description of impact on the Shipping Module file definitions and specifications.

*Any other tasks and duties by DBAG not specifically listed above are outside the scope of this Additional Service Request.*
h2. {color:#172b4d}Proposed Solution{color}

Fix of missing features like block orders, finalize rounding, check explicit allocations, etc. 

We need to finalize items mentioned items to the state where we can perform: 
 * analyze impacts on XBID Solution, such as change to PMI, performance (including potential gap analysis compared to the SLAs agreed in the 102^nd^ JSC on 4. December 2018, operation, and maintenance;
 * create a set of performance test scenarios (including 15-minute products) for analysing the impact of including losses in the XBID Solution;
 ** 3 datasets: 
 *** 15 minutes resolution on ICs
 *** Lossless interconnectors
 **** run against 2.0 and 3.0 
 *** Lossy interconnectors
 * conduct performance tests based on created test scenarios",,ei349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2350,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,40348800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1934,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s000104220082",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 39 [S],Home Office Team Sprint 40,,,,,,,,,,,,,,,10.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2452-infinite-cycle-graph-export,XP-2635-redo-fix-3.0,block_split_path,XP-2521-cmm-cmi-labeling,XP-2452-infinite-cycle-graph-viz,XP-2942-losses-perf,xbid-losses-poc,XP-2521-labeling-cmi-leftovers,develop,XP-2345-adapt_benchmark_to_latest_routing_lib_0-4-14,XP-2694-xbid-3.0.x-latest-tag-fix,testing-new-stages-3.0,master,XP-2345-cloning,XP-2345-cycle-problems,master-xbid-losses-poc,XP-139-xbid-3,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
XBID CLONE: Cycles in the OBK,XP-2332,88929,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,08/Nov/19 11:22,31/Aug/20 15:38,22/Feb/21 13:21,23/Mar/20 09:58,,,3.1.0,,,,,,,Losses,,,"Concerning single sided trades identification in the TradeCaptureRprt (reference is made to slides presented in join CC 30/10)

* We prefer the trade is explicitly marked as single sided which can be achieved e.g. by specific “mbrid” information.
* FYI we want to still double check internally the TradeCaptureRprt against the specifications of the format (XSD) to minimize changes in NEMOs systems
* API message TradeCaptureRprt in the slides so far does not reflect the request to provide both the rounded and unrounded information about trade quantity and price – request was communicated in JIRA XBID-4723 after the first WS
",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4719,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,29030400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1934,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09sew:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Nov/19 11:22;jzavada@minsait.com;Dear Alexandr, dear DBAG,

TWG FTF 10/10 discussed the request and came to questions/findings:
 * All the communication regarding the Losses should go to the Subgroup Losses (convener: David Myska).
 * Why it is provided for answering in so early moment (PoC to be agreed first)?
 * Specification for the Losses is to be provided first, these questions could be answered soonest after that.

Best regards

Jiri

 ","08/Nov/19 11:22;radeale;Dear Jirka,

the information is provided as to have the parties informed, no action is necessary.

They can comment or don't have to.

Best regards
Alexandr","08/Nov/19 11:22;DMyska@e-bridge.com;Dear DBAG,

concerning single sided trades identification in the TradeCaptureRprt (reference is made to slides presented in join CC 30/10)
 * We prefer the trade is explicitly marked as single sided which can be achieved e.g. by specific “mbrid” information.
 * FYI we want to still double check internally the TradeCaptureRprt against the specifications of the format (XSD) to minimize changes in NEMOs systems

Kind regards

David","08/Nov/19 11:23;radeale;Hi Jirka, please look at their proposal and make a qualified opinion.
If you think there is a more suitable person to handle it, assign the ticket to him, thanks :)","12/Nov/19 13:06;radeale;I proposed to make ""mbrid"" = ""cycle"".","23/Mar/20 09:58;radeale;Done for the moment, will reopen if needed.",,,,,,,,,,,,,,,,,,,,,,,,,,
XBID CLONE: Split paths - Losses,XP-2331,88928,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ei349,radeale,radeale,08/Nov/19 11:21,31/Aug/20 15:39,22/Feb/21 13:21,13/Jan/20 11:04,,,Losses ASR,,,,,,,Losses,,,"Dear DBAG

DBAG suggested to fully remove split paths concept with Losses implementation (new solution would be each path = single trade) - reference is made to CC 30/10

SG Losses feedback
 * Split path use is important to ensure AON orders can be matched
 * SG Losses understand a separation of the path going through the lossy IC was proposed by DBAG due to impact to price of order when the lossy IC is used.
 * Following questions to be answered by DBAG:
 * Would it be conceivable to keep split path trades?
 * Would it be conceivable to keep split path trades with different loss factors?",,lt112,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4787,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,40348800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1934,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09seo:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Nov/19 11:22;radeale;Michal, please take a look and make your opinion. If you think there is a better person, assign this ticket to him.","08/Nov/19 13:13;lt112;* -_Depending on the exact split path definition:_ How is split path use important to ensure AON orders can be matched? Split path means different paths at the same time, not different paths in different sub-intervals, which is used for matching block orders (unrelated to AON restriction). _(AFAIK)_-
* not just price, but also quantity
* *Would it be conceivable to keep split path trades?* for certain cases with a cost of higher complexity -and with unknown benefits (see above)-
* *Would it be conceivable to keep split path trades with different loss factors?* no, as stated in HLFC, section 6.3.4","08/Nov/19 13:21;radeale;So far:

Technical viewpoint:

Split-path can be implemented for all trades where the cumulative loss coefficient is the same.

Split-path increases chance for the AON block orders matching.","12/Nov/19 10:32;lt112;h2. Meetings points

* Split path will NOT be part of PoC
* Remove split path from PoC docs?

h3. Suggestions

# Remove AON restriction
# Allow split paths only for AON","12/Nov/19 12:15;radeale;Jirka, I don't know what to do with this info, please handle it... SOMEHOW.","13/Nov/19 12:28;radeale;My proposed answer:

{code}Dear David, SGL members,

to summarize the current state of execution restrictions in XBID 2.0:

Pre-defined contracts:
- NON (None)
- IOC (Immediate-or-Cancel)
- FOK (Fill-or-Kill)

User-defined contracts:
- AON (All-or-Nothing)

Explicit Participant allocation requests:
- IOC
- AON
- ACE (All-Contracts-Equal) 

The current state of the POC as of today is that block orders are working with the AON restriction but the split path is not supported, its implementation methods are analyzed (it is definitely possible).

Split-path is necessary for the AON block orders, however is not necessary for matching pre-defined  contracts and for other restrictions than AON.{code}

[~ei349], [~eg288], [~lt112], please align and propose a way how to communicate to the customer.",,,,,,,,,,,,,,,,,,,,,,,,,,
XBID CLONE: Performance tests - Losses,XP-2329,88926,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,od044,radeale,radeale,08/Nov/19 11:17,13/Aug/20 20:16,22/Feb/21 13:21,11/Dec/19 12:36,,,Losses ASR,,,,,,,Losses,,,"Dear DBAG

Referring to preliminary performance tests results presented in join CC 30/10
 * SG Losses would like to understand if the scenario used and mentioned in the slides for CC 30/10 is comparable to one of these used in RTS3B (how and why was the scenario modified, why only 20 minutes used)
 * Should we further use some of the standard RTS3B scenarios to ensure possibility to compare the results of RTS3B application to R2.0 and R3.0?",,ei349,ll664,od044,radeale,,,,,,,,,,,,,,,,,,,,,,,,XBID-4789,,,,,,,,,,,,,,,,,"03/Dec/19 11:31;od044;xbid-losses-align-SLA-hourly-v2.xlsx;https://jira.deutsche-boerse.com/secure/attachment/77993/xbid-losses-align-SLA-hourly-v2.xlsx","03/Dec/19 12:53;od044;xbid-losses-align-SLA-hourly-v3.xlsx;https://jira.deutsche-boerse.com/secure/attachment/77997/xbid-losses-align-SLA-hourly-v3.xlsx","28/Nov/19 17:03;od044;xbid-losses-align-SLA-hourly.xlsx;https://jira.deutsche-boerse.com/secure/attachment/77839/xbid-losses-align-SLA-hourly.xlsx","03/Dec/19 11:31;od044;xbid-losses-align-SLA-withBlock-v2.xlsx;https://jira.deutsche-boerse.com/secure/attachment/77992/xbid-losses-align-SLA-withBlock-v2.xlsx","03/Dec/19 12:53;od044;xbid-losses-align-SLA-withBlock-v3.xlsx;https://jira.deutsche-boerse.com/secure/attachment/77999/xbid-losses-align-SLA-withBlock-v3.xlsx","28/Nov/19 14:53;od044;xbid-losses-align-SLA-withBlock.xlsx;https://jira.deutsche-boerse.com/secure/attachment/77830/xbid-losses-align-SLA-withBlock.xlsx","03/Dec/19 11:31;od044;xbid-losses-align-SLA-woBlock-v2.xlsx;https://jira.deutsche-boerse.com/secure/attachment/77991/xbid-losses-align-SLA-woBlock-v2.xlsx","03/Dec/19 12:53;od044;xbid-losses-align-SLA-woBlock-v3.xlsx;https://jira.deutsche-boerse.com/secure/attachment/77998/xbid-losses-align-SLA-woBlock-v3.xlsx","28/Nov/19 14:53;od044;xbid-losses-align-SLA-woBlock.xlsx;https://jira.deutsche-boerse.com/secure/attachment/77831/xbid-losses-align-SLA-woBlock.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,38448000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09n2w:r",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 38 [S],Alpha Team Sprint 39,Alpha Team Sprint 40 [S],,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master-xbid-dataset-2.0.x,xbid-dataset-2.0.x,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Nov/19 11:19;radeale;David,

please read the customers questions, my proposed answer is something like this:
- The scenario run was a subset of XXX (which scenario used?) with
- The DBAG aim is to use RTS3B scenarios as a comparison basis for the XBID 2.0 and 3.0 performance comparison

Thanks","08/Nov/19 12:34;ll664;The the scenario that was run:

* based on {{xbid-rts3b-2019-sc15-v01_wave3}}
* 20 minute duration
* no block orders as the feature was unstable at the moment

Talking about our future approach to performance testing, I suggest following

* scenario would *not* be based on any RTS scenarios we had in past and customers already have the results. The reason is that we run the XBID 2.0 tests on SIMU, whereas now we would be executing the on PERF, and I'm not sure the environments are exactly the same infrastructure-wise (also the runs shows that they're slightly different). This is to avoid endless discussions that ""the results we have from SIMU are different to what you're showing us now, why?"".
* we design a scenario that:
** is short (20 minutes max) - this is enough to measure performance and allows faster turnaround when testing
** the event rates are roughly the same as the current SLA (i.e. base load & peaks etc.)
** the measured percentiles are SLA-agreed - 96.5 and 93 (we used to measure 99.5 which is pointless)
** the scenario is run against XBID 2.0.x and XBID 3.0.x (losses)

[~ei349]/[~rg535] pls review, if you agree, decide how to frame it politically.","13/Nov/19 18:30;radeale;Reply sent to the customer:

Dear David, SGL members,

The run scenario was:
 - Based on _xbid-rts3b-2019-sc15-v01_wave3_
 - 20 minute duration in total
 - No block orders as the feature was unstable at the moment

DBAG proposes the following approach for further performance testing:

1. Please select one primary and one or more secondary scenarios from the RTS3B scenarios which are deemed the most important
 2. DBAG proposes to run the scenario(s) in the following configurations
|Dataset\XBID version|2.0.25.X|3.0.X|
|RTS3B as used for UAT II|(/)|(/)|
|RTS3B extended as in XBID-4726|(x)|(/)|
|RTS3B as in XBID-4726 with all ICs set to 15min resolution|(x)|(/)|

Additionally we are open to discuss any new specific dataset configuration to be added (i.e. a new dataset based on the XBID-4726 format).

Best regards
Alexandr","19/Nov/19 14:13;radeale;Well, guys, we got this as a reply from the SGL. They don't refer any RTS3B scenario, so feel free to do with the information as you please:

_SG Losses discussed the scenarios today and we expect following scenarios to be used:_
 * _Scenario 1_
 ** _With block orders_
 ** _With auction_
 ** _With combination of 15 min products and 60 min products (ratio is under assessment as we prefer to use one of existing RTS3B scenarios but we also want to reflect foreseen situation at the end of 2020)_
 * _Scenario 2_
 ** _Identical to Scenario 1 without 15 min products_
 * _Scenario 3_
 ** _Identical to Scenario 1 without block orders_

My reply:

{code}... We take it that DBAG is free to select or customize any scenario (including and RTS3B one, but to limited to) which satisfies the conditions outlined in the answer. ...{code}","20/Nov/19 11:50;ll664;[~ei349], the response got after the XP-2345 was planned and the decision to runt RTS3 has been made. Should we change how we approach the performance tests?
","20/Nov/19 13:31;ei349;Hi, [~ll664] yes please. It should be combination of requirements from David M. and RTS3. If you have some clarification question do not hesitate to ask David directly. ","25/Nov/19 10:50;ll664;[~od044] could you pls create scenarios as suggested by the customers?","26/Nov/19 16:43;ei349;[~od044] can you please estimate and take it to the next sprint? ","28/Nov/19 14:55;od044;Per discussion and agreement. Here are new scenarios for scenario 1 (dataset from rts3b) that align with SLA.

- with block orders:  [^xbid-losses-align-SLA-withBlock.xlsx] 
- without block orders:  [^xbid-losses-align-SLA-woBlock.xlsx]
- without 15 min  and only hourly contract:  [^xbid-losses-align-SLA-hourly.xlsx] 
- scenario's run takes 25 min. (5 min prefill and 20 min regular run) 
","29/Nov/19 11:06;radeale;Hi Duc!

The customers provided the dataset which they would like to be used for the perf testing:

_Referring to my comment dated 27/11 please find attached RTS3B excel file Dataset_rts3B-Wave3_v1.3.60_SGL_v2.xlsx in which the market areas where 15 min products introduction is foreseen (in tab CMM-Market-Area) and ICs where 15 min Contract resolution and OTU should be used (in CMM-Interconnector) are marked in green._

_In Market Area where 15 min product is allowed - for each order for 60 min product there should be 4 orders for 15 min products_
 _In Market Area where 15 min product is not allowed – only orders for 60 min products are placed_
 _Overall share between the orders – for 3 orders for 60 minute product there will be 4 orders for 15 min products_
 _In case further explanation/clarification is needed do not hesitate to contact me._

It is here:
https://jira.deutsche-boerse.com/secure/attachment/77854/77854_Dataset_rts3B-Wave3_v1.3.60_SGL_v2.xlsx

What do you think? We need this implemented, don't we? Let's discuss at Monday.

Thanks!

/A/","03/Dec/19 11:32;od044;Newly updated scenarios (specify and keep peak to 350 trs per s) : 

 [^xbid-losses-align-SLA-woBlock-v2.xlsx] 
 [^xbid-losses-align-SLA-withBlock-v2.xlsx] 
 [^xbid-losses-align-SLA-hourly-v2.xlsx] ","03/Dec/19 12:53;od044;Version 3, decrease peak 1 to 80 per second trs

 [^xbid-losses-align-SLA-hourly-v3.xlsx] 
 [^xbid-losses-align-SLA-woBlock-v3.xlsx]
  [^xbid-losses-align-SLA-withBlock-v3.xlsx] ","04/Dec/19 16:26;od044;New version ( 2.0.7) of dataset losses-perf-data has been released 
- dataset reflects customer requirements about contract resolution 

Note: some requirements were skipped because those entities (tosca grid, Swiss grid) are not within RTS base dataset ",,,,,,,,,,,,,,,,,,,
Losses Workshop 2 - Customer feedback,XP-2328,88925,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,radeale,radeale,radeale,08/Nov/19 11:16,31/Aug/20 15:39,22/Feb/21 13:21,05/Dec/19 11:02,,,Losses ASR,,,,,,,Losses,Losses_workshop_2,,"*SOB API* (XBID-4719)
* We prefer the trade is explicitly marked as single sided which can be achieved e.g. by specific ""mbrid"" information.
(I'll note this one into DFS510)
* FYI we want to still double check internally the TradeCaptureRprt against the specifications of the format (XSD) to minimize changes in NEMOs systems (edited) 
* API message TradeCaptureRprt in the slides so far does not reflect the request to provide both the rounded and unrounded information about trade quantity and price – request was communicated in JIRA XBID-4723 after the first WS

*Split-path* (XBID-4787)
Split path use is important to ensure AON orders can be matched
SG Losses understand a separation of the path going through the lossy IC was proposed by DBAG due to impact to price of order when the lossy IC is used.
Following questions to be answered by DBAG:
Would it be conceivable to keep split path trades? (?)
Would it be conceivable to keep split path trades with different loss factors? (?)

*SM, CMM Output files* (XBID-4788)
Updates proposed by DBAG are considered risky as the proposed new marketAgreement.type values can be used in other projects for other purpose which might result in conflicts with other interfaces.

The SG Losses proposes to add new fields into the files:
+Capacity_marketDocument+
_connectingLine_RegistereResource.mRID_

+schedule_marketDocument+
_marketEvaluationPoint.mRID_

+Right_MarketDocument+
- No opinion at the moment",,ek176,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2295,,,,,,,"08/Nov/19 11:13;radeale;17XTSO-CS------W_10X1001A1001A361_NND-ATC-A23_20141027F5501 (BEC NO-NL, NO zijde).xml;https://jira.deutsche-boerse.com/secure/attachment/76801/17XTSO-CS------W_10X1001A1001A361_NND-ATC-A23_20141027F5501+%28BEC+NO-NL%2C+NO+zijde%29.xml","08/Nov/19 11:13;radeale;17XTSO-CS------W_10X1001A1001A361_NND-ATC-A23_20141027F5601 (BEC NO-NL, NL side).xml;https://jira.deutsche-boerse.com/secure/attachment/76800/17XTSO-CS------W_10X1001A1001A361_NND-ATC-A23_20141027F5601+%28BEC+NO-NL%2C+NL+side%29.xml",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,38448000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09se0:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,Production,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Dec/19 11:02;radeale;Everything covered by individual tickets.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses - Specifications update Alpha - dev support,XP-2292,88506,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,ei349,ei349,31/Oct/19 12:26,06/Nov/20 09:24,22/Feb/21 13:21,25/Nov/19 10:27,,,Losses ASR,,,,,,,,,,,,ei349,gd553,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2295,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,39312000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09n2y:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 38 [S],Alpha Team Sprint 39,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Nov/19 11:20;gd553;Due date for delivery of the Losses specification documents to customers is 22/11.","25/Nov/19 10:26;radeale;Done for the first round.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses - Specifications update HOT - dev support,XP-2291,88505,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,ei349,ei349,31/Oct/19 12:26,06/Nov/20 09:19,22/Feb/21 13:21,25/Nov/19 10:26,,,Losses ASR,,,,,,,,,,,,ei349,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,39312000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s00010422008x",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team 38,Home Office Team Sprint 39 [S],,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Nov/19 10:26;radeale;Done for the first round.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses - block orders - fix of core downs,XP-2289,88497,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,ei349,ei349,31/Oct/19 11:02,06/Nov/20 09:12,22/Feb/21 13:21,18/Nov/19 10:16,,,Losses ASR,,,,,,,,,,"During performance scenario execution core down appears due to block orders
* dataset: {{rts3-slicebperf-data-fake}}
* scenario: {{/xbid/performance/test-client/scenarios_input/xbid-rts3b-2019-sc15-v01_wave3_final.xlsx}}",,ei349,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Nov/19 14:56;lt112;xb_xbid_perf_cor-1_standard_ixe.log;https://jira.deutsche-boerse.com/secure/attachment/77055/xb_xbid_perf_cor-1_standard_ixe.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,40262400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1916,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s00010422008u",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team 38,Home Office Team Sprint 39 [S],,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2635-redo-fix-3.0,master-xbid-dataset-2.0.x,XP-2521-cmm-cmi-labeling,XP-2942-losses-perf,xbid-losses-poc,xbid-dataset-2.0.x,XP-2521-labeling-cmi-leftovers,XP-2694-xbid-3.0.x-latest-tag-fix,testing-new-stages-3.0,master,XP-139-xbid-3,master-xbid-losses-poc,,,,,,,,,,,,,,,,,,,,,,true,"04/Nov/19 12:23;lt112;Do we have logs?","06/Nov/19 14:49;lt112;Core fails on ramping validations
{noformat}
Handling error on event 'com.deutscheboerse.energy.m7.core.in.RequestEvent@2f449e4[error=<null>,input=Input:Message{receivedTime=1573047754178, rabbitReceivedTime=1573047754178, appId=DB-TestClient, userId=XBDBX001, applicationUserId=null, messageId=null, contentEncoding=null, contentType=x-m7/request; version=3, messageSource=TRADING_PMI, replyTo=amq.gen-dC6JoHIBcW4H_X8QVOu8fA, correlationId=[49, 53, 52, 54, 50, 57], classId=null, contentClassId=null, keyClassId=null},request=com.deutscheboerse.energy.m7.core.in.req.OrderEntryRequest@5303e41c]'
java.lang.IllegalStateException: allocateImplicit should never ever throw any Exception. This is a bug.
	at com.deutscheboerse.energy.m7.routing.AllocationResultService.allocate(AllocationResultService.java:30)
	at com.deutscheboerse.energy.m7.core.AuctionService.executeRoundOfAuction(AuctionService.java:269)
	at com.deutscheboerse.energy.m7.core.AuctionService.executeRoundOfAuction(AuctionService.java:236)
	at com.deutscheboerse.energy.m7.core.AuctionService.executeAuction(AuctionService.java:213)
	at com.deutscheboerse.energy.m7.core.AuctionService.handleDeliveryIntervalAuctionTrigger(AuctionService.java:158)
	at com.deutscheboerse.energy.m7.core.AuctionService.executeAuction(AuctionService.java:144)
	at com.deutscheboerse.energy.m7.core.RequestProcessor.process(RequestProcessor.java:37)
	at com.deutscheboerse.energy.m7.core.CoreService.doOnEvent(CoreService.java:89)
	at com.deutscheboerse.energy.m7.core.CoreService.doOnEvent(CoreService.java:32)
	at com.deutscheboerse.energy.m7.core.AbstractEventHandler.onEvent(AbstractEventHandler.java:75)
	at com.deutscheboerse.energy.m7.core.AbstractEventHandler.onEvent(AbstractEventHandler.java:32)
	at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:128)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: com.deutscheboerse.energy.m7.cmm.CmmException: RAMPING_CONSTRAINT_VIOLATION, Args: [18:00, 19:00, LT-PLA, 637000, 0, 600000]
	at com.deutscheboerse.energy.m7.cmm.FlowServiceImpl.checkRampingLimit(FlowServiceImpl.java:191)
	at com.deutscheboerse.energy.m7.cmm.FlowServiceImpl.lambda$updateFlows$1(FlowServiceImpl.java:110)
	at net.openhft.koloboke.collect.impl.hash.MutableLHashSeparateKVObjIntMapGO.forEach(MutableLHashSeparateKVObjIntMapGO.java:165)
	at com.deutscheboerse.energy.m7.cmm.FlowServiceImpl.updateFlows(FlowServiceImpl.java:106)
	at com.deutscheboerse.energy.m7.cmm.AllocationService.processAllocations(AllocationService.java:533)
	at com.deutscheboerse.energy.m7.cmm.AllocationService.performAllocation(AllocationService.java:509)
	at com.deutscheboerse.energy.m7.cmm.AllocationService.allocateInternal(AllocationService.java:181)
	at com.deutscheboerse.energy.m7.cmm.AllocationService.allocateImplicit(AllocationService.java:173)
	at com.deutscheboerse.energy.m7.routing.AllocationResultService.allocate(AllocationResultService.java:28)
	... 14 common frames omitted
{noformat}
","13/Nov/19 14:56;lt112;New dataset without ramping created: {{rts3-slicebperf-noramping-data-fake}}
New error occurred
{noformat}
Caused by: java.lang.IllegalArgumentException: Could not subtract 30000: not enough quantity for order: OrderWrapperImpl(price=5400, quantity=5000, timestamp=1573557695767, id=237188, priority=0) on cursor: 1
        at com.deutscheboerse.energy.routing.model.TransactionGridImpl$OrderIterator.updateCurrentOrder(TransactionGridImpl.java:381)
        at com.deutscheboerse.energy.routing.model.TransactionGridImpl.reduceBestOrder(TransactionGridImpl.java:60)
        at com.deutscheboerse.energy.m7.trade.order.execution.LossesMatcher.matchOrder(LossesMatcher.java:81)
        ... 20 common frames omitted
2019-11-12T12:02:40.117Z [CoreService][][] ERROR c.d.e.m.c.CoreServiceExceptionHandlerStrategy - Fatal error.
com.deutscheboerse.energy.m7.exception.M7FatalError: Exception (possibly validation exception) detected after adding orders to order pool. Stopping m7-core to prevent inconsistent state. New order was 301053Sell AON  Contract{id=851, shortName='16-20_XB', longName='20191112 16:00-20191112 20:00'} 40*54.00 EUR 10Y1001A1001A46L/SE3 5 BG-BGPX-------01
        at com.deutscheboerse.energy.m7.trade.OrderAddService.addOrder(OrderAddService.java:180)
        at com.deutscheboerse.energy.m7.trade.OrderAddService.lambda$addIndependentOrders$2(OrderAddService.java:140)
        at com.deutscheboerse.energy.m7.trade.order.OrderWrapper.add(OrderWrapper.java:99)
        at com.deutscheboerse.energy.m7.trade.OrderAddService.addIndependentOrders(OrderAddService.java:140)
        at com.deutscheboerse.energy.m7.trade.OrderAddService.addOrders(OrderAddService.java:97)
        at com.deutscheboerse.energy.m7.trade.OrderAddService.addOrders(OrderAddService.java:87)
        at com.deutscheboerse.energy.m7.trade.ContinuousTradingService.addOrders(ContinuousTradingService.java:105)
        at com.deutscheboerse.energy.m7.core.in.req.OrderEntryRequest.process(OrderEntryRequest.java:35)
        at com.deutscheboerse.energy.m7.core.in.req.OrderEntryRequest.process(OrderEntryRequest.java:18)
        at com.deutscheboerse.energy.m7.core.RequestProcessor.process(RequestProcessor.java:33)
        at com.deutscheboerse.energy.m7.core.CoreService.doOnEvent(CoreService.java:89)
        at com.deutscheboerse.energy.m7.core.CoreService.doOnEvent(CoreService.java:32)
        at com.deutscheboerse.energy.m7.core.AbstractEventHandler.onEvent(AbstractEventHandler.java:75)
        at com.deutscheboerse.energy.m7.core.AbstractEventHandler.onEvent(AbstractEventHandler.java:32)
        at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:128)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.RuntimeException: Exception thrown for order=301053Sell AON  Contract{id=851, shortName='16-20_XB', longName='20191112 16:00-20191112 20:00'} 40*54.00 EUR 10Y1001A1001A46L/SE3 5 BG-BGPX-------01
{noformat}

See attached log for more details:  [^xb_xbid_perf_cor-1_standard_ixe.log]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses - fix of memory leak,XP-2288,88496,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ll664,ei349,ei349,31/Oct/19 11:01,06/Nov/20 09:22,22/Feb/21 13:21,06/Nov/19 14:43,,,Losses ASR,,,,,,,,,,,,ei349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,41472000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1934,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09n3h:i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 38 [S],,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement Losses Performance Testing - Wave 3 grid dataset,XP-2235,87893,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,lt112,radeale,radeale,17/Oct/19 10:19,04/Aug/20 19:31,22/Feb/21 13:21,25/Oct/19 09:28,,,Losses ASR,,Capacity,Shipping,Trading,,,Losses,,,"(1) Create the Losses Performance Testing - Wave 3 grid as defined by the SG Losses group in XBID-4726:

https://jira.deutsche-boerse.com/secure/attachment/75475/Dataset_rts3B-Wave3_v1.3.60_SGL.xlsx

(2) Please also create and update dataset with:
 * Lossy IC factor included
 * IC resolution set to 15 min
 * No new grid elements added

Test the grids by deploying it to a test environment and make sure it is usable.

 

As a related information the RTS3B performance scenarios were run in this order during the R2.0 UATII phase as per the customer preference. Therefore let's run them also in this order:

_15, 14, 4, 9, 10, 11, 12, 7, 3_",,lt112,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4789,XBID-4726,XP-2147,XP-2199,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,41990400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s00010421w",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team 37 [S],,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master-xbid-dataset-2.0.x,xbid-dataset-2.0.x,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Oct/19 14:50;radeale;As a side note, the performance tests should be run in this combination:

|Dataset\XBID version|2.0.25.X|3.0.X|
|RTS3B (rts3-slicebperf-data-fake)|Must have|Must have|
|RTS3B+Losses+15min|X|Must have|
|RTS3B+Losses+15min+new DAs|X|Nice to have|

The exact scenarios used during the UAT II tests:
https://jira.deutsche-boerse.com/secure/attachment/74887/R2.0-uat-II-scenarios.zip","25/Oct/19 09:28;lt112;Dataset version: 2.0.4
RTS3B+Losses: {{losses-perf-data}}
RTS3B+Losses+15min: {{losses-15min-perf-data}}","25/Oct/19 11:14;radeale;Please also add it to the Jenkins deploy job:

https://englobjci1.deutsche-boerse.de/job/Energy/job/XBID-sysX-deploy form/",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Verify Cash value amount presentation in OBK,XP-2226,87738,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,hj444,hj444,hj444,15/Oct/19 08:35,04/Aug/20 19:36,22/Feb/21 13:21,21/Oct/19 09:36,,,Pre2020,,,,,,,Losses_workshop_2,,,"Do some trades in test client.

Verify the Cash value amount is well presented.

 ",,hj444,qo794,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Oct/19 10:04;qo794;test_client_trade.png;https://jira.deutsche-boerse.com/secure/attachment/75695/test_client_trade.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,42595200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-955,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09jtb:w",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team 37 [S],,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Oct/19 10:29;qo794;The cash value on test client it calculated as following (losses-demo-data dataset XP-2176):
h3. Setup
DA2-DA3 loss coefficient: 0.975
DA2-DA4 halted

Product shift:
* quantity: 3
* price: 2

h3. Scenario
1. SELL Order:
 * quantity: 40 MW
 * price: 195.00 E
 * delivery area: DA2

2. BUY Order:
 * quantity: 39 MW
 * price: 200.00 E
 * delivery area: DA3

3. Result Trade:
 * buy quantity: 39.000 MW
 * buy price: 200.00 E
 * cash value: 780000.000 in *Euro cent* for 39 MW (39000*20000 and 3 decimal shift from product quantity shift)

!test_client_trade.png!",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Lossy matching - expected FEXE actual PEXE,XP-2215,87652,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ll664,hj444,hj444,11/Oct/19 15:34,31/Aug/20 15:39,22/Feb/21 13:21,15/Oct/19 14:57,,,Pre2020,,,,,,,Losses_workshop_2,,,"*XBID 3.0.3*
 *test client : 6.0.29*
grid XP-2176 (workshop grid)
 !workshopGrid.png!

Steps done:
# login like Superadmin & ref data admin (SADMIn02)
 # publish capacity&Activate all interconnectors
 -- cycle is in grid
 # login into test client (XBDBX001)
 # login like TSO Admin (SADMIN02, Main menu > Capacity management)
 # *Halt 2-4 interconnector - no cycle in grid*
 # in Test Client

 - Send Sell Order from 3 40@195
 - Send Buy Order from 2 39@200 (40*0.975,195/0.975)
** trade is executed on lossy interconnector
 - _Expected : Empty OBK - orders are fully executed_
 - _Actual : 3 has an order in OBK 1@195_
-- see added picture pexe_fexe.png
 -- received files exported and pexe_fexe.txt file added

",,hj444,ll664,,,,,,,,,,,,,,,,,,,,,,,,XP-2173,,,,,,,,,,,,,,,,,,,"11/Oct/19 15:23;hj444;pexe_fexe.png;https://jira.deutsche-boerse.com/secure/attachment/75202/pexe_fexe.png","11/Oct/19 15:24;hj444;pexe_fexe.txt;https://jira.deutsche-boerse.com/secure/attachment/75201/pexe_fexe.txt","11/Oct/19 11:37;hj444;workshopGrid.png;https://jira.deutsche-boerse.com/secure/attachment/75203/workshopGrid.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,42768000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-955,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09ljk:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 36 [S],,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Oct/19 14:56;ll664;Works in 3.0.4, closing.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses Workshop 2 - analyse options for demo,XP-2202,87515,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,lt112,lt112,lt112,09/Oct/19 15:10,31/Aug/20 15:39,22/Feb/21 13:21,30/Oct/19 10:21,,,Losses ASR,,,,,,,Losses,Losses_workshop_2,,"* we need to decide what application to actually use for the TelCo ([~qm925] might know something?)
* where shall we run test-client and execute orders (must be visible by customers)
* where shall we run XBID itself ({{docker}}?) (may be hidden from sight)
* workshop takes place on 30th of October, this should be solved in advance (including ""rehearsal"")",,lt112,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,42249600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3369,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09jta:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team 37 [S],,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Oct/19 14:22;lt112;h2. Conference app

h3. Project place?
* might be impossible to access from our internal network

h3. Skype
* to be tested soon","22/Oct/19 10:48;radeale;* we need to decide what application to actually use for the TelCo (Simona Hristova might know something?)
** _Simona may know something_
* where shall we run test-client and execute orders (must be visible by customers)
** _A notebook connected to the conference_
* where shall we run XBID itself (docker?) (may be hidden from sight)
** _Either docker or a systemtest. I propose SYT2 while having Docker and maybe other SYTX as backups_
* workshop takes place on 30th of October, this should be solved in advance (including ""rehearsal"")
** C42 reserved unless special teleconferencing equipment is needed (the room contains a screen with the HDMI connection)
** C52 also reserved, but is free only until 14:30
** We could use the focus room in the worst case, probably

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses Workshop 2 - analyse options of performance presentation,XP-2201,87514,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,,lt112,lt112,09/Oct/19 15:10,31/Aug/20 15:38,22/Feb/21 13:21,04/Nov/19 10:56,,,Losses ASR,,,,,,,Losses,Losses_workshop_2,,"If possible, extract SLA-related results from performance testing results into the presentation

h2. Suggested steps
# analyse SLAs in context of losses performance
# analyse results received from performance testing
# analyse options of presenting results in context with SLAs into the presentation (so that it's readable)
# execute once results are ready

h2. Notes
* must include potential gap analysis compared to the SLAs agreed for 2.0
* must be done until 23rd of October",,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2199,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,presented,,,,,,,,,,43286400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3369,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09jtb:r",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 37,Alpha Team Sprint 38 [S],,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses Workshop 2 - analyse shipping module,XP-2200,87513,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,ll664,lt112,lt112,09/Oct/19 15:09,06/Nov/20 09:10,22/Feb/21 13:21,23/Oct/19 13:22,,,Losses ASR,,,,,,,Losses,Losses_workshop_2,,"*Analysis of impact on Shipping module files and updates to file definitions and specifications*

h2. Steps
# analyse
# include in the presentation if possible (at least high-level) - deadline for that is 23th of October
** possibly provide more thorough analysis as a separate document if necessary? At least for the Q&A section


You can also check https://confluence.energy.svc.dbgcloud.io/display/XBID/Reports+and+outbound+files ",,ll664,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,42508800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3369,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09mp6:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 37,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Oct/19 14:53;ll664;Created the Confluence page: https://confluence.energy.svc.dbgcloud.io/display/XBID/Shipping+Module+Impact+Analysis still WIP.

Should form a basis for presentation slides.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses Workshop 2 - performance tests,XP-2199,87511,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,uv683,lt112,lt112,09/Oct/19 15:08,06/Nov/20 09:10,22/Feb/21 13:21,30/Oct/19 09:26,,,Losses ASR,,,,,,,Losses,Losses_workshop_2,,"h2. Notes
* 3 datasets
** regular wave 3 dataset
** + all inter-connectors having 15min resolution
** + all inter-connectors having expected loss coefficients
** all of the above
* scenarios
** unless provided by 17th of October, use our commonly used performance test scenarios
* run
** run all the scenarios several times
*** first run all of them once
*** then run them in different order
*** repeat if results differ
* results
** must be comparable with our SLAs
* deadline
** data must be available for https://jira.deutsche-boerse.com/browse/XP-2201 ASAP
** deadline for presentation (which should include at least some results) is 23rd of October - [~ei349] can we somehow at least change these results (numbers) after sending them the presentation or is the actual deadline really 23rd of October?

h2. Tasks
# run with xbid 2.0
# run with xbid 2.0 with all inter-connectors having 15min resolution
# run with xbid 3.0
# run with xbid 3.0 with all inter-connectors having 15min resolution
# run with xbid 3.0 and dataset with losses
# run with xbid 3.0 and dataset with losses and with all inter-connectors having 15min resolution",,lt112,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,42508800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3369,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09mp0:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 37,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2635-redo-fix-3.0,XP-2521-cmm-cmi-labeling,XP-2942-losses-perf,xbid-losses-poc,XP-2521-labeling-cmi-leftovers,XP-2694-xbid-3.0.x-latest-tag-fix,testing-new-stages-3.0,XP-139-xbid-3,master-xbid-losses-poc,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Oct/19 14:51;radeale;Grid info in XP-2235.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Losses Workshop 2 - review, finalize presentation",XP-2198,87510,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,,lt112,lt112,09/Oct/19 15:08,31/Aug/20 15:39,22/Feb/21 13:21,30/Oct/19 10:21,,,Losses ASR,,,,,,,Losses,Losses_workshop_2,,"Once the presentation is finished, it should go through several loops of review and finalization.
Document with the presentation should be sent to customers on 23th of October",,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,43286400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3369,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09jtb:i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team 37 [S],,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses Workshop 2 - test data grid ,XP-2176,87273,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,qo794,ei349,ei349,03/Oct/19 10:26,06/Nov/20 09:10,22/Feb/21 13:21,14/Oct/19 10:33,,,Losses ASR,,,,,,,Losses,Losses_workshop_2,,"h1. Dataset ""losses-demo-data"" (m7-dataset version 2.0.x)

!losses_demo_dataset.png!
h4. Market areas:
||Short name||EIC code||
|MA1|MA1111111111111N|
|MA2|MA2222222222222U|
|MA3|MA33333333333330|
|MA4|MA44444444444447|

h4. Deliver Areas
||Short name||EIC code||
|1|DA1111111111111J|
|2|DA2222222222222Q|
|3|DA3333333333333X|
|4|DA44444444444443|

h4. Borders
 * MA1-MA2
 * MA2-MA3
 * MA2-MA4
 * MA3-MA4

h4. InterConnectors

* default_capacity: 100.000kW
* delivery_interval_resolution: 1h
* border_opening: 06:00
* activate_after_publish: true

||InterConnector||Loss coefficient||
|1-2|1|
|2-3|0.975|
|2-4|1|
|3-4|1|

h4. CMM users
||Login ID||Roles||
|SADMIN01|SUPER_ADMIN, REFERENCE_DATA_ADMIN|
|SADMIN02|SUPER_ADMIN, REFERENCE_DATA_ADMIN, FILE_ADMIN, TSO_ADMIN|
|SADMIN03|SUPER_ADMIN, REFERENCE_DATA_ADMIN, FILE_ADMIN, TSO_ADMIN|
|SADMIN04|SUPER_ADMIN, REFERENCE_DATA_ADMIN, FILE_ADMIN, TSO_ADMIN|

h4. Application access
||ID||
|ComTrader|
|SPM|
|DB-TestClient|

h4. Trading users
||Login ID||Roles||
|SADMIN01|ROLE_ADMIN, ROLE_ADMIN_REFDATA, ROLE_SYSTEM, ROLE_SUPERADMIN, ROLE_SYSTEM_ACCESS|
|SADMIN02|ROLE_ADMIN, ROLE_ADMIN_REFDATA, ROLE_SYSTEM, ROLE_SUPERADMIN, ROLE_SYSTEM_ACCESS|
|SADMIN03|ROLE_ADMIN, ROLE_ADMIN_REFDATA, ROLE_SYSTEM, ROLE_SUPERADMIN, ROLE_SYSTEM_ACCESS|
|XBDBX001|ROLE_EXCHANGE, ROLE_PUBLIC_API, ROLE_CAPACITY_INFO|
|XBDBX002|ROLE_EXCHANGE, ROLE_PUBLIC_API, ROLE_CAPACITY_INFO|

*Trading Products*
||Product||Assigned DAs||Duration||
|Intraday_Power|1, 2, 3, 4|1h|",,ei349,qo794,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Oct/19 14:10;qo794;losses_demo_dataset.png;https://jira.deutsche-boerse.com/secure/attachment/74846/losses_demo_dataset.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,42681600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3369,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s000104236i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 36,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2635-redo-fix-3.0,master-xbid-dataset-2.0.x,XP-2102-xbid-3,XP-2521-cmm-cmi-labeling,XP-2942-losses-perf,xbid-losses-poc,xbid-dataset-2.0.x,XP-2521-labeling-cmi-leftovers,XP-2694-xbid-3.0.x-latest-tag-fix,testing-new-stages-3.0,XP-139-xbid-3,master-xbid-losses-poc,,,,,,,,,,,,,,,,,,,,,,true,"14/Oct/19 10:33;qo794;xbid 3.0.3 with dataset 2.0.2","17/Oct/19 11:13;radeale;Please set the capacity resolution on all ICs to 100 kW.","17/Oct/19 12:07;qo794;Done in xbid 3.0.5 and dataset 2.0.3",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses Workshop 2 - Auction Algorithm scenarios + demo,XP-2174,87269,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,ei349,ei349,03/Oct/19 09:15,06/Nov/20 09:10,22/Feb/21 13:21,15/Oct/19 15:38,,,Losses ASR,,,,,,,,,,"trigger auction bu grid change 

show trades 

AC: 
 * presentation
 * test cases 
 * showable demo ",,ei349,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,42768000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3369,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s000104237",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 36,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Oct/19 15:38;radeale;Made both into the XLS ans PPT.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses Workshop 2 - basic matching and routing algorithm scenarios + demo,XP-2173,87268,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,hj444,ei349,ei349,03/Oct/19 09:15,06/Nov/20 09:10,22/Feb/21 13:21,23/Oct/19 11:50,,,Losses ASR,,,,,,,Losses_workshop_2,,,"Show: 
 * route search 
 * local view
 * visible losses effect 
 * one order visible twice because of two possible routes scenario
 * trades examples
 * no rounding, no cycles

AC: 
 * presentation
 * test cases 
 * showable demo ",,ei349,hj444,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2226,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,42768000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3369,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5k:y",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 36 [S],Alpha Team Sprint 37,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Oct/19 15:01;hj444;created new  

https://projects.deutsche-boerse.de/sites/ps0080/_layouts/15/WopiFrame.aspx?sourcedoc={4E8B067F-79B9-48E9-B9CC-FFAD890CD905}&file=ASR010c%20Losses_2nd_workshop_2019.pptx&action=default


with  Chapter 2 describing the basic cases.","15/Oct/19 08:02;hj444;Showable demo is blocked by XP-2215","16/Oct/19 14:13;hj444;Issue solved.

Pictures from test client added into the presentation.

Each step was done separately and verified OBK visibility.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses Workshop 2 - update of test client,XP-2172,87267,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ll664,ei349,ei349,03/Oct/19 09:13,06/Nov/20 09:10,22/Feb/21 13:21,09/Oct/19 15:31,,,Losses ASR,,,,,,,Losses_workshop_2,,,"* update the version first! 
 * change the API 
 * update the gui to show new parameters
 * change of deltas calculation
 * check the messages recording",,ei349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,43891200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3369,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5k:o",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 36 [S],,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2635-redo-fix-3.0,master-3.0.x,XP-2102-xbid-3,XP-2521-cmm-cmi-labeling,xbid-losses-poc,XP-2942-losses-perf,XP-2521-labeling-cmi-leftovers,XP-2694-xbid-3.0.x-latest-tag-fix,xbid-api-3.0.x,testing-new-stages-3.0,master,master-xbid-losses-poc,XP-139-xbid-3,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses Workshop 2 - matching against grid demo,XP-2171,87266,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,hj444,ei349,ei349,03/Oct/19 09:13,06/Nov/20 09:10,22/Feb/21 13:21,18/Oct/19 12:33,,,Losses ASR,,,,,,,Losses_workshop_2,,,"Please prepare a demo of matching against the grid.

  !workshopGrid.png! 

h3. TC1: Process a trade in grid with cycle.
Capacity 100MW, loss coefficient = 0.975
No flow yet in grid.
After publishing and opening all interconnectors  Buy Orders are present in OBK -> 2.5@0

 * Send sell Order with 2@-2 from DA4
** trade is executed against grid -> 2@0 (DA4)

 

",,ei349,hj444,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Oct/19 14:38;hj444;workshopGrid.png;https://jira.deutsche-boerse.com/secure/attachment/75659/workshopGrid.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,42595200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3369,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09mp9:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 37,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Oct/19 12:33;hj444;Workshop document updated.
TC added. Also added pictures from test client and API messages after trade.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses Workshop 2 - block orders scenarios + demo,XP-2170,87265,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,ei349,ei349,03/Oct/19 09:13,06/Nov/20 09:10,22/Feb/21 13:21,29/Oct/19 10:38,,,Losses ASR,,,,,,,Losses_workshop_2,,,Please prepare block orders scenarios and demo for the losses workshop 2. ,,ei349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,43891200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3369,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09jtb:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team 37 [S],,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses Workshop 2 - rounding scenarios+ demo,XP-2169,87264,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,ei349,ei349,03/Oct/19 09:12,06/Nov/20 09:10,22/Feb/21 13:21,17/Oct/19 12:59,,,Losses ASR,,,,,,,Losses,Losses_workshop_2,,,,ei349,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Oct/19 15:24;radeale;screenshot-1.png;https://jira.deutsche-boerse.com/secure/attachment/74899/screenshot-1.png","08/Oct/19 15:24;radeale;screenshot-2.png;https://jira.deutsche-boerse.com/secure/attachment/74900/screenshot-2.png","08/Oct/19 15:24;radeale;screenshot-3.png;https://jira.deutsche-boerse.com/secure/attachment/74901/screenshot-3.png","08/Oct/19 15:24;radeale;screenshot-4.png;https://jira.deutsche-boerse.com/secure/attachment/74902/screenshot-4.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,43372800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3369,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s000104238",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 36,Home Office Team 37 [S],,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Oct/19 15:22;radeale;A rounding scenario entered in the W2 presentation as chapter _Rounding_.

Please let me know whether are more cases to cover.

https://projects.deutsche-boerse.de/sites/ps0080/_layouts/15/start.aspx#/Shared%20Documents/Forms/AllItems.aspx?RootFolder=%2Fsites%2Fps0080%2FShared%20Documents%2F01%20XBID%20Meetings%2FExternal%20Meetings%2FWorkshops%2F2019%20%2D%20Losses%20Workshop%202&FolderCTID=0x0120001EB961193A6D2F4CA27436315BDB6B44&View=%7B6C81558C%2DB2AA%2D42D3%2DA854%2DB2860B7C1829%7D

 !screenshot-1.png! 

 !screenshot-2.png! 

 !screenshot-3.png! 

 !screenshot-4.png! 

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
APTs - 03/10 dataset,XP-2154,87152,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,radeale,radeale,radeale,30/Sep/19 16:29,06/Nov/20 11:11,22/Feb/21 13:21,17/Oct/19 10:15,,,Pre2020,,,,,,,UAT2.0,,,"Please check this dataset and prepare it for the 03/10 APT run if possible.

Is it possible to use the modified dataset with the scenario 4 RTS3/B?

https://jira.deutsche-boerse.com/secure/attachment/74512/74512_XBID+dataset+RTS3+B+Wave+2+for+DBAG_v2.0_APT+W2+change_03_10.xlsx

 ",,od044,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Oct/19 15:33;od044;SC04_SQL_check - ATPv2.xlsx;https://jira.deutsche-boerse.com/secure/attachment/75079/SC04_SQL_check+-+ATPv2.xlsx","10/Oct/19 15:25;od044;performance-result-report-2019-10-03v2.xls;https://jira.deutsche-boerse.com/secure/attachment/75076/performance-result-report-2019-10-03v2.xls",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,43200000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09j3r:y4",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 35 [S],Home Office Team Sprint 36,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,Simulation,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Oct/19 14:06;radeale;_DBAG to verify reported data (performance-result-report-2019-10-03.xls) – it looks like data on input was duplicated (Count of responses are about double level)_
 _DBAG to provide the corrected report, if the findings of TWG PTF were valid_","10/Oct/19 15:35;od044;There was a misconfiguration in our report-tool, the data has been duplicated twice. Here is a new generated and correct report  [^performance-result-report-2019-10-03v2.xls].

Also please inform a customer that the previous SQL check count includes orders and trades that have been entered before our run approx 35337 orders and 7655 trades. 
Here is a new SQL check for the specific time frame of the run only.  [^SC04_SQL_check - ATPv2.xlsx] ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Perf Report for 26/09 12:07-13:11,XP-2149,87089,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,od044,radeale,radeale,27/Sep/19 11:49,11/Aug/20 16:35,22/Feb/21 13:21,01/Oct/19 11:13,,,Pre2020,,,,,,,UAT2.0,,,"Please create a report:

_TWG PTF would like to get the report from Pilot APT run generated for period of 26/09/2019 12:07 - 13:11._

Thanks!",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-1997,,,,,,,"01/Oct/19 11:12;od044;performance-result-report-2019-09-26.xls;https://jira.deutsche-boerse.com/secure/attachment/74553/performance-result-report-2019-09-26.xls",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,43977600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1598,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09iag:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 35 [S],,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,Simulation,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Oct/19 10:20;radeale;Efforts booked in XP-1997 (to have in one place).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
XBID CLONE: Losses - Model Test Scenarios,XP-2148,87088,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,27/Sep/19 11:46,31/Aug/20 15:38,22/Feb/21 13:21,17/Oct/19 10:16,,,Losses ASR,,,,,,,Losses,,,"Dear TSO and NEMO representatives,

DBAG would like to consult with you whether you have any specific test situations which are to be used for the Losses POC presentation. (This is not related to the performance tests.)

Best regards
DBAG Team & Alexandr",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4727,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,42681600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09j3r:zw",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 35 [S],Home Office Team Sprint 36,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Oct/19 10:17;radeale;An asnwer after three weeks, nothing extra to reflect upon...

_Dear Alexandr,_

_As discussed with Jiri, we would like to see how the prototype manage to deal with standard situation such as loosy/gainy loop, trade over the border with losses and in case capacity is increased by a TSO._

_In addition we would like to see specific examples including incorporation of day-ahead flows, such as with_

_north-> south flow of energy (and opposite)_
 _flow from north to central Europe and via other ICs back_

_Kind regards_

_David_",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
XBID CLONE: Losses Performance Testing - Wave 3 grid,XP-2147,87086,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,radeale,radeale,radeale,27/Sep/19 11:34,31/Aug/20 15:39,22/Feb/21 13:21,17/Oct/19 10:22,,,Losses ASR,,,,,,,Losses,,,"Dear TSO and NEMO representatives,

DBAG would like to ask you to provide the presumed 3rd Wave grid for the preparation of the Losses POC performance testing (as specified in the ASR010c).

The attached files describes the dataset used for the UAT II Peformance testing with added column for the _Loss Factor [%]_. Please highlight the changes with the yellow colour.

DBAG proposes to use as the bases for the performance testing to use a modified RTS3B scenario.

Best regards
DBAG Team & Alexandr",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4726,,,,,,,,,,,,,,,,,"27/Sep/19 11:34;radeale;Dataset_rts3B-Wave3_v1.3.60.xlsx;https://jira.deutsche-boerse.com/secure/attachment/74452/Dataset_rts3B-Wave3_v1.3.60.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,42681600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09j3r:zs",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 35 [S],Home Office Team Sprint 36,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Oct/19 10:19;radeale;Dataset provided, backlog task created - XP-2235.

https://jira.deutsche-boerse.com/secure/attachment/75475/Dataset_rts3B-Wave3_v1.3.60_SGL.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Performance analysis for workshop #2,XP-2124,86695,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,lt112,lt112,19/Sep/19 09:30,31/Aug/20 15:39,22/Feb/21 13:21,12/Feb/20 14:43,,,3.1.0,,,,,,,,,,"* analyze performance
** run with normal dataset and with dataset with all the inter-connectors having 15min resolution
** add comparison 
* analyze presentation options
** regular reports?",,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,45100800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1819,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09g1s:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Find a joint agreement with on cycles in the OBK with customers,XP-2122,86692,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,ei349,ei349,19/Sep/19 09:20,06/Nov/20 09:38,22/Feb/21 13:21,29/Oct/19 10:41,,,Pre2020,,,,,,,Batch_6,Documentation,Losses,"Existence of lossy ICs leads to possibility for ""trades against the grid"", i.e. to either:
 * Burn unwanted energy in lossy ICs - it is sufficient to have ATC > 0 on the ICs involved in the lossy cycle
 * Gain energy by negating the loss from already occurred flows on lossy ICs

This results to one-sided trades.

+Gainy cycles+

When a flow occurs on a lossy IC and subsequently a better path for the trade flow appears, it creates possibility to actually gain energy by negating the flow on the lossy IC.

Such possibility should be reflected in the OBK by a one-sided order. The order is displayed with a positive capacity (what is to be gained) and *zero* price.

+Lossy cycles+

These cycles are present is simple situation that it is possible to burn energy by routing it through a cycle involving at least one lossy IC.

The proposal is to not show such order in the OBK. The reasoning is that is would generally be a very high number limited only by the capacity of the entire grid involving lossy ICs. The number is expected to be fluctuating quickly, thus generating significant load on system by need for recalculating the lossy cycles. These would be calculated only in the case described below.

To proposed workflow for sell orders with zero or negative price is:
 # Try to match it with the best counter-order present in the OBK
 # If such is not available, match the order with zero price against the grid
 # If there is no capacity for a lossy cycle the order stays in the OBK

The +open points+ for both gainy and lossy cycles remains:
 * *What should represent the other side of the trade - acctId?* {color:#0747A6}(XP-1992: Most likely empty.){color}
 * *What should be order ID of a cycle?* {color:#0747A6}(XP-1992: ordrId = -1){color}
 * *Should lossy cycles be displayed in the OBK?* {color:#0747A6}(XP-1992: Yes){color}
 * *Should cycles be aggregated in the OBK?* {color:#0747A6}(XP-1992: No){color}

+Information to be relayed to the customer:+

Dear NEMO and TSO representatives,

let me inform you about the current state of the cycles implementation and possibly consult the currently planned solution to some of the related points.

* Both gainy and lossy cycles are to be presented in the OBK.
* The order ID of such orders is -1 (ordrId = -1).
* The order entry side is empty at the moment (acctId="""").
* Cycles will not be aggregated in the OBK (the same treatment as for standard orders).
",,ei349,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,44496000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09j3r:yc",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 35 [S],Home Office Team Sprint 36,Home Office Team 37 [S],,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Sep/19 15:20;radeale;Externally processed via XBID-4719.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses Workshop 2 - Demo Block Orders and Rounding scenarios preparations ,XP-2120,86689,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,ei349,ei349,19/Sep/19 09:11,06/Nov/20 09:10,22/Feb/21 13:21,16/Oct/19 16:12,,,Losses ASR,,,,,,,Losses_workshop_2,,,"Prepare scenarios where we can demonstrate results of our development.

Topics to cover: 
 * Generic losses topics like how sell/buy order is displayed over the grid
 * Rounding 
 * Block Orders
 * Cycles 

 Acceptance criteria: 
 * use cases on above topics including exact numbers 
 * no implementation is expected from this task",,ei349,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Sep/19 10:27;radeale;RTM-04_Capacity - CrossBorder Trading_v1.3.xlsx;https://jira.deutsche-boerse.com/secure/attachment/74419/RTM-04_Capacity+-+CrossBorder+Trading_v1.3.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,43372800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-3369,,,,,,,,,,,,,,19/Sep/19 09:11,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s0001042394",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 35 [S],Home Office Team Sprint 36,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Sep/19 10:19;radeale;Test model is placed here:
https://projects.deutsche-boerse.de/sites/ps0080/Shared Documents/02 XBID Releases/XBID 3.0/Losses/Test Models

I propose that for generic topics and cycles to elaborate on the following model situations:

https://jira.deutsche-boerse.com/browse/XP-1992?focusedCommentId=242543&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-242543

[Workshop Presentation] Another possible input, I propose to use the model grid outlined in the Recall-cancel chapter (diamond) as a basis for TCs.

https://projects.deutsche-boerse.de/sites/ps0080/Shared%20Documents/Forms/AllItems.aspx?RootFolder=%2fsites%2fps0080%2fShared%20Documents%2f01%20XBID%20Meetings%2fExternal%20Meetings%2fWorkshops%2f20190917%20-%20Losses%20Workshop%201&FolderCTID=0x0120001EB961193A6D2F4CA27436315BDB6B44

The test model used for the R2.0 routing, the Diamond should be most useful:

 [^RTM-04_Capacity - CrossBorder Trading_v1.3.xlsx] ","03/Oct/19 11:43;radeale;SPs changed 5 -> 2.","08/Oct/19 15:47;radeale;Cover BLOCK & AON & Auction as in the WS1 (adjust to the current grid setup).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix for Acer Reports and generation of new H1 reports,XP-2106,86539,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tr866,ei349,ei349,16/Sep/19 14:57,06/Nov/20 10:55,22/Feb/21 13:21,15/Oct/19 16:11,,,Pre2020,,,,,,,,,,"h1. {color:#00875a}Corrected Acer H1 reports{color}
h2. Current Situation

We've provided incorrect H1 Acer reports to our customers. Reason is described in the XP-2095 by [~ll664]'s comment: 

 
{panel:title=David Siro}
_The reason for inconsistencies was invalid mapping of Market Area EICs to Delivery Area EICs. Since 22.5.2019, a new version of Report Tool has been deployed that correctly uses DA EIC when it's the only area within its MA, so the data are ok from that time. I've fixed the XMLs and attached.Pls note that there are no orders in XBID for Morroco (10YMA-ONE------O) and Finland-Russia (10YDOM-1001A084H) areas are not present as no orders/trades were entered there._
{panel}
 

 

For more details see XP-2095.
h2. Proposed Solution

Fix the issue described above. Prepare new H1 Acer reports and validate their content. 
h2. Acceptance Criteria 
 * Fixed root cause of the problem
 * Generated new H1 reports for Acer
 * Validated content of reports 
 * Reports sent to the customer",,ei349,ll664,radeale,tr866,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Oct/19 11:08;ll664;ACER_H1_fixed.zip;https://jira.deutsche-boerse.com/secure/attachment/74880/ACER_H1_fixed.zip","10/Oct/19 17:31;ll664;ACER_H1_fixed_v2.zip;https://jira.deutsche-boerse.com/secure/attachment/75096/ACER_H1_fixed_v2.zip","15/Oct/19 14:28;tr866;Check_BID_ASK_SPREAD.zip;https://jira.deutsche-boerse.com/secure/attachment/75408/Check_BID_ASK_SPREAD.zip","11/Oct/19 16:08;tr866;Reports_Check_for_ACER_H1_fixed.zip;https://jira.deutsche-boerse.com/secure/attachment/75206/Reports_Check_for_ACER_H1_fixed.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,42768000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-4092,,,,,,,,,,,,,,16/Sep/19 14:57,,,,,,,,,,,,,,,,,,,,,"1|000y5n:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 35,Alpha Team Sprint 36 [S],,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Oct/19 14:31;radeale;TWG FTF 3/10 agreed:

TWG FTF accepts the proposal of DBAG and asks DBAG to re-generate the reports.","08/Oct/19 11:13;ll664;Newly generated reports attached.

Fixes:

* EIC mappings correctd - pls note that previously fixed version was also wrong. The reports 2019-05/2019-06 were run through remapping script, but they shouldn't have been. Hence those reports are different from the last batch, but the rest (month 01-04) should be exactly same.
* Prices are recalculated to EUR/MWH 
* Quantities are in MWH

[~tr866] pls do sanity check.","09/Oct/19 15:51;tr866;Sofar we noticed that OMIE with 10YES-REE------0 EIC is till having recored for X04 product in BID_ASK_SPREAD reports for all months

*1.* *+Intraday Trade Volume reports+* 
 * *Structure*: we've found no discrepancies between structure and agreed schemas.
 * *Sanity check*: difference in combinations of BZs that appear in reports for two periods. It raised some questions .

|EIC code in BZ combinations| |before May 21/{color:#0000ff} after Fix{color}|after May 21| |
|10Y1001A1001A82H|MA Germany|Yes|Yes|Is some data for Germany then reported multiple time in 1st period?|
|10YDE-ENBW-----N|DA TNG|Yes/{color:#0000ff} NO{color}|No|
|10YDE-EON------1|DA TTG|Yes/{color:#0000ff} NO{color}|No|
|10YDE-RWENET---I|DA AMP|Yes/{color:#0000ff} NO{color}|No|
|10Y1001A1001A44P|DA Sweden 1|No/{color:#0000ff} YES{color}|Yes|This means we are missing data for Sweden in 1st period?|
|10Y1001A1001A45N|DA Sweden 2|No/{color:#0000ff} YES{color}|Yes|
|10Y1001A1001A46L|DA Sweden 3|No/{color:#0000ff} YES{color}|Yes|
|10Y1001A1001A47J|DA Sweden 4|No/{color:#0000ff} YES{color}|Yes|
|10YMA-ONE------O|DA Morocco|Yes/{color:#0000ff} NO{color}|No|Reporting for DA MA stopped?/{color:#0000ff} No trades happened{color}|

(/)

{color:#0000ff}+ {color}{color:#0000ff}Noticed also that after fix for example Latvia(10YLV-1001A00074) and Lithuania(10YLT-1001A0008Q), that were before fix wrongly mapped to AMP(10YDE-RWENET---I) and EnBW(10YDE-ENBW-----N ) are missing for some months X04 products where as for other months they have records the product. Probably caused by no trades being executed at this hour. 
 - Most probably it's ok, because number of records for X04 product for the mentionned DAs is very low and very often just 1 record if any.{color}

*2.* *+Trade Volumes Hours to Delivery report+*

The same issue with Sweden and Germany occurs that the others found. We checked the March report. We did not check whether it changes in the course of May.
 {color:#0000ff}- Caused by wrong mapping. After fix Swedish DAs 1-4 are having records all months for X01 and X04(/){color}
 - Records for EIC of German MA are now present for all months having records for all products X01,X02,X03,X04. No records for German DAs are present anymore.(/)

Other than that, the report should contain volumes (as per its name and specification), which are in MWh, and this indeed is the measurement unit indicated in the report. However, MWh volumes require 3 decimals for 15-minute products (0.1 MW of a 15-minute product yields 0.1 MW * 0.25h =  0.025 MWh). Now, although the values are given 3 decimals, the last two decimals are always zeroes. Therefore, we would expect a deviation of the total volumes, which would be the inevitable result of the rounding error, in whichever way rounding or truncation has been applied. Might it be the case that the values given are actually MW instead of the MWh?

The report did conform to the XML schema and it did display all relevant bidding zone pairs (except for the missing bidding zones), including the combination of each bidding zone with itself (intra-zonal trading). 

{color:#0000ff} + {color}{color:#0000ff}Noticed also that after fix for example Lithuania(10YLT-1001A0008Q) that was before fix wrongly mapped to EnBW(10YDE-ENBW-----N ) is missing for some months X04 products where as for other months they have records the product. Probably caused by no trades being executed at this hour. 
 - Most probably it's ok, because number of records for X04 product for the mentionned DAs is very low and very often just 1 record if any.{color}

*3.* *+Weighted Average Price report+*

we have found the following inconsistencies:
 * The weighted average prices for the Swedish delivery areas are missing for the relevant products - Caused by wrong mapping. After fix Swedish DAs 1-4 are having records all months for X01 and X04(/)
 * The weighted average prices for the half hourly and quarterly products for the German delivery areas are missing. They can be found for the hourly product. The weighted average prices for all products are listed for Market Area Germany separately. - {color:#0000ff}Records for EIC of German MA are now present for all months having records for all products X01,X02,X03,X04. No records for German DAs are present anymore.(/){color}

DBAG should verify for us that the values themselves for Market Area Germany are correctly calculated before and after 21st of May (=calculated with the data from all german delivery areas). As 50 Herz was correctly not listed before 21st although the rest of the german delivery areas were, could it mean that maybe only three areas has been used as base for the calculations of MA Germany values... {color:#0000ff}- Related to the above point{color}

{color:#0000ff} + {color}{color:#0000ff}Noticed also that after fix for example Latvia(10YLV-1001A00074) and Lithuania(10YLT-1001A0008Q), that were before fix wrongly mapped to AMP(10YDE-RWENET---I) and EnBW(10YDE-ENBW-----N ) are missing for some months X04 products where as for other months they have records the product. Probably caused by no trades being executed at this hour. 
 - Most probably it's ok, because number of records for X04 product for the mentionned DAs is very low and very often just 1 record if any.{color}

*+4. Weighted Average Price Last Trading Hour report+*
 * ** Structure and attributes are in line with XSD
 * Some contracts in some days are missed, it could be due to there are not trades on last hour on those specific days and contracts, verification is on going. - {color:#0000ff}Noticed also that after fix for example Latvia(10YLV-1001A00074) and Netherlands(10YNL----------L), that were before fix wrongly mapped to AMP(10YDE-RWENET---I) and EON(10YDE-EON------1) are missing for some months X04 products where as for other months they have records the product. Probably caused by no trades being executed at this hour.
 - Most probably it's ok, because number of records for X04 product for the mentionned DAs is very low and very often just 1 record if any.(?){color}
 * we found the following inconsistences on “Weighted Average Price Last Trading Hour” report:
 ** Missed Bidding zones: Sweden. - {color:#0000ff}Caused by wrong mapping. After fix Swedish DAs 1-4 are having records all months for X01 and X04(/){color}
 ** Mixed DA and MA in the case of Germany. - {color:#0000ff}Only records for EIC of German MA are now present for all months having records for products X01,X02,X03,X04. No records for German DAs are present anymore.(/){color}
 ** Error in data:
 --- OMIE do not have defined user define contracts and in the reports it seems that we have trades in this kind of contracts, see “2019-01_WEIGHTED_AVERAGE_PRICE_LAST_TRADING_HOUR_2019-06-10-130738.xml” report:

 * The values obtained by OMIE for Bidding Zone “10YES-REE------0” do not match with values in the report, we do not check all values only a small group. - {color:#0000ff}Cause by wrong mapping. After fix Spanish DA is having records only for X01 products.(/){color}

+*5.* *Bid ask spread reports*+

for all months:

Delivery area:
 * Sweden are reported since July 1th - {color:#0000ff}Caused by wrong mapping. After fix DA Sweden 1-4 is contained in all reports for months 02-06 having products X01 and X04(/){color}
 * Germany are mixed – see attachment - {color:#0000ff}Caused by wrong mapping. After fix only EIC for MA Germany occurs in reports for all months having products X01,X02,X03,X04, no EIC of german DAs(/){color}
 * For BZ: 10YDOM-1001A084H - there is no report  - {color:#0000ff}See comment from David in the linked JIRA - no orders for Finland-Russia Exchange Area(/){color}

Product
 * „OMIE do not have defined user define contracts“ it is reported in all months. - {color:#de350b}*Problem still remains, has to be fixed(x)*{color}
 * In all Bidding zones are reported User defined block product – is any other zone where it shouldn’t be reported ? - {color:#0000ff}We don't have information about product assignments in production.(?){color}","10/Oct/19 17:31;ll664;I have regenerated the bid-ask spread report, which were invalid, however it contains records for OMIE for block contracts. There were couple of block orders that were visible in the Spain delivery area, hence the records there. However, no trade in Spain for blocks has been made, hence there are records only in bid-ask spread reports. 

One blocks in question is contractId=74205, which is contract for 2019-06-05 12:00:00.000000/2019-06-05 14:00:00.000000 which also appears in bid-ask spread reports.

The fixed reports zip attached. [^ACER_H1_fixed_v2.zip] 
","11/Oct/19 14:32;tr866;Output from LIPB Reference Data where was Production Data at that moment:
cx_330_product_x_region_tso
||product_long_name||tso_area_eic||
|XBID_Half_Hour_Power|10YFR-RTE------C|
|XBID_Half_Hour_Power|10YDE-RWENET---I|
|XBID_Half_Hour_Power|10YDE-ENBW-----N|
|XBID_Half_Hour_Power|10YDE-VE-------2|
|XBID_Half_Hour_Power|10YDE-EON------1|
|XBID_Hour_Power|10YMA-ONE------O|
|XBID_Hour_Power|10YDK-1--------W|
|XBID_Hour_Power|10YES-REE------0|
|XBID_Hour_Power|10YNO-3--------J|
|XBID_Hour_Power|10YNO-4--------9|
|XBID_Hour_Power|10Y1001A1001A44P|
|XBID_Hour_Power|10YNL----------L|
|XBID_Hour_Power|10YBE----------2|
|XBID_Hour_Power|10YNO-1--------2|
|XBID_Hour_Power|10Y1001A1001A46L|
|XBID_Hour_Power|10YAT-APG------L|
|XBID_Hour_Power|10YFR-RTE------C|
|XBID_Hour_Power|10YLV-1001A00074|
|XBID_Hour_Power|10YPT-REN------W|
|XBID_Hour_Power|10Y1001A1001A48H|
|XBID_Hour_Power|10YFI-1--------U|
|XBID_Hour_Power|10YDE-ENBW-----N|
|XBID_Hour_Power|10Y1001A1001A45N|
|XBID_Hour_Power|10Y1001A1001A47J|
|XBID_Hour_Power|10YLT-1001A0008Q|
|XBID_Hour_Power|10YDE-RWENET---I|
|XBID_Hour_Power|10Y1001A1001A39I|
|XBID_Hour_Power|10YNO-2--------T|
|XBID_Hour_Power|10YDE-VE-------2|
|XBID_Hour_Power|10YDOM-1001A084H|
|XBID_Hour_Power|10YDK-2--------M|
|XBID_Hour_Power|10YDE-EON------1|
|XBID_Quarter_Hour_Power|10YDE-RWENET---I|
|XBID_Quarter_Hour_Power|10YDE-ENBW-----N|
|XBID_Quarter_Hour_Power|10YDE-VE-------2|
|XBID_Quarter_Hour_Power|10YDE-EON------1|
|XBID_Quarter_Hour_Power|10YAT-APG------L|

cx_201_product_configuration:
||config_key||last_update_time||last_update_user||mod_type_code||config_value||propagate||revision||product_long_name||
|blockOrderProduct|2019-06-12 07:02:32|INITIAL_LOAD_USER_00dk|AADD|false|Y|0|XBID_Half_Hour_Power|
|blockOrderProduct|2019-06-12 07:03:19|INITIAL_LOAD_USER_00dk|AADD|true|Y|0|XBID_Hour_Power|
|blockOrderProduct|2019-06-12 07:03:46|INITIAL_LOAD_USER_00dk|AADD|false|Y|0|XBID_Quarter_Hour_Power|","11/Oct/19 15:47;tr866;Excel(ods) files with notes from acer files checks of version 1 (ACER_H1_fixed.zip) attached [^Reports_Check_for_ACER_H1_fixed.zip]","15/Oct/19 14:28;tr866;Updated report from check of Bid Ask Spread report attached [^Check_BID_ASK_SPREAD.zip]","15/Oct/19 14:33;tr866;Noted that all lastly generated BID_ASK_SPREAD are having smaller filesize by about 20%. Found out it is cause by omitted namespaces ns2: prefixes. ns2: namespaces could are not included anymore because they're now defined to belong to the default namespace.","15/Oct/19 15:06;tr866;Price Indicators: Prices in BID_ASK_SPREAD reports were recalculated to EUR/MWh
old prices were multiplied by: x 60min/Length of delivery period(in mins)
Example:
||Product||contract||Price before fix||Price after last V2 fix||
|X01|00-01|10.06|10.06*1=10.06|
|X02|00:00-00:30|36.53|36.53*2=73.06|
|X03|00:00-00:15|7.41|7.41*4=29.64|
|X04|15-19|23.00|23*1/4=5.75|

Volume Indicators:
in INTRADAY_TRADE_VOLUME were recalculated to MWh
old prices were multiplies by Length of delivery period(in mins)/60min
in fixed reports number of decimals was increased to 5 taking into account the minimal possible values(0.001MW * 0.25)
||Product||contract||Volume before fix||Volume after last V2 fix||
|X01|06-07|145.900|145.900*1=145.90000|
|X02|10:30-11:00|30.400|30.400*1/2=15.20000|
|X03|01:15-01:30|29.100|29.100*1/4=7.27500|
|X04|23-T04|88.100|88.100*5=440.50000|

in TRADE_VOLUME_HOUR_TO_DELIVERY were recalculated to MWh
old prices were multiplies by Length of delivery period(in mins)/60min
in fixed reports number of decimals was increased to 5 taking into account the minimal possible values(0.001MW * 0.25)
||Product||contract||Volume before fix||Volume after last V2 fix||
|X01|17-18|577.900|577.900*1=577.90000|
|X02|16:30-17:00|12.200|12.200*1/2=6.10000|
|X03|20:15-20:30|73.800|73.800*1/4=18.45000|
|X04|03-T08|5.000|5.000*5=25.00000|","15/Oct/19 15:33;tr866;Volume-Weighted Price indicators:
in WEIGHTED_AVERAGE_PRICE were recalculated to EUR/MWh( using MWh and EUR/MWh units in SUM(V*P)/SUM(V))
old prices were multiplied by: x 60min/Length of delivery period(in mins)
||Product||contract||Price before fix||Price after last V2 fix||
|X01|01-02|43.41|43.41*1=43.41|
|X02|01:30-02:00|40.80|40.80*2=81.60|
|X03|00:00-00:15|45.72|45.72*4=182.88|
|X04|19-23|65.50|65.50*1/4=16.38|

in WEIGHTED_AVERAGE_PRICE_LAST_TRADING_HOUR were recalculated to EUR/MWh( using MWh and EUR/MWh units in SUM(V*P)/SUM(V))
old prices were multiplied by: x 60min/Length of delivery period(in mins)
||Product||contract||Price before fix||Price after last V2 fix||
|X01|11-12|21.74|21.74*1=21.74|
|X02|06:00-06:30|29.59|29.59*2=59.18|
|X03|01:00-01:15|35.93|35.93*4=143.72|
|X04|08-20|10.01|10.01*1/4=0.83|","15/Oct/19 15:56;tr866;As conclusion, the wrong mapping of DAs looks now fixed. The german DAs are correctly aggregated under MA EIC code for all months, records for Swedish DAs are not missing anymore for any month as they were mapped to the correct codes. Records for Morocco and Finland-Russia are not present in any month as there were no orders entered. OMIE still does have record for X04 product in BID_ASK_SPREAD report as the order entered in other DAs was visible in local orderbook even though OMIE hasn't entered any. On the other hand OMIE doesn't have any record of X04 in any other reports as they haven't executed any trade for this product.
All prices were recalculated to EUR/MWh units and volumes to MWh units.
As customers mentioned missing records for certain products/months/DAs similar thing was noticed during the check for X04 product. Records for X04 were missing for certain months for some Bidding Zones, that can be easily explained by very low number of transactions for the given product.","15/Oct/19 17:30;tr866;Note:
For the 2 mentionned DAs of Morocco and Finland-Russia missing records in all reports the following could be found in LIPB database with production data from September:
||connector_id||version||area_1_eic||area_2_eic||border_id||status_id||status_id||from_1_to_2||from_2_to_1||
|24|1|10YDOM-1001A084H|10YFI-1--------U|18|24|24|HALTED|HALTED|
|20|5|10YES-REE------0|10YMA-ONE------O|35|20|20|HALTED|HALTED|
The only interconnectors to the DAs were on Halt which would explain why even any order from others DAs weren't visible in local orderbook and didn't have any records even in BID_ASK_SPREAD report",,,,,,,,,,,,,,,,,,,,
Cash value rounding in auction,XP-2091,86205,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,ll664,ll664,10/Sep/19 09:33,31/Aug/20 15:38,22/Feb/21 13:21,14/Nov/19 14:25,,,Pre2020,,,,,,,,,,"During the auction, we calculate the price in the hypothetical area in the middle.

So to for the cash value calculation we have:

* integral quantity - rounded according to flow rounding rules
* decimal price 

The resulting cash value could be decimal, hence we should round it (half up).

This way we'd have consistent way of cash value calculation with the trade off that the welfare would be slightly suboptimal.

Check the HLC, might contain some details for this.

",,ll664,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,40176000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1914,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09dgo:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Nov/19 13:36;ll664;[~lt112], already implemented, right?","14/Nov/19 14:25;lt112;Yes, done",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
prepare MRs for upgrade XBID PROD 1.5.10 to 1.5.11,XP-2089,86173,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,ei349,rehapav,rehapav,09/Sep/19 12:32,06/Nov/20 10:51,22/Feb/21 13:21,16/Sep/19 13:53,,,Pre2020,,,,,,,,,,"see details in
 # SERVICE-4235

 ",,rehapav,tm431,yn731,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,45619200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09d9s:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Sep/19 09:43;tm431;Please deploy also Report Tool-2.20 but only to one node - xbprodsla2. We will leave it running there for two days and see if there are no issues. AFter that it will be deployed to first node a well

https://github.deutsche-boerse.de/dev/energy-mkt-shared/pull/464",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses Rounding Integration - finish integrating routing and api libraries into core,XP-2080,86039,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Critical,Done,uv683,uv683,uv683,05/Sep/19 09:51,04/Aug/20 19:31,22/Feb/21 13:21,30/Sep/19 15:15,,,Losses ASR,,,,,,,,,,,,uv683,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,46310400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1914,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5k:c",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 34 [S],Alpha Team Sprint 35,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2635-redo-fix-3.0,XP-1261-guava-28,XP-2102-xbid-3,XP-2521-cmm-cmi-labeling,xbid-losses-poc,XP-2942-losses-perf,XP-2521-labeling-cmi-leftovers,XP-2694-xbid-3.0.x-latest-tag-fix,testing-new-stages-3.0,master-xbid-losses-poc,XP-139-xbid-3,XP-2080-finishing-price-rounding-integration,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses Block Orders Preparation for Losses Workshop,XP-2079,86035,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,ei349,ei349,05/Sep/19 08:52,04/Aug/20 19:31,22/Feb/21 13:21,16/Sep/19 08:34,,,Losses ASR,,,,,,,,,,"h1. Losses Workshop Preparation
h2. Current Situation 

Losses workshop #1 is going to take place in Eschborn on 17th September where we need to present how do we would like to approach this topic about Block Orders in our system. 
h2. Proposed Solution

For the presentation we need to describe how we approached the block orders  functionality. 

Ideally we would like to cover example how the block orders are being processed and explain some basic corner cases. 

Idea for scenarios for presentation : 
 * basic cases
 * corner cases
 * 
case with auction and need of multiple calculation 
 * 
 
AON rules - vague in HLC - we cannot commit to strict rules and it's not clear what to do instead (if w edo - there is a performance impact)

Please find the presentations working version here: 

[https://projects.deutsche-boerse.de/sites/ps0080/Shared%20Documents/01%20XBID%20Meetings/External%20Meetings/Workshops/20190917%20-%20Losses%20Workshop%201]
h2. Acceptance Criteria
 - updated presentation on sharepoint covering the way how we approached rounding in XBID with losses integration including simple scenarios and basic corner cases. ",,ei349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,46310400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1916,,,,,,,,,,,,,,05/Sep/19 08:52,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s000104234",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 34,,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses Rounding Integration - Status Messages,XP-2075,86011,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,uv683,eh941,eh941,04/Sep/19 16:10,04/Aug/20 19:31,22/Feb/21 13:21,19/Sep/19 10:46,,,Losses ASR,,,,,,,,,,"XBID core module uses Trade entity which would be changed by XP-2074 in Status Messages.

Decide what to do with them and apply the changes. What quantity and prices it should use? Maybe rephrase the messages completely?",,eh941,uv683,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,45360000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1914,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09ej2:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 34 [S],,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2635-redo-fix-3.0,XP-2102-xbid-3,XP-2521-cmm-cmi-labeling,XP-2942-losses-perf,xbid-losses-poc,XP-2521-labeling-cmi-leftovers,XP-2694-xbid-3.0.x-latest-tag-fix,testing-new-stages-3.0,master-xbid-losses-poc,XP-139-xbid-3,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Sep/19 14:18;uv683;Following are examples of status messages that are present in XBID 2.0 regarding trades
{noformat}
Recall request trade: test-contract - 100 kWh for 100 USD.
Recall request trade: test-contract - 100 kWh.
Recall requested: test-contract - 100 kWh for 100 USD.
Recall trade accepted: test-contract - 100 kWh for 100 USD.
Recall trade accepted: test-contract - 100 kWh for 100 USD.
Recall trade accepted: test-contract - 100 kWh.
Recall trade rejected: test-contract - 100 kWh for 100 USD.
Recall trade rejected: test-contract - 100 kWh for 100 USD.
Recall trade rejected: test-contract - 100 kWh for 100 USD. The selected trade is a cross border trade. Capacity allocation cannot be recalled.
Recall trade rejected: test-contract - 100 kWh for 100 USD. The selected trade is a cross border trade. Capacity allocation cannot be recalled.
Recall trade rejected: test-contract - 100 kWh.
Recall trade rejected: test-contract - 100 kWh. The selected trade is a cross border trade. Capacity allocation cannot be recalled.
Trade cancelled by Market Operations: test-contract - 100 kWh for 100 USD .
Trade cancelled by Market Operations: test-contract - 100 kWh.
Trade cancelled by Trader1: test-contract - 100 kWh.
Trade recall requested on behalf: test-contract - 100 kWh for 100 USD by Trader1.
Trade recall requested on behalf: test-contract - 100 kWh for 100 USD.{noformat}
In XBID 3.0 these will change due to the fact that trade has not buy and sell side which price and qty can differ. These related status messages will look like this example:
{code:java}
Recall request trade: test-contract - BUY side:100 kWh for 100.00 €, SELL side:90 kWh for 112.00 €, cash value 10000.00 €.
Recall request trade: test-contract - BUY side:100 kWh, SELL side:90 kWh.
Recall requested: test-contract - BUY side:100 kWh for 100.00 €, SELL side:90 kWh for 112.00 €, cash value 10000.00 €.
Recall trade accepted: test-contract - BUY side:100 kWh for 100.00 €, SELL side:90 kWh for 112.00 €, cash value 10000.00 €.
Recall trade accepted: test-contract - BUY side:100 kWh for 100.00 €, SELL side:90 kWh for 112.00 €, cash value 10000.00 €.
Recall trade accepted: test-contract - BUY side:100 kWh, SELL side:90 kWh.
Recall trade rejected: test-contract - BUY side:100 kWh for 100.00 €, SELL side:90 kWh for 112.00 €, cash value 10000.00 €.
Recall trade rejected: test-contract - BUY side:100 kWh for 100.00 €, SELL side:90 kWh for 112.00 €, cash value 10000.00 €.
Recall trade rejected: test-contract - BUY side:100 kWh for 100.00 €, SELL side:90 kWh for 112.00 €, cash value 10000.00 €. The selected trade is a cross border trade. Capacity allocation cannot be recalled.
Recall trade rejected: test-contract - BUY side:100 kWh for 100.00 €, SELL side:90 kWh for 112.00 €, cash value 10000.00 €. The selected trade is a cross border trade. Capacity allocation cannot be recalled.
Recall trade rejected: test-contract - BUY side:100 kWh, SELL side:90 kWh.
Recall trade rejected: test-contract - BUY side:100 kWh, SELL side:90 kWh. The selected trade is a cross border trade. Capacity allocation cannot be recalled.
Trade cancelled by Market Operations: test-contract - BUY side:100 kWh for 100.00 €, SELL side:90 kWh for 112.00 €, cash value 10000.00 €.
Trade cancelled by Market Operations: test-contract - BUY side:100 kWh, SELL side:90 kWh.
Trade cancelled by Trader1: test-contract - BUY side:100 kWh, SELL side:90 kWh.
Trade recall requested on behalf by Trader1: test-contract - BUY side:100 kWh for 100.00 €, SELL side:90 kWh for 112.00 €, cash value 10000.00 €
Trade recall requested on behalf: test-contract - BUY side:100 kWh for 100.00 €, SELL side:90 kWh for 112.00 €, cash value 10000.00 €.{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses Rounding Integration - finalize LastTradeInfo with routing library,XP-2074,86010,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,,eh941,eh941,04/Sep/19 16:08,04/Aug/20 19:31,22/Feb/21 13:21,19/Sep/19 10:47,,,Losses ASR,,,,,,,,,,"It's prepared in XP-2016-last-trade-info branch

It wasn't quite clear what fields {{Trade}} entity will have till now.

The LastTradeInfo computation is prepared but the Trade entity will be definitely updated.

We decided it should contain:
* Cash Value (in double)
* Sell Price (in double)
* Sell Quantity (in int or long)
* Buy Price
* Buy Quantity

There is also prepared API changed - https://github.deutsche-boerse.de/dev/xbid-api/pull/2

Please bear in mind a flyway script must be written when the changes are stabilized. ",,eh941,,,,,,,,,,,,,,,,,,,,,,,,,XP-2075,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,46310400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1914,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5k:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 34 [S],,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2635-redo-fix-3.0,XP-2102-xbid-3,XP-2521-cmm-cmi-labeling,xbid-losses-poc,XP-2942-losses-perf,XP-2521-labeling-cmi-leftovers,XP-2694-xbid-3.0.x-latest-tag-fix,testing-new-stages-3.0,XP-139-xbid-3,master-xbid-losses-poc,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Change scientist to verify fix of OBK calculations mismatch ,XP-2073,86009,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ll664,ei349,ei349,04/Sep/19 16:02,04/Aug/20 19:36,22/Feb/21 13:21,23/Sep/19 15:51,,,Pre2020,,,,,,,,,,"h1. {color:#00875a}Order Book Validity{color}
h1. Current Situation

We have reported OBK mismatch after new routing library integration with xbid. It can be caused duplicate values in the new OBK. 
h1. Proposed Solution 
 - modify comparator to agregete duplicate values in calculated OBK and validate the calculated OBK up to the new OBK depth.
 - if this not helps please create new ticket with analysis of the problem.  

 ",,ei349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,46310400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1934,,,,,,,,,,,,,,04/Sep/19 16:02,,,,,,,,,,,,,,,,,,,,,"1|000y5m:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 34 [S],Alpha Team Sprint 35,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2635-redo-fix-3.0,XP-2102-xbid-3,XP-2521-cmm-cmi-labeling,xbid-losses-poc,XP-2942-losses-perf,XP-2521-labeling-cmi-leftovers,XP-2694-xbid-3.0.x-latest-tag-fix,testing-new-stages-3.0,master-xbid-losses-poc,XP-139-xbid-3,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses Rounding Preparation for Losses Workshop,XP-2072,86006,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,ei349,ei349,04/Sep/19 15:53,04/Aug/20 19:31,22/Feb/21 13:21,16/Sep/19 08:34,,,Losses ASR,,,,,,,,,,"h1. {color:#00875a}Losses Workshop Preparation{color}
h2. Current Situation 

Losses workshop #1 is going to take place in Eschborn on 17th September where we need to present how do we would like to approach this topic in our system. 
h2. Proposed Solution

For the presentation we need to check how to approach the rounding functionality. 

Ideally we would like to cover example how the rounding is being applied and explain some basic corner cases. 

Idea for scenarios for presentation : 
 * basic cases

 * where are the issues? 

 * corner cases like

 **  
cash value rounding
 ** rounding on cycles
 ** rounding on close-to-zero qties

Please find the presentations working version here: 

[https://projects.deutsche-boerse.de/sites/ps0080/Shared%20Documents/01%20XBID%20Meetings/External%20Meetings/Workshops/20190917%20-%20Losses%20Workshop%201]
h2. Acceptance Criteria
 - updated presentation on sharepoint covering the way how we approached the rounding integration XBID with losses integration including simple scenarios and basic corner cases. ",,ei349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,46310400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1914,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s000104232",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 34,,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
XBID 2.0 UAT II Performance Tests,XP-2059,85898,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,radeale,radeale,radeale,03/Sep/19 10:24,06/Nov/20 10:51,22/Feb/21 13:21,13/Nov/19 12:03,,,Pre2020,,,,,,,UAT2.0,,,"*XBID 2.0 UAT II Performance Tests run at September 2019*

+Agreed Test Scenarios:+ #1,3,4,7,9,10,11,12,14,15

+Finished Scenarios:+

+Agreed Daily Schedule:+

10:00 - 11:30 - Deployment of environment followed by internal check - no action from NEMOs necessary
 11:30 - We will inform the NEMOs via email about the status and LTSs are allowed to connect to the environment. The email will contain all necessary information (which scenario, expected start, green for LTSs connection to the environment)
 12:00 - Expected start time for test scenario (confirmed by email as mentioned above)
 16:00 - We expect preliminary feedback from NEMOs (a short summary of test execution) 
 Next day until 10:00 - NEMOs, please download the reports until 10:00 (due to new deployment). The reports from previous day will not be available after 10:00.

+Agreed Time Frame:+

Proposed timeline for a BASIC Scenario:
 2.9 - DBAG prepares environment for RTS3B tests.
 3.9 - 6.9 - DBAG runs one scenario per day - DBAG will inform NEMOs via email, which scenario is prepared for execution one day before the execution. 
 9.9 - 13.9 - DBAG runs one scenario per day - DBAG will inform NEMOs via email, which scenario is prepared for execution one day before the execution. 
 16.9 - DBAG runs one scenario per day - DBAG will inform NEMOs via email, which scenario is prepared for execution one day before the execution. 
 17.9 - 20.9 - Contingency - the time used as back-up for re-run of failed scenarios (based on DBAG/NEMOs verification if re-run is necessary), other issues etc. 
 23.9 - 25.9 - DBAG will provide the performance report EOD to NEMOs on Wednesday 25 September - depending on usage of contingency.
 26.9 - 1.10 - NEMOs will have at least 4 days to evaluate the performance results. In case of any issues or objections regarding formal Acceptance approval, NEMOs will inform DBAG as soon as possible in order for DBAG to evaluate and fix the identified issues. 
 2.10 - 4.10 - the last days of UAT II (Performance Test) are reserved for final evaluation, any additional discussion and receiving formal confirmation of fulflling the Acceptance Criteria.

If we do not need the contingency in the Basic Scenario, we would be able to support the additional tests - RTS3B Scenario 4 and other items in XBID-4663, as depicted in the Ideal Scenario below.

Proposed timeline for the IDEAL Scenario:
 2.9 - DBAG prepares environment for RTS3B tests.
 3.9 - 6.9 - DBAG runs one scenario per day - DBAG will inform NEMOs via email, which scenario is prepared for execution one day before the execution. 
 9.9 - 13.9 - DBAG runs one scenario per day - DBAG will inform NEMOs via email, which scenario is prepared for execution one day before the execution. 
 16.9 - DBAG runs one scenario per day - DBAG will inform NEMOs via email, which scenario is prepared for execution one day before the execution. 
 19.9 - DBAG will provide the performance report EoD to NEMOs.
 20.9 - 27.9 - NEMOs will have 6 days to evaluate the performance results. If the Acceptance Criteria are fulfilled and approved by the NEMOs, DBAG will be able to support the additional test in the next week.
 30.9 - 4.10 - DBAG is able to provide support for running the additional test scenario RTS3B Scenario 4 as is mentioned in the ticket XBID-4663 with same reports as in the standard performance test. No additional reports can be provided.

+SIMU environment links:+

[https://confluence.energy.svc.dbgcloud.io/pages/viewpage.action?pageId=10470502#CustomerEnvironments(Non-Production)-XBID]

+SIMU reporting user:+

XBTGER01
xbidTest01!

Please put reports here:
https://projects.deutsche-boerse.de/sites/ps0080/Shared Documents/02 XBID Releases/XBID 2.0/UATs/UAT II Performance/TC830 TC810 TC540 reports",,gd553,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4698,XBID-4574,,,,,,"03/Sep/19 14:00;radeale;SC01_SQL_check.xlsx;https://jira.deutsche-boerse.com/secure/attachment/73330/SC01_SQL_check.xlsx","04/Sep/19 14:21;radeale;SC03_SQL_check.xlsx;https://jira.deutsche-boerse.com/secure/attachment/73389/SC03_SQL_check.xlsx","05/Sep/19 14:23;radeale;SC04_SQL_check.xlsx;https://jira.deutsche-boerse.com/secure/attachment/73437/SC04_SQL_check.xlsx","03/Sep/19 10:26;radeale;Screenshot from 2019-09-03 10-27-53.png;https://jira.deutsche-boerse.com/secure/attachment/73310/Screenshot+from+2019-09-03+10-27-53.png","03/Sep/19 12:00;radeale;Screenshot from 2019-09-03 12-02-07.png;https://jira.deutsche-boerse.com/secure/attachment/73319/Screenshot+from+2019-09-03+12-02-07.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,40348800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09j3r:zk",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team 33 [S],Home Office Team Sprint 34,Home Office Team Sprint 35 [S],Home Office Team Sprint 36,Home Office Team 37 [S],Home Office Team 38,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,Simulation,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Sep/19 10:26;radeale;SIMU environment ready to run SC01:

!Screenshot from 2019-09-03 12-02-07.png!  

 

!Screenshot from 2019-09-03 10-27-53.png!","16/Sep/19 16:02;radeale;DB timezone issue - TECHLOG-2776.","09/Oct/19 12:00;radeale;Shall be closed once the Test Completion Report is delivered and the how-to made into the Confluence or stuff.","29/Oct/19 11:02;radeale;Will reopen if needed.","06/Nov/19 17:54;radeale;Alexandr,

please be so kind and implement the comments from the external tickets in this document:

https://jira.deutsche-boerse.com/secure/attachment/76700/76700_XBID+R2.0+UAT+II+Test+Completion+Report_v1.0-XTG_inputs.docx

Thanks!","07/Nov/19 10:46;radeale;[The Working Directory|https://projects.deutsche-boerse.de/sites/ps0080/Shared Documents/02 XBID Releases/XBID 2.0/UATs/UAT II Performance/Test Completion Report]","07/Nov/19 12:13;radeale;Hi Simona,

please do a check of the new version of the UAT II Test Completion report (v1.1).

It is located here:

[The Working Directory|https://projects.deutsche-boerse.de/sites/ps0080/Shared Documents/02 XBID Releases/XBID 2.0/UATs/UAT II Performance/Test Completion Report]

Thanks! :)

Alexandr","13/Nov/19 11:26;gd553;Hi Alexandr,

I am fine with the changes in the document (v1.1).

Regards

Malina",,,,,,,,,,,,,,,,,,,,,,,,
Remove deprecated methods on the TransactionGrid,XP-2047,85709,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,ll664,ll664,28/Aug/19 18:39,31/Aug/20 15:37,22/Feb/21 13:21,14/Nov/19 13:30,,,Pre2020,,,,,,,,,,"{{addFlow}} / {{getFlow}} / {{getTemporary}} methods got deprecated as we introduced bookkeeping of sent/received flows separately.

Remove them and replace with {{getSentFlow}} / {{getReceivedFlow}} etc.",,ll664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,46915200,,,dm700,lw641,ox626,rehapav,sw455,,,XP-9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09ao8:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Shifts in cycles - make sure maximum possible flow is applied,XP-2045,85707,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,ll664,ll664,28/Aug/19 18:26,31/Aug/20 15:38,22/Feb/21 13:21,19/Sep/19 10:16,,,Pre2020,,,,,,,,,,"Because of rounding, the shift applied along the cycle is not always maximal.

Design the tests that simulate the situation and review/fix the algorithm.

As an example, take look at {{ComplexPropagatorTest#scenario_with_negative_price_FI}}, line 303, where there's remaining flow -1 in the cycle, but (probably) it should be consumed completely.

 ",,ll664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,fixed by other development,,,,,,,,,,46310400,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1914,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s00010420101c0040u",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Sep/19 12:56;ll664;This is effectively solved by applying transport calculation algorithm suggested by Hebert in HLC chapter 4.3 .",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TransactionGrid should contain its from/to instant interval,XP-2044,85706,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,ll664,ll664,28/Aug/19 18:17,31/Aug/20 15:39,22/Feb/21 13:21,14/Nov/19 14:28,,,Pre2020,,,,,,,,,,"h1. Covers routing lib corner cases.

 

from/toInstant should be part of the grid state.

The remove the {{fromInstant}} param from:
{code:java}
TransactionGrid#addShift(int arc, int sentShift, int receivedShift, int fromInstant);
{code}",,ll664,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,40176000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09ahz:i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Nov/19 13:28;ll664;[~lt112], pls estimate?","14/Nov/19 14:28;lt112;[~ll664]
{{TransactionGrid}} already has information about its from/to instant, however, it cannot be removed from the method signature, as for block orders you can search paths independently over several intervals
So for example for 4-hour block a single grid contains info for 12-13, 13-14, 14-15 and 15-16, instant then gets translated into relevant period
This is done",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Shifts rounding - calculate common qty unit,XP-2043,85705,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,ll664,ll664,28/Aug/19 18:05,04/Aug/20 19:36,22/Feb/21 13:21,18/Nov/19 10:33,,,Pre2020,,,,,,,,,,"All shifts along the path has to be round to common quantity unit which is defined as a least common multiple of capacity resolution on the path and lot size (smallest tradable unit) of the product.

",,ll664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,41385600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1914,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09j3q:u",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team 38,Home Office Team Sprint 39 [S],,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Oct/19 15:26;ll664;See also description in XP-2046, describes how ICs are excluded from the grid in current routing implementation in case they do not conform to common units.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Shifts rounding - make sure that rounded qty never gets above ATC,XP-2042,85704,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ll664,ll664,ll664,28/Aug/19 17:55,04/Aug/20 19:36,22/Feb/21 13:21,31/Oct/19 15:18,,,Pre2020,,,,,,,,,,"When rounding to specify common unit W, the rounded value might get bigger that ATC.

Example:

{noformat}
W=1000
ATC=1700
shift=1600
[shift]w=2000
{noformat}
 

Identify the cases and implement.",,ei349,ll664,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2093,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,41385600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1914,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s00010420101c0040o",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Sep/19 08:52;lt112;TODO: verify that such case can happen with the configuration restrictions we currently have (e.g. IC resolution and product lot size)","19/Sep/19 10:17;ei349;[~ll664] please close on of linked Jira","31/Oct/19 14:00;ei349;please!","31/Oct/19 15:18;ll664;closing, linked jira still relevant",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Shift rounding - no Flow result should be returned when the qty is rounded to 0 alogn the path,XP-2041,85703,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,,ll664,ll664,28/Aug/19 17:51,04/Aug/20 19:36,22/Feb/21 13:21,31/Oct/19 15:28,,,Pre2020,,,,,,,,,,"It might happen that the orders are routed but when calculating shifts along the path, it gets rounded to zero.

 

In this case, invalid {{FlowResult}} should be returned.

 

Does it have any other consequences? [~lt112]",,ei349,ll664,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,41385600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1914,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s00010420101c0040l",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Sep/19 09:40;lt112;[~ll664] there might be alternative path that will not be found, since after encountering invalid FlowResult, the calculation stops. There is a partial solution prepared and will be applied once I merge the changes for blocks. (capacity is calculated during path search and must be rounded as well, thus this would find the 0 rounding soon enough and change direction).","16/Sep/19 08:49;lt112;Update:
This can only happen for loss coefficient < 0.5, possible loss coefficient range should probably be discussed and defined if possible.","19/Sep/19 10:08;ei349;[~lt112] please link this issue with issue assigned to you which should fix it. ","31/Oct/19 15:27;ll664;Closing, ATC is taken into account (rounded) during path-search already.",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow order matching against cycles,XP-2025,85500,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,,uv683,uv683,21/Aug/19 14:51,04/Aug/20 19:35,22/Feb/21 13:21,15/Oct/19 10:27,,,Pre2020,,Trading,,,,,,,,"xbid routing library is able to find a cycle against which and order can be matcher with zero price. It returns special value as id = ""CYCLE"". At this moment core cannot handle it fails with exception.

This task should consist of 
 * designing tests that will test matching against cycle
 * changing core to be able to handle those cases - mainly Matcher and Orderbook
 * 

[~lt112] is a contact person.",,uv683,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2122,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,47520000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1934,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5k:u",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 35,Alpha Team Sprint 36 [S],,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2635-redo-fix-3.0,XP-2102-xbid-3,XP-2521-cmm-cmi-labeling,xbid-losses-poc,XP-2942-losses-perf,XP-2521-labeling-cmi-leftovers,XP-2694-xbid-3.0.x-latest-tag-fix,testing-new-stages-3.0,master,XP-139-xbid-3,master-xbid-losses-poc,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integrate Losses Rounding with XBID ,XP-2016,85449,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,uv683,ei349,ei349,20/Aug/19 14:50,06/Nov/20 09:12,22/Feb/21 13:21,05/Sep/19 09:52,,,Losses ASR,,,,,,,,,,"h2. Current Situation 

Rounding has been developed in the new routing library and there is no integration to XBID at the moment. 
h2. Proposed Solution

Integrate XBID 2.0 with new routing library which includes support for rounding. 
 * Please pay special attention to 
 ** Trade entity has to include buy/sell side and will contain not rounded values of prices
 ** The cash value for buyer and seller should be the same in all market areas. Q*p in the one market must be equal to Q*p in the other market. The cash value of the trade must be provided in the PMI to the LTS and interfaces from SM as Q*p may be slightly different on buying and selling side or along the path due to rounding.
** enrich PMI reports to contain cash value where necessary

h2. Acceptance Criteria
 * Integrated routing library with XBID 2.0 code with passing tests. ",,eh941,ei349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2080,XP-2074,XP-2075,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,47001600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1914,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y099lq:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 33,,,,,,,,,,,,,,,,13.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master-3.0.x,selenide-poc,xbid-losses-poc,XP-2694-xbid-3.0.x-latest-tag-fix,XP-3230,xbid-api-3.0.x,XP-3070,XP-2016-trade,xbid-2.0.25.x,fixing-failover,master-xbid-losses-poc,XP-2635-redo-fix-3.0,plewmic-scripts,cpm,XP-2102-xbid-3,XP-1504,XP-2521-cmm-cmi-labeling,XP-2942-losses-perf,XP-2160-api-rename,XP-456,XP-2979-postgresql,XP-3264,XP-2521-labeling-cmi-leftovers,develop,testing-new-stages-3.0,XP-2694,XP-2232,master,XP-4273-owasp-zap-enable,inline-tomcat-params,XP-4526-resource-managment-fix,XP-139-xbid-3,,true,"27/Aug/19 14:18;eh941;To discuss what to do with prices and quantities (I wasn't able to resolve by myself):

h4. LastTradeInfo
The old version contains fields:
* {{price}}
* {{priceDirection}}
* {{quantity}}
* {{totalQty}}
* {{highestPrice}}
* {{lowestPrice}}

h4. Status messages
There are status messages created using quantity and prices. What quantity and prices it should use? Maybe rephrase the messages completely?

h4. Trade flow SBE mapper
{{tradesEncoder}} uses these values.

h4. Trade Recall
The general concept

h4. Experiment - order book compare
It won't be possible any longer if the structure differs. Correct?","28/Aug/19 14:01;eh941;h2. LastTradeInfo

With losses the current {{LastTradeInfo}} isn't suitable because each trade have instead of just {{price}} and {{quantity}} fields {{sellQuantity}}, {{sellPriceRounded}}, {{buyQuantity}}, {{buyPriceRounded}}, {{cashValue}}.

Fields on the info are:
 * {{lastPx}} - last price
 * {{pxDir}} - Defines the direction of the price movement with regard to the last 2 trades happened and that are relevant for this orderbook. Valid values are: -1: Price decreased; 0: Price unchanged; 1: Price increased
 * {{lastQty}}
 * {{totalQty}}
 * {{lastTradeTime}}
 * {{highPx}} - highest price for this contract and delivery area combination
 * {{lowPx}}

The suggested solution might have many modifications with many combinations.
h3. The change

We could re-use the API as it is but showing just the quantities and prices for the side (buy/sell) for which the trade was created on the delivery area.

Example:
||Trade Time||Buy DA||Buy Price||Buy Quantity||Sell DA||Sell Price||Sell Quantity||
|10:00:00|DA1|100|100|DA2|90|110|
|10:00:01|DA2|200|200|DA1|180|220|
|10:00:02|DA2|250|250|DA1|230|270|

Last Trade info columns for DA1:
 * {{lastPx=230}} - last price from DA1 point of view - which is _sell_
 * {{pxDir=1}} - price direction comparing to previous _last trade info_
 * {{lastQty=270}} - last quantity from DA1 point of view
 * {{totalQty=100+220+270=590}} - all quantities through all trades - no matter what side the last trade was
 * {{lastTradeTime=10:00:02}}
 * {{highPx=230}} - the highest price no matter what side it is
 * {{lowPx=100}} - the lowest price no matter what side it is",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[CR] VDA Configuration enhancement,XP-2001,85172,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,radeale,hj444,hj444,12/Aug/19 10:02,31/Aug/20 15:38,22/Feb/21 13:21,24/Jan/20 15:04,,,3.2.x,,,,,,,ChangeRequest,,,"Dear DBAG,

Please find attached a description of a CR to be considered for inclusion to R3.0 / for delivery in 2020 dealing with enhancement of VDA configuration/creation possibilities. As we received already cost estimates for other prioritized CRs we kindly ask you to prepare the cost estimate in addition for this CR.

Kind regards

David",,hj444,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4667,,,,,,,,,,,,,,,,,"12/Aug/19 10:02;hj444;CR_VDA_configuration.docx;https://jira.deutsche-boerse.com/secure/attachment/72486/CR_VDA_configuration.docx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,34041600,,,dm700,lw641,ox626,rehapav,sw455,,,XP-2640,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09j3r:zc",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 32 [S],Alpha Team Sprint 33,Home Office Team Sprint 34,Home Office Team Sprint 35 [S],Home Office Team Sprint 36,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jan/20 15:04;radeale;No action currently required on our side, will reopen this ticket if needed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
XBID CLONE: R2.0 UAT II - Scenarios of APT (Additional performance tests),XP-1997,85123,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,08/Aug/19 14:14,31/Aug/20 15:39,22/Feb/21 13:21,08/Oct/19 15:26,,,Pre2020,,,,,,,support_request,UAT2.0,,"Dear DBAG,

TWG PTF indicated to DBAG the intention to run the R2.0 UAT II in parts:
 # Selected scenarios from RTS3 Slice B modified to reflect new dataset and orderbook relaxation 
 ** Load to be generated by DBAG
 ** LTSs connected, but not generating the load
 # Additional Performance tests (APT)
 ** Scenarios still being precised by TWG PTF
 ** LTSs to be connected and generating the load
 ** No load to be generated by DBAG 

Because DBAG requested PXs/TSOs to create a separate Support request for the APT-related clarifications, we are leaving the clarification related to (1) in the XBID-4574 and (this) new Support request for clarifications related to (2) has been created: XBID-4663.

 

*Questions regarding Additional performance tests:*

1) Discussion of scenario details is still on-going
 * Preliminary 2 days of execution, LTSs connected, load to be produced by LTSs, detailed scenarios and load generation still under internal alignment

2) Will DBAG be able to support us in getting the same outputs as in RTS3B scenario executions (especially Performance test analyzer report)?
 * DBAG to create the required outputs in case that load is produced by LTSs

 Best regards,

Jiri

 ",,od044,qm925,radeale,,,,,,,";08/Aug/19 14:25;radeale;7200","Newest info processing;23/Aug/19 16:04;radeale;7200","Discussion about the dataset changes.;16/Sep/19 10:36;radeale;7200","Additional discussions before, during and after the TWG calls.;20/Sep/19 14:54;radeale;43200","Report generation.;30/Sep/19 14:47;radeale;7200","Second report generation;02/Oct/19 10:21;radeale;7200","Additional neverending discussions about the Italian DAs...;02/Oct/19 10:21;radeale;21600","APT 3/10 report.;08/Oct/19 15:26;radeale;7200",,0,108000,,,0,108000,,,,XBID-4663,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,43372800,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1598,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09j3r:y8",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 32,Home Office Team 33 [S],Home Office Team Sprint 34,Home Office Team Sprint 35 [S],Home Office Team Sprint 36,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,Simulation,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Aug/19 14:25;radeale;Duc, please take a look and make an opinion. Concentrate on these two points, especially the second one, whether we can generate the same report as for the RTS3/B.

_Questions regarding Additional performance tests:_

_1) Discussion of scenario details is still on-going_
 - _Preliminary 2 days of execution, LTSs connected, load to be produced by LTSs, detailed scenarios and load generation still under internal alignment_

_2) Will DBAG be able to support us in getting the same outputs as in RTS3B scenario executions (especially Performance test analyzer report)?_
 - _DBAG to create the required outputs in case that load is produced by LTSs_","08/Aug/19 14:55;od044;Regarding the report, we can provide the same output like in past. So if TWG is ok with that then there is no problem from our side. We only need TWG provide to us start and end time of a load to generate the report.

In case TWG will require additional output for evaluation outside of scope of actual report then there will be extra development and workload.","17/Sep/19 16:47;qm925;Dear all,

The NEMOs have raised the below questions during the RCB today. Please have a look and let’s align to what answer should be posted in XBID-4663.

What is the deadline for NEMOs to complete their preparation for APT? NEMOs see a risk that the preparation cannot be completed NEMOs and the sub-phase would have to be cancelled. Can DBAG clarify the consequences if this will be decided?

*DBAG will check internally with their experts and share the outcome with TWG PTF XBID-4663.*","17/Sep/19 17:11;radeale;Hi Simona,

currently the ATPs are prepared to be run with the dataset we are using for our performance tests. NEMOs requested additional changes to the dataset, currently they are clarifying the requested changes in XBID-4663 (it's on them).

 There are three possible scenarios:
 # They clarify the changes in time so the dataset can be changed by the DBAG on time for the ATPs.
 # They don't clarify the changes in time and the ATPs will be run with the current dataset.
 # They don't clarify the changes in time and the ATPs will be cancelled by the NEMOs.

Every scenario is fine with us as these tests are not considered as official performance tests.

The deadline depends on when they want to run the tests, we need at least two days to make the changes into the dataset and test it.

+Short story:+

_What is the deadline for NEMOs to complete their preparation for APT?_

{color:#0747a6}Two business days before the ATPs run.{color}

 

_NEMOs see a risk that the preparation cannot be completed NEMOs and the sub-phase would have to be cancelled. Can DBAG clarify the consequences if this will be decided?_

{color:#0747a6}None as these tests are not considered as official performance tests.{color}

{color:#0747a6}If NEMOs don't clarify the changes in time:{color}
 # {color:#0747a6}The ATPs will be run with the current dataset or{color}
 # {color:#0747a6}ATPs will be cancelled by the NEMOs.{color}

Kind regards
 Alexandr","08/Oct/19 15:25;radeale;This should be all for the APTs.",,,,,,,,,,,,,,,,,,,,,,,,,,,
Analysis for the Losses WS2 - OBK depths definition (split orders in OBK),XP-1992,85074,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,eh941,ei349,ei349,07/Aug/19 13:45,04/Aug/20 19:31,22/Feb/21 13:21,25/Sep/19 14:41,,,Losses ASR,,,,,,,,,,"Definition of OBK depth might change, see example below

+ cover cycles 

notes: no order id
h2. Example
h3. OBK Before (with possible split path):

Order#1
 Order#7
 Order#3
h3. OBK After (without split path, orders can show up several times (per each path found)):

cycle#1
cycle#2
Order#1
 Order#7
 Order#7
 Order#7
 Order#3
 Order#3
h3. Issue

Is the depth of the ""OBK After"" 3 or 6?
h2. Implementation options
 # one row per one path and order
 # aggregate sequence of orders with equal id and price

h2. OBK depth definition options
 # depth is equal to number of unique order ids
 # depth is equal to number of rows in implementation option 1
 # depth is equal to number of rows in implementation option 2

h2. Handling cycles
- cycles have to be shown in the OBK
- row per cycle or aggregation? and relation to depth
- how is cycle recognized by customer (for updates)
  - special id?",,eh941,ei349,ek176,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2342,XP-2122,XP-2120,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,44496000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1934,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5l:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 34 [S],Alpha Team Sprint 35,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Sep/19 15:42;eh941;As team we decided to do it as following:

h3.  Order Book Depth
Order book depth is defined as number of rows for delivery area and product key.

*Example:*

cycle#1
cycle#2
Order#1
Order#7
Order#7
Order#7
Order#3
Order#3

*Order book depth=8*

h3. Cycles in Order Book
Each cycle has it's own record in order book - there is *no aggregation*.

Example:
cycle#1 q=100 p=0
cycle#2 q=110 p=0
Order#1 q=100 p=50
Order#7 q=50 p=55
Order#7 q=30 p=56

The reason for that is that in case of matching multiple trades are created against each cycle. It might be confusing for the trader because he saw just one record in the order book.

h3. Order Book Updates - Deltas
The orders are identified by their IDs only. In case of multiple records for one order delta always contains all records of the order. If there is no quantity left for the order delta with quantity=0 and price={{NULL}} is sent. The same applies for the cycles. In case of change in any cycle the delta for this contains all cycles in the grid.

h3. Cycle Identification

Cycles have {{orderId}} set to {{-2}}. This is a predefined constant by XBID.

h1. Examples
All examples are considered for single contract and delivery area.

h3. No Cycles
|Buy| | |Sell| | |
|Order ID|Quantity|Price|Order ID|Quantity|Price|
|1|70|100|4|30|110|
|1|20|99|5|10|115|
|2|80|95|5|40|116|
|3|100|90| | | |

*Incoming order*
|Order ID|Quantity|Price|Side|
|6|40|100|SELL|

*Deltas*
|Order ID|Quantity|Price|Side|
|1|30|100|BUY|
|1|20|99|BUY|

*New order book*
|Buy| | |Sell| | |
|Order ID|Quantity|Price|Order ID|Quantity|Price|
|1|30|100|4|30|110|
|1|20|99|5|10|115|
|2|80|95|5|40|116|
|3|100|90| | | |

-----
h2. Cycles 1

|Buy| | |Sell| | |
|Order ID|Quantity|Price|Order ID|Quantity|Price|
| | | |-2|5|0|
| | | |1|30|110|
| | | |2|10|115|
| | | |3|40|116|


*Incoming order*
|Order ID|Quantity|Price|Side|
|4|55|110|BUY|


*Deltas*
|Order ID|Quantity|Price|Side|
|-2|0|0|SELL|
|1|0|110|SELL|
|4|20|110|BUY|

*New order book*
|Buy| | |Sell| | |
|Order ID|Quantity|Price|Order ID|Quantity|Price|
|4|20|110|2|10|115|
| | | |3|40|116|

-----

h2. Cycles 2

|Buy| | |Sell| | |
|Order ID|Quantity|Price|Order ID|Quantity|Price|
|4|50|-20|-2|5|0|
| | | |1|30|110|
| | | |1|20|111|
| | | |1|5|112|


*Incomming order*
|Order ID|Quantity|Price|Side|
|5|70|115|BUY|

*Deltas*
|Order ID|Quantity|Price|Side|
|-2|0|0|SELL|
|1|0|{{NULL}}|SELL|
|5|10|110|BUY|

*New order book*
|Buy| | |Sell| | |
|Order ID|Quantity|Price|Order ID|Quantity|Price|
|4|50|-20| | | |
|5|10|115| | | |

-----

h2. Losses on buy side
|Buy| | |Sell| | |
|Order ID|Quantity|Price|Order ID|Quantity|Price|
|-2|10|0|1|30|2|
|3|20|-2|1|60|3|
|3|20|-3|2|20|5|


*Incomming order*
|Order ID|Quantity|Price|Side|
|4|35|-2|SELL|


*Deltas*
|Order ID|Quantity|Price|Side|
|-2|0|0|BUY|
|3|20|-3|BUY|
|4|5|-2|SELL|

*New order book*
|Buy| | |Sell| | |
|Order ID|Quantity|Price|Order ID|Quantity|Price|
|3|20|-3|4|5|-2|
| | | |1|30|2|
| | | |1|60|3|
| | | |2|20|5|
","25/Sep/19 14:42;eh941;If an aggregation should be in place then it's possible to aggregate any record (either real orders or cycles) by key of:

* order ID
* price

This is effectively possible only in case of rounded prices. Otherwise the aggregation might be confusing.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Conserve / fix tests in xbid-3.0.x integration branch,XP-1991,85071,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,uv683,uv683,uv683,07/Aug/19 12:54,04/Aug/20 19:35,22/Feb/21 13:21,14/Aug/19 09:03,,,Pre2020,,Trading,,,,,,,,"h1. {color:#00875a}Better Tests Overview{color}

There is a lot of xbid3.0 (with losses integration) failing tests due to the fact that not all the features are implemented.

On the other hand there are also a lot of tests that are simply failing because they are missing a new dependency etc. First group of tests will be annotated with
{code:java}
@Category(FailingInXbid3.class){code}
and will not be triggered during build. It can be triggered automatically simply by using
{code:java}
mvn clean install -P failing-xbid3{code}
maven profile.

Go through all the failing tests and either mark them with above mentioned annotation or fix them so that all the tests are green on xbid-3.0.x branch and new merge requests will take care of newly broken tests.",,uv683,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,48816000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1934,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y094pp:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 32 [S],,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2635-redo-fix-3.0,XP-1261-guava-28,XP-2102-xbid-3,XP-2521-cmm-cmi-labeling,xbid-losses-poc,XP-2942-losses-perf,XP-2521-labeling-cmi-leftovers,XP-2694-xbid-3.0.x-latest-tag-fix,testing-new-stages-3.0,master-xbid-losses-poc,XP-139-xbid-3,XP-2080-finishing-price-rounding-integration,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses - Analyze possibility of distributed OBK local view calculations,XP-1987,85064,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,eh941,ei349,ei349,07/Aug/19 10:47,06/Nov/20 09:42,22/Feb/21 13:21,22/Aug/19 11:56,,,Losses ASR,,,,,,,,,,"max possible distribution - 

number of changed contracts * number of DAs * side (buy/sell) 

 
 * talk with TOs about possible new HW
 * consider as many possible solutions as you can ",,eh941,ei349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Aug/19 10:43;eh941;comparison.ods;https://jira.deutsche-boerse.com/secure/attachment/72902/comparison.ods","22/Aug/19 10:42;eh941;comparison.png;https://jira.deutsche-boerse.com/secure/attachment/72901/comparison.png","21/Aug/19 14:24;eh941;performance-internal-report-high-load.xls;https://jira.deutsche-boerse.com/secure/attachment/72825/performance-internal-report-high-load.xls","21/Aug/19 14:49;eh941;performance-internal-report-normal-load.xls;https://jira.deutsche-boerse.com/secure/attachment/72840/performance-internal-report-normal-load.xls",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,47520000,,,dm700,lw641,ox626,rehapav,sw455,,,XP-1819,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y094pp:i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 32 [S],,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Aug/19 14:27;eh941;Added files  [^performance-internal-report-high-load.xls]  and  [^performance-internal-report-normal-load.xls]  which were run with configuration:
{noformat}
# high load
./run.sh scenario_XBDB01XX_losses_10min_bigger.xml

#normal load
./run.sh scenario_XBDB01XX_losses_10min.xml
{noformat}

with core setup:
{noformat}
 -Dorderbook.strategy=new-only -Dorderbook.core.thread.count=40 -Dorderbook.max.thread.count=40 -Dorderbook.experiment.compareDeltas=false
{noformat}

full core command was:
{code:bash}
[tomcat@xbidperfcor1 xbid-perf-cor1]$ ps aux | grep java
tomcat    2105  138 14.2 27316108 9367732 ?    Sl   12:02 199:14 /opt/java/default/jre/bin/java -Djava.util.logging.config.file=/xbid/xbid-perf-cor1/tomcat/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djdk.tls.ephemeralDHKeySize=2048 -Djava.protocol.handler.pkgs=org.apache.catalina.webresources -Dorg.apache.catalina.security.SecurityListener.UMASK=0027 -Xms8g -Xmx12g -Dfile.encoding=UTF-8 -Duser.timezone=CET -Dspring.profiles.active=env,xbid,kafka,rts3-slicebperf-data-fake -Dmarket.halt.on.startup=false -Ddefault.capacity.on.startup=true -Dorderbook.strategy=new-only -Dorderbook.core.thread.count=40 -Dorderbook.max.thread.count=40 -Dorderbook.experiment.compareDeltas=false -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/xbid/logs/xbid-perf-cor1/ -XX:+PrintGCDateStamps -Xloggc:/xbid/logs/xbid-perf-cor1/xb_xbid_perf_cor_gc_ixe.log -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+PerfDisableSharedMem -XX:+CMSParallelRemarkEnabled -XX:+ParallelRefProcEnabled -XX:+UnlockDiagnosticVMOptions -XX:CMSInitiatingOccupancyFraction=80 -XX:+UseCMSInitiatingOccupancyOnly -XX:+ScavengeBeforeFullGC -XX:+CMSScavengeBeforeRemark -XX:MaxTenuringThreshold=2 -XX:SurvivorRatio=8 -XX:+PrintGCDetails -XX:+PrintTenuringDistribution -XX:ParGCCardsPerStrideChunk=1024 -XX:+AlwaysPreTouch -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=9 -XX:GCLogFileSize=20M -Dignore.endorsed.dirs= -classpath /xbid/xbid-perf-cor1/tomcat/bin/bootstrap.jar:/xbid/xbid-perf-cor1/tomcat/bin/tomcat-juli.jar -Dcatalina.base=/xbid/xbid-perf-cor1/tomcat -Dcatalina.home=/xbid/xbid-perf-cor1/tomcat -Djava.io.tmpdir=/tmp org.apache.catalina.startup.Bootstrap start
{code}
","22/Aug/19 10:44;eh941;I've created comparison of these 3 runs

!comparison.png!

as you can see the thread setup shuffle the results a lot. It seems like the 40 threads dedicated to order book might be too much.

Here's the source for the image: [^comparison.ods]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
XBID Performance improvements - stage 2,XP-1945,84581,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,eg288,ei349,jj069,25/Jul/19 12:29,04/Aug/20 19:36,22/Feb/21 13:21,08/Aug/19 11:32,,,Pre2020,,,,,,,,,,"h1. {color:#00875a}Performance decrease understanding {color}
h2. Current Situation 

We've discovered that new routing library is much slower than the original one. 

h2. Successful attempts
h3. Binary heap priority queue
 * priority queue is now backed by binary heap
 * performance improvement roughly 30%

h3. Packing priority queue elements in long
* using array of longs instead of array of objects in the priority queue
* losing precision (visible already in tests) => not used ATM
* performance improvement roughly 30%

h3. PricePropagator - skip arcs where the propagated price is not better
* arc is not added into priority queue when target area current price is better, performance improvement 70% (for scenario with 1000 orders)

h3. PricePropagator - propagate only best price in the grid
* find best price in the grid and propagate it where possible, then do the same task but only for not yet visited areas
* simple heuristic assuming the best price in the grid will be the best one also in all surrounding areas, this will not be always true with lossy interconnectors, so some areas will be visited several times during price propagation
* performance improvement 80% (for happy case scenario, i.e. fully interconnected grid with enough capacity available on all interconnectors)

h2.Unsuccessful attempts
h3.Triple-float array
* using triple floatkey array for maximal precision
* huge performance decrease

h3.Packing elements in pairs of longs
* using doubled array of longs instead of array of longs in order to increase precision
* huge performance decrease

h3.Memory allocations reduction
* RuntimeGrid reuse instead of creating the new one each time, memory allocations decreased by 50%, performance improvement 10%, not implemented ATM
*  the grid reuse must be done properly to preserve concurrent orderbook calculation

h3.FixBitSet
* generic java.util.BitSet replaced by homegrown FixBitSet data structure, see FixBitSet.patch for details
* array of longs replaced by single long word -> max supported delivery areas is 64
* improvement 12%, not implemented -> the limit of 64 delivery areas is too restrictive

h3.Usage of Fibonacci heap instead of binary one.
* Performance in case of Fibonacci heap is lower both for 100 and 1000 scenarios.

h2. Acceptance Criteria

Outcome should be performance improvement and/or new task(s) containing ideas for improvement.",,eg288,jj069,qo794,,,,,,,,,,,,,,,,,,,,,,,,,XP-1879,,,,XP-1988,,,,,,,,,,,,,"25/Jul/19 17:24;eg288;FixBitSet.patch;https://jira.deutsche-boerse.com/secure/attachment/72017/FixBitSet.patch",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,48729600,,,,,,,,,,XP-1819,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08jzc:d",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 31 [S],,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,develop,XP-2345-adapt_benchmark_to_latest_routing_lib_0-4-14,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Jul/19 12:30;jj069;FINDINGS

*Implemented:*
1) PricePropagator - arc is not added into priority queue when target area current price is better, performance improvement 70% (for scenario with 1000 orders)

*Not implemented:*
1) Memory allocations reduction - RuntimeGrid reuse instead of creating the new one each time, memory allocations decreased by 50%, performance improvement 10%, not implemented at the moment the grid reuse must be done properly to preserve concurrent orderbook calculation


Michael Blaha added a comment - 25/Jul/19 11:23 - edited
Successful attempts
Binary heap priority queue

priority queue is now backed by binary heap
performance improvement roughly 30%
Packing priority queue elements in long

using array of longs instead of array of objects in the priority queue
losing precision (visible already in tests) => not used ATM
performance improvement roughly 30%
Unsuccessful attempts
Triple-float array

using triple floatkey array for maximal precision
huge performance decrease
Packing elements in pairs of longs

using doubled array of longs instead of array of longs in order to increase precision
huge performance decrease","08/Aug/19 11:30;eg288;New improvements will be loadtested under XP-1988 -> closing this ticket",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Continue with performance improvements on the Losses routing library,XP-1944,84575,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,ei349,ei349,25/Jul/19 11:17,06/Nov/20 09:23,22/Feb/21 13:21,25/Jul/19 12:47,,,Losses ASR,,,,,,,,,,,,ei349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,49939200,,,,,,,,,,XP-1934,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s00010420101c004",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Analysis if we need trade allocations in system and for reporting engine + corresponding implementation ,XP-1937,84547,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ll664,lt112,lt112,24/Jul/19 17:17,04/Aug/20 19:35,22/Feb/21 13:21,05/Aug/19 14:58,,,Pre2020,,,,,,,,,,"Analyse trade allocations and trade flows. What is needed what not. Then redesign the trade allocation/flow for proper efficiency and and clarity. 

--- 

Redesign trade allocations 

 

Trade flows are not part of the auction output, solve

which group of trades created which allocations. Usually per contract. 

Used by reporting engine to create reports. ",,ll664,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,49161600,,,,,,,,,,XP-1934,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y094pr:zw",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 31,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2635-redo-fix-3.0,XP-2102-xbid-3,XP-2521-cmm-cmi-labeling,xbid-losses-poc,XP-2942-losses-perf,XP-2521-labeling-cmi-leftovers,XP-2694-xbid-3.0.x-latest-tag-fix,testing-new-stages-3.0,master-xbid-losses-poc,XP-139-xbid-3,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Aug/19 16:15;ll664;The {{TradeAllocation}} entity maps trades to implicit allocations.  This is used in Reporting Engine to generate TC830 report which lists implicit allocation and their corresponding trades. 

Since the association is not captured elsewhere, the entity creation has been implemented also for auction trades.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement modify/delete order functionality,XP-1935,84545,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,uv683,lt112,lt112,24/Jul/19 17:14,04/Aug/20 19:35,22/Feb/21 13:21,05/Aug/19 10:06,,,Pre2020,,,,,,,,,,"Currently only add order operation is supported, implement modify and delete order accordingly
 - in xbid ",,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,49939200,,,,,,,,,,XP-1934,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y094pr:i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 31,,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2635-redo-fix-3.0,XP-2102-xbid-3,XP-2521-cmm-cmi-labeling,xbid-losses-poc,XP-2942-losses-perf,XP-2521-labeling-cmi-leftovers,XP-2694-xbid-3.0.x-latest-tag-fix,testing-new-stages-3.0,master-xbid-losses-poc,XP-139-xbid-3,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses - attempt to allocate on closed Delivery Interval results in Core Down,XP-1932,84539,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ll664,ll664,ll664,24/Jul/19 16:13,04/Aug/20 19:31,22/Feb/21 13:21,31/Oct/19 15:09,,,Losses ASR,,,,,,,,,,"Just make sure that no closed DIs are added into new Grid.


No implementation in routing library for check if interconnector is active or not. 

Missing check for allocation on closed delivery intervals. Prepare the fix. 

No support in the new routing library at all. 
{code:java}
2019-07-24T14:00:58.173Z [CoreService][][] ERROR c.d.e.m.c.e.XbidExceptionHandler - Handling error on event 'com.deutscheboerse.energy.m7.core.in.RequestEvent@3f9c183c[error=<null>,input=Input:Message{receivedTime=1563976858156, rabbitReceivedTime=1563976858155, appId=DB-TestClient, userId=XBDBX001, applicati
onUserId=null, messageId=null, contentEncoding=null, contentType=x-m7/request; version=1, messageSource=TRADING_PMI, replyTo=amq.gen--tv2MvaNvrw-GuviVikRcw, correlationId=[53, 48], classId=null, contentClassId=null, keyClassId=null},request=com.deutscheboerse.energy.m7.core.in.req.OrderEntryRequest@34cfdd62]'
java.lang.RuntimeException: Exception thrown for match: Match{buyOrder=19Buy NON  Contract{id=723, shortName='17-18_XB', longName='20190724 17:00-20190724 18:00'} 4*90.00 EUR 10YDK-1--------W/DK1 5 BG-BGPX-------01, sellOrder=7Sell NON  Contract{id=723, shortName='17-18_XB', longName='20190724 17:00-20190724 
18:00'} 0*70.00 EUR 10Y1001A1001A39I/EE 5 BG-BGPX-------01, buyQuantity=10000, sellQuantity=10000, buyPrice=7000, sellPrice=7000, flows=[com.deutscheboerse.energy.m7.trade.order.execution.Flow@3923f5a6, com.deutscheboerse.energy.m7.trade.order.execution.Flow@e48c6158, com.deutscheboerse.energy.m7.trade.order.
execution.Flow@99f906b4, com.deutscheboerse.energy.m7.trade.order.execution.Flow@cb34d945]}
        at com.deutscheboerse.energy.m7.trade.OrderAddService.lambda$addOrder$4(OrderAddService.java:190)
        at com.deutscheboerse.energy.m7.trade.order.execution.OrderWrapper.match(OrderWrapper.java:75)
        at com.deutscheboerse.energy.m7.trade.OrderAddService.addOrder(OrderAddService.java:161)
        at com.deutscheboerse.energy.m7.trade.OrderAddService.lambda$addIndependentOrders$0(OrderAddService.java:135)
        at com.deutscheboerse.energy.m7.trade.order.execution.OrderWrapper.add(OrderWrapper.java:95)
        at com.deutscheboerse.energy.m7.trade.OrderAddService.addIndependentOrders(OrderAddService.java:135)
        at com.deutscheboerse.energy.m7.trade.OrderAddService.addOrders(OrderAddService.java:98)
        at com.deutscheboerse.energy.m7.trade.ContinuousTradingService.addOrders(ContinuousTradingService.java:137)
        at com.deutscheboerse.energy.m7.trade.ContinuousTradingServiceValidation.addOrders(ContinuousTradingServiceValidation.java:135)
        at com.deutscheboerse.energy.m7.core.in.req.OrderEntryRequest.process(OrderEntryRequest.java:34)
        at com.deutscheboerse.energy.m7.core.in.req.OrderEntryRequest.process(OrderEntryRequest.java:17)
        at com.deutscheboerse.energy.m7.core.RequestProcessor.onEvent(RequestProcessor.java:57)
        at com.deutscheboerse.energy.m7.core.RequestProcessor.onEvent(RequestProcessor.java:29)
        at com.deutscheboerse.energy.m7.core.CoreService.doOnEvent(CoreService.java:89)
        at com.deutscheboerse.energy.m7.core.CoreService.doOnEvent(CoreService.java:36)
        at com.deutscheboerse.energy.m7.core.AbstractEventHandler.onEvent(AbstractEventHandler.java:75)
        at com.deutscheboerse.energy.m7.core.AbstractEventHandler.onEvent(AbstractEventHandler.java:32)
        at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:128)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:745)
Caused by: com.deutscheboerse.energy.m7.cmm.CmmException: DELIVERY_INTERVAL_DISABLED, Args: [17:00-18:00]
        at com.deutscheboerse.energy.m7.cmm.allocation.validator.AbstractAllocationValidator.lambda$validate$0(AbstractAllocationValidator.java:24)
        at java.util.Optional.ifPresent(Optional.java:159)
        at com.deutscheboerse.energy.m7.cmm.allocation.validator.AbstractAllocationValidator.validate(AbstractAllocationValidator.java:23)
        at com.deutscheboerse.energy.m7.cmm.AllocationCalculator.validateAllocations(AllocationCalculator.java:245)
        at com.deutscheboerse.energy.m7.cmm.AllocationCalculator.doAllocate(AllocationCalculator.java:126)
        at com.deutscheboerse.energy.m7.cmm.AllocationCalculator.allocate(AllocationCalculator.java:91)
        at com.deutscheboerse.energy.m7.cmm.AllocationService.performAllocation(AllocationService.java:505)
        at com.deutscheboerse.energy.m7.cmm.AllocationService.allocateInternal(AllocationService.java:179)
        at com.deutscheboerse.energy.m7.cmm.AllocationService.allocateImplicit(AllocationService.java:171)
        at com.deutscheboerse.energy.m7.trade.OrderAddService.lambda$addOrder$4(OrderAddService.java:187)
        ... 20 common frames omitted
{code}
{code:java}
2019-07-24T14:35:39.964Z [CoreService][][] ERROR c.d.e.m.c.CoreServiceExceptionHandlerStrategy - Fatal error.
java.lang.RuntimeException: Exception thrown for match: Match{buyOrder=4155Buy NON  Contract{id=752, shortName='T23-TT00_XB', longName='20190725 23:00-20190726 00:00'} 0*95.00 EUR 10YDK-2--------M/DK2 5 BG-BGPX-------01, sellOrder=5072Sell NON  Contract{id=752, shortName='T23-TT00_XB', longName='20190725 23:00-20190726 00:00'} 2*75.00 EUR 10YDE-EON------1/TTG 5 BG-BGPX-------01, buyQuantity=18000, sellQuantity=18000, buyPrice=9500, sellPrice=9500, flows=[com.deutscheboerse.energy.m7.trade.order.execution.Flow@cba045bd, com.deutscheboerse.energy.m7.trade.order.execution.Flow@ce00019b]}
        at com.deutscheboerse.energy.m7.trade.OrderAddService.lambda$addOrder$4(OrderAddService.java:190)
        at com.deutscheboerse.energy.m7.trade.order.execution.OrderWrapper.match(OrderWrapper.java:75)
        at com.deutscheboerse.energy.m7.trade.OrderAddService.addOrder(OrderAddService.java:161)
        at com.deutscheboerse.energy.m7.trade.OrderAddService.lambda$addIndependentOrders$0(OrderAddService.java:135)
        at com.deutscheboerse.energy.m7.trade.order.execution.OrderWrapper.add(OrderWrapper.java:95)
        at com.deutscheboerse.energy.m7.trade.OrderAddService.addIndependentOrders(OrderAddService.java:135)
        at com.deutscheboerse.energy.m7.trade.OrderAddService.addOrders(OrderAddService.java:98)
        at com.deutscheboerse.energy.m7.trade.ContinuousTradingService.addOrders(ContinuousTradingService.java:137)
        at com.deutscheboerse.energy.m7.trade.ContinuousTradingServiceValidation.addOrders(ContinuousTradingServiceValidation.java:135)
        at com.deutscheboerse.energy.m7.core.in.req.OrderEntryRequest.process(OrderEntryRequest.java:34)
        at com.deutscheboerse.energy.m7.core.in.req.OrderEntryRequest.process(OrderEntryRequest.java:17)
        at com.deutscheboerse.energy.m7.core.RequestProcessor.onEvent(RequestProcessor.java:57)
        at com.deutscheboerse.energy.m7.core.RequestProcessor.onEvent(RequestProcessor.java:29)
        at com.deutscheboerse.energy.m7.core.CoreService.doOnEvent(CoreService.java:89)
        at com.deutscheboerse.energy.m7.core.CoreService.doOnEvent(CoreService.java:36)
        at com.deutscheboerse.energy.m7.core.AbstractEventHandler.onEvent(AbstractEventHandler.java:75)
        at com.deutscheboerse.energy.m7.core.AbstractEventHandler.onEvent(AbstractEventHandler.java:32)
        at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:128)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:745)
Caused by: com.deutscheboerse.energy.m7.cmm.CmmException: CONTRACT_IN_HALT, Args: [2019-07-25T23:00:00.000+02:00]
        at com.deutscheboerse.energy.m7.cmm.AllocationService.checkAllocations(AllocationService.java:112)
        at com.deutscheboerse.energy.m7.cmm.AllocationService.validateAllocationInputs(AllocationService.java:562)
        at com.deutscheboerse.energy.m7.cmm.AllocationService.allocateInternal(AllocationService.java:177)
        at com.deutscheboerse.energy.m7.cmm.AllocationService.allocateImplicit(AllocationService.java:171)
        at com.deutscheboerse.energy.m7.trade.OrderAddService.lambda$addOrder$4(OrderAddService.java:187)
        ... 20 common frames omitted
{code}",,ei349,ll664,qo794,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,41385600,,,,,,,,,,XP-955,,,,,,,,,,,,,,24/Jul/19 16:13,,,,,,,,,,,,,,,,,,,,,"1|000y4j:1r",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Sep/19 10:23;ei349;[~qo794] can you please check the validity of this task? ","19/Sep/19 10:44;qo794;The issue is still present (based on the grid creation in {{com.deutscheboerse.energy.m7.routing.GridService}}), halted delivery intervals are still added to routing.","31/Oct/19 13:54;ei349;Please check if it's valid.","31/Oct/19 15:09;ll664;Closing, already fixed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses E2E performance test + scenario ,XP-1930,84528,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ll664,ei349,ei349,24/Jul/19 14:13,04/Aug/20 19:31,22/Feb/21 13:21,31/Jul/19 15:05,,,Losses ASR,,,,,,,,,,"* scenario with specific order with specific contracts (1h)
 * update core dataset for performance tests
 * test on perf environment and compare with old library

graphx uses 15minutes DIs. 

 ",,ei349,ll664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Jul/19 14:09;ll664;flamegraph-alloc-scenario1-losses-no-dynamic-logback.svg;https://jira.deutsche-boerse.com/secure/attachment/72192/flamegraph-alloc-scenario1-losses-no-dynamic-logback.svg","29/Jul/19 16:03;ll664;flamegraph-scenario1-losses-no-dynamic-logback.svg;https://jira.deutsche-boerse.com/secure/attachment/72092/flamegraph-scenario1-losses-no-dynamic-logback.svg","29/Jul/19 16:00;ll664;scenario1-losses-no-dynamic-logback.xls;https://jira.deutsche-boerse.com/secure/attachment/72091/scenario1-losses-no-dynamic-logback.xls","26/Jul/19 14:16;ll664;scenario1-losses-report.xls;https://jira.deutsche-boerse.com/secure/attachment/72034/scenario1-losses-report.xls","26/Jul/19 14:16;ll664;scenario1-nolosses-report.xls;https://jira.deutsche-boerse.com/secure/attachment/72035/scenario1-nolosses-report.xls","26/Jul/19 14:16;ll664;scenario1.xlsx;https://jira.deutsche-boerse.com/secure/attachment/72033/scenario1.xlsx","26/Jul/19 14:16;ll664;scenario2-losses.xls;https://jira.deutsche-boerse.com/secure/attachment/72037/scenario2-losses.xls","26/Jul/19 14:16;ll664;scenario2-nolosses.xls;https://jira.deutsche-boerse.com/secure/attachment/72038/scenario2-nolosses.xls","26/Jul/19 14:16;ll664;scenario2.xlsx;https://jira.deutsche-boerse.com/secure/attachment/72036/scenario2.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,49507200,,,,,,,,,,XP-1819,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08eso:2ur",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 31,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Jul/19 14:14;ll664;Run two 10 minute scenarios, only add orders operations (no modifies/deletes, auctions).

*Scenario 1* - base load 50 orders/s, 4 peaks, 100 orders/s each
*Scenario 2* - base load 100 orders/s, 4 peaks, 500 orders/s each

Control XBID version: 2.0.23
Grid: {{rts3-slicebperf-data-fake}}, 3rd wave grid, total 75 Interconnectors, all of them with hourly resolution.

Here a brief summary, complete reports attached:

h4. Order execution time - 99.95%
||scenario||no losses||losses||diff %||
|1|133.00|466.00|250|
|2|445.00|1512.00|239|

h4. Order computation time - 99.95%
||scenario||no losses||losses||diff %||
|1|523.00|19903.00|3750|
|2|683.00|17168.00|2413|

","29/Jul/19 15:58;ll664;Did very basic profiling today, it looks like the logback was slowing down the routing lib significantly.

More precisely, when dynamic conf reload is enabled, the call to {{LOG.isXXXEnabled()}} took signficant time. After it was disabled, the number look way better. 

Order exe time is *roughly equal*  to the old version, whereas OBK calculation time is ~100% slower.

The test has been run with improved routing lib v. 0.4.1. See _scenario1-losses-no-dynamic-logback.xls_ for details.


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses Resolution Intervals,XP-1927,84518,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,ei349,ei349,24/Jul/19 12:50,04/Aug/20 19:31,22/Feb/21 13:21,08/Aug/19 11:53,,,Losses ASR,,,,,,,,,,"h2. Current situation
New routing library does not support resolution intervals and thus only 1hour delivery intervals are used at the moment.

h2. Proposed solution 

The grid is able to calculate only with 1 hour resolution intervals. It means that no routing with 30 or 15 minutes resolution (nor blocks) is allowed and the grid doesn't know about such inter-connectors.

Add feature to the routing library to be able to work with all supported capacity resolutions.
h3. Functional

An interconnector has a defined time resolution (usually one hour, 30 minutes or 15 minutes). The time resolution defines corresponding resolution intervals.

Please, refer to HLFCL Chapter 3 and sub-chapters 3.1-3.4, where you can find the description of: Period, Interval, Time Resolution, and Resolution interval.
 * When we talk about time - that is Resolution interval. Example: The time interval 10:00-12:00 contains the periods 10:00-10:15, … , 11:45-12:00. If this interval is associated with a resolution of one hour, its decomposition consists of the sub-intervals 10:00-11:00 and 11:00-12:00 both with duration of one hour. 

Then, please refer to chapter 3.5 where you can find the definition of Units.
 * Capacity resolution is a unit for quantity related attributes. For example, capacity resolution = 1 MW.

In general, the Chapter 3 Common elements defines:
{quote}Common elements supplement the market model. They include the definition of periods, time intervals, the time interval resolution and sub-intervals forming the temporal basis of e.g. contract intervals and _interconnector resolution intervals_. Here, we also define a generic method to perform rounding to basic units required to include e.g. minimum tradable quantities or _interconnector quantity resolutions_.
{quote}",,de698,ei349,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,49334400,,,,,,,,,,XP-1916,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08jzc:c",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 31 [S],,,,,,,,,,,,,,,,13.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2345-adapt_benchmark_to_latest_routing_lib_0-4-14,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Jul/19 16:20;lt112;InterConnector properties - HLO 4.1.4, 4.1.5 (time, direction dependence)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses Recall/Cancell analysis for Losses Workshop,XP-1919,84492,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,ei349,ei349,23/Jul/19 17:28,04/Aug/20 19:31,22/Feb/21 13:21,16/Sep/19 08:34,,,Losses ASR,,,,,,,,,,"h1. {color:#00875a}Losses Workshop Preparation{color}
h2. Current Situation 

Currently we don't have support for the recall/cancel functionality. Losses workshop #1 is going to take place in Eschborn on 17th September where we need to present how do we would like to approach this topic in our system. 
h2. Proposed Solution

For the presentation we need to check how to approach the Recall/Cancel functionality. 

Ideally we would like to cover example how it will work in ideal way and what happens if some procedures fail. 

Idea for scenarios for presentation : 
 * what happens if recall/cancel succeed with undoing
 * what happens if recall/cancel succeed with counter trade
 * what happenes if both above fails. 

Please find the presentations working version here: 

https://projects.deutsche-boerse.de/sites/ps0080/Shared%20Documents/01%20XBID%20Meetings/External%20Meetings/Workshops/20190917%20-%20Losses%20Workshop%201

from original requirements - need to check validity

FR_LSS_034 Miscellaneous

Trade cancellation needs to be made compatible with losses. (It makes sense to restrict trade cancellation to those cases where a counterallocation can be done on the exact same path, as other paths may have different loss factors leading to different prices and volumes.) Trade cancellation under the trade-based losses methodology is only performed by undoing the trade and the allocations, not by performing a counter-trade. Under the flow based losses methodology it is also allowed to have counter trading.
h2. Acceptance Criteria
 - updated presentation on sharepoint covering the way how we would like to approach the Recall/Cancel topic in the XBID with losses integration including simple scenarios and basic corner cases. ",,ei349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,46310400,,,,,,,,,,XP-1918,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s000104236",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 34,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Sep/19 15:39;ei349;Please find the presentations working version here: 

https://projects.deutsche-boerse.de/sites/ps0080/Shared%20Documents/01%20XBID%20Meetings/External%20Meetings/Workshops/20190917%20-%20Losses%20Workshop%201",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses Block Orders integrate with XBID,XP-1917,84490,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,lt112,ei349,ei349,23/Jul/19 17:25,04/Aug/20 19:31,22/Feb/21 13:21,21/Oct/19 10:35,,,Losses ASR,,,,,,,,,,"h1. {color:#00875a}Goal{color}
h2. Current Situation 

Block orders (nor other than 1hour orders) are not supported by the new routing library
h2. Proposed Solution
 # Time dimension should be added to the new routing library
 -- currently routing library has a single dimension {color:#4c9aff}- can we add more description to this - maybe confluence page?{color}
 -- analyze, design solution for support for multiple delivery intervals {color:#4c9aff}- not sure about the ""multiple delivery intervals"" kind of wording{color}
 --- simplest solution would be to calculate available capacity over all intervals when obtaining available capacity, e.g. min in loop over all intervals for given interconnector
 --- must also in future comply with all the business requirements, e.g. ramping, disabling/enabling certain interconnector etc.
 # Support for block orders should be respected in integration with block orders and capacity resolutions {color:#4c9aff}- re-formulate{color}

h3. {color:#172b4d}Functional{color}

{color:#172b4d}*Why:* {color}New rules in netting and capacity handling lead to necessity of different approach to block contracts. With losses, we cannot use ATC (reason is handling of effective loss coefficient in netting). Instead, we use residual capacity which reflects on needs for netting in such way that the capacity constraint (of the model) is not broken. 

*Problem:* effective loss coefficients may differ in time resolution intervals of an Interconnector due to netting rules - this makes handling of block orders difficult

*Approach:* see how combined residual capacity is dealt with, Rule 4-11; via rules for residual capacity decide when routing for blocks is possible; use heuristics in order execution algorithm and accept not fully optimal results

*Basic idea:* we cannot have a block when effective loss coefficient is changing over time resolution intervals of an interconnector (i.e. if first 15 mins is lossy and second 15mins is gainy - we cannot put a block contract there)

Please also refer to HLFCL:
 * get familiar with time resolution terminology, Chapter 3 Common elements
 * Chapter 4.2.5: Residual capacity – definition of Res.capacity and Combined Res.capacity. This is important as we do not work with ATC with losses; see Rule 4-10
{quote}Note that the residual capacity is not identical to the available transfer capacity. Instead, it represents the available capacity for shifts split into an antiparallel nettable fraction and the remaining capacity in parallel direction.
{quote}
{quote}The split is necessary, as parallel and antiparallel netting are in general associated with different effective loss coefficients for shifts. As effective loss coefficients determine the execution price (see section 5.2.4), the split will finally result in partial executions with different execution prices.
{quote}
 * Chapter 4.2.5.2: combined res.capacity; Rule 4-11 basically defines that only if effective loss coefficient is the same through all time resolution sub-intervals, routing is allowed.
{quote}{color:#00875a}The resolution of power contract intervals can be configured independently of the time resolution of the interconnectors in the grid, which may differ from interconnector to interconnector. In order to allow the execution of orders referring to contracts with time resolution different from the time resolution of interconnectors, a specific set of rules defines the combined residual capacity.{color}
{quote}
 * Chapter 5.1.1: definition of composite contracts (a.k.a blocks)
 * Chapter 6.3.4: Order execution algorithm – composite contracts; without AON; long detailed (functional view) reading about how the algorithm for blocks should work. Describes heuristics.
{quote}The computation splits per resolution sub-interval. 
 The executed quantity of block orders needs to be equal in all resolution sub-intervals. 
 The execution algorithm bases on performing the algorithm for simple contracts multiple times for the resolution sub-intervals, with additional complexity added.
{quote}
 * Chapter 6.3.5: Integer execution constraints
{quote}Orders with all-or-nothing execution restriction (AON) must be executed with the full order quantity. Incoming AON block orders are taken as input in the order execution algorithm for composite contracts (section 6.3.4).
{quote}

h2. Acceptance Criteria
 - validated functionality",,ei349,lt112,,,,,,,,,,,,,,,,,,,,,,,,XP-1988,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,45100800,,,,,,,,,,XP-1916,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s00010423939",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 32,Home Office Team 33 [S],Home Office Team Sprint 34,Home Office Team Sprint 35 [S],Home Office Team Sprint 36,Home Office Team 37 [S],,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2635-redo-fix-3.0,XP-2102-xbid-3,XP-2521-cmm-cmi-labeling,balance-tests,xbid-losses-poc,XP-2942-losses-perf,XP-2521-labeling-cmi-leftovers,XP-2694-xbid-3.0.x-latest-tag-fix,testing-new-stages-3.0,master,XP-1917-transaction-grid-time,XP-1917-quantities-along-way,master-xbid-losses-poc,XP-139-xbid-3,,,,,,,,,,,,,,,,,,,,true,"19/Sep/19 12:53;lt112;TODO:
* Apply changes on the new routing version
** Calculate quantity along path
** Introduce arc validator for AON and take flow from cycles into consideration ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses Rounding implementation ,XP-1915,84488,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,ll664,ei349,ei349,23/Jul/19 17:00,04/Aug/20 19:31,22/Feb/21 13:21,16/Sep/19 09:14,,,Losses ASR,,,,,,,,,,"h1. {color:#00875a}Integer and rational numbers alignment for XBID with losses{color}
h2. Current Situation 

XBID solution works only with integer values and Losses algorithms brings conversion to real numbers. We need rounding to integers to avoid huge performance impact with xbid using rational numbers. 
h2. Proposed Solution

according to documentation implement the rounding into the new routing library on parameters listed below.
h3. Parameters to be rounded using Unit Scaling (see chapter 3.6 in the attached Loses Concept): 
||Element ||Quantity||Unit (for Unit Scaling)||
|*Interconnector*|ATC, AAC, allocated capacity, flow, shift|Capacity Resolution|
|*Order Execution*|Price|Tick Size|
| |Quantity|Tradable Unit|
| |Cash Value|Cash Unit|

Part of the solution is to find out if the change in the routing library is enough.  

Measure performance impact. - create task in the performance measurement epic. 

See epic description, attached Losses concept or workshop presentation for more details. 

*Please refer to HLFCL:*
 * Chapter 3 Common elements – description of what are rounding units, what is the core rounding method (rational-to-integer and unit scaling);
 * Chapter 4.2.4.5 Netting with rounding – most important are *Rule 4-6* how the rounded flows (received and sent) should be kept, and *Rules 4-7 and 4-8* for rounding with antiparallel and parallel netting; this section contains several examples and counter examples;
 * Chapter 6.3.6 Rounding executions – additional points to rounding related to order execution process;

h2. Acceptance Criteria
 - tested and validated rounding functionality
 - task created for performance measurement in the Perf. Measurement epic. ",,ei349,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Aug/19 12:31;ei349;High Level Functional Concept Losses_V4.0_clean.pdf;https://jira.deutsche-boerse.com/secure/attachment/72390/High+Level+Functional+Concept+Losses_V4.0_clean.pdf","07/Aug/19 12:31;ei349;WS Losses Prag - Session 2a - Special Topics.pptx;https://jira.deutsche-boerse.com/secure/attachment/72391/WS+Losses+Prag+-+Session+2a+-+Special+Topics.pptx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,48211200,,,,,,,,,,XP-1914,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y5a:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 32 [S],Alpha Team Sprint 33,Alpha Team Sprint 34 [S],,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-1915-price-fixing,balance-tests,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Aug/19 10:09;lt112;Possible issues: https://github.deutsche-boerse.de/dev/xbid.routing/issues/20 (check if still valid)","13/Aug/19 15:46;lt112;Also note, that rounding unit is the Least Common Multiple of unit for order lot size and Inter-Connector unit/step (might be inexact terms).
e.g.  order lot size = 30 && IC unit = 20 => LCM = 60 => consider 60 the rounding unit
More info in chapter 6.3.6",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CMI FTC validity interval not working correctly,XP-1893,84211,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,hj444,radeale,radeale,16/Jul/19 15:52,20/Aug/20 17:03,22/Feb/21 13:21,22/Jul/20 11:34,,,3.1.0,,,,,,,Latent_Faults,,,"DBAG uncovered an inconsistency of the behavior, a latent fault.

+*Current behavior*+
The validity for the CMI FTCs currently works as <date1;date2>, i.e. files are also generated for the entire duration of of the date2.
It is possible to create FTCs as <date1;date2> and <date2;date3>.
*{color:#DE350B}As a result for the date2 TWO files are generated in parallel despite the FTCs should never overlap.{color}*

+*Correct behavior*+
The proper validity behavior is <date1;date2) and <date2;date3).
This is industry standard and also ensure that the situation described above does not happen.

+*Steps to reproduce*+
1. Login into the CMI with a File Management Admin user.
2. Create two outbound file transfer configurations for the same IC, file type, channel and recipient - <date1;date2> and <date2;date3>.
3. Wait for the date2 to happen.
=> Two files are sent in parallel while only one should be sent.

+*Relevant documentation*+
DFS800, chapters
3.3.3.1.1 Create a new inbound file configuration
3.3.4.1.1 Create a new outbound file configuration

+*Related tickets*+
XBID-3632 - The clarification ticket from which the behavior originated.",,hj444,ll664,qo794,radeale,tm431,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3319,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,18576000,,,,,,,,,,XP-3447,,,,,,,,,,,,,,16/Jul/19 15:52,,,,,,,,,,,,,,,,,,,,,"1|y0b3xj:y",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 30,Home Office Team Sprint 31 [S],Home Office Team Sprint 32,Home Office Team 33 [S],Home Office Team Sprint 34,Home Office Team Sprint 35 [S],Home Office Team Sprint 36,Alpha Sprint 13 (S),,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,Production,,,,acceptance,develop,master,master-acceptance,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Jul/19 15:53;radeale;Kamil, please verify in the code it is really so.","17/Jul/19 09:37;qo794;Yes, for FTC based on events it's exactly as written in the description, i.e. <date1, date2>. For scheduled files the generation stops at ""validTo"" date, that day is not included (according to quartz library documentation).","17/Jul/19 10:12;radeale;Thanks, no implementation for the moment, we need to clarify this with the customers.","08/Aug/19 14:43;radeale;Customers deciding, in which version do they want this fixed (2.X or 3.0).","29/Oct/19 10:43;radeale;To be fixed in 3.0 upon further agreement with the customers, they need to confirm they want the fix.","27/Apr/20 15:49;radeale;Minor effort, the ball is on the customers side.","03/Jun/20 15:39;tm431;Check if some configuration should be migrated or not. Then fix","20/Jul/20 11:49;ll664;Fixed into develop. The problem was only with one shot events, the periodic events it was already OK, as Kamil mentioned.","22/Jul/20 11:34;hj444;Issue split into:
|XP-3319|(Split 1) CMI FTC validity interval not working correctly|
",,,,,,,,,,,,,,,,,,,,,,,
Basic Integration of new routing library with XBID 2.0,XP-1884,84091,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Critical,Done,,ei349,ei349,11/Jul/19 12:03,04/Aug/20 19:35,22/Feb/21 13:21,24/Jul/19 16:54,,,Pre2020,,,,,,,,,,"h2. {color:#00875a}Performance impact overview after integration of the new routing library{color}
h2. Current Situation 

We have a routing library without losses integrated to the XBID. This library has a performance issue and we don't how big is the impact on the whole application performance.
{color:red}Check {{XDEV-4928-losses-performance}} branch in xbid project for what has already been done.{color}
h2. Proposed Solution 

New routing basic integration with XBID. Minimal effort to allow us to measure performance impact on XBID. 
h2. Acceptance Criteria
 * New routing library integrated in the system on minimal level with measurable performance impact. ",,eh941,ei349,ll664,uv683,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,49939200,,,,,,,,,,XP-1819,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08eso:2t",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 30 [S],,,,,,,,,,,,,,,,13.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2635-redo-fix-3.0,XP-2102-xbid-3,XP-2521-cmm-cmi-labeling,xbid-losses-poc,XP-2942-losses-perf,XP-2521-labeling-cmi-leftovers,XP-2694-xbid-3.0.x-latest-tag-fix,testing-new-stages-3.0,master-xbid-losses-poc,XP-139-xbid-3,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Jul/19 15:47;eh941;h1. Order Book

The MR is: [https://github.deutsche-boerse.de/dev/xbid/pull/410]
h2. What is done:
 # Order book is now calculated with new losses library
 # There is _experiment_ in use. As control value the non-losses graphix library is used. As experiment the new one. Important note - *{color:#de350b}as the value calculated from order book the candidate (the new one) is taken not the old one as it was before.{color}*
 # The grid is being _somehow_ updated
 # It should be thread-safe
 # Couple of tests passes. As referential ones I picked AddOrderIntegrationTest and AddOrderPartialMatchingIntegrationTest

Although the experiment works it isn't really useful right now. The data sets we use contain 15 minutes capacity resolution delivery intervals which aren't supported yet (see Capacity resolutions).

A new configuration key {{orderbook.experiment.compareWholeOrderBooks}} was introduced with default value {{false}}. The point is that this comparison takes very long time (*more than 10 seconds*).

h2. What is missing or incomplete

Each of the following could be separate task. Let's wait for the auction and matcher part to create them - there will be definitely duplicates
h3. Capacity resolutions

The grid is able to calculate only with delivery intervals with capacity resolution 1 hour. It means that no routing with 30 or 15 minutes resolution is allowed and the grid doesn't know about such inter-connectors.

Add feature to the routing library to be able to work with all supported capacity resolutions.
h3. Grid updating

*Current solution:*

Losses grids are managed per contract. There are two ways how to update the grid:
 # All data replacement
 # Update by delta

A lot of the usages use the all data replacement instead of the delta one. It's also possible that there are bugs - in some cases the grid should be updated but it is not

*Suggested solution:*
 The updates by delta is bearable and effective if there are just a few contracts and inter-connectors have capacity resolution one hour. The requirement is though to have many contracts and other capacity resoultion.
 The new library should therefore contain method to update only the capacities that are needed to be updated (like the old graphix library).

 
h3. Icebergs

There are experiment mismatch for iceberg orders - e.g. IcebergIntegrationTest#icebergBuyOrdrWithAlmostMinPriceIsAccepted

Even order book works with icebergs a bit differently - there is a special field hiddenQuantity which now differs. Investigate if this different behavior is needed and fix the bug.
h3. AoN and IoC orders

There is no support for AoN and IoC orders. Add it.

h3. Reduce technical depth
The order book is written rather as temporary solution. The whole passing of the grid from core service to order book disruptor isn't production ready. It works but it's error prone and confusing.  {{LossesGridChangedTrigger}} hierarchy is rather pointless and should be merged with the old one.","23/Jul/19 17:40;ll664;Very basic matcher integration done. 

It supports only adding of orders/cross border matching for hourly contracts. This should be good enough to run the e2e performance tests.

The build is failing, however couple of basic tests are passing:
{code}
 mvn clean test -Dtest=CrossBorderOrderCtxTest#testCrossBorderOrder,CrossBorderOrderCtxTest#testCrossBorderOrderCorrectlyUpdatesATC,AddOrderIntegrationTest
{code}

*No experiments* have been added. The reason is that the order entry operation mutates internal state, hence cannot be easily executed with old and new implementation at the same time, as it shares the underlying data in pools.

","24/Jul/19 14:56;uv683;New *auction service* is in place as well. Old implementation is still there but is unused at the moment. Auction is called from class RequestProcessor. If you want to turn on the old implementation uncomment the particular line and comment the line calling new auction service.

*TradeAllocation* is not being computed as part of the auction and should be added.

I have tried the old and the new implementation on following tests
{code:java}
AuctionAfterDeliveryIntervalServiceActivationWithRampingIntegrationTest
AuctionAfterPriceLimitChangeIntegrationTest
AuctionAfterServiceActivationIntegrationTest
AuctionMessagesIntegrationTest{code}
All of them are working at the moment, I only needed to comment out TradeAllocation checks.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update a performance scenario 15 for wave 3,XP-1883,84082,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tr866,hj444,hj444,11/Jul/19 10:20,04/Aug/20 19:36,22/Feb/21 13:21,22/Jul/19 13:56,,,Pre2020,,,,,,,,,,"*  Update a performance scenarios (14) for wave 3
  **   update a scenarios to align with required scenarios against grid of wave 3

See also https://jira.deutsche-boerse.com/browse/XP-1871 - where scenarios -3,9,11,14 were updated
                 https://jira.deutsche-boerse.com/browse/XP-1882 - update of scenario 14
",,hj444,tr866,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jul/19 13:47;tr866;Individual Versions Run Results.zip;https://jira.deutsche-boerse.com/secure/attachment/71883/Individual+Versions+Run+Results.zip","17/Jul/19 13:43;tr866;xbid-rts3b-2019-sc15-v08_wave3.xlsx;https://jira.deutsche-boerse.com/secure/attachment/71707/xbid-rts3b-2019-sc15-v08_wave3.xlsx","22/Jul/19 13:45;tr866;xbid-rts3b-2019-sc15-v09_wave3.xlsx;https://jira.deutsche-boerse.com/secure/attachment/71882/xbid-rts3b-2019-sc15-v09_wave3.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,50198400,,,,,,,,,,XP-1598,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08zof:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 30 [S],,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jul/19 10:27;hj444;https://jira.deutsche-boerse.com/browse/XP-1623 - definition of scenarios for performance testing UAT2.","17/Jul/19 13:52;tr866;Version with fixed prefill orders and number of trades  attached [^xbid-rts3b-2019-sc15-v08_wave3.xlsx]
Following results were the lates output:
||Name|Count||
|ALL_RTS3_ALL_ORDER_EVENTS_INCLUDED_PREFIL|234909.0|
|ALL_RTS3_PREFILL_ORDERS|62900.0|
|ALL_RTS3_DELETED_ORDERS|62900.0|
|ALL_RTS3_NEW_ORDERS_WITHOUT_PREFIL|106910.0|
|ALL_RTS3_NEW_BLOCK_ORDERS_WITHOUT_PREFIL|2199.0|
|Matched orders - action in (PEXE, FEXE)|44764.0|
|Fully matched orders - action=FEXE|23900.0|
|Partially matched orders - action=PEXE|20864.0|
|All trades|22382.0|
|All trades in auction|362.0|
|All trades not in auction|22020.0|
|All canonical trades|22096.0|
|All block trades|286.0|
|Local trades (same DAs)|3939.0|
|Cross-border trades (different DAs)|18443.0|
|Local trades (same MAs)|11916.0|
|Cross-border trades (different MAs)|10466.0|
|Explicit allocations all - count(*)|2884.0|
|Explicit allocations all - count(distinct client_id)|1438.0|
|The ratio (total number of cmm non explicit allocation) / (total number of trades)|1.9234206058439818|
|The ratio (total number of trade allocations) / (total number of trades)|3.626753641318917|
|Number of DAs|44.0|","22/Jul/19 13:56;tr866;Version with amended contract distribution 35/5/60, Peak/Base Load percentage and 16h vs 30h Block Ordres number attached [^xbid-rts3b-2019-sc15-v09_wave3.xlsx]
Following results were the latest output:
||Name||Count||
|ALL_RTS3_ALL_ORDER_EVENTS_INCLUDED_PREFIL|234905.0|
|ALL_RTS3_PREFILL_ORDERS|62900.0|
|ALL_RTS3_DELETED_ORDERS|62900.0|
|ALL_RTS3_NEW_ORDERS_WITHOUT_PREFIL|106906.0|
|ALL_RTS3_NEW_BLOCK_ORDERS_WITHOUT_PREFIL|2199.0|
|Matched orders - action in (PEXE, FEXE)|44788.0|
|Fully matched orders - action=FEXE|23961.0|
|Partially matched orders - action=PEXE|20827.0|
|All trades|22394.0|
|All trades in auction|1.0|
|All trades not in auction|22393.0|
|All canonical trades|22108.0|
|All block trades|286.0|
|Local trades (same DAs)|3592.0|
|Cross-border trades (different DAs)|18802.0|
|Local trades (same MAs)|11475.0|
|Cross-border trades (different MAs)|10919.0|
|Explicit allocations all - count(*)|2044.0|
|Explicit allocations all - count(distinct client_id)|1138.0|
|The ratio (total number of cmm non explicit allocation) / (total number of trades)|2.1223988568366527|
|The ratio (total number of trade allocations) / (total number of trades)|3.8320978833616146|
|Number of DAs|44.0|","22/Jul/19 14:01;tr866;One thing that wasn't changed was ""{color:#DE350B}Base load rate (order transactions/s) - sustainable load{color}"" expected to be {color:#00875A}39{color} but currently is {color:#DE350B}43,7{color}. This is because the net time for peformance is shortened by the prefill. To fix that the Load period would have to be extended by setting the latest ""To"" times to ""1:05:30 AM"".",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update a performance scenario 14 for wave 3,XP-1882,84081,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,hj444,hj444,11/Jul/19 10:18,04/Aug/20 19:36,22/Feb/21 13:21,22/Jul/19 15:32,,,Pre2020,,,,,,,,,,"* Update a performance scenarios (14) for wave 3
    ** update a scenarios to align with required scenarios against grid of wave 3

See also XP-1871 - where scenarios -3,9,11,14 were updated",,hj444,od044,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jul/19 15:32;od044;xbid-rts3b-2019-sc14-v09_wave3.xlsx;https://jira.deutsche-boerse.com/secure/attachment/71888/xbid-rts3b-2019-sc14-v09_wave3.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,50112000,,,,,,,,,,XP-1598,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08tbr:w",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 30,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jul/19 10:28;hj444;https://jira.deutsche-boerse.com/browse/XP-1623 - definition of scenarios for performance testing UAT2.","22/Jul/19 15:32;od044;Done: 

 [^xbid-rts3b-2019-sc14-v09_wave3.xlsx] ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
XBID Performance results analysis and improvements investigation,XP-1879,84048,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,,ei349,ei349,10/Jul/19 11:14,04/Aug/20 19:35,22/Feb/21 13:21,25/Jul/19 12:28,,,Pre2020,,,,,,,,,,"h1. {color:#00875a}Performance decrease understanding {color}
h2. Current Situation 

We've discovered that new routing library is much slower than the original one. 

h2. Successful attempts
h3. Binary heap priority queue
 * priority queue is now backed by binary heap
 * performance improvement roughly 30%

h3. Packing priority queue elements in long
* using array of longs instead of array of objects in the priority queue
* losing precision (visible already in tests) => not used ATM
* performance improvement roughly 30%

h3. PricePropagator - skip arcs where the propagated price is not better
* arc is not added into priority queue when target area current price is better, performance improvement 70% (for scenario with 1000 orders)

h2.Unsuccessful attempts
h3.Triple-float array
* using triple floatkey array for maximal precision
* huge performance decrease

h3.Packing elements in pairs of longs
* using doubled array of longs instead of array of longs in order to increase precision
* huge performance decrease

h3.Memory allocations reduction
* RuntimeGrid reuse instead of creating the new one each time, memory allocations decreased by 50%, performance improvement 10%, not implemented ATM
*  the grid reuse must be done properly to preserve concurrent orderbook calculation

h3.FixBitSet
* generic java.util.BitSet replaced by homegrown FixBitSet data structure, see FixBitSet.patch for details
* array of longs replaced by single long word -> max supported delivery areas is 64
* improvement 12%, not implemented -> the limit of 64 delivery areas is too restrictive

h2. Acceptance Criteria

Outcome should be performance improvement and/or new task(s) containing ideas for improvement.",,eg288,ei349,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Jul/19 17:20;eg288;FixBitSet.patch;https://jira.deutsche-boerse.com/secure/attachment/72016/FixBitSet.patch",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,49939200,,,,,,,,,,XP-1819,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08jzc:6",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 30,,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-1879-heap-with-array-from-1,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Jul/19 16:42;eg288;*Implemented:*
1) PricePropagator - arc is not added into priority queue when target area current price is better, performance improvement 70% (for scenario with 1000 orders)

*Not implemented:*
1) Memory allocations reduction -  RuntimeGrid reuse instead of creating the new one each time, memory allocations decreased by 50%, performance improvement 10%, not implemented at the moment the grid reuse must be done properly to preserve concurrent orderbook calculation
2) FixBitSet - generic java.util.BitSet replaced by homegrown FixBitSet  data structure, see FixBitSet.patch for details. Improvement 5%, the improvement is not significant -> not implemented

","25/Jul/19 11:23;lt112;h2. Successful attempts
*Binary heap priority queue*
- priority queue is now backed by binary heap
- performance improvement roughly 30%

*Packing priority queue elements in long*
- using array of longs instead of array of objects in the priority queue
- losing precision (visible already in tests) => not used ATM
- performance improvement roughly 30%

h2. Unsuccessful attempts

*Triple-float array*
- using triple floatkey  array for maximal precision
- huge performance decrease

*Packing elements in pairs of longs*
- using doubled array of longs instead of array of longs in order to increase precision
- huge performance decrease",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Update a performance scenarios (#3,9,11) for wave 3",XP-1871,83997,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,od044,od044,od044,09/Jul/19 10:23,31/Aug/20 15:38,22/Feb/21 13:21,11/Jul/19 12:10,,,Pre2020,,,,,,,,,,"Update a performance scenarios (#3,9,11,14,15) for wave 3

- update a scenarios to align with required scenarios against grid of wave 3
",,hj444,od044,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-1883,XP-1882,,,,,,"10/Jul/19 10:39;od044;xbid-rts3b-2019-sc03-v12_wave3.xlsx;https://jira.deutsche-boerse.com/secure/attachment/71377/xbid-rts3b-2019-sc03-v12_wave3.xlsx","10/Jul/19 10:39;od044;xbid-rts3b-2019-sc09-v14_wave3.xlsx;https://jira.deutsche-boerse.com/secure/attachment/71376/xbid-rts3b-2019-sc09-v14_wave3.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,51148800,,,,,,,,,,XP-1598,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y091ho:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 29 [S],,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jul/19 10:24;hj444;Task was divided into smaller tasks.
Done scenarios within this task - 3,9,11.
Linked tasks - for scenarios 14, 15.
","11/Jul/19 10:27;hj444;https://jira.deutsche-boerse.com/browse/XP-1623 - definition of scenarios for performance testing UAT2.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Automation of performance measuring on Losses ,XP-1833,83659,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,lt112,ei349,ei349,26/Jun/19 14:24,05/Mar/20 09:32,22/Feb/21 13:21,05/Mar/20 09:32,,,Losses ASR,,Routing,,,,,TO-JOB,,,"h1. {color:#00875a}Performance monitoring in time{color}
h2. Current Situation

There is no way how to run automated performance tests and monitor performance impact on our routing library. 
h2. Proposed Solution

Provide solution enabling automated performance testing with visible performance impact on the system during the time. 
h2. Acceptance Criteria

Automated test runner running performance tests regularly with visible and human readable performance reports. ",,ei349,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,"* performance check on pull-request
* observable performance evolution in https://github.deutsche-boerse.de/dev/xbid.routing and detailed in https://github.deutsche-boerse.de/dev/xbid.routing-benchmark-plot",,,,,,,,,,30585600,,,,,,,,,,XP-1819,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0a9h8:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 2 (S),HOT Sprint 3,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-1833,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Jul/19 10:32;lt112;Simple Tutorial for JMH: http://tutorials.jenkov.com/java-performance/jmh.html","20/Feb/20 11:09;lt112;- pull request for PR-check https://github.deutsche-boerse.de/dev/xbid.routing/issues/102
- jenkins job - trigger https://englobjci1.deutsche-boerse.de/job/Energy/job/xbid-routing-pulls-performance/
- jenkins job - evaluator https://englobjci1.deutsche-boerse.de/job/Energy/view/Xbid%20Sections/job/xbid-routing-performance/","05/Mar/20 09:30;lt112;* on merge to xbid.routing a new code is evaluated by performance benchmark, the result is stored and a plot is generated
* performance evolution report https://github.deutsche-boerse.de/dev/xbid.routing-benchmark-plot
* plot generator https://github.deutsche-boerse.de/dev/xbid.routing-benchmark-plot-generator/
* jenkins job - trigger https://englobjci1.deutsche-boerse.de/job/Energy/job/xbid-routing-plot-merges/
* jenkins job - result generator https://englobjci1.deutsche-boerse.de/job/Energy/job/xbid-routing-performance-plot/
* performance evolution plot added to xbid.routing README",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Scenario generator for XBID,XP-1831,83626,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ll664,ei349,ei349,25/Jun/19 18:16,03/Jul/19 12:47,22/Feb/21 13:21,03/Jul/19 12:47,,,Losses ASR,,Routing,,,,,,,,"h1. {color:#00875a}Test scenarios for losses performance testing{color}
h2. Current Situation

We don't have any test scenarios for losses performance testing. 
h2. Proposed Solution 

Introduce test scenario reflecting 3rd wave grid from dataset created in XP-1830 which can be used for the performance measurement of lossy/lossless routing libraries. 
h2. Acceptance Criteria

Test scenario containing 3rd wave grid with randomly generated capacities which can be used for losses performance measurement. 

 ",,de698,ei349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,52444800,,,,,,,,,,XP-1819,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s000104201013",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 29,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-1819-benchmark_runner_how_to_run_removed_ea_switch,XP-1831,benchmark-improvements,XP-2345-adapt_benchmark_to_latest_routing_lib_0-4-14,develop,XP-1819-ic_capacity_type_is_int,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Dataset for Losses PoC Performance phase,XP-1830,83624,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,lt112,ei349,ei349,25/Jun/19 17:46,25/Nov/19 17:39,22/Feb/21 13:21,04/Jul/19 15:40,,,Losses ASR,,Routing,,,,,,,,"h1. {color:#00875a}*Grid model for future testing of Losses*{color}
h2. Current Situation

There is no proper dataset for Losses performance testing. 
h2. Proposed Solution

We need to create two datasets containing 3rd wave parties as a grid model.  One with losses and one without. This is needed to check the correctness of results (briefly). This dataset will be used mainly for the testing of losses development performance impact. 

This dataset must be readable by routing libraries (with losses and without them) in the form of grid.

Part of this solution is to find the way how to allow libraries to load this datasets. (Using adapter from XP-1829?)
h2. Acceptance Criteria

Two datasets reflecting 3rd wave grid readable by routing libraries. One with losses and one without. 

 ",,ei349,,,,,,,,,,,,,,,,,,,,,,,,,XP-1831,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,52444800,,,,,,,,,,XP-1819,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s000104201013o",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 29 [S],,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-1819-benchmark_runner_how_to_run_removed_ea_switch,benchmark-improvements,XP-1829,develop,XP-2345-adapt_benchmark_to_latest_routing_lib_0-4-14,XP-1819-ic_capacity_type_is_int,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Adapter for routing library,XP-1829,83623,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Critical,Done,lt112,ei349,ei349,25/Jun/19 17:28,04/Jul/19 15:03,22/Feb/21 13:21,04/Jul/19 15:03,,,Losses ASR,,Routing,,,,,,,,"{color:#00875a}*Universal access to routing libraries*{color}
h2. Current Situation 

We have new (including losses PoC from the past) and old (without losses) routing library versions with different API which prevents us to run same test cases on both versions. 
h2. Proposed solution 

Create adapter to allow universal access to both routing library versions. This will allow us to run same test scenarios, comparing their results and analyze the performance impact of the new development. This adapter should be able to be called from a automated test tools running multiple test cases. 
h2. Acceptance Criteria

Adapter able to operate old and new routing libraries callable from automated tests tools. ",,ei349,lt112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-1830,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,51840000,,,,,,,,,,XP-1819,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s000104201013c",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 29 [S],,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-1819-benchmark_runner_how_to_run_removed_ea_switch,benchmark-improvements,XP-1829,XP-2345-adapt_benchmark_to_latest_routing_lib_0-4-14,develop,XP-1819-ic_capacity_type_is_int,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Jul/19 09:34;lt112;h2. Preliminary findings
- consistency is hard to test due to split path - new library does not support split path and thus same order can appear twice in order-book (possible solution - implement aggregation for equal price on the library level)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
prepare env for UAT 2,XP-1798,83292,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,tz118,tz118,17/Jun/19 09:30,31/Aug/20 15:39,22/Feb/21 13:21,14/Aug/20 15:41,,,Pre2020,,,,,,,ice,,,"* Prepare test environment (simulation environment) provisioned by NEMOs
 ** Deployments of applications done
 ** Deployments of property files and static resources
 ** DB schema is upgraded
 ** Test Data initialisation scripts is executed
 ** Access links to collective simulation environment provided to test team",,tz118,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,53222400,,,,,,,,,,XP-1598,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08xjs:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,Simulation,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update one perf test scenario with new dataset,XP-1773,83125,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,od044,tz118,tz118,11/Jun/19 10:10,04/Aug/20 19:36,22/Feb/21 13:21,27/Jun/19 10:30,,,Pre2020,,,,,,,performance,,,"{color:#00875a}*Updated dataset based on customer input*{color}

new updated dataset provided by NEMOs shall be used to test XBID perf. In order to have such a scenario, dataset needs to be reviewed and updated in the scenario execution sheet.

AC
 * one test scenario from RTS3SB is updated with new dataset, eg. #11
 * this test scenario is successfully executed and validated",,de698,ek176,od044,tz118,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Jun/19 10:16;od044;HandlersReport-newDataset-7-26062019.xls;https://jira.deutsche-boerse.com/secure/attachment/70915/HandlersReport-newDataset-7-26062019.xls","27/Jun/19 10:16;od044;sc14v09-perf-newDataset-7-26062019.xls;https://jira.deutsche-boerse.com/secure/attachment/70916/sc14v09-perf-newDataset-7-26062019.xls","27/Jun/19 10:16;od044;sql-check-new-dataset-7.xlsx;https://jira.deutsche-boerse.com/secure/attachment/70917/sql-check-new-dataset-7.xlsx","27/Jun/19 10:12;od044;xbid-rts3b-2019-sc14-v09_wave2_new_dataset.xlsx;https://jira.deutsche-boerse.com/secure/attachment/70914/xbid-rts3b-2019-sc14-v09_wave2_new_dataset.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,52358400,,,,,,,,,,XP-1598,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08txr:b",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team 28,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-4276-split-io,XP-4276-new-format,develop,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Jun/19 10:29;od044;New dataset: rts3-slicebperf-data-fake, v.1.3.58 +

New version of scenarios sc14:
 [^xbid-rts3b-2019-sc14-v09_wave2_new_dataset.xlsx] 

Reports:
 [^HandlersReport-newDataset-7-26062019.xls]  [^sc14v09-perf-newDataset-7-26062019.xls]  [^sql-check-new-dataset-7.xlsx]  

Conclusion: Scenario values and result match to expectation. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
plan UAT 2 execution with NEMOs and Techops,XP-1772,83099,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,tz118,tz118,10/Jun/19 14:24,31/Aug/20 15:38,22/Feb/21 13:21,21/Aug/19 14:23,,,Pre2020,,,,,,,uat,,," 

test plan shall be communicated at least 1 week prior to the execution planned during September 2019

- part of this task is to create deployment requests for env restoration 

AC
 * align with NEMOs about detailed time plan
 * align with other internal departments (especially Techops) about an execution plan and availability",,tz118,uv683,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,47520000,,,,,,,,,,XP-1598,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y66:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Aug/19 14:23;uv683;all points already done, not needed",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
XBID CLONE: DFS800 - FTC Validity date clarification,XP-1769,83077,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Trivial,Done,radeale,radeale,radeale,07/Jun/19 13:42,31/Aug/20 15:38,22/Feb/21 13:21,26/Nov/19 11:03,,,Pre2020,,,,,,,Batch_7,ice,,"*Document:* DFS800

*Chapter:* 3.3.3.1.1	Create a new inbound file configuration

*Details:*

Text added to the point _10. Valid from and Valid to_:
{code:java}Valid From means the FTC is valid from the start of the specified day, Valid To means the FTC is valid till the start of the specified date.{code}

*Chapter:* 3.3.4.1.1	Create a new outbound file configuration

*Details:*

Text added to the point _7.Valid from and Valid to_:
{code:java}Valid From means the FTC is valid from the start of the specified day, Valid To means the FTC is valid till the start of the specified date.{code}

*Reason:* Clarification for better understanding.",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-3632,,,,,,,,,,XP-1893,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,50630400,,,,,,,,,,XP-174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09j3r:yw",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team 27 [S],Home Office Team 28,Home Office Team Sprint 29 [S],Home Office Team Sprint 30,Home Office Team Sprint 31 [S],Home Office Team Sprint 32,Home Office Team 33 [S],Home Office Team Sprint 34,Home Office Team Sprint 35 [S],Home Office Team Sprint 36,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Jun/19 13:42;DMyska@e-bridge.com;Dear Alexandr,

Please correct the typo in proposed added text ""the"" is repeated twice in both additions. Otherwise is the change accepted by MSD.

Kind regards

David","07/Jun/19 13:42;radeale;Dear David,

thanks for the note, the text is fixed.

BR
Alexandr","07/Jun/19 13:42;radeale;Dear MSD members,

during the DFS800 Batch_5 finalization the following inconsistency was discovered regarding this ticket (in chronological order):

MSD - M1: According to PROD enviroment the periods do not overlap and therefore the Valid to is included in the period  start to be replaced by end?

DBAG - The proper behavior is as described, i.e. the interval is <date1;date2) and <date2;date3), which is how the validation in the File Management also works. (Try creating an FTC as <date1;date1).
However during verification of this behavior DBAG has uncovered an inconsistency of the behavior, the system actually behaves like <date;date2>, i.e. files are also generated for the entire duration of of the date2.
Therefore DBAG proposes to ceate a latent fault bug and fix the behavior to be in line with the validations already present in the system.

MSD - MSD20190531: We prefer to update the wording to refer to actual system behaviour i.e. “end of the specified date” for now and we agree the latent fault is linked to inconsistent system behaviour. Wording will need to be updated again after the behaviour is fixed.

DBAG - DBAG proposes to not to include this update in the Batch 5 container update, as it is now clear that the common agreement on the XBID-3632 is no longer valid. Therefore it would be for the best to continue the discussion in the jira ticket and finalize the document without it.

Best regards
Alexandr","16/Jul/19 15:53;radeale;Internal solution to continue via XP-1893.",,,,,,,,,,,,,,,,,,,,,,,,,,,,
XBID CLONE: HLS100 - Iceberg orders modification clarification [WIP],XP-1767,83047,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,06/Jun/19 16:54,31/Aug/20 15:39,22/Feb/21 13:21,18/Jun/19 09:34,XBID 1.5.9,,Pre2020,,Trading,,,,,Batch_6,,,"_TWG FTF 6/6 discussed the point once more and would like to check with DBAG:_

_We think that in the HLS100 there are mistakes in description of chapter 6.4.3.8 and it should be discussed with the DBAG:_
 - _When decreasing the {color:#ff8b00}total quantity -peak size-{color} of an iceberg order to be lower than the current visible quantity, the current visible quantity is reduced to the new peak size and the order does not get a new timestamp._
 - _When decreasing the {color:#ff8b00}total quantity -peak size-{color} of an iceberg order to be higher or equal than the current visible quantity, the current visible quantity remains unchanged and the order does not get a new timestamp_

_Could you please validate TWG FTF proposal and eventually proceed with the Batch 6 ?_

*Document:* HLS100

*Chapter:* 6.4.3.8

*Details:*

*Reason:* TWG request resulting from XBID-4503 discussion.",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4563,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,53740800,,,,,,,,,,XP-174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08w4w:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team 27 [S],Home Office Team 28,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,Production,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jun/19 11:41;radeale;Dear Jirka and FTF members

after evaluating the current behavior DBAG proposes the current change to HLS100:
 - _When decreasing the {color:#ff8b00}total quantity or peak size{color} of an iceberg order to be higher or equal than the current visible quantity, the current visible quantity remains unchanged and the order does not get a new timestamp._

The second described scenario should not be achievable without also modifying the peak size of the iceberg order, therefore the current description is in line with the implementation.

Best regards
 Alexandr",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Collect generated XML reports in advance,XP-1760,82950,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,uv683,uv683,uv683,05/Jun/19 11:02,04/Aug/20 19:36,22/Feb/21 13:21,14/Jun/19 10:56,,,Pre2020,,SLA Report Tool,,,,,,,,"It would be reasonable to check the status of ACER report generation before the July delivery date. Report tool with ACER collectors is already running on PROD for some time so there should be generated XML reports for previous months.

Verify that reports are there, download them and add them into XP-1488. At the beginning of July only the last reports for June will be downloaded",,de698,uv683,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Jun/19 14:49;uv683;2019-01-acer-reports.zip;https://jira.deutsche-boerse.com/secure/attachment/70458/2019-01-acer-reports.zip","13/Jun/19 14:49;uv683;2019-02-acer-reports.zip;https://jira.deutsche-boerse.com/secure/attachment/70459/2019-02-acer-reports.zip","13/Jun/19 14:49;uv683;2019-03-acer-reports.zip;https://jira.deutsche-boerse.com/secure/attachment/70460/2019-03-acer-reports.zip","13/Jun/19 14:49;uv683;2019-04-acer-reports.zip;https://jira.deutsche-boerse.com/secure/attachment/70461/2019-04-acer-reports.zip","13/Jun/19 14:49;uv683;2019-05-acer-reports.zip;https://jira.deutsche-boerse.com/secure/attachment/70462/2019-05-acer-reports.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,53481600,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s00010420iw",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 27,Alpha Team Sprint 28 [S],,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Jun/19 15:09;uv683;I have found that there is an issue where there are missing last two hours from monthly reports. This is caused by program ""bug"". Moreover on some environments (e.g. SIMU) spm processing time metrics is not collected because it is missing an alias in sql script.

I have fixed both of these issues in [https://github.deutsche-boerse.de/dev/m7.xbid-report-tool/pull/201/.|https://github.deutsche-boerse.de/dev/m7.xbid-report-tool/pull/201/]

New deployment into SIMU and PROD have to be scheduled with version 2.17","13/Jun/19 09:26;uv683;Because of the above mentioned issue, it it necessary to generate reports  from localhost","13/Jun/19 14:49;uv683;Reports have been generated from my localhost.

Special note to bid ask spread report: It combines data from bid_ask_spread and contract history tables from xbid core db. history table is cleaned up after 45 days so it is not possible to easily obtain report for 2019-04,2019-03,2019-02. However this contract history table is used only for the information if the contract was block or canonical. I have rewritten given SQL so it determines this from length of the contract. I have tested it on 2019-05 report which can be obtained in the original way and they were the same.
 * XBID with bid ask spread collector has been deployed on *2019-02-13*. Which means that this is the first month were some bid ask spread data exists but are not continuous.
 * other generators are in report tool and have data since *2019-01-07*. That means that January is not complete.

From March, all reports should be complete.
 * [^2019-01-acer-reports.zip]
 * [^2019-02-acer-reports.zip]
 * [^2019-03-acer-reports.zip]
 * [^2019-04-acer-reports.zip]
 * [^2019-05-acer-reports.zip]

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update MFG120 - Central Admin Manual,XP-1758,82899,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,04/Jun/19 12:01,31/Aug/20 15:38,22/Feb/21 13:21,11/Jul/19 10:19,,,Pre2020,,Trading,,,,,,,,"{color:#00875a}*Up to date Comtrader user manual* {color}

After the Batch 5 functional specification update is finished, please update also MFG120 user manual to be in line with the specification documents.

Also include any tickets where such update was promised, for example:
 - XBID-4461

The user manuals are not specification documents, it is not necessary nor recommended to include a change log.",,radeale,rg535,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4593,,,,,,,"12/Dec/19 12:30;zi174;MFG120 - Central Admin Manual XBID-ComTrader v10.0_clean.docx;https://jira.deutsche-boerse.com/secure/attachment/78559/MFG120+-+Central+Admin+Manual+XBID-ComTrader+v10.0_clean.docx","24/Jun/19 10:36;rg535;MFG120 - Central Admin Manual XBID-ComTrader v9.3.docx;https://jira.deutsche-boerse.com/secure/attachment/70768/MFG120+-+Central+Admin+Manual+XBID-ComTrader+v9.3.docx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,16502400,,,,,,,,,,XP-174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08ut6:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 29 [S],,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jun/19 10:35;rg535;EMAIL from Martin Vancura on 20.06. We have reviewed the MFG120 user manual. 
Two comments remain: one is about unavailable data on one form, second about missing status value in of the lists. 
See Version 9.3 attached.
","26/Jun/19 14:27;radeale;Thanks, I'll process the comments as well as all related tickets.","05/Dec/19 11:15;radeale;Hi Jakub,

please perform a quick review of the clean version of MFG120 v9.4 and upload it to the external ticket (XBID-4593).

[Document Location|https://projects.deutsche-boerse.de/sites/ps0080/Shared%20Documents/02%20XBID%20Releases/XBID%202.0/User%20Manuals/]

Thanks, Alexandr","12/Dec/19 12:32;zi174;The document was sent out.","14/Aug/20 16:14;radeale;TWG is not responding, will reopen this ticket if needed.",,,,,,,,,,,,,,,,,,,,,,,,,,,
XBID CLONE: HLS100A - AAC update for IC which is part of the Common ATC border ,XP-1733,82652,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,27/May/19 17:59,31/Aug/20 15:38,22/Feb/21 13:21,14/Aug/20 16:12,,,3.1.1,,,,,,,waiting-customer,,,"*Document*: HLS100A

*Chapter*: 2.10.4	AAC on Common ATC ICs

*Details*: Chapter text

{code}When a new AAC file is submitted for an IC in the Common ATC border configuration after the capacity publication, all previous AAC values on all ICs in the Common ATC border are invalidated and have to be submitted before the capacity is re-published to establish correct ATC values.{code}

Replaced with:

{code}When a new AAC file is submitted for an IC in the Common ATC border configuration after the initial capacity publication (either manually or automatically by configuration - as described in chapter 2.10.3 Automatic publish), all previous AAC values on all ICs in the Common ATC border are invalidated. To establish correct ATC values all AAC files have to be re-submitted.

If there is already capacity information published on an IC, a newly received AAC file is always automatically published regardless of the IC service state. The only exception is uploading via GUI where auto-publishing is not effective.{code}

*Reason:* The request for description enhancement (below), also XBID-4495.

----

Dear DBAG,

we kindly ask you to create a specs clarification ticket as follows:

Article 2.10.4:

*Please* *replace the following text:*

_When_ _a new AAC file is submitted for an IC in the Common ATC border configuration after the capacity publication, all previous AAC values on all ICs in the Common ATC border are invalidated and have to be submitted before the capacity is re-published to establish correct ATC values._

*By the following text*

_When_ _a new AAC file is submitted for an IC in the Common ATC border configuration after the initial capacity publication (either manually or automatically by configuration as described in section 2.10.3), all previous AAC values on all ICs in the Common ATC border are_ _invalidated;_ _to_ _establish correct ATC_ _values_ all AAC files have to be re-submitted_._

_To_ _establish that all new AAC values on all ICs in the Common ATC border are taken into the ATC calculation all at the same time, the service must be set to Halt prior to the submission of the first new AAC file. Setting the service to Halt on the Common ATC border will prevent the Automatic intraday capacity publishing (see section 2.10.6) after each AAC file submission._ 

_Best regards_

_David_",,qo794,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4539,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,16502400,,,,,,,,,,XP-174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y09j3r:z",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team 26,Home Office Team 27 [S],Home Office Team 28,Home Office Team Sprint 29 [S],Home Office Team Sprint 30,Home Office Team Sprint 31 [S],Home Office Team Sprint 32,Home Office Team 33 [S],Home Office Team Sprint 34,Home Office Team Sprint 35 [S],Home Office Team Sprint 36,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,Production,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/May/19 17:59;radeale;Dear [~DMyska@e-bridge.com],

is this spec clarification ticket a result of XBID-4495? Or any other ticket?

Kind regards
Alexandr","27/May/19 18:00;DMyska@e-bridge.com;Dear Alexandr,

Yes, it can be linked to XBID-4495. We wanted to ask for this clarification even earlier without having any ticket at hand but XBID-4495 match exactly the reason why the clarification is requested.

Best regards

David

 ","28/May/19 13:09;qo794;The following statement is not true, if there is already some capacity on an IC a newly received AAC file gets always automatically published regardless of the IC service state, the only exception is uploading via GUI where auto-publishing is not in place.
{quote}
Setting the service to Halt on the Common ATC border will prevent the automatic intraday capacity publishing after each AAC file submission
{quote}","03/Jun/19 16:33;radeale;{quote}Dear Alexandr,

Thanks for the feedback. We understand your reasoning therefore we would be fine to remove the sentence ""Setting the service to Halt on the Common ATC border will prevent the automatic intraday capacity publishing after each AAC file submission""

Please confirm the rest of the proposed clarification is fine for DBAG.

Best regards

David{quote}","03/Jun/19 16:38;radeale;Kamil, what do you think about the following wording?

{code}When a new AAC file is submitted for an IC in the Common ATC border configuration after the initial capacity publication (either manually or automatically by configuration - as described in chapter 2.10.3 Automatic publish), all previous AAC values on all ICs in the Common ATC border are invalidated. To establish correct ATC values all AAC files have to be re-submitted.

If there is already capacity information published on an IC, a newly received AAC file is always automatically published regardless of the IC service state. The only exception is uploading via GUI where auto-publishing is not effective.{code}","04/Jun/19 07:17;qo794;From my point of view it's good...","24/Jun/19 17:11;radeale;Kamil, what do you think of this rather cumbersome wording proposed by the customer?

{code}To establish that all new AAC values on all ICs in the Common ATC border are taken into the ATC calculation before the capacity can be allocated the service must be set to Halt prior to the submission of the first new AAC file and set to allocation again after all AAC new files are submitted. The only way to incorporate multiple AAC file update is by uploading them via GUI where auto-publishing is not effective. Using other ways of file submission will result in incorrect ATC calculation in the case that there are more than one AAC files specified.{code}

From my point of view it reflects the current working of the system tho I don't like it.","25/Jun/19 08:38;qo794;The part regarding halting is not correct, moreover I agree with you, the way how it is describe is not precise and is totally weird, for instance ""incorrect ATC calculation"" is misleading and indicates the system does not behave correctly in such cases which is not true at all.","25/Jun/19 14:52;radeale;Dear David and MSD members,

it is not correct that the IC has to be halted to process new AAC values - if they come from one AAC file. So we propose to following wording to the last paragraph:

{code}If there is already capacity information published on an IC, a newly received AAC file is always automatically published regardless of the IC service state. The only exception is uploading via GUI where auto-publishing is not effective, therefore to fully publish AAC values from more than one AAC file, these files have to be uploaded via the GUI and published manually.{code}

Best regards
Alexandr","14/Aug/20 16:12;radeale;Still with the MSD. Will reopen this ticket if needed.",,,,,,,,,,,,,,,,,,,,,,
Report Tool cannot download data from BidAskSpread table,XP-1727,82613,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Critical,Done,uv683,uv683,uv683,27/May/19 10:58,04/Aug/20 19:35,22/Feb/21 13:21,13/Jun/19 08:41,,,Pre2020,,SLA Report Tool,,,,,,,,"There were changes in XBID 2.0 that changed name of some columns in bid_ask_spread db table.

Namely
{code:java}
 alter table bid_ask_spread
 rename market_area_eic to bidding_zone_eic;
alter table bid_ask_spread
 rename market_area_long_name to bidding_zone_long_name;
{code}
However thi caused incompatiblity between latest Report Tool version 2.15 and xbid 1.5.9 which are both deployed on production. Report tool is trying to download data from new column names but XBID 1.5.9 doesn't know them.

Fix report tool in a way that it will be backward compatible and able to use both schemas.

 ",,uv683,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,55036800,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s00010420ir",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 27,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ASR010C Losses Schedule for PoC,XP-1714,82500,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,rg535,rg535,rg535,23/May/19 10:42,04/Aug/20 19:31,22/Feb/21 13:21,12/Jun/19 12:59,,,Losses ASR,,,,,,,Waiting-Internal,,,"The XBID Parties have mandated the PoC for losses (ASR010c) with the following extras:
 - additional performance runs for 15 minute products

 - Recall and Cancel: proposal on the technical solution for the recall and cancel procedures including the functional description of the chosen recall and cancel solution with the impact analysis

- Analysis of impact on Shipping Module files and updates to file definitions and specifications

- Assessment of how explicit allocations impact the solution for losses

- Analysis on the changes to the data structures change  as well as data migration plan with respect to changes in database entities / structure

I need updates for the following milestones in the schedule (section 3.6) of the ASR:
* The first telephone conference will take place in MM YYYY
* Performance related tasks are expected to be conducted between MM and end-MM 2019
* The second workshop / telephone conference is anticipated for MM 2019. The focus will be on the performance scenarios
* The third telephone conference / workshop is anticipated for end-MM 2019. The focus will be on the results of the proof of concept. 

If you want to change the tasks / workshops, etc just let me know / add or modify them.

Thanks,

Suzanna
",,de698,rg535,tz118,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/May/19 17:23;de698;ACR010c Analysis Losses P III_V1.4_AR.docx;https://jira.deutsche-boerse.com/secure/attachment/69681/ACR010c+Analysis+Losses+P+III_V1.4_AR.docx","30/May/19 10:35;tz118;ACR010c Analysis Losses P III_V1.4_AR_sj.docx;https://jira.deutsche-boerse.com/secure/attachment/69916/ACR010c+Analysis+Losses+P+III_V1.4_AR_sj.docx","24/May/19 17:23;de698;Losses PoC timeline NEW.vsdx;https://jira.deutsche-boerse.com/secure/attachment/69682/Losses+PoC+timeline+NEW.vsdx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,54777600,,,,,,,,,,XP-955,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08t3c:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team 26 [S],Alpha Team Sprint 27,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/May/19 17:26;de698;Attached are initial inputs for scheduling update in section 3.6.

Further discussion with the team and PO needs to follow.","30/May/19 10:05;tz118;Dear Suzanna,

please find attached outcome based on the WS and discussion with PO and developers (Jirka K, Pavel C, Michal B, Miroslav B, David S, Michal P):
 * The first telephone conference is anticipated for end of August or beginning of September 2019
 * Performance related tasks are expected to be conducted between August and end-October 2019
 * The second workshop / telephone conference is anticipated for beginning of October 2019. The focus will be on the performance scenarios.
 * The third telephone conference / workshop is anticipated for end-November 2019. The focus will be on the results of the proof of concept.

Thanks and regards,
 Stefan

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
HLS100 - Order modification with central admin,XP-1699,82373,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,de698,de698,de698,21/May/19 11:47,04/Aug/20 19:36,22/Feb/21 13:21,03/Jun/19 14:24,,,Pre2020,,,,,,,Batch_6,,,"Proposed spec update based on XBID-4505. Please review.

*Document:* HLS100
 *Chapter:* 6.9.1 Introduction
 *Details:* text to be added
 ""_The status of an order can be modified by all users of the same balancing group that an order was entered for (see chapter 9.4 Balancing Groups) or by Central Admin users (by the means of indirect action. e.g. when the Central Admin halts a DA, all orders entered on that DA are hibernated), while in the XBID solution, an exchange will be configured to only have one user per balancing group._""

*Chapter:* 6.9.3 Status Inactive
 *Details:*
 in the sentence ""_It is only visible to the exchange it was submitted for or central admin users and can still be modified or deleted._""
 to be deleted: ""_...or central admin users…_""",,de698,tm431,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4526,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,54345600,,,,,,,,,,XP-174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08sc8:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team 26 [S],Alpha Team Sprint 27,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/May/19 11:57;tm431;approved","21/May/19 12:23;de698;External spec clarification Jira created and sent for review.","24/May/19 17:32;de698;This particular spec clarification Jira was rejected by the customer.

However, the discussion about the issue continues.

If the external Jira is closed - because we would prefer to set up a new fresh spec.clarification container in case the customer requests anything in the end - this Jira can be closed as well.","03/Jun/19 14:24;de698;XBID-4526 Closed/Resolved-Rejected

XBID-4505 discussion continued, Jira is Closed/Not-a-bug now.

New Batch 6 spec clarification created XBID-4550 (remains Open till Batch 6 is finished).",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Batch 5 Documentation Update - WIP,XP-1685,82239,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,17/May/19 15:43,12/Aug/20 13:56,22/Feb/21 13:21,11/Jul/19 10:20,,,Pre2020,,Capacity,Shipping,Trading,,,,,,Just a placeholder for B5 administration and stuff.,,radeale,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,54345600,,,,,,,,,,XP-174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08wq2:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team 26,Home Office Team 27 [S],Home Office Team 28,Home Office Team Sprint 29 [S],,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,Production,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/May/19 16:47;radeale;Done for this sprint...","31/May/19 16:39;radeale;Please review the three clean documents.","03/Jun/19 14:16;zi174;The documents look good","04/Jun/19 12:03;radeale;Note to myself: Once XBID-4500 is concluded, get from the customers info about the user manuals they want to be updated and move the associated update tasks to the top of the backlog.",,,,,,,,,,,,,,,,,,,,,,,,,,,,
DFS510 - ModifyAllOrders vs ModifyAllOrdrs - typo clarification,XP-1658,81976,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,de698,hj444,hj444,13/May/19 13:33,06/Nov/20 11:07,22/Feb/21 13:21,24/Jun/19 09:02,,,Pre2020,,,,,,,Agreed,Batch_6,,"In Document DFS510
 * chapter 5.3.5 Modify All Orders (*ModifyAllOrdrs*)
 _Inconsistency with mentioned_
 * message structure description  *ModifyAllOrders* for XML tag.

Could be please unified the message name.
 Thank you.

note:
 Sending 'ModifyAllOrders' - system sends an error message : 
 Invalid request: cvc-elt.1: Cannot find the declaration of element 'ModifyAllOrders'",,de698,hj444,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4506,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,55555200,,,,,,,,,,XP-4090,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08q9s:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/May/19 15:34;de698;External spec clarification Jira created under Batch 6 and assigned to customer for review.","20/May/19 17:15;de698;Spec update agreed as Batch 6 item.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
XBID individual CuTes- 22/5 new XBID 2.0 deployment to UAT - release new ComTrader,XP-1654,81962,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,rehapav,rehapav,rehapav,13/May/19 10:42,06/Nov/20 10:51,22/Feb/21 13:21,27/May/19 10:49,,,Pre2020,,,,,,,,,,Plan delivery of new ComTrader version for 22/5 according to the required environment list ,,rehapav,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,56246400,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08oif:zr",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team 26 [S],,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"XBID CLONE: DFS700, DFS800 - marketAgreement.mRID in RID file for Explicit Balancing group",XP-1626,81700,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,06/May/19 13:33,12/Aug/20 13:56,22/Feb/21 13:21,29/May/19 16:44,XBID 2.0,,Pre2020,,Capacity,,,,,Batch_6,,,"*Document*: DFS700

*Chapters*:

*Details:*

*Document*: DFS800

*Chapters*: 4.7 Appendix

*Details:* RID file, marketAgreement.mRID details, text appended after this text (new text in the grey box):

Unique identification of the contract between auction office and rights holder.
{code:java}
MD5 hash value of [Date YYYYMMDD]-[DA1 EIC code]-[DA2 EIC code]-[EIC Code of the BG].{code}

*Chapters*: 4.2.5.1 RID XML-Schema

*Details:* Text replaced for ContractIdentification:

The contract identification of the time series instance. This must be the number that has been assigned by the Transmission Capacity Allocator.

With:

{code}The contract identification of the time series instance. 
This must be an identifier that has been assigned by the Transmission Capacity Allocator.
The code value is the same as for the TSO RID files marketAgreement.mRID for explicit participant allocations for relevant explicit participant, date and delivery areas combination.{code}

*Details:* Text replaced for TimeSeriesIdentification:

The identification of the time series instance.
This must be a unique number that is assigned by the sender for each time series in the document.

With:

{code}The identification of the time series instance.
This must be a unique indetifier that is assigned by the sender for each time series in the document.
The code value is the same as for the TSO RID files marketAgreement.mRID for explicit participant allocations for relevant explicit participant, date and delivery areas combination.{code}

*Reason:* Outcome of XBID-4209 and XBID-4434.",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4491,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,56505600,,,,,,,,,,XP-174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08ols:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team 25 [S],Home Office Team 26,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,Production,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/May/19 16:39;radeale;_Date-DA1 EIC code-DA2 EIC code-EIC Code of the BG_

_Hashed_

901c075709e4ffe1747773b188fb7871 = 20190509-10YDE-RWENET---I-10YAT-APG------L-11XREDISPATCH–T",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CR088 Comtrader Security - Prepare 3 historical links to download server (15th May deadline),XP-1599,81540,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Critical,Done,ll664,uv683,uv683,02/May/19 12:14,06/Nov/20 11:02,22/Feb/21 13:21,16/May/19 10:11,,,XBID 2.0,,ComTrader,,,,,,,,"# -Build a new zip files of the requested version - it should include index.html, antivirus check, 2 zip files for 32 and 64 version, sha256 files and webstart files (not sure if I didn't miss something). The index file should contain URLs that leads to the version specific directory - e.g.- [-http://m7trading-test.deutsche-boerse.com/xbid-ctpa/webstart/comtrader-2.5.1.45-]
 # The content of the zip should be available in a directory that has name of the version - e.g. comtrader-2.5.1.45
 # Deploy two previous versions zip file into artifactory to be downloadable
 # Via REST API it checks the latest 2 deploy packages from our artifactory for the requested environment
 # Download the zip file for each of them which are the equivalent of the zip package from point 1
 # Unpack the zip files into directories that has the name of the version
 # Generate index.html - as a road map to all version - it should contain relative links to their directories
 # Pack the index.html and all 3 directories to one uber zip",,uv683,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-1507,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sw455,,,,,,,,,,,,,,,57196800,,,,,,,,,,XP-4093,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08eso:1s",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 25,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,comtrader-2.5.x,XP-69,XP-2583,XP-2554,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CR088 Comtrader Security - Calculate fingerprint +antivir check+ prepare way how to validate released version (consider uber jar),XP-1508,80832,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,eh941,tm431,ei349,11/Apr/19 12:40,06/Nov/20 11:17,22/Feb/21 13:21,17/Apr/19 14:06,,,Pre2020,,,,,,,,,,See text of required change in PDF,,ei349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,59011200,,,,,,,,,,XP-4093,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s007o",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 23,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,comtrader-2.5.x,XP-69,XP-2583,XP-2554,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CR088 Comtrader Security - Get rid of gradle so that CT can be extended,XP-1507,80831,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,uv683,tm431,ei349,11/Apr/19 12:40,06/Nov/20 11:02,22/Feb/21 13:21,02/May/19 12:18,,,Pre2020,,,,,,,,,,"After discussion with [~uv683] and [~ll664] we decided to go the following way:
 # Get completely rid of gradle in ComTrader project",,ei349,qo794,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,59011200,,,,,,,,,,XP-4093,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08eso:28",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 24 [S],,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,comtrader-2.5.x,XP-69,XP-2583,XP-2554,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prepare the ACER reports for H1 2019,XP-1488,80736,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ll664,de698,de698,10/Apr/19 10:39,04/Aug/20 19:36,22/Feb/21 13:21,02/Jul/19 09:50,,,Pre2020,,,,,,,,,,"*Pre-condition:* Report Tool deployed to PROD XP-1487

*Deadline:* {color:#de350b}before Friday 5th of July{color}

*What needs to be done:*
 * Migrate the data with EIC mapping script
 * Generate the reports
 * Check correctness
 * Copy to sFTP - see XP-1122

Note: co-ordination with the customer can be expected",,de698,ll664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-1760,TECHLOG-2542,XP-2106,,,,,"01/Jul/19 14:04;ll664;ACER_2019_H1.zip;https://jira.deutsche-boerse.com/secure/attachment/70970/ACER_2019_H1.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,51926400,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s00010420101",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 29,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Jun/19 16:15;de698;After discussions with the team (alpha, hot, bizops, techops, acm) suggested next steps are:
 * July report will be generated on Monday 01/07
 * all generated reports can be handed over to techops
 * techops can store the reports on SFTP (as XP-1122 and TECHLOG-2038) -> we will need {color:#ff8b00}access details for the customer{color}
 * correct {color:#ff8b00}procedure how to communicate delivery details to customers{color} will be clarified on Monday morning
 * we will inform the customers about the reports delivery also in TWG/FTF call on Monday

 ","01/Jul/19 14:04;ll664;Reports ready, [~de698] pls check, cheers.","01/Jul/19 14:53;de698;Sanity check done. techlog Jira created.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deploy the Report Tool into production [JULY],XP-1487,80735,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Critical,Done,ll664,de698,de698,10/Apr/19 10:37,12/Aug/20 13:56,22/Feb/21 13:21,28/Jun/19 13:57,XBID 1.5.9,XBID 2.0,Pre2020,,SLA Report Tool,,,,,,,,"Needs to be done before JULY. This is a pre-condition for XP-1488.

Dev task.

No test, nor Funct.

Please deploy the *newest version only for {color:#de350b}one node{color}*. The *second node please keep it as is.*

The reason why we want to keep the one node untouched is that we can't be 100 % sure that the new version will work. Of course we tested it and found/fixed bugs but there might be corner cases which didn't appear yet. The data from which the report is generated are housekeeped and we are afraid of losing them.",,de698,eh941,ei349,ll664,,,,,,,,,,,,,,60,60,,0%,60,60,,,XP-1488,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,52272000,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s000104201009",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 29,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,Production,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Apr/19 15:53;ei349;Communication with customer about prod deployment before 2.0 release date (June vs October)","10/Apr/19 15:55;ei349;[~eh941] can you fill the description please? ","11/Apr/19 10:17;eh941;Description added","15/May/19 14:43;ei349;Deployment and data migration agreed. 

OPSCOM acknowledges proposal from DBAG to perform first migration of PROD data on 1st or 2nd July.","28/Jun/19 13:57;ll664;Report Tool 2.17 deployed and running.",,,,,,,,,,,,,,,,,,,,,,,,,,,
CR088 Comtrader Security - Integrate all CR088 Issues,XP-1480,80660,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,tm431,tm431,09/Apr/19 08:26,06/Nov/20 11:03,22/Feb/21 13:21,16/May/19 10:16,,,XBID 2.0,,,,,,,,,,See text of required change in PDF,,ei349,ek176,ll664,tm431,,,,,,,,,,,,,,,,,,,,,,,,XBID-3069,,,,XP-1509,XP-1510,XP-1507,XP-1508,,,,,,,,,,"09/Apr/19 08:26;tm431;CR088 Improving Security Client Software Provision_v.3.0.docx;https://jira.deutsche-boerse.com/secure/attachment/67823/CR088+Improving+Security+Client+Software+Provision_v.3.0.docx","09/Apr/19 08:26;tm431;Request_for_CR_Improving security of the client software provision.pdf;https://jira.deutsche-boerse.com/secure/attachment/67824/Request_for_CR_Improving+security+of+the+client+software+provision.pdf","09/Apr/19 08:26;tm431;Request_for_CR_Improving security of the client software provision_v2.docx;https://jira.deutsche-boerse.com/secure/attachment/67825/Request_for_CR_Improving+security+of+the+client+software+provision_v2.docx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,55987200,,,,,,,,,,XP-4093,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08eso:1w",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 24 [S],Alpha Team Sprint 25,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Apr/19 10:42;ek176;TechOps ticket is already in place: TECHLOG-2092 since March, 13

Note: Please do not use MD5 nor SHA1 (collision attack possible): https://en.wikipedia.org/wiki/Hash_function_security_summary

Note: Take a look at 'sha256sum -c file.sha256sums': You can check multiple files with a standard command. IMHO we should mimic this behavior.

Note: Java WebStart: How to find downloaded JAR file: https://stackoverflow.com/a/2635520","11/Apr/19 12:40;ei349;Issue split into:
|XP-1507|CR088 Comtrader Security - Prepare 3 historical links to download server|
|XP-1508|CR088 Comtrader Security - Calculate fingerprint + prepare way how to validate released version (consider uber jar)|
|XP-1509|CR088 Comtrader Security - Generate release notes|
|XP-1510|CR088 Comtrader Security - Integrate all CR088 Issues|
","16/May/19 10:15;ll664;Closing this one. The only missing thing is to deploy to cute together with enabling of HTTPS, covered in XP-1510.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
update contractual documents related to service boundary uplift for the second wave,XP-1475,80634,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,gd553,tz118,tz118,08/Apr/19 11:55,13/Aug/20 19:47,22/Feb/21 13:21,16/Apr/20 13:36,,,3.1.0,,,,,,,SLA,,,"{color:#00875a}*Documents alignment*{color}

items related to boundaries uplift (ASR003) need to be reflected and updated in the Exhibit 20 and Attachment 5B, possibly Exhibit 1

This shall be part of a 5th amendment.

AC
 * review ASR003_RTS3 Slice B_List of Service Level Boundaries KPIs_v5 (attached)
 * review current contractual documentation and identify changes
 * update documentation based on the agreed changes on JSC
 * work with ACM with tregards to finalization and external coordination",,ei349,gd553,tz118,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Apr/19 11:55;tz118;ASR003_RTS3 Slice B_List of Service Level Boundaries  KPIs_v5.xlsx;https://jira.deutsche-boerse.com/secure/attachment/67807/ASR003_RTS3+Slice+B_List+of+Service+Level+Boundaries++KPIs_v5.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,26956800,,,,,,,,,,XP-174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s0001042019",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Apr/20 13:36;ei349;done as part of 5th amendment. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Batch 5 containers - response to comments,XP-1474,80632,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,de698,de698,de698,08/Apr/19 11:18,06/Nov/20 11:18,22/Feb/21 13:21,15/Apr/19 13:06,,,Pre2020,,,,,,,,,,"We skipped two TWG/FTF calls.

In the meantime, we received per email several comments to Batch 5 containers - see the email attached.

*To Do:* analyse the comments and prepare response.",,de698,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Apr/19 11:18;de698;Re PX XBID - TWG Joint FTF - Agenda of the meeting 01.04.2019.msg;https://jira.deutsche-boerse.com/secure/attachment/67798/Re+PX+XBID+-+TWG+Joint+FTF+-+Agenda+of+the+meeting+01.04.2019.msg",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Batch 5 containers: XBID-3678, XBID-3789, XBID-3697, and XBID-3682 are in status Resolved, labeled Agreed.
XBID-3801 is subject to continuing review and will be addressed further via standard spec clarification process.",,,,,,,,,,59270400,,,,,,,,,,XP-174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08eso:5i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 22 [S],Alpha Team Sprint 23,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
UAT Phase II - Performance tests preparation ,XP-1471,80596,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,,ei349,ei349,05/Apr/19 17:19,04/Aug/20 19:35,22/Feb/21 13:21,11/Jun/19 10:06,,,Pre2020,,,,,,,UAT,,,"Analyze and prepare approach for the UAT Phase II. Check the past scenarios and prepare improvements. Outcome of this task is list of ideas for the future.

 *Please have a look with multiple people and check the errors and mistakes from the past performance test runs.*

There were some test cases already in the past UATs performed. It would be good idea to check what they covered. Think if they still reflect the latest system setup. Try to also think if these tests cover all critical scenarios and think about new ones if needed. 

 Check and align with attached file used during the 1.5.x UAT. 

 For more information please check with [~tm431], [~od044] and [~tz118]

 

AC: 
 - List of improvements of current scenarios and processes 
 - draft of UAT II test plan 
 - tested execution of performance scenarios.  
 - output of this task will be used for XP-1662

UAT II - Performance phase in SharePoint: [https://projects.deutsche-boerse.de/sites/ps0080/_layouts/15/start.aspx#/Shared%20Documents/Forms/AllItems.aspx?RootFolder=%2Fsites%2Fps0080%2FShared%20Documents%2F02%20XBID%20Releases%2F04_XBID%202%2E0%2FUATs%2FUAT%20II%20Performance&FolderCTID=0x0120001EB961193A6D2F4CA27436315BDB6B44&View=%7B6C81558C-B2AA-42D3-A854-B2860B7C1829%7D]",,ei349,tr866,tz118,,,,,,,,,,,,,,,,,,,,,,,XP-1662,,,,,,,,,,,,XBID-4341,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,56160000,,,,,,,,,,XP-1598,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08eso:1ti",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 25,Alpha Team 26 [S],Alpha Team Sprint 27,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/May/19 13:23;tz118; 

RTS3SB scenarios link

S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\Planned\RTS3\slice B\scenarios\Done

 

more info regarding SB tests can be found here

S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\Planned\RTS3\slice B","10/May/19 13:29;tr866;https://confluence.energy.svc.dbgcloud.io/display/XBID/RTS+3","13/May/19 14:40;tr866;Info Collected from previous runs from emails, slack etc.

*Confluence page:*
 [https://confluence.energy.svc.dbgcloud.io/display/XBID/RTS+3]

*Jenkins Job:*
 [https://englobjci1.deutsche-boerse.de/job/Energy/job/xbid-performance-test/]

e.g.

RELEASED_VERSION 1.5.4
 SCENARIO_NAME xbid-rts3b-2019-sc01example-v01_wave2.xlsx
 TEST_USER XBDBX001
 JAVA_OPTS_COR -Dorderbook.depth.maxCount=31 -Dorderbook.depth.effectiveMaxOrderbookDepth=50
 DATA_SET_NAME rts3-sliceb-data-fake
 DATA_SET_VERSION 1.3.39
 SPM_VERSION 1.0.36

*Perf script vm: xbinterts1*
 server: 10.139.41.47
 xbinterts1.deutsche-boerse.de

Logs from performance run:
 /xbid/logs/xbid-perf-test-run/xbid-perf-test-run.log
 Scenario files: (there was some issue with owner of the files? bendtom vs root?)
 in '/xbid/performance/test-client/scenarios_input/'

*Perf Reports VM:*
 xbperfsla1

*Manual run of the test:*
 # run deployment with DB CleanUp and with dataset rts3-sliceb-data-fake or rts3-slicebperf-data-fake
 # Set Market from Halt to Trading in SOB Manually
 # Set all Interconnectors in CMM to Allocation and Publish Capacity to All
 # Copy the right configuration file to:
 /xbid/performance/test-client/configuration/rts3_config_perf_XBDB01XX.xml
 # Check if correct version of test-scenario-creator-X.X.XX-internal-with-deps.jar in /xbid/performance/test-client/scripts/generateAndRunForPx.sh is used
 # run performance script manually:
{code}
 /xbid/performance/test-client/scripts/generateAndRunForPx.sh XBDB01XX /xbid/performance/test-client/scenarios_input/UC1v01.xlsx > /tmp/UC1.log &
{code}

*Kibana Link:*
 [https://kibana.energy.svc.dbgcloud.io/app/logtrail#/?q=*&h=All&t=Now&i=xbid_lipa-tomcat-*&_g=(])

*Grafana Link:*
 [https://grafana.energy.svc.dbgcloud.io/d/fVy5cU4mk/java-statsd-core?from=now-3h&orgId=4&to=now&var-environment=perf&var-group=tomcat&var-host=All&var-interval=$__auto_interval_interval&refresh=1m]

*IDEA - Generation of reports from logfile:*
 -Dspring.profiles.active=perf-file
 --report=AllUat2 --output=report.xls --from=2018-08-29T11:56:34.000 --to=2018-08-29T12:51:32.000 --filenames=/home/duken/Downloads/xb_xbid_perf_cor-1_standard_ixe.log

*IDEA - Generate reports from elastic:*
 main class: com.deutscheboerse.energy.m7.ReportTool
 VM options: -Dspring.profiles.active=perf-elastic
 program arguments: --report=AllUat2 --output=report_perf.xls --from=2018-10-10T16:00:40.000 --to=2018-10-10T16:57:26.000 --dir=/home/duken/Downloads/perf-core-log/VM
{code:sql}
select ''||'First order from ""BG-DB---------01TRD001"" in system)',       min(last_update_time) AS COUNT from cx_101_order_history where last_update_user = 'BG-BGPX-------01TRD001' and action = 'UADD'
UNION ALL
select ''||'First non prefil order from ""BG-DB---------01TRD001"" in system)',       min(last_update_time) AS COUNT from cx_101_order_history where last_update_user = 'BG-BGPX-------01TRD001' and action = 'UADD' and client_order_id not like '%Pre%'
UNION ALL
select ''||'Last order from ""BG-DB---------01TRD001"" in system)',       max(last_update_time) AS COUNT from cx_101_order_history where last_update_user = 'BG-BGPX-------01TRD001' and action = 'UADD';
{code}
{code:sql}
select ''||'First order from ""BG-DB---------01TRD001"" in system)',       min(last_update_time) AS COUNT from cx_101_order_history where last_update_user = 'BG-BGPX-------01TRD001' and action = 'UADD'
UNION ALL
select ''||'First non prefil order from ""BG-DB---------01TRD001"" in system)',       min(last_update_time) AS COUNT from cx_101_order_history where last_update_user = 'BG-BGPX-------01TRD001' and action = 'UADD' and client_order_id not like '%Pre%'
UNION ALL
select ''||'Last order from ""BG-DB---------01TRD001"" in system)',       max(last_update_time) AS COUNT from cx_101_order_history where last_update_user = 'BG-BGPX-------01TRD001' and action = 'UADD';
{code}
*SQL Query for number of transactions - Used last time by me:*
{code:sql}
select ''||'ALL_RTS3_ALL_ORDER_EVENTS_INCLUDED_PREFIL' AS NAME, (select count(DISTINCT order_id) from cx_101_order_history WHERE action = 'UADD') + (select count(DISTINCT order_id) from cx_101_order_history WHERE action = 'UDEL' AND text LIKE '%DelPre')
UNION ALL
select ''||'ALL_RTS3_PREFILL_ORDERS' AS NAME,count(*) AS COUNT from cx_101_order_history where action = 'UADD' and client_order_id like '%Pre%' AND text like '%|ADD|%'
UNION ALL
select ''||'ALL_RTS3_DELETED_ORDERS' AS NAME,count(DISTINCT order_id) from cx_101_order_history WHERE action = 'UDEL' AND text LIKE '%DelPre'
UNION ALL
select ''||'AL_RTS3_NEW_ORDERS_WITHOUT_PREFIL' AS NAME,count(DISTINCT order_id) from cx_101_order_history WHERE action = 'UADD' AND text LIKE '%|ADD|%' AND client_order_id NOT LIKE '%Pre%'
UNION ALL
select ''||'Matched orders - action in (PEXE, FEXE)',             count(*) AS COUNT from cx_101_order_history where action in ('PEXE', 'FEXE')
UNION ALL
select ''||'Fully matched orders - action=FEXE',       count(*) AS COUNT from cx_101_order_history where action='FEXE'
UNION ALL
select ''||'Partially matched orders - action=PEXE',   count(*) AS COUNT from cx_101_order_history where action='PEXE'
UNION ALL
select ''||'All trades',                 count(*) AS COUNT from cx_110_trade
UNION ALL
select ''||'All canonical trades',                 count(*) AS COUNT from cx_110_trade where contract_id IN (SELECT contract_id FROM cx_211_contract_history WHERE contract_type = 'CAN')
UNION ALL
select ''||'All block trades',                 count(*) AS COUNT from cx_110_trade where contract_id IN (SELECT contract_id FROM cx_211_contract_history WHERE contract_type = 'BLO')
UNION ALL
select ''||'Local trades (same DAs)',               count(*) AS COUNT from cx_110_trade where tso_area_eic_buy = tso_area_eic_sell
UNION ALL
select ''||'Cross-border trades (different DAs)',        count(*) AS COUNT from cx_110_trade where tso_area_eic_buy != tso_area_eic_sell
UNION ALL
select ''||'Local trades (same MAs)', count(distinct t.trade_id) from cx_110_trade t JOIN cmm_200_area da_buy ON t.tso_area_eic_buy = da_buy.area_eic JOIN cmm_200_area da_sell ON t.tso_area_eic_sell = da_sell.area_eic WHERE da_buy.parent_area_eic = da_sell.parent_area_eic 
UNION ALL
select ''||'Cross-border trades (different MAs)', count(distinct t.trade_id) from cx_110_trade t JOIN cmm_200_area da_buy ON t.tso_area_eic_buy = da_buy.area_eic JOIN cmm_200_area da_sell ON t.tso_area_eic_sell = da_sell.area_eic WHERE da_buy.parent_area_eic != da_sell.parent_area_eic
UNION ALL
select ''||'Explicit allocations all - count(*)',       count(*) AS COUNT from cmm_100_allocation where user_balancing_group_eic = '12XEEX-EXPLICITV'
UNION ALL
select ''||'Explicit allocations all - count(distinct client_id)',       count(distinct client_id) AS COUNT from cmm_100_allocation where user_balancing_group_eic = '12XEEX-EXPLICITV'
UNION ALL
select ''||'The ratio (total number of cmm non explicit allocation) / (total number of trades)' AS NAME, (CASE WHEN (select count(*)::float from cx_111_trade_history)>0 THEN ((select count(*)::float from cmm_101_allocation_history where user_balancing_group_eic != '12XEEX-EXPLICITV') / (select count(*)::float from cx_111_trade_history)) ELSE 0 END)
UNION ALL
select ''||'The ratio (total number of trade allocations) / (total number of trades)' AS NAME, (CASE WHEN (select count(*)::float from cx_111_trade_history)>0 THEN ((select count(*)::float from cx_117_trade_allocation_history) / (select count(*)::float from cx_111_trade_history)) ELSE 0 END);
{code}
*SQL Query for number of transactions - Sent by Franta + his update:*
{code:sql}
select ''||'ALL_RTS3_ALL_ORDER_EVENTS_INCLUDED_PREFIL' AS NAME, (select count(DISTINCT order_id) from cx_101_order_history WHERE action = 'UADD') + (select count(DISTINCT order_id) from cx_101_order_history WHERE action = 'UDEL' AND text LIKE '%DelPre')
UNION ALL
select ''||'ALL_RTS3_PREFILL_ORDERS' AS NAME,count(*) AS COUNT from cx_101_order_history where action = 'UADD' and client_order_id like '%Pre%' AND text like '%|ADD|%'
UNION ALL
select ''||'ALL_RTS3_DELETED_ORDERS' AS NAME,count(DISTINCT order_id) from cx_101_order_history WHERE action = 'UDEL' AND text LIKE '%DelPre'
UNION ALL
select ''||'AL_RTS3_NEW_ORDERS_WITHOUT_PREFIL' AS NAME,count(DISTINCT order_id) from cx_101_order_history WHERE action = 'UADD' AND text LIKE '%|ADD|%' AND client_order_id NOT LIKE '%Pre%'
UNION ALL
select ''||'Matched orders - action in (PEXE, FEXE)',             count(*) AS COUNT from cx_101_order_history where action in ('PEXE', 'FEXE')
UNION ALL
select ''||'Fully matched orders - action=FEXE',       count(*) AS COUNT from cx_101_order_history where action='FEXE'
UNION ALL
select ''||'Partially matched orders - action=PEXE',   count(*) AS COUNT from cx_101_order_history where action='PEXE'
UNION ALL
select ''||'All trades',                 count(*) AS COUNT from cx_110_trade
UNION ALL
select ''||'All canonical trades',                 count(*) AS COUNT from cx_110_trade where contract_id IN (SELECT contract_id FROM cx_211_contract_history WHERE contract_type = 'CAN')
UNION ALL
select ''||'All block trades',                 count(*) AS COUNT from cx_110_trade where contract_id IN (SELECT contract_id FROM cx_211_contract_history WHERE contract_type = 'BLO')
UNION ALL
select ''||'Local trades (same DAs)',               count(*) AS COUNT from cx_110_trade where tso_area_eic_buy = tso_area_eic_sell
UNION ALL
select ''||'Cross-border trades (different DAs)',        count(*) AS COUNT from cx_110_trade where tso_area_eic_buy != tso_area_eic_sell
UNION ALL
select ''||'Explicit allocations all - count(*)',       count(*) AS COUNT from cmm_100_allocation where user_balancing_group_eic = '12XEEX-EXPLICITV'
UNION ALL
select ''||'Explicit allocations all - count(distinct client_id)',       count(distinct client_id) AS COUNT from cmm_100_allocation where user_balancing_group_eic = '12XEEX-EXPLICITV'
UNION ALL
select ''||'The ratio (total number of cmm non explicit allocation) / (total number of trades)' AS NAME, (CASE WHEN (select count(*)::float from cx_111_trade_history)>0 THEN ((select count(*)::float from cmm_101_allocation_history where user_balancing_group_eic != '12XEEX-EXPLICITV') / (select count(*)::float from cx_111_trade_history)) ELSE 0 END)
UNION ALL
select ''||'The ratio (total number of trade allocations) / (total number of trades)' AS NAME, (CASE WHEN (select count(*)::float from cx_111_trade_history)>0 THEN ((select count(*)::float from cx_117_trade_allocation_history) / (select count(*)::float from cx_111_trade_history)) ELSE 0 END);
{code}
{code:sql}
select ''||'All trades',                 count(*) AS COUNT from cx_110_trade
UNION ALL
select ''||'Local trades (same DAs)',               count(*) AS COUNT from cx_110_trade where tso_area_eic_buy = tso_area_eic_sell
UNION ALL
select ''||'Cross-border trades (different DAs)',        count(*) AS COUNT from cx_110_trade where tso_area_eic_buy != tso_area_eic_sell
UNION ALL
select ''||'Local trades (same MAs)', count(distinct t.trade_id) from cx_110_trade t JOIN cmm_200_area da_buy ON t.tso_area_eic_buy = da_buy.area_eic JOIN cmm_200_area da_sell ON t.tso_area_eic_sell = da_sell.area_eic WHERE da_buy.parent_area_eic = da_sell.parent_area_eic 
UNION ALL
select ''||'Cross-border trades (different MAs)', count(distinct t.trade_id) from cx_110_trade t JOIN cmm_200_area da_buy ON t.tso_area_eic_buy = da_buy.area_eic JOIN cmm_200_area da_sell ON t.tso_area_eic_sell = da_sell.area_eic WHERE da_buy.parent_area_eic != da_sell.parent_area_eic;
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
DFS700 - Implicit BG clarification,XP-1470,80592,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,05/Apr/19 16:16,06/Nov/20 11:19,22/Feb/21 13:21,10/Apr/19 16:48,,,Pre2020,,,,,,,,,,"Prepare some explanation that there is only one implicit BG and invite the customer to discussion about the role of the implicit BGs in the CMM.

...Please also consider whether there is any added value to have any other BG marked as 'implicit'. However any discussion resulting into development, blah, blah...

The BG is also to be explicitly stated in _USM998_, sheet _CMM - Config_.

*Document*: DFS700

*Chapter*: 7.1.1 Create New Balancing Group

*Details*:
 Text added after _Step 2(a): Decide whether the Balancing group should be used for implicit allocation only._
{code:java}Note, that the system uses only one balancing group for all implicit allocations. This BG is defined in the system configuration and has to be marked as 'implicit' in the CMM reference data configuration. Marking a different BG as 'implicit' does not make the system to allocate the implicit allocations on this BG.{code}

*Reason:*
The explanation is insufficient regarding the implicit BG role and configuration (see also XBID-4414, XBID-1481).",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,59011200,,,,,,,,,,XP-4090,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08i5c:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office team 22,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Apr/19 16:48;radeale;Will reopen when needed, but let's have some velocity...",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Read Managerial documents,XP-1429,80254,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Trivial,Done,radeale,radeale,radeale,28/Mar/19 16:14,06/Nov/20 10:51,22/Feb/21 13:21,29/May/19 14:45,,,Pre2020,,,,,,,ice,,,"If time permits and everything else is done...

https://projects.deutsche-boerse.de/sites/ps0080/Shared%20Documents/Forms/AllItems.aspx?RootFolder=%2fsites%2fps0080%2fShared%20Documents%2f02%20XBID%20Releases%2f04%5fXBID%202%2e0%2fManagerial%20Documents&FolderCTID=0x0120001EB961193A6D2F4CA27436315BDB6B44",,ei349,qm925,radeale,tz118,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Mar/19 13:16;qm925;Annex_2_Attachment 4D - Quality Plan Framework_v2.0.docx;https://jira.deutsche-boerse.com/secure/attachment/67442/Annex_2_Attachment+4D+-+Quality+Plan+Framework_v2.0.docx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,54777600,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08rtw:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Mar/19 13:25;qm925;Dear all,

Beside the Managerial Documents for R2.0, please also get familiar with the Quality Plan [^Annex_2_Attachment 4D - Quality Plan Framework_v2.0.docx] 

In case o questions, please do not hesitate to let us know.

Best regards,
Simona
","29/May/19 14:33;ei349;I know documents are important but is this topic still valid as we are already in UATs? ","29/May/19 14:45;radeale;Closing as suggested.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"AIP100, DFS310 - SOB Inquiry down XBID behaviour clarification",XP-1427,80245,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,28/Mar/19 14:49,06/Nov/20 11:21,22/Feb/21 13:21,17/Apr/19 10:34,,,Pre2020,,Trading,,,,,Batch_5,,,"*Document:* AIP100

*Chapter:* 1.2.2 SOB-Enquiry

*Details:* Text adedd to the chapter:

When the SOB-Enquiry is down (all its instances are stopped), the SOB Trading is put to halt after a defined conditions involving the Shipping Module data synchronization are met. The process works in the following way:
 - When the Shipping Module cannot get trading data during the SOB-SM data synchronization point (in this case because both SOB inquiries are down), is sets its status to ""unhealthy""
 - The XBID Core polls SM every 30 seconds for its status, after three ""unhealthy"" responses it sets the trading to HALT
 - This in effect means, that when both SOB inquiries are down, it take 60-90 seconds after the next SM synchronisation point (happens every 5 minutes) for trading to be set in HALT depending on when the actual Core-SM alive check takes place in relation to the SM-SOB Inquiry SP (synchronization point)

Examples:
 - If the first ""unhealthy"" reporting alive check is in the moment of the SP, second in 30 seconds after the SP and third after 60 seconds, the trading is set to halt after 60 seconds
 - If the first ""unhealthy"" reporting alive check is 29,9 seconds after the SP, second 59,9 after that and the third 89,9 after, the trading is set to halt after 89,9 seconds
- If the SOB-Enquiry goes down just after the SP, it can take up to 5:59 and 6:29 for the SOB trading to be put to halt (in case the SP takes place every 5 minutes)

*Reason:* Clarification based on outcome of XBID-3532.

*Document:* DFS310

*Chapter:* 2.1 Data processing steps

*Details:* Text removed:
{quote}The SM is not stopped and processing of available data continues if the SOB or the CMM are unavailable as the shipping of concluded trades must proceed.{quote}

*Reason:* The text is outdated and relations between the XBID modules is detailed in AIP100.",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-3742,,,,,,,,,,XP-622,XBID-4242,XBID-3532,XP-1116,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,59529600,,,,,,,,,,XP-4090,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08g20:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office team 22,Home Office team 23 [S],,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Apr/19 16:14;radeale;XBID Core performs regular Regular isAlive checks towards the SOB-Enquiry modules:

- Checks are performed every X seconds, where X is configurable value (_m7.timer.isAlivePeriod_) - when the value is not set, the default 60 is used. (Note there is no correlation of the isAlive checks to to the position of Synchronization Points.)
- When there are Y negative consecutive isAlive checks, SOB-Enquiry modules are deemed unavailable and the SOB Trading is put to HALT. Y is a configurable value (_sAlive.max.failed.requests_) - when the value is not set, the default 3 is used. 
- SOB-Enquiry in deemed available after a positive isAlive check
- There is no automatic unhalting of the Trading once SOB-Enquiry is available again

Note that in case the Shipping Module is not available, the trading is set to halt. For more details see chapter _1.2.5 Shipping Module (SM)_.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Understand and create testcases for failover on Pantroni DB,XP-1411,80181,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,,tm431,tm431,27/Mar/19 14:40,04/Aug/20 19:36,22/Feb/21 13:21,27/Mar/19 14:41,,,Pre2020,,,,,,,,,,Output are testcases for patroni failover. In human readable format (excel),,tm431,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,60220800,,,,,,,,,,XP-1570,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08fq8:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prepare test cases for UAT Failover ,XP-1407,80176,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tm431,ei349,ei349,27/Mar/19 13:48,04/Aug/20 19:35,22/Feb/21 13:21,02/May/19 12:10,,,Pre2020,,,,,,,,,,"We need to analyze and prepare test cases for the UAT Failover testing phase. 

 

There were some test cases already in the past UATs performed. It would be good idea to check what they covered, think if we can use them on the Patroni setup. Try to also think if these tests cover all critical scenarios and implement new ones if needed. 

 

Check and align with attached file used during the 1.5.x UAT. 

 

For more information please check with [~tm431]. 

 

AC: 
 - working failover tests scenarios tested on our test environment. 

UAT V - Failover in SharePoint: https://projects.deutsche-boerse.de/sites/ps0080/Shared%20Documents/Forms/AllItems.aspx?RootFolder=%2Fsites%2Fps0080%2FShared%20Documents%2F02%20XBID%20Releases%2F04_XBID%202%2E0%2FUATs%2FUAT%20V%20Failover&FolderCTID=0x0120001EB961193A6D2F4CA27436315BDB6B44&View=%7B6C81558C-B2AA-42D3-A854-B2860B7C1829%7D ",,ei349,qm925,tz118,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,TECHLOG-2213,,,,,,,"28/Mar/19 09:51;ei349;R1.5_XTG_Failover_test_scenarios_XBID-3714-XBID-3532 _v6.1_SenttoDBAG.xlsx;https://jira.deutsche-boerse.com/secure/attachment/67371/R1.5_XTG_Failover_test_scenarios_XBID-3714-XBID-3532+_v6.1_SenttoDBAG.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,59011200,,,,,,,,,,XP-1570,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08esv:zi",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office team 22,Home Office team 23 [S],Home Office team 24,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Mar/19 20:53;ei349;can you please also have a look on this connected issue? ","05/Apr/19 10:15;qm925;Dear all,

Please store all UAT V Failover information in SharePoint. I have included the location of the folder in the description of this ticket.

Thank you.

Best regards,
Simona","10/Apr/19 16:14;tz118;please Review updated sceanrios by Niklas on sharepoint",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Introduce dataset for R2.0 Performance test,XP-1405,80171,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Critical,Done,,tm431,tm431,27/Mar/19 12:03,06/Nov/20 11:23,22/Feb/21 13:21,27/Mar/19 14:06,,,Pre2020,,,,,,,,,,"from excel file create new dataset, XBID-4341",,tm431,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,60220800,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00j",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Mar/19 14:06;tm431;created as duplicate",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[PATRONI] Failover tests scneario 4 - core doesn't stop when losing db connection,XP-1388,80025,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,ll664,yo218,yo218,22/Mar/19 13:29,31/Aug/20 15:39,22/Feb/21 13:21,26/Mar/19 14:46,,,Pre2020,,Trading,,,,,,,,"Executed failover tests scenario 4 of XP-1285:
 * DB master postgres process crashes, but not patroni agent

After killing the postgres process of the master db, both cores continued to work without beeing connected to the database. 

Expected behavior: active core1 should shut down and core2 should take over, connect to new master node and perform a journal replay 

Actions on master node on 22.03.19 at 12:33:

!image-2019-03-22-13-27-20-030.png!



Core1 was running until 12:56:

2019-03-22T11:56:29.972Z [Thread-10][][] INFO c.z.h.HikariDataSource - defaultHikariPool - Shutdown completed.

Failover lock table has not been updated since the master changed:

FAILOVER_LOCK | 173 | 2019-03-22 11:33:26.53 | xbid-syt1-cor1",,yo218,,,,,,,,,,,,,,,,,,,,,,,,,XP-1285,TECHLOG-2083,,,,,,,,,,,,,,,,,,"22/Mar/19 13:27;yo218;image-2019-03-22-13-27-20-030.png;https://jira.deutsche-boerse.com/secure/attachment/67158/image-2019-03-22-13-27-20-030.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,60393600,,,,,,,,,,XP-1570,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08eu8:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 20 [S],,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,Systemtest,,,Systemtest,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Mar/19 08:57;yo218;Explanation: we killed the main postgres process with kill -9 command and the child processes were still alive afterwards. This behavior changed with PostgreSQL v9.6 but we are currently using v9.5. 

After consultation with our Experts and Cybertec, we agreed that the risk of loosing the parent postgres process is negligible as it should never happen in practice. There we consider this risk as acceptable.

However, the upgrade to a newer PostgreSQL version need to be planned.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SM specification update related to Losses,XP-1365,79936,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,tz118,tz118,20/Mar/19 14:41,31/Aug/20 15:38,22/Feb/21 13:21,22/Jan/20 15:56,,,Losses ASR,,,,,,,ice,Losses,,"Analyse scope for SM specification update related to Losses POC.

- identify all areas and from documentation: DFS300 series, MFG470, DFS52
- focus is on files and reports
- review impact analysis (SM part)
- estimate effort

Background:
SG Losses request drafting of functional specifications for SM to allow impact assessment on local systems.
",,tz118,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-1329,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,60825600,,,,,,,,,,XP-955,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08ebs:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
OCC ECP message type,XP-1364,79924,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,qo794,qo794,20/Mar/19 12:57,06/Nov/20 11:24,22/Feb/21 13:21,26/Apr/19 14:31,,,Pre2020,,,,,,,,,,"Provide ECP message type for OCC and its ACK and incorporate them into CMI

Edit:
|ECP Message Type|MRC-XBID-A31-515|
|Acknowledgement ECP Message Type|ENTSOE-ETP|",,qo794,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,57628800,,,,,,,,,,XP-4092,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yrt:0ujzu",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office team 22,Home Office team 23 [S],Home Office team 24,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Mar/19 15:28;radeale;|ECP Message Type |MRC-XBID-A31-515|
|Acknowledgement ECP Message Type|ENTSOE-ETP -MRC-XBID-A31-515-ACK-|","20/Mar/19 17:40;qo794;To be clarified:
{quote}
Please be informed we still might need to change this message type - we will provide this information as soon as possible before closing review of the document.""
{quote}","21/Mar/19 07:16;qo794;Merge request ready, just modify the value: https://github.deutsche-boerse.de/dev/xbid/pull/327
Update: further development needed as the ACK message type is non standard.","25/Apr/19 17:29;qo794;Already implemented","26/Apr/19 14:31;radeale;Test OK on SYST3, XBID R2.0.7.",,,,,,,,,,,,,,,,,,,,,,,,,,,
[PATRONI] Evaluate Core performance - multiple executions of RTS sc14,XP-1326,79583,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,od044,yo218,yo218,14/Mar/19 10:17,04/Aug/20 19:35,22/Feb/21 13:21,25/Mar/19 10:46,,,Pre2020,,,,,,,,,,"{color:#00875a}*[ Infrastructure + performance improvement ]*{color}

Some more performance tests would be required. Please execute and record the RTS scenario 14 after alignment with techops ([~wm282], [~cs687] or myself)

Proper names and descriptions for the single executions will be provided via slack 

AC: 
 - Run tests on PERF. Record and check performance results ",,ei349,od044,yo218,,,,,,,,,,,,,,,,,,,,,,,TECHLOG-2083,,,,,,,,,,,,,,,,,,,"25/Mar/19 10:45;od044;Evaluate Core performance - Summary.xls;https://jira.deutsche-boerse.com/secure/attachment/67193/Evaluate+Core+performance+-+Summary.xls","25/Mar/19 10:44;od044;HandlersReport-NFS-mount-14032019.xls;https://jira.deutsche-boerse.com/secure/attachment/67192/HandlersReport-NFS-mount-14032019.xls","25/Mar/19 10:44;od044;HandlersReport-Native-mount-execution-1-15032019.xls;https://jira.deutsche-boerse.com/secure/attachment/67191/HandlersReport-Native-mount-execution-1-15032019.xls","25/Mar/19 10:44;od044;HandlersReport-Native-mount-execution-2-19032019.xls;https://jira.deutsche-boerse.com/secure/attachment/67190/HandlersReport-Native-mount-execution-2-19032019.xls","25/Mar/19 10:44;od044;HandlersReport-Native-mount-execution-3-19032019.xls;https://jira.deutsche-boerse.com/secure/attachment/67189/HandlersReport-Native-mount-execution-3-19032019.xls","25/Mar/19 10:44;od044;HandlersReport-Native-mount-execution-4-20032019.xls;https://jira.deutsche-boerse.com/secure/attachment/67188/HandlersReport-Native-mount-execution-4-20032019.xls","25/Mar/19 10:44;od044;HandlersReport-Native-mount-execution-5-20032019.xls;https://jira.deutsche-boerse.com/secure/attachment/67187/HandlersReport-Native-mount-execution-5-20032019.xls","15/Mar/19 14:56;od044;SQL-check-Native-mount-Execution-1-15032019.xls;https://jira.deutsche-boerse.com/secure/attachment/66885/SQL-check-Native-mount-Execution-1-15032019.xls","19/Mar/19 16:44;od044;SQL-check-Native-mount-Execution-2b-19032019.xls;https://jira.deutsche-boerse.com/secure/attachment/67005/SQL-check-Native-mount-Execution-2b-19032019.xls","20/Mar/19 13:22;od044;SQL-check-Native-mount-Execution-3b-19032019.xls;https://jira.deutsche-boerse.com/secure/attachment/67046/SQL-check-Native-mount-Execution-3b-19032019.xls","20/Mar/19 13:23;od044;SQL-check-Native-mount-Execution-4b-20032019.xls;https://jira.deutsche-boerse.com/secure/attachment/67048/SQL-check-Native-mount-Execution-4b-20032019.xls","20/Mar/19 13:58;od044;SQL-check-Native-mount-Execution-5-20032019.xls;https://jira.deutsche-boerse.com/secure/attachment/67051/SQL-check-Native-mount-Execution-5-20032019.xls","15/Mar/19 11:45;od044;SQL_chekc_NFS_mount_14032019.ods;https://jira.deutsche-boerse.com/secure/attachment/66878/SQL_chekc_NFS_mount_14032019.ods","15/Mar/19 11:44;od044;sc14v09-perf-NFS-mount-14032019.xls;https://jira.deutsche-boerse.com/secure/attachment/66877/sc14v09-perf-NFS-mount-14032019.xls","15/Mar/19 14:56;od044;sc14v09-perf-native-mount-execution-1-14032019.xls;https://jira.deutsche-boerse.com/secure/attachment/66886/sc14v09-perf-native-mount-execution-1-14032019.xls","19/Mar/19 16:44;od044;sc14v09-perf-native-mount-execution-2b-19032019.xls;https://jira.deutsche-boerse.com/secure/attachment/67004/sc14v09-perf-native-mount-execution-2b-19032019.xls","20/Mar/19 13:22;od044;sc14v09-perf-native-mount-execution-3b-19032019.xls;https://jira.deutsche-boerse.com/secure/attachment/67045/sc14v09-perf-native-mount-execution-3b-19032019.xls","20/Mar/19 13:23;od044;sc14v09-perf-native-mount-execution-4b-20032019.xls;https://jira.deutsche-boerse.com/secure/attachment/67047/sc14v09-perf-native-mount-execution-4b-20032019.xls","20/Mar/19 13:58;od044;sc14v09-perf-native-mount-execution-5-20032019.xls;https://jira.deutsche-boerse.com/secure/attachment/67050/sc14v09-perf-native-mount-execution-5-20032019.xls",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,60480000,,,,,,,,,,XP-1570,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08bd3:i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team 19 [S],Home Office Team 20,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Mar/19 10:29;ei349;[~od044] can you please assist to techops guys? ","15/Mar/19 11:44;od044;Run 14.03.2019 - NFS Mount
Report:  [^sc14v09-perf-NFS-mount-14032019.xls] 
SQL check:  [^SQL_chekc_NFS_mount_14032019.ods] ","15/Mar/19 14:56;od044;Run 15.03.2019 - Native mount Execution 1
Report:  [^sc14v09-perf-native-mount-execution-1-14032019.xls] 
SQL check:  [^SQL-check-Native-mount-Execution-1-15032019.xls] ","19/Mar/19 16:44;od044;Run 15.03.2019 - Native mount Execution 2
Report:  [^sc14v09-perf-native-mount-execution-2b-19032019.xls] 
SQL check:  [^SQL-check-Native-mount-Execution-2b-19032019.xls] ","20/Mar/19 13:23;od044;Run Native mount Execution 3
Report:  [^sc14v09-perf-native-mount-execution-3b-19032019.xls] 
SQL check:  [^SQL-check-Native-mount-Execution-3b-19032019.xls] 

Run Native mount Execution 4
Report:   [^sc14v09-perf-native-mount-execution-4b-20032019.xls] 
SQL check:   [^SQL-check-Native-mount-Execution-4b-20032019.xls] 
","20/Mar/19 13:58;od044;Run Native mount Execution 5
Report:  [^sc14v09-perf-native-mount-execution-5-20032019.xls] 
SQL check:  [^SQL-check-Native-mount-Execution-5-20032019.xls] ","21/Mar/19 13:39;ei349;please test together with XP-1323","25/Mar/19 10:45;od044;Here are reports of handles:
[^HandlersReport-Native-mount-execution-5-20032019.xls]  
[^HandlersReport-Native-mount-execution-4-20032019.xls]  
[^HandlersReport-Native-mount-execution-3-19032019.xls]  
[^HandlersReport-Native-mount-execution-2-19032019.xls]  
[^HandlersReport-Native-mount-execution-1-15032019.xls]  
[^HandlersReport-NFS-mount-14032019.xls] ","25/Mar/19 10:45;od044;[~yo218] here is a summary of all report per discussion.
 [^Evaluate Core performance - Summary.xls] ",,,,,,,,,,,,,,,,,,,,,,,
[PATRONI] Evaluate SMC/CMI performance with synchronous DB cluster,XP-1311,79470,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,jy268,ll664,ll664,12/Mar/19 12:22,04/Aug/20 19:35,22/Feb/21 13:21,18/Mar/19 13:58,,,Pre2020,,,,,,,,,,"{color:#00875a}*[ Infrastructure + performance improvement ]*{color}

After the discussions with ops/dev, the easiest way to deploy SMC/CMI/Reporting Engine instances with PATRONI DB cluster is to have their databases replicated synchronously.

That requires the minimal change on the app side. However we should check the performance of such a setup. No findings are expected to be found, the synchronous DB is most likely performant enough.

The sync cluster is ready in XBID PERF. Execute perf scenarios and evaluate the performance of SMC. I'm not sure whether it makes sense for CMI.

 

AC: 
 - Run tests on PERF. Record and check performance results (lower than 1minute == GOOD; 99,85 percentile)",,jy268,ll664,yo218,,,,,,,,,,,,,,,,,,,,,,,TECHLOG-2083,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,60998400,,,,,,,,,,XP-1570,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08bd3:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team 19 [S],,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Mar/19 13:40;jy268;{code}
select distinct el.id, el.status, el.event_time, el.received_time, el.persisted_time from event_log el join sync_package sp on sp.event_log_id = el.id join trade t on sp.id = t.sync_pckg_id order by el.received_time asc;
{code}

{code}
  id   | status |     event_time      |      received_time      |     persisted_time
-------+--------+---------------------+-------------------------+-------------------------
 42001 | DONE   | 2019-03-18 10:10:00 | 2019-03-18 10:10:05.019 | 2019-03-18 10:10:13.243
 43001 | DONE   | 2019-03-18 10:15:00 | 2019-03-18 10:15:05.012 | 2019-03-18 10:15:33.264
 44001 | DONE   | 2019-03-18 10:20:00 | 2019-03-18 10:20:05.01  | 2019-03-18 10:20:25.431
 45001 | DONE   | 2019-03-18 10:25:00 | 2019-03-18 10:25:05.019 | 2019-03-18 10:25:25.525
 46001 | DONE   | 2019-03-18 10:30:00 | 2019-03-18 10:30:05.009 | 2019-03-18 10:30:26.626
 47001 | DONE   | 2019-03-18 10:35:00 | 2019-03-18 10:35:05.017 | 2019-03-18 10:35:24.538
 48001 | DONE   | 2019-03-18 10:40:00 | 2019-03-18 10:40:05.026 | 2019-03-18 10:40:22.615
 49001 | DONE   | 2019-03-18 10:45:00 | 2019-03-18 10:45:05.015 | 2019-03-18 10:45:24.036
 50001 | DONE   | 2019-03-18 10:50:00 | 2019-03-18 10:50:05.009 | 2019-03-18 10:50:23.484
 51001 | DONE   | 2019-03-18 10:55:00 | 2019-03-18 10:55:05.027 | 2019-03-18 10:55:22.483
 52001 | DONE   | 2019-03-18 11:00:00 | 2019-03-18 11:00:05.012 | 2019-03-18 11:00:18.913
 53001 | DONE   | 2019-03-18 11:05:00 | 2019-03-18 11:05:05.012 | 2019-03-18 11:05:11.616
(12 rows)
{code}","18/Mar/19 13:41;jy268;{code}
select count(t.*), sp.event_log_id, t.sync_pckg_id from trade t join sync_package sp on sp.id = t.sync_pckg_id group by t.sync_pckg_id, sp.event_log_id having sync_pckg_id in (select distinct sp.id from event_log el join sync_package sp on sp.event_log_id = el.id join trade t on sp.id = t.sync_pckg_id) order by event_log_id;
{code}

{code}
count | event_log_id | sync_pckg_id
-------+--------------+--------------
  465 |        42001 |       421001
 1871 |        43001 |       422001
 1302 |        44001 |       423001
 1199 |        45001 |       424001
 1336 |        46001 |       425001
 1232 |        47001 |       426001
 1191 |        48001 |       427001
 1217 |        49001 |       428001
 1187 |        50001 |       429001
 1110 |        51001 |       430001
  816 |        52001 |       431001
  321 |        53001 |       432001
(12 rows)
{code}","18/Mar/19 13:44;jy268;test executed:
{code}
/xbid/performance/test-client/scripts/generateAndRunForPx.sh XBDB01XX /xbid/performance/test-client/scenarios_input/xbid-rts3b-2019-sc14-v09_wave2_final.xlsx > /tmp/perf_perf_XBDB01XX_3.log&
{code}","18/Mar/19 13:51;jy268;Listings above provide information about duration of single synchronizations which do not exceed 1min, this fulfills requirements. According to that we can assume that SYNC replication is sufficient for SPM.","18/Mar/19 13:53;jy268;Tests were executed on PERF env with following deployment parameters:
{code}
	
{
""config"": ""xbid_perf.xml"",
""action"": ""deploy_with_db_clean"",
""instances"": { … },
""versions"": {
""xbid_version"": ""1.6.0.33"",
""spm_version"": ""1.5.0.21"",
""reporting_engine_version"": ""5.0.44"",
""pmi_version"": ""1.0.30"",
""pmi_archiver_version"": ""1.0.19"",
""report_tool_version"": ""2.11""
},
""data_options"": {
""dataset_version"": ""1.3.49"",
""dataset"": ""rts3-sliceb-data-fake""
},
""advanced_options"": {
""java_opts_cor"": """"
}
}
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,
[PATRONI] Docker infrastructure - run xbid with Dockerized PATRONI cluster,XP-1301,79403,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,eh941,ll664,ll664,11/Mar/19 09:59,04/Aug/20 19:35,22/Feb/21 13:21,21/Mar/19 10:12,,,Pre2020,,,,,,,,,,,,ll664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,61689600,,,,,,,,,,XP-1570,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08b74:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 18 [S],Alpha Team Sprint 19,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,plewmic-scripts,XP-1261-guava-28,selenide-poc,XP-1504,xbid-losses-poc,XP-2979-postgresql,XP-456,XP-3264,XP-3230,develop,XP-2694,XP-2232,XP-3070,XP-4273-owasp-zap-enable,inline-tomcat-params,XP-4526-resource-managment-fix,xbid-2.0.25.x,fixing-failover,XP-2080-finishing-price-rounding-integration,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[PATRONI] Automated DB failover tests on Core ,XP-1300,79402,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,,ll664,ll664,11/Mar/19 09:54,04/Aug/20 19:35,22/Feb/21 13:21,28/Mar/19 09:43,,,Pre2020,,,,,,,,,,"{color:#00875a}*[ Infrastructure + performance improvement ]*{color}

Introduce automated tests of Patroni cluster failover.
 * the cluster conf needs to be same as the PROD setup
 * create custom Docker images - Postgres/Consul/etcd/watchdog(?)
 * define scenarios in feature files - network/node failures etc.
 * implement them

AC: 

- have working test scenarios running on docker and jenkins pipeline",,ll664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Related, but out-of-scope issues reported as XP-1402, XP-1403 and XP-1404",,,,,,,,,,61689600,,,,,,,,,,XP-1570,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y088u7:4",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 19,Alpha Team Sprint 20 [S],,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,plewmic-scripts,XP-1261-guava-28,selenide-poc,XP-1504,xbid-losses-poc,XP-2979-postgresql,XP-456,XP-3264,develop,XP-3230,XP-2694,XP-2232,XP-3070,XP-4273-owasp-zap-enable,inline-tomcat-params,XP-4526-resource-managment-fix,xbid-2.0.25.x,fixing-failover,XP-2080-finishing-price-rounding-integration,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
deliver CR083 xsds,XP-1297,79399,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,tz118,tz118,11/Mar/19 09:34,06/Nov/20 12:46,22/Feb/21 13:21,11/Mar/19 10:11,,,Pre2020,,,,,,,,,,CR083 xsds to be distributed by Fri 15/03/2019 to TWG FTF,,tz118,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,61689600,,,,,,,,,,XP-4096,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y7p:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Mar/19 10:11;tz118;closing as duplicate",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
XSD 2.0 to the customers,XP-1293,79357,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,tm431,radeale,radeale,08/Mar/19 10:34,06/Nov/20 10:51,22/Feb/21 13:21,13/Mar/19 10:50,,,Pre2020,,Capacity,Shipping,Trading,,,,,,"1. Create new XSD for XBID 2.0 and
2. delivery it to the customers.

The XSD has to contain the changes from ""Internal ICs haltable"" and ""Recall/Cancel on the Member level"" CRs.

Coordinate with Simona about the most effective way to communicate the XSD (XBID ticket is a preferred solution, link it to XBID-4046, please).",,qo794,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4046,,,,,,,"13/Mar/19 10:01;tm431;XBID20-cmm-api-xml-explicit-xsd.zip;https://jira.deutsche-boerse.com/secure/attachment/66756/XBID20-cmm-api-xml-explicit-xsd.zip","13/Mar/19 10:01;tm431;XBID20-trading-api-xml-xsd.zip;https://jira.deutsche-boerse.com/secure/attachment/66757/XBID20-trading-api-xml-xsd.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,61516800,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y087vk:7",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team 18,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Mar/19 08:39;qo794;http://artifactory.dbgcloud.io/artifactory/eex-dev-local/com/deutscheboerse/energy/m7/m7-trading-api-xml/1.0.45/
http://artifactory.dbgcloud.io/artifactory/eex-dev-local/com/deutscheboerse/energy/m7/m7-cmm-api-xml-explicit/1.0.45/","13/Mar/19 10:50;radeale;XSD 2.0 provided to the customer via XBID-4046, thank you for the good work.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[PATRONI] DB failover tests,XP-1285,79208,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,od044,ll664,ll664,04/Mar/19 14:08,04/Aug/20 19:35,22/Feb/21 13:21,25/Jun/19 10:20,,,Pre2020,,,,,,,,,,"{color:#00875a}*[ Infrastructure + performance improvement ]*{color}

We need to test the behavior of the whole XBID ecosystem on database failover:
 * XBID-Core master needs to go down
 * XBID-Core slave takes over and connects to new DB master
 * Inquiry modules work
 * SMC/CMI work

 

 

 ",,ei349,ll664,tm431,tz118,yo218,,,,,,,,,,,,,,,,,,,,,TECHLOG-2083,,,,,,,,,,,,TECHLOG-2213,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,59011200,,,,,,,,,,XP-1570,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08esv:zy",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office team 22,Home Office team 23 [S],Home Office team 24,Home Office Team 25 [S],Home Office Team 26,Home Office Team 27 [S],Home Office Team 28,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Mar/19 14:53;yo218;[~ll664] When can we perform some tests? Do you have some interesting scenarios that can be executed? Is it possible to make sure that we shut down the DB host during a long lasting transaction or something similar?","20/Mar/19 11:15;ll664;Areas to focus on:
 * DB master node goes down
 * CORE1 and CORE2 losess network connection to DB master
 * DB master loses network connection to replicas
 * DB master postgres process crashes, but not patroni agent
 * patroni agent crashes -> split brain,
 * whole DB master node crashes (patroni + postgres)
 * K/V store (etcd/consul) crashes
 * sync DB (for CMI/SMC) - a DB master node or replica crashes - what happens?","22/Mar/19 13:29;yo218;* DB master node goes down --> reboot of xbtestpdb1 --> xbtestpdb2 became new master --> core1 shut down, core2 took over and replayed journal --> {color:#57d9a3}OK{color}
 * CORE1 and CORE2 losess network connection to DB master --> blocked network traffic to master db --> both cores went down because second node was read only --> {color:#57d9a3}Expected (scenario to be discussed){color}
 * DB master loses network connection to replicas --> Shut down network of xbtestpdb1 --> xbtestpdb2 became master, postgres on xbtestpdb1 has been stopped -->  core1 shut down, core2 took over and replayed journal{color:#57d9a3} --> OK{color}
 * DB master postgres process crashes, but not patroni agent -> killed postgres process on master node (xbtestpdb2) --> xbtestpdb1 became new master node --> postgres on xbtestpdb2 was unable to restart --> core1 and core2 continued running for more than 20 minutes without beeing connected to the database --> {color:#de350b}Not OK{color} --> XP-1388","22/Mar/19 13:29;yo218;2nd half of the tests will be performed on Monday","26/Mar/19 14:55;yo218;* patroni agent crashes -> split brai-n, --> no split brain detected, postgres process will always die together with patroni service --> xbtestpdb2 became master, postgres on xbtestpdb1 has been stopped -->  core1 shut down, core2 took over and replayed journal{color:#57d9a3} --> OK{color}
 * whole DB master node crashes (patroni + postgres) --> xbtestpdb2 became master, postgres on xbtestpdb1 has been stopped -->  core1 shut down, core2 took over and replayed journal{color:#57d9a3} --> OK{color}
 * K/V store (etcd/consul) crashes --> DB Cluster couldn't connect to K/V store and shut down --> application went down {color:#57d9a3}--> OK{color} ","04/Apr/19 14:08;ei349;update also specification with the latest schemas of DB setup and failover scenarios

 ","10/Apr/19 09:01;tm431;failover test scenarios for review are tracked in here TECHLOG-2213","10/Apr/19 16:12;tz118;Niklas updated Scenarios, pls Review TECHLOG-2213",,,,,,,,,,,,,,,,,,,,,,,,
[PATRONI] CMI failover analysis - TO CLOSE,XP-1284,79204,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,,ll664,ll664,04/Mar/19 13:49,04/Aug/20 19:36,22/Feb/21 13:21,25/Apr/19 15:01,,,Pre2020,,,,,,,,,,"{color:#00875a}*[ Infrastructure + performance improvement ]*{color}

To be analysed.",,ll664,yo218,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,62208000,,,,,,,,,,XP-1570,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08cfi:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[PATRONI] SMC failover analysis - TO CLOSE,XP-1283,79203,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,,ll664,ll664,04/Mar/19 13:48,04/Aug/20 19:35,22/Feb/21 13:21,25/Apr/19 15:07,,,Pre2020,,,,,,,,,,To be analysed.,,ll664,yo218,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,62208000,,,,,,,,,,XP-1570,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08cfg:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[PATRONI] Inquiry modules - configure with latest Postgres JDBC driver/multihost setup,XP-1282,79202,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,uv683,ll664,ll664,04/Mar/19 13:44,04/Aug/20 19:35,22/Feb/21 13:21,18/Mar/19 09:29,,,Pre2020,,,,,,,,,,"From XP-1241:
{quote}If Postgres Client (libpq) >= 10 is used, several hosts can be configured and the library will try and figure out a suitable connection by itself. The parameter `target_session_attrs` can be set to `read-write`, so every connection is first tested if it supports writes as well.
{quote}
 

CMM-Inquiry, Trading-Inquiry, Reporting Engine, SMI, Report Tool

 

Note this applies for SMI as well, though it's not an Inquiry module as such.",,ll664,yo218,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,62208000,,,,,,,,,,XP-1570,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y088u7:qw",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 18 [S],Alpha Team Sprint 19,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,tomcat-rollback,XP-2942,XP-2546,XP-2506-xbid-dev-env,XP-2546-added-latest,trailing-slash-syt1,XP-3025-catalina-timezone,XP-2484,XP-3110-deprecated-log,master,XP-2501-to-xbid-dev-env,traversal-XP-2485,XP-2488-xbid-dev-env,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[PATRONI] Failover timer - new DB master should propagated to throughout the sytem (only slave node),XP-1281,79201,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,,ll664,ll664,04/Mar/19 13:42,04/Aug/20 19:36,22/Feb/21 13:21,15/Mar/19 15:08,,,Pre2020,,,,,,,,,,"When DB failover occurs, the XBID-Core needs to react in following fashion:
 # XBID-Core master node needs to go down to allow journal replay from secondary as the new master might be behind (async replication).
 # The failover timer on slave node has to detect the master node change and propagate the new DB setting throughout the system - i.e. recreate Hibernate SessionFactories etc.

 ",,ll664,yo218,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,62208000,,,,,,,,,,XP-1570,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y088u7:9",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 18 [S],Alpha Team Sprint 19,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[PATRONI] Dynamic database host detection,XP-1280,79200,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,ll664,ll664,ll664,04/Mar/19 13:36,04/Aug/20 19:36,22/Feb/21 13:21,08/Mar/19 11:14,,,Pre2020,,,,,,,,,,"XBID-Core needs to find the DB master node on startup - it needs to enumerate all of the configured hosts and use one where _pg_is_in_recovery()_  returns false - there should be only one node like that.

 

Note that we do not intend to use Consul to discover the master - it adds a new infrastructure dependency to the system where the same information could be obtained from database itself.",,ll664,qo794,yo218,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,62208000,,,,,,,,,,XP-1570,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y088uc:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 17,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PoC Losses - respond to comments,XP-1269,79129,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,rg535,de698,de698,01/Mar/19 10:37,04/Aug/20 19:31,22/Feb/21 13:21,08/Mar/19 11:36,,,Losses ASR,,,,,,,,,,"See XBID-1667 for the latest uploaded document.

*What needs to be done:*
 * provide responses to customer questions. some of them need a bit of thinking.
 * align with Suzanna

 ",,de698,rg535,tz118,,,,,,,,,,,,,,,,,,,,,,,M7ACM-285,,,,,,,,,,,,,,,,,,,"04/Mar/19 14:47;tz118;ASR010c- Analysis for Losses Part III_V1.2_sj.docx;https://jira.deutsche-boerse.com/secure/attachment/66432/ASR010c-+Analysis+for+Losses+Part+III_V1.2_sj.docx","08/Mar/19 10:31;de698;ASR010c- Analysis for Losses Part III_V1.2_sj_ar.docx;https://jira.deutsche-boerse.com/secure/attachment/66633/ASR010c-+Analysis+for+Losses+Part+III_V1.2_sj_ar.docx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,61603200,,,,,,,,,,XP-955,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y88:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 17,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Mar/19 16:58;rg535;[~de698], I have answered all their comments to ASR010c except for a few which I have marked in yellow in version 1.2. Please can you take a look at the yellow ones and provide feedback. You can save it as version 1.2 on sharepoint and then I will send it to the PXs next week.

 [link title|https://projects.deutsche-boerse.de/sites/ps0080/Shared%20Documents/04%20XBID%20Legal%20Framework/01%20XBID%20Contracts%20and%20Change%20Requests/03_XBID%20Additional%20Service%20Requests/ASR010c%20-%20Analysis%20for%20Losses%20Part%20III]","04/Mar/19 14:47;tz118;[~de698] Please find attached proposed answers marked with blue color. Happy to discuss.  [^ASR010c- Analysis for Losses Part III_V1.2_sj.docx] ","04/Mar/19 15:07;rg535;[~de698], [~tz118], I have read SJ's comments. They all seem fine, but I think we should list out the specifications which are in scope and which may be revised based on the results of the POC.","08/Mar/19 10:45;de698;Dear [~rg535] please find the document with my answers as well. Agree with [~tz118] in those points.

We will not change all the specifications +before+ the full implementation/integration is agreed and mandated, which can only happen once the PoC is successful.

Within the PoC we can continue with the impact analysis (it was already perceived very well during the last iteration) and end up with a clear picture what exacts changes/updates will be needed. But not do those updates.

We did not list out the documents in the Impact Analysis in any more specific way than Referenced documents. :) 
 * HLS100 – Functional Description Trading
 * DFS310 – Shipping Module File Management
 * DFS500 – DFS500 AMQP Public Message Interface - CMM
 * DFS510 – AMQP Public Message Interface – Trading
 * DFS700 – Reference Data Module
 * DFS800 – Capacity Management TSO Interface
 * Service Level Agreement – Hosting, Attachment 5B

And we missed out: HLS100A - Functional Description Capacity Management Module, DFS240 XML Report Structure, DFS290 Cross Border Routing.","08/Mar/19 11:36;de698;Setting task to done. All inputs collected.

Final decision will happen on Monday 11th.","12/Mar/19 10:31;rg535;Document updated with all comments and attached to XBID-1667.",,,,,,,,,,,,,,,,,,,,,,,,,,
ACER - Reporting - Respond to TWG/FTF comments,XP-1268,79128,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,rg535,de698,de698,01/Mar/19 10:28,04/Aug/20 19:35,22/Feb/21 13:21,04/Mar/19 17:11,,,Pre2020,,,,,,,,,,"There are trivial remarks from the customer which should be incorporated into the document.

Additionally, we need to include two trivial fixes into the documentation:
 * _documentID_ format
 ** should be SIDC_B01_2019*{color:#de350b}-{color}*01 (there is ""_"" in the document)
 ** see XP-1106
 * generated document name format
 ** should be ""2018-12_INTRADAY_TRADE_VOLUME_2019-01-08-065522.xml"" (without T and Z)
 ** see XP-1240

It should be communicated to the customer in an appropriate way that we found these inconsistencies. It would prevent unnecessary discussions in later phases.",,de698,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Mar/19 17:21;de698;ACER Reporting_draft_v0.2_Commented_TWG FTF_20190304 DBAG.docx;https://jira.deutsche-boerse.com/secure/attachment/66396/ACER+Reporting_draft_v0.2_Commented_TWG+FTF_20190304+DBAG.docx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,62208000,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y85:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 17,,,,,,,,,,,,,,,,0.5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Mar/19 17:22;de698;customer comments responded

*{color:#de350b}comments in chapter 3.4.3 need review from business perspective{color}*

documentID and document name format fixed with comments","04/Mar/19 16:16;de698;[~rg535] could you please have a look at the comment in the chapter 3.4.3 from a business perspective? we will leave out the word ""manually"". Any other ideas?","04/Mar/19 17:11;de698;After internal alignment, the document was sent to customer in XBID-3922",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"CR095 - ATC Reporting for ENSTO-E, specification",XP-1253,79089,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,radeale,radeale,radeale,28/Feb/19 12:59,06/Nov/20 10:55,22/Feb/21 13:21,16/Apr/19 18:00,,,Pre2020,,Capacity,,,,,,,,"Propose specification changes resulting from XP-1242 to the customers via a spec container and align on the wording. Do this after XP-1242 is implemented.

Suspected workload: 3 SP
------------------------------------------------------------------------------------------
+Proposed changes:+

*Document:* DFS800 Capacity Management TSO Interface
*Reason:* CR095 - ATC Reporting for ENSTO-E

*Chapter:* 3.2 Schedule Files

*Details:* In the list of allocation files, added a new bullet point with name of the new file
{code:java}
OCC file 
{code}

*Chapter:* 3.3.4.1.1 Create a new outbound file configuration

*Details:* Point number 3 - File type, added a new bullet point with name of the new file
{code:java}
OCC
{code}

*Chapter:* 4.1 File Management Admin Files

*Details:* Point number 2. Outbound - added a new bullet point with name and description of the new file
{code:java}
OCC - Offered cross-zonal capacity file based on the Publication_MarketDocument
{code}

*Chapter:* 4.1.12 Time series Identifier

*Details:* Point number 5. Additional attribute per file type - added a new row into the table
{code:java}
column ""File type"", value: ""OCC"" 
column ""Additional attribute"", value: ""None""
{code}

*Chapter:* 4.1.11 Offered cross-zonal capacity (OCC)

*Details:* Added a new chapter describing the new file 

{code:java}
The OCC file is configurable via the File management GUI by the File Management Admin. The OCC file is based on the Publication_MarketDocument of the CIM Standard and can be transferred via GUI, Email, FTP, SCP, SFTP, etc. Each OCC file contains information about one interconnector/border, i.e. the interconnector/border for which the file has been configured.

An OCC file covers the last 15 minutes of capacity changes on the interconnector/border when configures so in the CMI File Management. Thus, The file can be comparable to the ATC report. In case of no changes in the ATC file during the proceeding 15 minutes, the last ATCs is reflected.

The name of the file is generated automatically by the system and follows the convention below:

- YYYYMMDD_OCC_’DA1’-’DA2’_V.xml

Where V is the 3 digit version number of the file and the Border is indicated by the relevant Delivery Areas’ short names.
The version number of the file starts for each calendar day with 1 and increases every time a new file is created up to the maximum version of 999.{code}

*Chapter:* 4.3.2 Message Types of acknowledgement messages

*Details:* Table 9 - added a new row 
{code:java}
column ""File type"", value: ""OCC (Offered cross-zonal capacity)"" 
column ""ECP Message type"", value: ""MRC-XBID-A31-515""
column ""ACK Message type"", value: ""MRC-XBID-A31-515-ACK""{code}

*Chapter:* 4.6 Domain.mRID element

*Details:* The sentence has been enhanced by the new file type

New version:
{code}Domain.mRID element used in the Outbound CMM files (ATC, OCC, TAR, RCA, NSF, NetP, RID, IAR) contains static string “49Y000000000000S”.{code}

*Chapter:* 4.7 Appendix

*Details:* Added a new file type.",,ei349,qz412,radeale,zi174,,,,,,";18/Mar/19 09:50;radeale;120",,,,,,,,,,120,,,,120,,,,XP-1242,,,,,,,,,,XP-800,XP-1364,,,,,,"28/Feb/19 12:59;radeale;20190227_CR095_Samplefiles.zip;https://jira.deutsche-boerse.com/secure/attachment/66341/20190227_CR095_Samplefiles.zip","28/Feb/19 12:59;radeale;ATC Reporting Interface.xlsx;https://jira.deutsche-boerse.com/secure/attachment/66342/ATC+Reporting+Interface.xlsx","14/Mar/19 14:01;zi174;DFS800 - Capacity Management TSO Interface v27.00.docx;https://jira.deutsche-boerse.com/secure/attachment/66829/DFS800+-+Capacity+Management+TSO+Interface+v27.00.docx","14/Mar/19 08:58;qz412;DFS800 - Capacity Management TSO Interface v27.00_L1_rev_OS.docx;https://jira.deutsche-boerse.com/secure/attachment/66802/DFS800+-+Capacity+Management+TSO+Interface+v27.00_L1_rev_OS.docx","28/Feb/19 12:59;radeale;iec62325-451-3-publication_v7_3.zip;https://jira.deutsche-boerse.com/secure/attachment/66343/iec62325-451-3-publication_v7_3.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,59011200,,,,,,,,,,XP-4092,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y088u7:ic",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team 17 [S],Home Office Team 18,Home Office Team 19 [S],Home Office Team 20,Home Office team 22,Home Office team 23 [S],,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Feb/19 16:44;radeale;*Document:* DFS800

*Chapters:* 
3.2 Schedule Files
3.2.4.1.1 Create a new outbound file configuration
4.1 File Management Admin Files
4.1.12 Time series Identifier
4.3.2 Message Types of acknowledgement messages
4.6 Domain.mRID element
4.7 Appendix","05/Mar/19 17:04;zi174;The proposal prepared. [~radeale] please review and make changes if necessary :). Thanks","11/Mar/19 13:21;zi174;The DFS800 has been enhanced by the description of new file. Please review. ","12/Mar/19 16:16;radeale;The review is done, please check
S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\03 Functional Specifications\DFS800 Capacity Management TSO Interface\DFS800 - Capacity Management TSO Interface v27.00_L1_rev1.docx
:)","14/Mar/19 08:49;zi174;Waiting for PO review. ","14/Mar/19 08:59;qz412;Dear [~zi174], [~radeale],

thx, I have a couple of rather minor things, please see [^DFS800 - Capacity Management TSO Interface v27.00_L1_rev_OS.docx], happy to discuss :).

[~ei349], please also do a quick check.

Best, Ondra

 

 ","14/Mar/19 10:02;ei349;I've read all the changes and it looks fine from my point of view ;) ","14/Mar/19 10:15;radeale;Minor changes implemented as proposed. Jakub, please review before the implementation starts:

S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\03 Functional Specifications\DFS800 Capacity Management TSO Interface\DFS800 - Capacity Management TSO Interface v27.00_L1B.docx","14/Mar/19 10:27;zi174;Review done. From my point of view the implemented changes are good. [~qz412] please see the [updated document|https://jira.deutsche-boerse.com/secure/attachment/66822/DFS800%20-%20Capacity%20Management%20TSO%20Interface%20v27.00_L1B.docx] ","14/Mar/19 12:57;qz412;*{color:#00875a}Green, pls send out to the customers! Thx.{color}*","14/Mar/19 14:05;zi174;The document has been prepared for sending out to the customer. [~radeale] Please check the final version as last check before that :)

Thanks,
Jakub","14/Mar/19 14:12;radeale;DFS800 has been sent out to the customers via XBID-4224.","20/Mar/19 17:59;radeale;The customer provided comments in XBID-4224...","26/Mar/19 13:58;radeale;Updated version of DFS800 sent. WIP version can be found here:

S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\03 Functional Specifications\DFS800 Capacity Management TSO Interface\","10/Apr/19 17:10;radeale;Waiting for outcome of XP-1479.",,,,,,,,,,,,,,,,,
R2.0 - UAT Handover checklist,XP-1252,79083,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ei349,qz412,qz412,28/Feb/19 12:20,06/Nov/20 10:51,22/Feb/21 13:21,21/Aug/20 15:25,,,Pre2020,,,,,,,ice,,,"h1. *Deployment:*
||Task||Status||
|Deployment timeline|(/)|
|Deployment requests ([~ei349], [~qz412], [~tm431])|(/)|
|Release notes - Preparation ([~ei349], [~qz412], [~tm431])|(/), attached|
|Release notes - Review ([~rehapav], [~rg535])| |
h1. *CRs:*
||Item||Internal ID||External ID||Status (*)||
|SM Enhanced SA Assignemnt Rule - Option 2|XP-40|XBID-4112|(/)|
|ACER Reporting (without dummy EIC postprocessing)|XP-6|XBID-3922|(/)|
|ACER Reporting (EIC postprocessing)|XP-1129|XBID-3922|(i) - not needed for R2.0 UAT start|
|Internal interconnectors halt|XP-528|XBID-4112|(/)|
|CR095 - ENTSO-E ATC Data Report|XP-1242|XBID-4224|(/)|
|API change - pending change from CR083 (Recall/Cancel flag on member)|XP-1219|XBID-2933|(/)|
|SM blank point removal|XP-273|XBID-4112|(/)|
|SM Aggregate file types|XP-227|XBID-4112|(/)|

(*) = Implemented, tested, merged, ready for 2.0 UAT release
h1. *Latent faults / 1.x Leftovers* 
h2. *Communicated:*
||Summary||Internal ID||External ID||Status (*)||
|SMXBID CLONE: H2H values for DE-DK1 are incorrect|XP-224|XBID-3707|(/)|
| Two OrdrExeRprts send after Order modification|XP-245|XBID-3712|(/) |
| Total quantity incorrectly represented in case of user-defined trades|XP-246|XBID-3691|(/) |
| EXT: Short/long Throttling Limits exceeded do not trigger Alarmtilt messages|XP-247|XBID-3425 / XBID-3466|(/) |
| EXT: TC810 report contains the element ""membCtpyIdCod""|XP-249|XBID-3355|(/) |
| Usability:Unused/redundant buttons in SOB WebGui|XP-259|XBID-2926|(/) |
| Usability: Useless file management view for Central Admin in SM|XP-260 |XBID-2924|(/) |
| Order creation - missing clOrdrId attribute|XP-267|XBID-3955 / XBID-3809|(/) |
| CMI - incoming email processed 2x - fix|XP-930|XBID-4012|(/) |
| Finalise work on DeactOrdersForDlvryArea|XP-324|XBID-3870|(/) |
| Block Order - possible to create with closed contract|XP-280|XBID-4021|(/) |
| Log application HeartBeats in PMI Logger|XP-383|XBID-4083, XBID-3999|(/) |
| SMXBID CLONE: XBR sent at wrong time and wrong day|XP-282|XBID-3965|(/) |
| Order creation - missing clOrdrId attribute|XP-267|XBID-3955|(/) |
| High time to stop Trading after both SOB Equiry instances are down|XP-108|XBID-3865, SMXBID-578|(/) |
| Two OrdrExeRprts send after Order modification|XP-245|SMXBID-816|(/) |
| Crossed order books 23-00 (Buy higher than Sell)|XP-520|SMXBID-869|(/) |
| DST LCC tests 10/2018: SM files incorrect behaviour during DST moment|XP-521|SMXBID-968|(/) |
| Trade recall status on RREQ where RREJ is expected|XP-438|XBID-3752|(/)|

(*) = Implemented, tested, merged, ready for 2.0 UAT release
h2. *-Not- Communicated later, fixed in R2.0, agreed with the customers:*
||Item||Internal ID||External ID||Status||
|Iceberg order modification - different behaviour on active/hibernated order|XP-1183|XBID-4305|(/)|
|Bugs in ContractInfoRprt|XP-815|XBID-4230, XBID-4263|(/)|
h1. *Technical changes:*
||Item||Link||Comment||Status||
|CR088 - Improving Security of the Client Software Provision|XBID-3069|No development, just a hash of CT application needs to be generated and provided to the customers|(i) not implemented yet, can be done with any CT release throughout the UATs / Prod release|
|Connection to new DB cluster (Veritas => Patroni + new SSD HW)|XP-1241 (add new links)| |(/)|
|TomCat upgrade in all Customer facing envs to v8.5.35 due to Spring Boot 2 upgrade|XP-311, {color:#de350b}TECHLOG to be added{color}| |(/)|
|SFTP - Anti-virus implementation in PROD (Plan)|TECHLOG-574|Is not UAT dependent, may freely be deployed any time the problems with the anti virus are solved|(i) - UAT independent, not implemented pre-UAT|
h1. *Other ToDos:*
||Item||Internal link||Comment||Status||
|Performance - OBK inconsistency investigation|XP-1188| |(/)|
|GlusterFS - journaller bottleneck|XP-759|Won't do before UAT start|(x)|
|Decimal shift related fixes|XP-1078|Potential caldidate for a descope for R2.0|(x)|",,ek176,gd553,qm925,qz412,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Mar/19 09:56;ei349;XBID_2_0_UAT_ReleaseNotes.docx;https://jira.deutsche-boerse.com/secure/attachment/67427/XBID_2_0_UAT_ReleaseNotes.docx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,62640000,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08fqc:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"CR095 - ATC Reporting for ENSTO-E, implementation + testing",XP-1242,79040,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,radeale,radeale,radeale,27/Feb/19 18:00,06/Nov/20 10:55,22/Feb/21 13:21,02/May/19 14:16,,,Pre2020,,Capacity,,,,,,,," 

{color:#00875a}*TODO: split .. remove new development, it's just testing. waiting for the clarification on the spec level.* {color}

{color:#00875a}*[ New feature ]*{color}

+Change description:+
 The customer requests implementing a new outbound capacity file as the ENTSO-E regulatory body demands to receive ATC Reports.
 - File type is OCC - Offered cross-zonal capacity file based on the Publication_MarketDocument
 - The file contain changes in the capacity made in the past 15 minutes.
 This means a new file type along with a new XSD.

A new XSD: [^iec62325-451-3-publication_v7_3.zip] 
 Sample files: [^20190227_CR095_Samplefiles.zip] 
 File description: [^ATC Reporting Interface.xlsx]

*>>> For additional details please see XP-1253. <<<*

+Acceptance Criteria:+
 - CMI generates outbound files as per specification
 - The files age configured in a way so they are generated as per requirement (i.e. _changes in the offered capacity (ATCs) shall be made public within 15 minutes after the change_) sent to a test DI
 -- A Distribution Scheduler Mapping is to be created for each of these outbound file transfers with a time based trigger and repeating every 15 minutes

The file contains the entire TimeSeries in the following cases:
 1. If there were changes in the capacity for all the Delivery Intervals (this includes a publication of capacity)
 2. There were no changes in the capacity for all the DIs at all

+ECP Message Type:+
|ECP Message Type|MRC-XBID-A31-515|
|Acknowledgement ECP Message Type|ENTSOE-ETP -MRC-XBID-A31-515-ACK-|

+Note:+
 For additional details and points please see XBID-4224.

+Additional notes from the external ticket:+

*TSOs propose to organize the distribution making use of existing functionality where feasible, which means that +ENTSO-E is to be defined as a Data Intermediary+ and for all Bidding zone borders (i.e. Market Area border in XBID) an outbound file transfer is to be defined for recipient ETP*

*A Distribution Scheduler Mapping is to be created for each of these outbound file transfers with a time based trigger and repeating +every 15 minutes+.*

The type of file to be distributed by these new outbound file transfers is the new interface type.

The following information has to be reported to ETP for all Bidding Zone borders:
 • Delivery day (/)
 • MTU (= contract in XBID) (/)
 • Allocation time (= date & timestamp of the ATC change) (/)
 • IN Area (indicating of the border and direction) (/)
 • Out Area (indicating of the border and direction) (/)
 • ATC value (/)

As indicated above, the *frequency of file receipt (and accordingly file creation in CMM) is every 15 minutes*.

_Solution requirements:_
 * Each file covers only one Bidding Zone border
 * Each file covers all changes of the ATCs on the Bidding Zone border for a fixed period of 15 minutes (quarters of an hour)
 * In case no capacity has been allocated in the period of 15 minutes covered by the report, the report shall include the ATC values valid at the start of the period.",,ei349,qo794,radeale,tm431,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-800,XP-1364,,,,,,"27/Feb/19 17:53;radeale;20190227_CR095_Samplefiles.zip;https://jira.deutsche-boerse.com/secure/attachment/66315/20190227_CR095_Samplefiles.zip","27/Feb/19 17:53;radeale;ATC Reporting Interface.xlsx;https://jira.deutsche-boerse.com/secure/attachment/66316/ATC+Reporting+Interface.xlsx","27/Feb/19 17:53;radeale;iec62325-451-3-publication_v7_3.zip;https://jira.deutsche-boerse.com/secure/attachment/66314/iec62325-451-3-publication_v7_3.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,57196800,,,,,,,,,,XP-4092,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s0001042",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team 19 [S],Home Office Team 20,Home Office team 23 [S],Home Office team 24,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,plewmic-scripts,XP-1261-guava-28,selenide-poc,XP-1504,master-m7-api-1.0.x,xbid-losses-poc,XP-456,XP-2979-postgresql,m7-api-1.0.x,XP-3264,XP-3230,develop,XP-2232,XP-2694,master,XP-3070,XP-4273-owasp-zap-enable,inline-tomcat-params,XP-4526-resource-managment-fix,xbid-2.0.25.x,fixing-failover,XP-2080-finishing-price-rounding-integration,,,,,,,,,,,,true,"19/Mar/19 12:58;qo794;A new CMI application parameter (cunfigurable in cmi_env.properties) *occ.time.interval* introduced for configuring the period covered in an OCC report. The default value is set to *15*, its value is in minutes.","27/Mar/19 14:41;radeale;For details about the current status see XBID-4224.","16/Apr/19 10:16;radeale;The final solution approved as specified in XBID-4224.

*{color:#403294}Please see the newest tracked version of DFS800 in XBID-4224 for details{color}*.","29/Apr/19 10:17;tm431;Tested OK","02/May/19 13:40;ei349;can you please check and close if needed? ","02/May/19 14:16;radeale;Development, testing, documentation and communication done.

Thank you all for the good work! :)",,,,,,,,,,,,,,,,,,,,,,,,,,
Connection to new DB cluster,XP-1241,79037,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,ll664,yo218,yo218,27/Feb/19 17:05,04/Aug/20 19:36,22/Feb/21 13:21,04/Mar/19 14:21,,,Pre2020,,Reporting Engine,Shipping,Trading,,,,,,"We are now migrating our EnterpiseDB/Veritas setup to PostgreSQL/Patroni technology.

New PotgreSQL cluster shall consist of several PostgreSQL nodes permanently up and running all the time.

Only one of those nodes will be the leader, meaning that only one node will allow R/W access to the database.

The rest of the cluster nodes are the followers that will replicate with the leader asynchronously.

The followers still allow incoming DB client connections but will only allow RO access to the database.

The are now several possibilities to connect to the PostgreSQL cluster in R/W mode (i.e., figure out which node is currently the leader node).

The options below are given in order of Preference (most preferred at the top) from the point of view of 'good practice of distributed systems'.
 # Query Consul (because Consul is used by Patroni to maintain all cluster related information and should always have the knowledge about the current leader)
 # Poll Patroni REST API for health status (really just another interface to Consul in the end and extra work on the application side, so best to stick to option 1 above)
 # If Postgres Client (libpq) >= 10 is used, several hosts can be configured and the library will try and figure out a suitable connection by itself. The parameter `target_session_attrs` can be set to `read-write`, so every connection is first tested if it supports writes as well.
 # Application can figure out the leader if it is aware of all possible leader nodes and tries them one by one until it finds the node that allows R/W access. ""SELECT pg_is_in_recovery()"" can be used for detection.
 # Use 'floating' IP address that should normally point to the cluster leader (this requires separate software component running along-side Patroni).

Justifying this preference order is a longer read and can be discussed if needed.

Options 1, 2 and 4 would require some code logic adjustment.

At this stage we'd like to at least investigate if option 3 would work (no application code changes).

{color:#de350b}XBID Dev discussion: Also, consider failover impact of the new db solution{color}",,ll664,rd476,wm282,yo218,yw674,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,TECHLOG-2011,XP-1239,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,62208000,,,,,,,,,,XP-1570,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y088u2:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 17,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2501-to-xbid-dev-env,tomcat-rollback,traversal-XP-2485,XP-2942,XP-2506-xbid-dev-env,trailing-slash-syt1,XP-3025-catalina-timezone,XP-2484,XP-3110-deprecated-log,XP-2488-xbid-dev-env,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Mar/19 14:27;ll664;h2. TL;DR None of the options above would work without significant implementation effort in the XBID-Core due to change of replication mode from synchronous to asynchronous

The postgres 10 client works pretty well and the DB driver is able to switch the server in a (almost) seamless fashion. However, due to asynchronous Postgres replication, the XBID-Core cannot just continue persisiting to the new DB node. It doesn't know how much behind the DB might be and need to failover and replay the journal.
h3. Failover behaviour of multihost Postgres JDBC connection with Tomcat DBCP connection pool

When a DB node goes down:
 * No active work on DB Connection - transparent switch to another node.
 * Active work on DB Connection - Exception thrown, no recovery, client needs to react on Exception accordingly. Subsequent attempt to acquire a connection would connect to new host.

This is acceptable for Inquiry modules but not XBID-Core.
h3. Thoughts on how the XBID-Core reacts to DB failover
 - We cannot afford transparent switch to new master, the data might be behind
 - XBID-Core always needs to connect to master DB node, on DB unavailability initiate failover to slave that replays what's missing
 - Both XBID-Core master/slave polls failover lock on master DB instance
 - The failover polling needs to be robust enough to change the DB connection to new master seamlessly, i.e. by querying Consul etc.
 - However the connection change within the running XBID-Core app is allowed only for slave - the master cannot do that as it don't know how much behind the DB node is - hence the failover to slave and journal replay
 - The change of DB connection within the running application (without restart) in *non-trivial* and *invasive*
 - Radical idea: If we go with the reimplementation, why not redesign the failover completely and get rid of lock table polling?

h3. Conlusion

There is not way how to deal with DB failover without significant (re)implementation effort in the XBID-Core, given that the database is to be replicated asynchronously.
 Even the option 5, which seems like the current setup, won't do. Currently it is expected that DB replicated synchronously, hence when the IP floats to new host, it still has consistent data. This is not the case anymore with the new asynchronous replication setup.
h4. Note

The new failover implementaion applies for CMI and SMC modules as well.

 

 

 ","01/Mar/19 14:36;yo218;During the PoC it was confirmed by [~eg288] and [~nn481] that an asynchronous replication is totally acceptable as the journal file is considered as source of truth and a journal replay will always be able to add the missing transactions. Please discuss again within dev team and we can raise the topic during next devops cop meeting","04/Mar/19 14:21;ll664;[~qz412], [~ei349], as we decided to adjust failover implementation for the new cluster, I've created bunch of implemetation tasks and will close this one.

XP-1280
XP-1281
XP-1282
XP-1283
XP-1284
XP-1285",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[ACER] Example of filename in doc is incorrect,XP-1240,79034,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,de698,od044,od044,27/Feb/19 16:43,04/Aug/20 19:36,22/Feb/21 13:21,07/Mar/19 15:28,,,Pre2020,,SLA Report Tool,,,,,waiting-customer,,,"Example of a filename in documentation is incorrect

Definition in documentation
{quote}
XML file name is derived from Header class attributes and consists of:
	""Year_Month_Indicator name_createdDateTime""
Example: 2018-12_INTRADAY_TRADE_VOLUME_2019-01-08T065522Z.xml
{quote}

But per agreement in ticket XP-1123 the filename should be 

2018-12_INTRADAY_TRADE_VOLUME_2019-01-08-065522.xml
",,de698,od044,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,61948800,,,,,,,,,,XP-6,,,,,,,,,,,,,,27/Feb/19 16:43,,,,,,,,,,,,,,,,,,,,,"1|000y8w:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 17,,,,,,,,,,,,,,,,0.5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Mar/19 17:17;de698;The change is included in the spec and will be proposed to customer in the next review round on Monday 4th.","07/Mar/19 15:28;de698;Specification was fixed and agreed in xbid-3922 on 7.3.2019",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Reporting test model for weighted average price - data collector and generator,XP-1238,79023,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,hj444,hj444,hj444,27/Feb/19 15:27,04/Aug/20 19:35,22/Feb/21 13:21,01/Jul/19 08:09,,,Pre2020,,,,,,,,,,"{color:#00875a}*[ Improving test coverage for Acer Reporting ]*{color}
 Prepare feature file for *weighted average price* test model
 For implementation Use xbid-test structure:
 'test-models'
 '- unimplemented'
 '-- acer'",,hj444,tz118,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,52012800,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s000104201011",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 29,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,plewmic-scripts,XP-1261-guava-28,selenide-poc,XP-1504,xbid-losses-poc,XP-456,XP-2979-postgresql,XP-3264,XP-3230,develop,XP-2694,XP-2232,XP-3070,XP-4273-owasp-zap-enable,inline-tomcat-params,XP-4526-resource-managment-fix,xbid-2.0.25.x,fixing-failover,XP-2080-finishing-price-rounding-integration,,,,,,,,,,,,,,,true,"23/May/19 10:58;tz118;there is some feature file ready, [~hj444] please review and close/update this Jira

thanks

Stefan","27/Jun/19 15:14;hj444;weighted average price feature file is not done yet. 
Task - in status in progress. Preparation of feature file will start.","28/Jun/19 13:21;hj444;test model added 
pull request created : https://github.deutsche-boerse.de/dev/xbid-test/pull/174
waiting for approval.","01/Jul/19 09:58;hj444;task done. 
feature file merged.",,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Reporting test model for Intraday Volume  hour to delivery - data collector and generator,XP-1237,79021,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,hj444,hj444,hj444,27/Feb/19 15:24,04/Aug/20 19:35,22/Feb/21 13:21,01/Mar/19 13:04,,,Pre2020,,,,,,,,,,"Prepare feature file for Intraday Volume hour to delivery test model.
For implementation Use xbid-test structure:
'test-models'
'- unimplemented'
'-- acer'
",,hj444,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,62553600,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y088u7:w",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 17,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,plewmic-scripts,XP-1261-guava-28,selenide-poc,XP-1504,xbid-losses-poc,XP-456,XP-2979-postgresql,XP-3264,XP-3230,develop,XP-2694,XP-2232,XP-3070,XP-4273-owasp-zap-enable,inline-tomcat-params,XP-528-feature-file-testcases,XP-4526-resource-managment-fix,xbid-2.0.25.x,fixing-failover,XP-2080-finishing-price-rounding-integration,,,,,,,,,,,,,,true,"01/Mar/19 12:28;hj444;Pull request created:
https://github.deutsche-boerse.de/dev/xbid-test/pull/150","01/Mar/19 13:04;hj444;merge done",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Reporting test model for Bid-Ask - data collector and generator,XP-1236,79020,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tr866,hj444,hj444,27/Feb/19 15:23,04/Aug/20 19:36,22/Feb/21 13:21,04/Mar/19 15:10,,,Pre2020,,,,,,,,,,"Prepare feature file for bid-ask test model.
For implementation Use xbid-test structure:
'test-models'
'- unimplemented'
'-- acer'
",,hj444,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,62640000,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y088u7:r",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 17,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,plewmic-scripts,XP-1261-guava-28,selenide-poc,XP-1504,xbid-losses-poc,XP-456,XP-2979-postgresql,XP-3264,XP-3230,develop,XP-2232,XP-2694,XP-4273-owasp-zap-enable,XP-3070,inline-tomcat-params,XP-528-feature-file-testcases,XP-4526-resource-managment-fix,xbid-2.0.25.x,fixing-failover,XP-2080-finishing-price-rounding-integration,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Acer reporting - Analysis of dummy EIC Codes replacement proposed solution in XBID-4315,XP-1233,78993,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,rg535,ei349,ei349,27/Feb/19 09:25,06/Nov/20 10:55,22/Feb/21 13:21,01/Mar/19 10:48,,,Pre2020,,,,,,,,,,"In the XBID-4315 is proposed solution how to deal with dummy eic codes during the generation of reports in the Acer reporting.

Target of this task is to analyze the proposal in the document and give the feedback to [~rg535] and external Jira by friday 1st March. ",,de698,ei349,ek176,,,,,,,,,,,,,,,,,,,,,,,XBID-4315,,,,,,,,,,,,,,,,,,,"27/Feb/19 10:03;de698;Request_for_CR_Dummy_EIC_Codes_Replacement_v1.0_comments AR.docx;https://jira.deutsche-boerse.com/secure/attachment/66284/Request_for_CR_Dummy_EIC_Codes_Replacement_v1.0_comments+AR.docx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,62553600,,,,,,,,,,XP-4092,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y088u0:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 16 [S],Alpha Team Sprint 17,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Feb/19 10:04;de698;Please find attached the commented document.","28/Feb/19 14:25;de698;Dear Suzanna,

Please find here clarified analysis output from the team regarding the two points from CR Description:
{quote}Description
 1. Both data collectors (Bid-Ask and Volumes-Prices) to be improved to capture the DA EIC codes (when MA has only one DA).
 2. Postprocessing to be done in the data captured by both the data collectors since original deployment till the deployment of this CR. Postprocessing to replace the dummy EIC codes with the DA EIC Codes (when MA has only one DA).
{quote}
Current data collectors in production capture data with dummy EIC.
 For any post-processing of the data, which is aim of point 2, an ad-hoc sql will be needed.
 Pre-requisites for all three below listed options are:
 * Create the ad-hoc sql script for mapping of already captured data
 * Have the Report Tool deployed to PROD before July to be able to generate the XMLs at all

Three options for post-processing solution are possible:
 # Have both collectors fixed (to capture proper EICs) and deployed in production, i.e. point 1 is finished. However, point 1 deployment to Prod is only planned with R2.0 (expected in Sept-Oct). In case of such a preliminary/hotfix deployment, an ad-hoc sql script has to map the correct EICs +before+ generating the reports. Only after that the Report Tool can generate correct XMLs – but the Report Tool has to be in production too. => therefore, if we want to have it done this way prior the R2.0, *an ad-hoc deployment of both xbid (1.5.x)&report tool* would be necessary. That would be an option with ""hotfix"" or something which is not a preferred solution. 
 # Previously the R2.0 was planned earlier and thus full-blown ACER Reporting solution was expected to be deployed with it and so meet all required reporting timelines. Due to the delay of R2.0, the solution would be wait till the R2.0 is in production with the Report Tool and run the ad-hoc sql query only in September. Meaning, *reports for H1 2019 would be delivered in September only*. 
 # *Do the EIC migration twice*: deploy only the Report Tool to production on time, i.e June latest (which requires no xbid 1.5.x deployment, and no downtime), run the ad-hoc sql and generate the reports; after R2.0 in autumn, run the migration again for e.g. three incorrect months and the rest should be already properly captured.

We should propose the options 2 and 3, while {color:#00875a}the option 3 is what we prefer{color} :)
  

Kind Regards,

Alena","01/Mar/19 10:48;ek176;Sent out to customers",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Reporting - provide track changes version to TWG/FTF,XP-1222,78928,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,de698,de698,de698,25/Feb/19 10:14,06/Nov/20 10:55,22/Feb/21 13:21,27/Feb/19 09:11,,,Pre2020,,,,,,,,,,"TWG/FTF requested track changes version of the ACER specification with distinction of already agreed content from Phase 1 and Phase 2, and the newly added content.",,de698,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,62726400,,,,,,,,,,XP-4092,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y088g0:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 16 [S],,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Feb/19 09:11;de698;Track changes version additionally created, reviewed by team members and provided to customer in Jira XBID-3922.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
API change - pending change from CR083 (Recall/Cancel flag on member),XP-1219,78895,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,hj444,de698,de698,22/Feb/19 13:04,06/Nov/20 12:45,22/Feb/21 13:21,12/Mar/19 15:25,,,Pre2020,,,,,,,,,,"+Based on:+

_""TWG FTF 21/2 discussed the feedback provided in XBID-4046, but before confirmation of reflection of R2.0 API changes in managerial documents would like to ask DBAG for clarification:_ 
 # _When discussing CR083, there has been postponed a change in API stipulated in [CR083|https://service.projectplace.com/pp/pp.cgi/r1412742792] to a later release than R1.4:_
 # _{color:#ff8b00}Has the change been included already in R2.0 API and consequently also reflected in R2.0 managerial document?{color}""_

+Checked with Jakub Hesoun:+
 the API change was not implemented.

*What needs to be done:*
 - Implement the change as per DFS510 specification, chapters 5.7.2 *member Change Report* and 5.7.12 *All Members Response*:
|recallCancel|A|m|Boolean|Flag that indicates whether or not an assigned PX supports the trade recall grant/trade cancel functionality.|

 - Compile new .xsd and distribute to the customers via XBID-4046
 - Evaluate whether CT needs to be updated, if yes, update CT
 - Evaluate whether Test Client needs to be updated",,de698,hj444,qz412,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-1286,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,61948800,,,,,,,,,,XP-4096,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y088u7:i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 17,Alpha Team Sprint 18 [S],,,,,,,,,,,,,,,0.5,,,,,,,,,,,,,,,,,,,,,,,,,,,,comtrader-2.5.x,XP-69,master-m7-api-1.0.x,m7-api-1.0.x,m7-api-1.0.40.x,master-m7-api-1.0.40.x,XP-2583,XP-2554,master,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Feb/19 16:43;qz412;Update: .xsds explicitly mentioned in the Description","08/Mar/19 10:16;hj444;test failed :
Force logout after login into Comtrader.
Comtrader version :
ComTrader V. 2.5.1.44 2019-02-18T08:14:37Z
JRE: 1.8.0_191-b12, Webstart: javaws-11.191.2.12
JVM: Java HotSpot(TM) 64-Bit Server VM by Oracle Corporation
OS: Linux 4.15.0-43-generic amd64
192MB / 4096MB

Comtrader logs
{code}
2019-03-08T10:07:40.477+0100 [rader-Worker-15] ERROR c.d.c.c.a.c.c.ComXervMarshaller - <?xml version=""1.0"" encoding=""UTF-8"" standalone=""yes""?><AllMbrsResp xmlns=""http://www.deutsche-boerse.com/m7/v1""><StandardHeader marketId=""XSOB""/><MbrList><Mbr revisionNo=""0"" mbrId=""ARTIF"" name=""Artificial member"" state=""ACTI"" type=""REG"" recallCancel=""false""/><Mbr revisionNo=""0"" mbrId=""BRKM1"" name=""Broker test member"" state=""ACTI"" type=""REG"" recallCancel=""false""/><Mbr revisionNo=""0"" mbrId=""BSPSX"" name=""Admin test member"" state=""ACTI"" type=""REG"" recallCancel=""false""/><Mbr revisionNo=""0"" mbrId=""DVNDR"" name=""Data vendor member"" state=""ACTI"" type=""REG"" recallCancel=""false""/><Mbr revisionNo=""0"" mbrId=""MEPEX"" name=""EPEX member"" state=""ACTI"" type=""REG"" recallCancel=""true""/><Mbr revisionNo=""0"" mbrId=""MNORT"" name=""Northpool member"" state=""ACTI"" type=""REG"" recallCancel=""false""/><Mbr revisionNo=""0"" mbrId=""MSOUT"" name=""Southpool member"" state=""ACTI"" type=""REG"" recallCancel=""true""/></MbrList></AllMbrsResp>
2019-03-08T10:07:40.480+0100 [rader-Worker-15] ERROR c.d.c.c.a.c.c.AbstractComXervAmqpBackend - error sending request
com.deutscheboerse.comxerv.comtrader.service.amqp.MarshallerException: javax.xml.bind.UnmarshalException
 - with linked exception:
[org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 261; cvc-complex-type.3.2.2: Attribute 'recallCancel' is not allowed to appear in element 'Mbr'.]
	at com.deutscheboerse.comxerv.comtrader.api.comxerv.common.ComXervMarshaller.getObject(ComXervMarshaller.java:82)
	at com.deutscheboerse.comxerv.comtrader.api.comxerv.common.AbstractComXervAmqpBackend.sendRequest(AbstractComXervAmqpBackend.java:224)
	at com.deutscheboerse.comxerv.comtrader.service.amqp.AbstractAmqpBackend.sendRequest(AbstractAmqpBackend.java:214)
	at com.deutscheboerse.comxerv.comtrader.api.comxerv.common.AbstractComXervExchangeConnection.sendRequest(AbstractComXervExchangeConnection.java:203)
	at com.deutscheboerse.comxerv.comtrader.api.comxerv.common.AbstractComXervExchangeConnection.sendRequest(AbstractComXervExchangeConnection.java:207)
	at com.deutscheboerse.comxerv.comtrader.api.m7.v1.ComXervExchangeConnection.getAllMembers(ComXervExchangeConnection.java:555)
	at com.deutscheboerse.comxerv.comtrader.api.comxerv.common.load.LoadMembersTask.load(LoadMembersTask.java:23)
	at com.deutscheboerse.comxerv.comtrader.api.comxerv.common.load.LoadSingleEntityTypeTask.run(LoadSingleEntityTypeTask.java:30)
	at com.deutscheboerse.comxerv.comtrader.util.concurrent.ForkJoin$1.run(ForkJoin.java:40)
	at com.deutscheboerse.ui.jfx.util.LoggingRunnable.run(LoggingRunnable.java:21)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748){code}
{code}","08/Mar/19 10:34;hj444;Test Client messages After member Recall&Cancel flag change: 
OK
*MbrChangeRprt*
to Unsupported:
{code}
<?xml version=""1.0"" encoding=""UTF-8""?>
<MbrChangeRprt xmlns=""http://www.deutsche-boerse.com/m7/v1"" mbrId=""MEPEX"" name=""EPEX member"" revisionNo=""1"" state=""ACTI"" recallCancel=""false"">
    <StandardHeader marketId=""XSOB""/>
</MbrChangeRprt>
{code}

back to Supported:
{code}
<?xml version=""1.0"" encoding=""UTF-8""?>
<MbrChangeRprt xmlns=""http://www.deutsche-boerse.com/m7/v1"" mbrId=""MEPEX"" name=""EPEX member"" revisionNo=""2"" state=""ACTI"" recallCancel=""true"">
    <StandardHeader marketId=""XSOB""/>
</MbrChangeRprt>
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Batch 5 Documentation Update - Initiate,XP-1215,78864,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,radeale,radeale,21/Feb/19 17:12,04/Aug/20 19:35,22/Feb/21 13:21,17/Apr/19 10:27,,,Pre2020,,Capacity,Shipping,Trading,,,,,,Go through all the Batch 5 containers (XBID tickets) and check whether any of them needs finishing and/or the customers a bit pushing.,,de698,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,63158400,,,,,,,,,,XP-174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08klo:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enhance Bid/Ask Spread collector with information about blocks,XP-1208,78842,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,uv683,ll664,ll664,21/Feb/19 13:34,04/Aug/20 19:36,22/Feb/21 13:21,21/Mar/19 10:46,,,Pre2020,,Trading,,,,,,,,"{color:#00875a}*[ Feature ]*{color}

Currently the info about blocks is gathered at the momement of report generation. This is sub-optimal, as it happens at the end of the month and we have only 10 days until data are deleted.

We need to enhance the collector and store the contract type - BLO/CAN in the BID_ASK_SPREAD db table.",,ll664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,63158400,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08c18:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 19,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
XBID 2.0 Review of AIP110 & AIP120,XP-1207,78833,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tz118,qm925,qm925,21/Feb/19 11:18,06/Nov/20 11:27,22/Feb/21 13:21,17/Apr/19 16:53,,,Pre2020,,,,,,,,,,"DBAG needs to update AIP110 & AIP120 in order to reflect the changes foreseen for R2.0. 

TechOps input has been already provided. 

Please review the attached documents.",,qm925,qz412,tz118,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,M7ACM-250,TECHLOG-2213,,,,,,"15/Apr/19 16:34;tz118;AIP110_consul.PNG;https://jira.deutsche-boerse.com/secure/attachment/68089/AIP110_consul.PNG","08/Mar/19 12:39;qz412;AIP120.png;https://jira.deutsche-boerse.com/secure/attachment/66635/AIP120.png","21/Feb/19 11:18;qm925;Appendix 5A.2-B_AIP120_v12.1.docx;https://jira.deutsche-boerse.com/secure/attachment/66090/Appendix+5A.2-B_AIP120_v12.1.docx","03/Apr/19 15:26;qm925;Appendix 5A.2-B_AIP120_v13.0.docx;https://jira.deutsche-boerse.com/secure/attachment/67612/Appendix+5A.2-B_AIP120_v13.0.docx","21/Feb/19 11:18;qm925;Attachment 5E - AIP110 - Technical Architecture Topology Diagram - Hosting v.3.1.docx;https://jira.deutsche-boerse.com/secure/attachment/66089/Attachment+5E+-+AIP110+-+Technical+Architecture+Topology+Diagram+-+Hosting+v.3.1.docx","03/Apr/19 15:26;qm925;Attachment 5E - AIP110 - Technical Architecture Topology Diagram - Hosting v.4.0.docx;https://jira.deutsche-boerse.com/secure/attachment/67613/Attachment+5E+-+AIP110+-+Technical+Architecture+Topology+Diagram+-+Hosting+v.4.0.docx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,58492800,,,,,,,,,,XP-4090,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08eso:5",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 22 [S],Alpha Team Sprint 23,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Mar/19 12:39;qz412;Dear all,

we have reviewed with dev and i our opinion the text in chapter 4.2.1 is not precise given the agreed db cluster setup.

Please see our findings outlined below (sorry, we did not prepare a separate doc as the changes are very limited).

[~yo218]: I have directly assigned to you, please feel free to reassign to anybody you feel should be responsible. Thank you, Ondra.

!AIP120.png!

Thx, Ondra","03/Apr/19 15:27;qm925;Dear all,

Please find attached the updated version of AIP110 & AIP120 related to R2.0  [^Attachment 5E - AIP110 - Technical Architecture Topology Diagram - Hosting v.4.0.docx]  [^Appendix 5A.2-B_AIP120_v13.0.docx] 

Best regards,
Simona","05/Apr/19 09:41;qm925;Hi Stefan,

I checked with Niklas. The only update in AIP110 are the figures, there are no changes in the text. 

Best regards,
Simona","10/Apr/19 14:09;tz118;Topic discussed, documents reviewed, related TECHLOG Jira created to clarify Impact on UAT Failover tests.","15/Apr/19 16:36;tz118;In case Consul stays in the AIP110, then we recommend to update diagram for SIMU and PROD, see attached screenshot for more details --> !AIP110_consul.PNG!","17/Apr/19 11:05;tz118;topic discussed during RCB preparation–> techops to update AIP110",,,,,,,,,,,,,,,,,,,,,,,,,,
review archiving concept and data in scope,XP-1204,78824,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,tz118,tz118,21/Feb/19 09:50,31/Aug/20 15:38,22/Feb/21 13:21,20/Aug/20 12:20,,,3.1.1,,,,,,,,,,"{noformat}
 S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\Planned\_internal Archiving Concept{noformat}
 

[https://confluence.energy.svc.dbgcloud.io/display/XBID/Archiving]

[https://confluence.energy.svc.dbgcloud.io/display/XBID/How+to+get+archived+tables+from+CENTERA]

[https://confluence.energy.svc.dbgcloud.io/display/XBID/PMI+archiving]

AC:
 - gaps in comparison to the Archiving concept and operation (if any) are identified and documented
 - DB tables in scope are reviewed and follow up steps are discussed with PO
 - missing items list",,dw255,gd553,qo794,radeale,tz118,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XDEV-3061,XDEV-5328,,,,,,"22/Jul/19 09:02;ei349;RE PX XBID - RCB - data storage accessibility .msg;https://jira.deutsche-boerse.com/secure/attachment/71853/RE+PX+XBID+-+RCB+-+data+storage+accessibility+.msg",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,16070400,,,,,,,,,,XP-3501,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0bbbr:y",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 35 [S],Home Office Team Sprint 36,HOT Sprint 15,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Aug/20 11:53;qo794;h2. The current status
h3. Tables exported from CORE database
||table name||
|cmm_101_allocation_history|
|cmm_106_allocation_metadata_history|
|cmm_121_capacity_history|
|cmm_131_contract_history|
|cmm_151_file_status_history|
|cmm_201_area_history|
|cmm_203_area_configuration_history|
|cmm_221_border_history|
|cmm_224_border_config_history|
|cmm_226_border_configuration_history|
|cmm_231_inter_connector_history|
|cmm_233_inter_connector_status_history|
|cmm_236_interconnector_configuration_history|
|cmm_251_region_tso_history|
|cmm_261_data_intermediary_history|
|cmm_271_balancing_group_history|
|cmm_272_rights_holder_history|
|cmm_274_balancing_group_x_ic_history|
|cmm_276_balancing_group_role_history|
|cmm_279_balancing_group_config_history|
|cmm_281_user_history|
|cmm_311_user_role_history|
|cmm_401_trading_schedule_history|
|cmm_411_trading_phase_history|
|cmm_601_configuration_history|
|cmm_661_balancing_mechanism_desc_history|
|cx_002_market_state_history|
|cx_101_order_history|
|cx_111_trade_history|
|cx_117_trade_allocation_history|
|cx_151_messages_history|
|cx_202_product_history|
|cx_203_product_configuration_history|
|cx_211_contract_history|
|cx_213_contract_name_format_history|
|cx_250_tso_dispute_history|
|cx_253_market_area_history|
|cx_255_delivery_area_history|
|cx_257_exchange_history|
|cx_261_member_history|
|cx_265_exchange_market_history|
|cx_267_exchange_market_dispute_history|
|cx_271_balancing_group_history|
|cx_283_user_history|
|cx_285_user_x_balancing_group_history|
|cx_296_session_history|
|cx_301_balancing_group_x_tso_history|
|cx_313_user_role_history|
|cx_321_product_x_balancing_gr_history|
|cx_331_product_x_region_tso_history|
|cx_401_trading_schedule_history|
|cx_411_trading_phase_history|
|cx_431_tso_trading_schedule_assignment_history|
|cx_441_contract_delivery_area_state_history|
|cx_451_holidays_history|
|cx_471_weekly_trading_rules_history|
|cx_601_configuration_history|
|cx_611_application_access_history|
|cx_673_trade_flow_history|
|cx_801_subscriber_history|
|cx_821_subscriber_x_report_history|

h3. Tables exported from CMI database
||table name||
|tbxi011_distributed_file_cfg_history|
|tbxi011_distribution_event_map_history|
|tbxi011_distribution_scheduler_map_history|
|tbxi016_expected_files_cfg_history|
|tbxi700_file_header_history|
|tbxi701_acknowledgement_header_history|
|tbxi999_history_revision|

h3. Tables exported from SPM database
|acknowledgement_history|
|area_history|
|exchange_ccp_da_history|
|exchange_history|
|exchange_to_da_history|
|party_history|
|revinfo|
|shipping_arrangement_history|
|shipping_party_x_da_history|
|transfer_configuration_history|
|user_group_history|
|user_group_x_shipping_party_history|
|user_spm_history|
|user_spm_role_history|

Always all columns are automatically exported from the database tables listed above.","20/Aug/20 12:19;radeale;Archiving concept updated to version 1.5 and places to Sharepoint [here|https://projects.deutsche-boerse.de/sites/ps0080/Shared Documents/04 XBID Legal Framework/06 Operational Documents/03 Operational Readiness Handbook/09 WS Storage & Archiving].",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Reporting - test results validation,XP-1189,78759,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,de698,de698,de698,20/Feb/19 10:25,04/Aug/20 19:36,22/Feb/21 13:21,28/Feb/19 14:32,,,Pre2020,,,,,,,,,,"See XP-1158 ACER Reporting test model.

Check the overall test results.

*What needs to be done:*

Attachments in the chapter 5 of the final ACER Reporting specification will be replaced with our examples - those from testing could be used.

 

Suggested effort: 1 sp",,de698,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,62553600,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y087rb:i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 16 [S],Alpha Team Sprint 17,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Feb/19 14:32;de698;XMLs for A01, A03, B01, B02 are prepared and stored on s-drive with official documentation S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\Planned\PER120 Change Management\Change Requests\CR090 - Acer Reporting (included in CR093 and CR094)

It was found, that _documentID_ attribute is still not aligned with the specification due to miscommunication within the team. The bug is very trivial (""SIDC_A03_2019*{color:#de350b}-{color}*02"" in the system, ""SIDC_A03_2019*{color:#de350b}_{color}*02"" should be according to the spec) and we will suggest to change it in the spec during the review rounds with the customer.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Proof of Concept for Losses ,XP-1182,78622,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,de698,rg535,rg535,19/Feb/19 10:19,06/Nov/20 09:10,22/Feb/21 13:21,21/Feb/19 16:09,,,Losses ASR,,,,,,,XBID,,,"{color:#00875a}*[ Feature - new market model, shared understanding with the NEMOs/TSOs ]*{color}

Dear Alena, please can you answer the questions in the attached document.

[link title|https://projects.deutsche-boerse.de/sites/ps0080/Shared%20Documents/04%20XBID%20Legal%20Framework/01%20XBID%20Contracts%20and%20Change%20Requests/03_XBID%20Additional%20Service%20Requests/ASR010c%20-%20Analysis%20for%20Losses%20Part%20III]",,de698,rg535,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Feb/19 10:20;rg535;ASR010c - Analysis for Losses Part III POC.docx;https://jira.deutsche-boerse.com/secure/attachment/65882/ASR010c+-+Analysis+for+Losses+Part+III+POC.docx","19/Feb/19 12:04;de698;ASR010c - Analysis for Losses Part III POC_AR.docx;https://jira.deutsche-boerse.com/secure/attachment/65889/ASR010c+-+Analysis+for+Losses+Part+III+POC_AR.docx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,63158400,,,,,,,,,,XP-3369,,,Impediment,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000ycl:99",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 15,Alpha Team Sprint 16 [S],,,,,,,,,,,,,,,0.5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Feb/19 10:21;rg535;[~de698], please can you answer the questions in the attached document. [link title|https://projects.deutsche-boerse.de/sites/ps0080/Shared%20Documents/04%20XBID%20Legal%20Framework/01%20XBID%20Contracts%20and%20Change%20Requests/03_XBID%20Additional%20Service%20Requests/ASR010c%20-%20Analysis%20for%20Losses%20Part%20III]

Thanks, Suzanna","19/Feb/19 12:04;de698;Dear Suzanna, please find attached the document with responses. Let me know your thoughts.

[^ASR010c - Analysis for Losses Part III POC_AR.docx]

Kind Regards,
Alena","21/Feb/19 16:08;de698;The ASR for losses has been loaded to XBID-1667 :)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Acer: Error while closing item reader,XP-1179,78616,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,qo794,qo794,19/Feb/19 08:21,04/Aug/20 19:36,22/Feb/21 13:21,26/Feb/19 15:24,,,Pre2020,,SLA Report Tool,,,,,,,,"The following error pops up when a job generating an ACER report is executed (can tested via operator-cli for instance):
{code:java}
2019-02-19 08:14:53.418 batch-jobs-thread-1 INFO  - o.s.b.f.s.DisposableBeanAdapter - Destroy method 'close' on bean with name 'scopedTarget.generatorWeightedAveragePriceReader' threw an exception: org.springframework.batch.item.ItemStreamException: Error while closing item reader
{code}",,od044,qo794,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,62726400,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y087vo:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 16,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Feb/19 08:55;qo794;*Root cause*: all readers/writers are automatically closed by spring batch, since {{JdbcCursorItemReader.close()}} is also called when destroying such a bean this very last step always fails.","26/Feb/19 15:22;od044;Test passed on 
- test on report-tool-operator-cli-2.10-SNAPSHOT.jar and report-tool-2.10-SNAPSHOT-24-7.jar 


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[ACER] Generated report of weighted average price report doesn't include other info than info of BLOCK contract,XP-1178,78608,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,,od044,od044,18/Feb/19 15:37,06/Nov/20 10:55,22/Feb/21 13:21,18/Feb/19 15:49,,,Pre2020,,SLA Report Tool,,,,,,,,"Generated report of weighted average price report doesn't include other info than info of BLOCK contract

 

Here is acer_weighted_average_price table result - there are 3 records (2 INTRADAY, 1 BLOCK):

[^acer_weighted_average_price_201902181521.csv]

Generated report - contain only info for BLOCK contract

[^2018-02_WEIGHTED_AVERAGE_PRICE_2019-02.xml]

 

StR:

1. send block orders
2. send non block orders
3. verify values in DB
4. verify generated report values.",,od044,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Feb/19 15:31;od044;2018-02_WEIGHTED_AVERAGE_PRICE_2019-02.xml;https://jira.deutsche-boerse.com/secure/attachment/65858/2018-02_WEIGHTED_AVERAGE_PRICE_2019-02.xml","18/Feb/19 15:31;od044;acer_weighted_average_price_201902181521.csv;https://jira.deutsche-boerse.com/secure/attachment/65857/acer_weighted_average_price_201902181521.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,63417600,,,,,,,,,,XP-4092,,,,,,,,,,,,,,18/Feb/19 15:37,,,,,,,,,,,,,,,,,,,,,"1|y086sg:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,Systemtest,,,Systemtest,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Feb/19 15:48;od044;Close ticket - invalid 

- there were a wrong mapping of product name between report tool and core",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Reporting test model for IntradayVolume - data collector and generator,XP-1158,78500,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,hj444,radeale,radeale,14/Feb/19 11:50,04/Aug/20 19:35,22/Feb/21 13:21,27/Feb/19 15:19,,,Pre2020,,Trading,,,,,,,,"We need to have a formalized test model, please create one and put it to:
S:\Energie\Prod_DEVELOP\002 Test\002 XBid Release\Test Models\22_Updated_Regression

Please also describe whether some and which of the tests are automatized.

AC:
1. Existing test model placed in:
S:\Energie\Prod_DEVELOP\002 Test\002 XBid Release\Test Models\22_Updated_Regression
2. Let the other team members review the test model to spread the knowledge
",,de698,dw255,hj444,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-1238,XP-1236,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,62726400,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y087rb:o",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 16 [S],,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,plewmic-scripts,XP-1261-guava-28,selenide-poc,XP-1504,xbid-losses-poc,XP-456,XP-2979-postgresql,XP-3264,XP-3230,develop,XP-2232,XP-2694,XP-3070,XP-4273-owasp-zap-enable,inline-tomcat-params,XP-528-feature-file-testcases,XP-4526-resource-managment-fix,xbid-2.0.25.x,fixing-failover,XP-2080-finishing-price-rounding-integration,,,,,,,,,,,,,,true,"14/Feb/19 11:51;radeale;Proposed SP: 3","19/Feb/19 16:28;dw255;ACER reporting tests can be found in XP-287 and its sub-tasks and in XP-825.","27/Feb/19 12:58;hj444;work was split by reports.
feature file for Intraday Trade Volume added into new structure in xbid-test project.
- structure discussed and prepared within https://jira.deutsche-boerse.com/browse/XP-1012
'test-models'
'- unimplemented'
'-- acer'

pul request created : https://github.deutsche-boerse.de/dev/xbid-test/pull/149",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER spec - include comments from review,XP-1150,78464,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,de698,de698,de698,13/Feb/19 14:28,04/Aug/20 19:35,22/Feb/21 13:21,14/Feb/19 16:50,,,Pre2020,,,,,,,,,,"The specification was sent for review.

Comments from the team should be incorporated into the document.",,de698,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,63763200,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y085y8:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 14 [S],Alpha Team Sprint 15,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Feb/19 16:50;de698;Comments from scrum team incorporated.

Document is available: S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\Planned\PER120 Change Management\Change Requests\CR090 - Acer Reporting (included in CR093 and CR094)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses PoC - response to comments,XP-1141,78424,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,de698,de698,de698,12/Feb/19 14:59,04/Aug/20 19:31,22/Feb/21 13:21,21/Feb/19 10:44,,,Losses ASR,,,,,,,,,,"Commented document was uploaded to Jira XBID-1667.

*What needs to be done:*
 * answer the technical / functional comments in the attached file

Suzanna will then answer the commercial aspects",,de698,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,63936000,,,,,,,,,,XP-955,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y085pk:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 14 [S],Alpha Team Sprint 15,Alpha Team Sprint 16 [S],,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Report Generation - weighted average price last trading hour report - block Ordes vs non block orders,XP-1134,78405,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tr866,hj444,hj444,12/Feb/19 11:56,04/Aug/20 19:35,22/Feb/21 13:21,21/Feb/19 09:18,,,Pre2020,,,,,,,,,,"Verify weighted average price last trading hour report generation for block orders and non block orders.

1. send block orders
2. send non block orders
3. verify values in DB
4. verify generated report values.
",,hj444,tr866,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Feb/19 09:36;tr866;2019-02_WEIGHTED_AVERAGE_PRICE_LAST_TRADING_HOUR_2019-02-19-150242.xml;https://jira.deutsche-boerse.com/secure/attachment/66075/2019-02_WEIGHTED_AVERAGE_PRICE_LAST_TRADING_HOUR_2019-02-19-150242.xml","21/Feb/19 09:36;tr866;2019-02_WEIGHTED_AVERAGE_PRICE_LAST_TRADING_HOUR_2019-02-20-090249.xml;https://jira.deutsche-boerse.com/secure/attachment/66076/2019-02_WEIGHTED_AVERAGE_PRICE_LAST_TRADING_HOUR_2019-02-20-090249.xml","21/Feb/19 09:36;tr866;2019-02_WEIGHTED_AVERAGE_PRICE_LAST_TRADING_HOUR_2019-02-21-075942.xml;https://jira.deutsche-boerse.com/secure/attachment/66077/2019-02_WEIGHTED_AVERAGE_PRICE_LAST_TRADING_HOUR_2019-02-21-075942.xml","21/Feb/19 09:36;tr866;ComTrader-Same_Hour-screenshot_20.02.2019-001.png;https://jira.deutsche-boerse.com/secure/attachment/66078/ComTrader-Same_Hour-screenshot_20.02.2019-001.png","21/Feb/19 09:36;tr866;ComTrader-Trades-screenshot_19.02.2019-001.png;https://jira.deutsche-boerse.com/secure/attachment/66079/ComTrader-Trades-screenshot_19.02.2019-001.png","21/Feb/19 09:36;tr866;screenshot_19.02.2019-001-T00-01.png;https://jira.deutsche-boerse.com/secure/attachment/66082/screenshot_19.02.2019-001-T00-01.png","21/Feb/19 09:36;tr866;screenshot_19.02.2019-001-base.png;https://jira.deutsche-boerse.com/secure/attachment/66080/screenshot_19.02.2019-001-base.png","21/Feb/19 09:36;tr866;screenshot_19.02.2019-001-peak.png;https://jira.deutsche-boerse.com/secure/attachment/66081/screenshot_19.02.2019-001-peak.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,63244800,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y085yf:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 15,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Feb/19 16:55;tr866;Test model with current progress saved here:
S:\ENERGIE\Prod_DEVELOP\002 Test\002 XBid Release\Test Models\15_CRs\CR090 Acer Reporting",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Report Generation - Intraday trade volume hour to delivery report - block orders vs non block orders,XP-1133,78404,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,hj444,hj444,hj444,12/Feb/19 11:54,04/Aug/20 19:35,22/Feb/21 13:21,20/Feb/19 14:37,,,Pre2020,,,,,,,,,,"Verify Intraday trade volume hour to delivery  report generation for block orders and non block orders.

1. send block orders
2. send non block orders
3. verify values in DB
4. verify generated report values.

Howto test:
https://confluence.energy.svc.dbgcloud.io/pages/viewpage.action?pageId=14026765",,hj444,od044,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-1237,,,,,,,"18/Feb/19 18:24;od044;2018-02_INTRADAY_TRADE_VOLUME_2019-02-18.xml;https://jira.deutsche-boerse.com/secure/attachment/65874/2018-02_INTRADAY_TRADE_VOLUME_2019-02-18.xml","18/Feb/19 18:23;od044;acer_intraday_trade_volume_201902181817.csv;https://jira.deutsche-boerse.com/secure/attachment/65873/acer_intraday_trade_volume_201902181817.csv","18/Feb/19 18:22;od044;select_from_cx_110_trade_201902181814.csv;https://jira.deutsche-boerse.com/secure/attachment/65872/select_from_cx_110_trade_201902181814.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,63331200,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0863a:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 15,,,,,,,,,,,,,,,,0.5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Feb/19 18:24;od044;Test passed on ReportTool24_7 v2.7-SNAPSHOT 
 * Report contains records for block order contact and non-block order contract

Trades:
[^select_from_cx_110_trade_201902181814.csv]

Acer acer_intraday_trade_volume :
 [^acer_intraday_trade_volume_201902181817.csv] 

Report:
 [^2018-02_INTRADAY_TRADE_VOLUME_2019-02-18.xml] ","20/Feb/19 10:38;od044;Test wrong report -> reopen","20/Feb/19 11:11;hj444;test will be done with https://jira.deutsche-boerse.com/browse/XP-1044",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Report Generation - weighted average price report - block orders vs non block orders,XP-1132,78403,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,hj444,hj444,12/Feb/19 11:53,04/Aug/20 19:35,22/Feb/21 13:21,18/Feb/19 15:38,,,Pre2020,,,,,,,,,,"Verify weighted average price report generation for block orders and non block orders.

1. send block orders
2. send non block orders
3. verify values in DB
4. verify generated report values.

Howto test:
 [https://confluence.energy.svc.dbgcloud.io/pages/viewpage.action?pageId=14026765]",,hj444,od044,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-1178,,,,,,,"18/Feb/19 15:50;od044;2018-02_WEIGHTED_AVERAGE_PRICE_2019-02-18New.xml;https://jira.deutsche-boerse.com/secure/attachment/65861/2018-02_WEIGHTED_AVERAGE_PRICE_2019-02-18New.xml","18/Feb/19 15:25;od044;2018-02_WEIGHTED_AVERAGE_PRICE_2019-02.xml;https://jira.deutsche-boerse.com/secure/attachment/65854/2018-02_WEIGHTED_AVERAGE_PRICE_2019-02.xml","18/Feb/19 15:24;od044;acer_weighted_average_price_201902181521.csv;https://jira.deutsche-boerse.com/secure/attachment/65853/acer_weighted_average_price_201902181521.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,63417600,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08638:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 15 [S],,,,,,,,,,,,,,,,0.5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Feb/19 15:27;od044;Test failed 
 * The report doesn't contain info for other contracts than BLOCK contract

 

Here is acer_weighted_average_price table result - there are 3 records (2 INTRADAY, 1 BLOCK):

[^acer_weighted_average_price_201902181521.csv]

Generated report - contain only info for BLOCK contract

[^2018-02_WEIGHTED_AVERAGE_PRICE_2019-02.xml]","18/Feb/19 15:52;od044;Test passed
 * the last test used the wrong product name that has been defined in Acer 
 * after adjusting a product name than generated report contains all records accordingly 

[^2018-02_WEIGHTED_AVERAGE_PRICE_2019-02-18New.xml]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Report Generation - Intraday trade volume report - block orders vs non block orders,XP-1131,78402,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,hj444,hj444,12/Feb/19 11:51,04/Aug/20 19:35,22/Feb/21 13:21,19/Feb/19 12:46,,,Pre2020,,,,,,,,,,"Verify Intraday trade volume report generation for block orders and non block orders.

1. send block orders
2. send non block orders
3. verify values in DB 
4. verify generated report values.

Howto test:
https://confluence.energy.svc.dbgcloud.io/pages/viewpage.action?pageId=14026765",,hj444,od044,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Feb/19 12:45;od044;2018-02_INTRADAY_TRADE_VOLUME_2019-02-19.xml;https://jira.deutsche-boerse.com/secure/attachment/65891/2018-02_INTRADAY_TRADE_VOLUME_2019-02-19.xml","19/Feb/19 12:46;od044;acer_intraday_trade_volume_201902191244.csv;https://jira.deutsche-boerse.com/secure/attachment/65893/acer_intraday_trade_volume_201902191244.csv","19/Feb/19 12:46;od044;select_from_cx_110_trade_201902191244.csv;https://jira.deutsche-boerse.com/secure/attachment/65892/select_from_cx_110_trade_201902191244.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,63417600,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08636:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 15 [S],,,,,,,,,,,,,,,,0.5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Feb/19 12:46;od044;Test passed 

- Values are imported and generated report contains correct values

Trades in core: [^select_from_cx_110_trade_201902191244.csv] 

acer_intraday_trade_volume :  [^acer_intraday_trade_volume_201902191244.csv] 

Report: [^2018-02_INTRADAY_TRADE_VOLUME_2019-02-19.xml] ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Report Generation -  bid ask spread report - block orders vs non block orders,XP-1130,78401,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,hj444,hj444,hj444,12/Feb/19 11:49,04/Aug/20 19:36,22/Feb/21 13:21,20/Feb/19 09:24,,,Pre2020,,,,,,,,,,"Verify bid ask spread report generation for block orders and non block orders.

1. send block orders
2. send non block orders
3. verify values in DB 
4. verify generated report values.
",,hj444,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-1236,,,,,,,"20/Feb/19 09:12;hj444;2019-02_BID_ASK_SPREAD_2019-02-20-075410.xml;https://jira.deutsche-boerse.com/secure/attachment/66001/2019-02_BID_ASK_SPREAD_2019-02-20-075410.xml","20/Feb/19 09:22;hj444;bidAsk_halfHour.png;https://jira.deutsche-boerse.com/secure/attachment/66005/bidAsk_halfHour.png","20/Feb/19 09:18;hj444;bid_ask_db_190219.xlsx;https://jira.deutsche-boerse.com/secure/attachment/66003/bid_ask_db_190219.xlsx","20/Feb/19 09:22;hj444;quarterly.png;https://jira.deutsche-boerse.com/secure/attachment/66004/quarterly.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,63331200,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y085ye:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 15,,,,,,,,,,,,,,,,0.5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Feb/19 09:24;hj444;tested Syt1- report tool version 2.7

Block orders defined with code X04 in file for Hourly, 1/2hourly, Quarterly block contracts
CAN - defined :
X01 for hourly
X02 for half hourly
X03 for quarterly

see excel select from bid-ask table
see  generated report.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
EIC codes mapping,XP-1129,78399,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,uv683,de698,de698,12/Feb/19 11:17,04/Aug/20 19:35,22/Feb/21 13:21,04/Apr/19 09:45,,,Pre2020,,,,,,,,,,"New requirement: in a case when the MA has only one DA, the EICs of that DA will be assigned to the MA when the report is created. 

*What needs to be done:*
 * spec: add the change via spec clarification process (batch 5)
 * fix both data collectors so that DA EICs is captured and requested mapping is ensured
 * test: generated reports contain DA EICs where MA has only one DA

---------------------------
 Proposed spec update. Please validate and review with dev+test{color:#de350b}!{color} {color:#172b4d}only then create spec clarification container{color}

*Document:* ACER Reporting
 *Chapter:* 2.1 Intraday volumes, 2.2 Intraday volumes - hours to delivery, 2.3 Intraday prices, 3.2 Bid-Ask spread data collector, 3.3 Volumes and Prices data collector
 *Reason:* additional requirement
 *Details:* text to be added
{code:java}
If the Market area has only one Delivery area, the EIC of that Delivery area will be assigned to the Market area when the report is created.{code}",,de698,ll664,uv683,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,58579200,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08c1b:c",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Apr/19 12:55;ll664;The XBID work ready in the branch: https://github.deutsche-boerse.de/dev/xbid/tree/XP-1129

Not merged yet, waiting till customer confirmation.","01/Apr/19 12:58;uv683;Report tool changes are ready for testing in  [https://github.deutsche-boerse.de/dev/m7.xbid-report-tool/tree/XP-1129-eic-codes-mapping]

 ","15/Apr/19 16:04;de698;Spec container: https://jira.deutsche-boerse.com/browse/XBID-4407",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
prepare MRs for deployment of XBID 1.5.9 - CuTe TSO/LIPA/LIPB,XP-1125,78384,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,rehapav,rehapav,11/Feb/19 15:09,06/Nov/20 11:28,22/Feb/21 13:21,13/Feb/19 15:28,,,Pre2020,,,,,,,,,,"prepare MRs for deployment of XBID 1.5.9 - prepare it until Fri 15/2 EOB please
 * CuTe TSO, LIP A and LIP B
 * do not forget Reporting tool

 ",,qz412,rehapav,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,63849600,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yd4:zi1",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Feb/19 15:27;qz412;Done by [~ll664], [~rehapav], please update the version.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Reporting - Document name format,XP-1123,78377,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,qo794,de698,de698,11/Feb/19 13:55,04/Aug/20 19:36,22/Feb/21 13:21,20/Feb/19 08:14,,,Pre2020,,,,,,,,,,"XML file name is derived from Header class attributes and consists of:  “Year_Month_Indicator name_createdDateTime”

_Example:_ 2018-12_INTRADAY_TRADE_VOLUME_2019-01-08T{color:#de350b}065522{color}Z.xml

*Task:* time format in the document name should not contain "":""",,de698,qo794,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-1240,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,63676800,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0863b:o",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 15 [S],,,,,,,,,,,,,,,,0.5,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Feb/19 13:39;qo794;The proposed solution: *2018-12_INTRADAY_TRADE_VOLUME_2019-01-08-065522.xml*, please confirm it's ok","15/Feb/19 14:02;radeale;I support the Kamil's proposal.","15/Feb/19 14:33;de698;Ok, let's change the spec then.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Reporting - SFTP integration,XP-1122,78376,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ek176,de698,de698,11/Feb/19 13:52,04/Aug/20 19:35,22/Feb/21 13:21,02/Jul/19 10:47,,,Pre2020,,,,,,,,,,"{color:#00875a}*[ Acer Reports channel to storage ]*{color}
 * SSH key access (CMM style)
 * no failover

Check following Jira with details regarding the SFTP channel and prepare solution on the application side: 
 * https://jira.deutsche-boerse.com/browse/TECHLOG-2038

For more detaisl see meeting minutes from DevOps CoP from +26.02.2019+

AC: 

- validated working SFTP channel to the Acer Reports Storage. ",,de698,tz118,,,,,,,,,,,,,,,,,,,,,,,,XP-1488,,,,,,,,,,,,TECHLOG-2542,TECHLOG-2038,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,51926400,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s00010420100i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 29,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/May/19 10:53;tz118;dercission was made not yo implement, files will be copied manually, more info [~de698]","23/May/19 12:35;de698;Stated in point 2 in techlog jira:

_+Delivery to NEMOs:+ The reports 6*5 should be available for NEMOs on a DBAG hosted SFTP server every half year before the 5th business day after reported half-year period (i.e. in January and July). We discussed within the team, and came to a conclusion that we might make the reports available for 7 days on the sFTP server and store them long-term somewhere else (points 1 and 3)._

Upload of the files to SFTP will be manual.

Suggestion to close this Jira after access and copying of a test file to SFTP is verified.","01/Jul/19 16:58;de698;ACER reports for H1 2019 are uploaded to SFTP and also stored on xbidprodsla1",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"AIP100, DFS310 - SM technically unavailable clarification",XP-1116,78328,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,08/Feb/19 11:13,06/Nov/20 11:28,22/Feb/21 13:21,28/Mar/19 14:47,,,Pre2020,,,,,,,,,,"*Document:* AIP100

*Chapter:* 1.2.5 Shipping Module (SM)

*Details:* Text added to the chapter:

When the Shipping Module is down (all its instances are stopped), the SOB Trading is put to halt after a defined conditions are met. The process works in the following way:
- The XBID Core polls SM every X seconds (configurable value, the default is 60 seconds) for its status, after three ""not available"" responses it sets the trading to HALT
- If the SM becomes available after the first or second ""not available"" response, the counter is reset
- When the SM becomes available after the SOB Trading was put to halt, it is not unhalted automatically

*Document:* DFS310

*Chapter:* 2.1 Data processing steps

*Details:* Text removed:
{quote}To mitigate the risk of imbalances, if the SM becomes technically unavailable, the trading in the SOB is stopped automatically after a predefined number of failed SM alive checks. {quote}

*Reason:* Clarification based on outcome of XBID-4161.",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4242,,,,,,,,,,XBID-4161,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Duplicate to XP-622.,,,,,,,,,,64368000,,,,,,,,,,XP-4090,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0854o:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 14,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Typo in ACER reports documentId,XP-1106,78312,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Fixed,qo794,ll664,ll664,08/Feb/19 09:30,04/Aug/20 19:35,22/Feb/21 13:21,19/Feb/19 08:00,,,Pre2020,,,,,,,,,,"In the resulting XMLs, instead of {{SDIC_B01_2019-01}}, put there {{SIDC_B01_2019-01}}.",,ll664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,64368000,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y0863b:c",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 15 [S],,,,,,,,,,,,,,,,0.5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
XTG UAT 2.0 preparation,XP-1105,78294,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tm431,tm431,tm431,07/Feb/19 13:44,06/Nov/20 10:51,22/Feb/21 13:21,14/Feb/19 09:04,,,Pre2020,,,,,,,,,,"{color:#00875a}*[ UAT TEST PLAN, clarification of DBAG's role, scope and timeline ]*{color}

All tasks regarding preparation for UAT 2.0 as a outcome of Prague XTG/DBAG workshop",,tm431,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,SERVICE-2614,,,,,,,"07/Feb/19 13:45;tm431;XTG physical meeting with DBAG MM 20190205.docx;https://jira.deutsche-boerse.com/secure/attachment/65477/XTG+physical+meeting+with+DBAG+MM+20190205.docx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,64368000,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yd4:zi",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 14,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cannot deploy deployment of XBID with reporting engine ver. 5.0.42 on perf env,XP-1104,78284,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,jy268,od044,od044,07/Feb/19 12:22,06/Nov/20 10:51,22/Feb/21 13:21,08/Feb/19 12:02,,,Pre2020,,Reporting Engine,,,,,,,,"Cannot deploy deployment of XBID with report tool ver. 5.0.42 on PERF env

{code}
../templates/standalone/report-tool/application_TEMPLATE.properties exists
Copied ../templates/standalone/report-tool/application_TEMPLATE.properties to ./xbid-perf-report-tool//application.properties
./xbid-perf-report-tool//application.properties requires variable substitutions : ACER_GENERATE_INTRADAY_TRADE_VOLUME_CRON ACER_IMPORT_INTRADAY_TRADE_VOLUME_CRON ACER_IMPORT_INTRADAY_TRADE_VOLUME_HOUR_TO_DELIVERY_CRON ACER_IMPORT_WEIGHTED_AVERAGE_PRICE_CRON ACER_IMPORT_WEIGHTED_AVERAGE_PRICE_LAST_TRADING_HOUR_CRON ACER_REPORT_STORE_PATH BASEDIR COR_DB COR_DB_USER DB_INST_APP DB_PORT DB_SERVER DB_USER ENV_FOR_LOGS INSTANCENAME REPORT_TOOL_FLYWAY_CLEAN REPORT_TOOL_VERSION RPT_DB_PORT RPT_DB_SERVER SMC_DB SMC_DB_USER
	Variable item : ACER_GENERATE_INTRADAY_TRADE_VOLUME_CRON
ERROR : Variable ACER_GENERATE_INTRADAY_TRADE_VOLUME_CRON is not defined in this configuration (xbid-perf-report-tool)
Build step 'Execute shell' marked build as failure
Set build name.
New build name is '#185 xbid_perf.xml deploy_with_db_clean'
{code}",,od044,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,64454400,,,,,,,,,,XP-4091,,,,,,,,,,,,,,07/Feb/19 12:22,,,,,,,,,,,,,,,,,,,,,"1|000yd4:z",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 14,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2501-to-xbid-dev-env,tomcat-rollback,traversal-XP-2485,XP-2942,XP-2506-xbid-dev-env,trailing-slash-syt1,XP-3025-catalina-timezone,XP-2484,XP-3110-deprecated-log,XP-2488-xbid-dev-env,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[DEC_SHIFT] - revert - Specs update,XP-1079,78181,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,de698,de698,de698,05/Feb/19 10:36,31/Aug/20 15:37,22/Feb/21 13:21,07/Feb/19 09:03,,,Pre2020,,,,,,,,,,"{color:#00875a}*The text provided here will replace the current spec container XBID-3801*{color}

{color:#00875a}*DFS510*{color}

*Document:* DFS510
 *Chapters:* 5.1.9, 5.3.1, 5.3.2, 5.3.4, 5.5.3, 5.5.7, 5.5.9
|qty|Contains the total quantity of the order {color:#4c9aff}in kW.{color}|

*Chapters:* 5.5.14 Product Information Response (ProdInfoRprt), 5.7.13 Full Product Information report (FullProdInfoRprt)
 *Details:*
 {color:#172b4d}Text for Description for tickSize attribute to be changed to:{color}
 {color:#4c9aff}Defines the minimum increment for limit prices for this product. The value is entered as an integer.{color}
 Text to be added for Description for DecShftQty attribute:
 Decimal shift of the quantity information. The admissible values are 0 and 3. A value of 3 results in a display of 1000 kW i.e. 1 MW.
 Text to be added for Description for DecShftPx attribute:
 {color:#4c9aff}Decimal shift of the price information. The admissible values are 0 and 2. A value of 2 results in a display in Eurocents.{color}

*Chapter:* 5.1.9 Quantity values in Messages
 Text to be added:
 {color:#4c9aff}Quantity values in all messages (requests and responses) are given as integer values in kW {color}{color:#4c9aff}and their proper displ{color:#4c9aff}ay{color}{color}{color:#4c9aff} in GUI depends on the product attributes decShftQty, smallestTrdUnit and qtyUnit (see chapter 5.5.13). {color}
 {color:#4c9aff}The attribute decShftQty defines the position of the decimal point within the integer value and admissible values are 0 and 3 (e.g. the integer value 1000 with a decShftQty of 3 means a decimal number of 1.000). Once the product is created, the value of decShftQty will become not editable for this product.{color}

*Chapter:* 5.1.10 Price values in Messages
 Text to be added:
 {color:#4c9aff}Price values in all messages (requests and responses) are given as long values always in Eurocents {color}{color:#4c9aff}and their proper dis{color:#4c9aff}play{color}{color}{color:#4c9aff} in GUI depends on the product attributes decShftPx and currency (see chapter 5.5.13). Once the product is created, the value of decShftPx will become not editable for this product.{color}

{color:#00875a}*DFS700*{color}
 *Document:* DFS700
 *Chapter:* 4.1.1.2 Tab 2: Product Attributes
 *Details:* text in Step 10 to be changed:
 {color:#4c9aff}Enter the Decimal Shift (Quantity) for the product. This will be used to specify the number of decimal places that will be taken into consideration for *display of* this product’s quantity field. For example, a value of 3 will allow quantity with up to 3 places of decimal precision.{color}
 {color:#4c9aff} The Decimal Shift (Quantity) cannot be less than 0 and greater than 3.{color}
 {color:#4c9aff} Once the product is created, the value of decShftQty will become not editable for this product.{color}
 {color:#4c9aff} Help Text: Number of decimals displayed in Quantity fields. The Decimal Shift (Quantity) cannot be less than 0 and greater than 3.{color}

*Chapter:* 4.1.1.2 Tab 2: Product Attributes
 *Details:* text in Step 11 to be changed:
 {color:#4c9aff}Enter the Decimal Shift (Price) for the new product. This will be used to specify the number of decimal places that will be taken into consideration for *display of* this product’s price field. For example, a value of 2 will allow prices with up to 2 places of decimal precision.{color}
|{color:#4c9aff}Default value{color}|{color:#4c9aff}2{color}|

{color:#4c9aff}The Decimal Shift (Price) cannot be less than 0 and greater than 2.{color}
 {color:#4c9aff} Once the product is created, the value of decShftPx will become not editable for this product.{color}
 {color:#4c9aff} Help Text: Number of decimals displayed in price fields. The Decimal Shift (Price) cannot be less than 0 and greater than 2.{color}

*Chapter:* 4.1.2.2 Modify Tab 2: Product Attributes
 *Details:* text in Step 10 to be added:
 {color:#4c9aff}The user can modify all the entities present on this page, except for the Decimal Shift Quantity and Decimal Shift Price.{color}",,de698,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,64540800,,,,,,,,,,XP-1800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yrt:000000j7zx",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 13,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Feb/19 15:05;de698;text updated, please work with this version and let me know in case of any questions and comments",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
XTG Workshop in Prageu,XP-1069,78053,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tm431,tm431,tm431,31/Jan/19 14:46,06/Nov/20 10:51,22/Feb/21 13:21,06/Feb/19 09:57,,,Pre2020,,,,,,,,,,preparation and attendacne,,tm431,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,64972800,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y083ig:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 13,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-1069,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"SIMU - run RTS3 Slice A scenario 5, part of pre PROD R1.5.9 tests",XP-1058,78015,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,qz412,qz412,30/Jan/19 17:09,04/Aug/20 19:40,22/Feb/21 13:21,04/Feb/19 10:12,,,Pre2020,,Trading,,,,,,,,"As part of ACER in SIMU the customers have requested (as part of the paid Support Service) the perf run to prove no perf degrade has been introduced.

DoD:
 * RTS3 Slice A scenario 5 is executed in SIMU
 * Reports are generated and compared with previous runs
 * Results are commented (This should be enough: ""There has not been any performance degrade with ACER data collector functionality implemented as proven in RTS3 Slice A scenario"")
 * The info is shared with the customers
 * Info on effort spent provided to Ondra

Thank you!",,od044,qz412,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Feb/19 14:44;od044;Perf_SIMU_results_analysis_v1.xlsx;https://jira.deutsche-boerse.com/secure/attachment/65358/Perf_SIMU_results_analysis_v1.xlsx","01/Feb/19 13:40;od044;Report-sc05v07-SIMU-GLUSTERFS-31012019.xls;https://jira.deutsche-boerse.com/secure/attachment/65346/Report-sc05v07-SIMU-GLUSTERFS-31012019.xls","01/Feb/19 13:40;od044;SIMU_perf_run_31012019_SQL_check.xlsx;https://jira.deutsche-boerse.com/secure/attachment/65347/SIMU_perf_run_31012019_SQL_check.xlsx","01/Feb/19 13:41;od044;report-SIMU-sc05-v7-2018-09-17.xlsx;https://jira.deutsche-boerse.com/secure/attachment/65348/report-SIMU-sc05-v7-2018-09-17.xlsx","01/Feb/19 13:41;od044;xbid-SIMU-SQL-sc05-2018-09-17.xlsx;https://jira.deutsche-boerse.com/secure/attachment/65349/xbid-SIMU-SQL-sc05-2018-09-17.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,64886400,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y07zy7:o",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 13,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Feb/19 13:42;od044;Report of actual run 
 [^SIMU_perf_run_31012019_SQL_check.xlsx]  [^Report-sc05v07-SIMU-GLUSTERFS-31012019.xls] 

Report of old run
 [^report-SIMU-sc05-v7-2018-09-17.xlsx]  [^xbid-SIMU-SQL-sc05-2018-09-17.xlsx] 

Result of comparison
 [^Perf_SIMU_results_analysis_v1.xlsx] 
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Decision on Cross-Zonal Capacity Pricing - Study [Ampere],XP-1057,78013,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,zi174,rg535,qz412,30/Jan/19 16:21,06/Nov/20 09:02,22/Feb/21 13:21,06/Feb/19 17:05,,,Pre2020,,,,,,,,,,"Please find attached two documents with ACER's decision on capacity pricing. DBAG will most likely be asked to do some analysis work on this topic in 2019 for XBID R3.0

Flag potential problems if explicitly apparent and list questions you have directly below:

{color:#de350b}*Questions / concerns / problems:*{color}",,qz412,radeale,rg535,zi174,,,,,,,,,,,,,,,,,,,,,,,,XP-1021,,,,,,,,,,M7P-3480,M7ACM-303,,,,,,"30/Jan/19 16:23;qz412;ACER Decision 01-2019 on intraday cross-zonal capacity pricing (1).pdf;https://jira.deutsche-boerse.com/secure/attachment/65269/ACER+Decision+01-2019+on+intraday+cross-zonal+capacity+pricing+%281%29.pdf","30/Jan/19 16:23;qz412;Annex I - ACER Decision on IDCZCP (1).PDF;https://jira.deutsche-boerse.com/secure/attachment/65270/Annex+I+-+ACER+Decision+on+IDCZCP+%281%29.PDF",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,64454400,,,,,,,,,,XP-4085,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y083cf:w",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Ampere Sprint 13 [S],,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Feb/19 16:59;radeale;Done from my side. I have a vague idea what is going on.

Comments/questions from my side:
- How is the capacity auction going to be performed?
- Will it take place only in case of capacity congestion?
- Will XBID handle the capacity auction?","06/Feb/19 17:03;zi174;We are missing some goal of this topic/task. The documents are about the ACER decision, however (from our point of view) we are not able to identify next steps which will follow. Some questions/concerns/problems please see above (from Alex).

 

 

 ","07/Feb/19 09:09;rg535;As [~zi174]commented, the ACER paper reflects ACER's decision on how to handle Capacity Pricing, i.e. via an Auction. It is our task to figure out whether we could implement a solution, in XBID which reflects their decision.  So, in essence, we need to answer the question posed by [~radeale] ""how is the capacity auction going to be performed / will XBID handle the capacity auction.?"" Of course they can mandate another Service Provider to conduct the auctions, but I would like to know if we (XBID) can do it. For questions related to the actual  functional aspects, I suggest you speak to [~yp416].",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Decision on Cross-Zonal Capacity Pricing - Study [Alpha],XP-1056,78012,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ll664,rg535,qz412,30/Jan/19 16:21,06/Nov/20 09:02,22/Feb/21 13:21,07/Feb/19 09:38,,,Pre2020,,,,,,,,,,"Please find attached two documents with ACER's decision on capacity pricing. DBAG will most likely be asked to do some analysis work on this topic in 2019 for XBID R3.0

Flag potential problems if explicitly apparent and list questions you have directly below:

{color:#de350b}*Questions / concerns / problems:*{color}",,ll664,qz412,rg535,,,,,,,,,,,,,,,,,,,,,,,,,XP-1021,,,,,,,,,,,,,,,,,"30/Jan/19 16:21;qz412;ACER Decision 01-2019 on intraday cross-zonal capacity pricing.pdf;https://jira.deutsche-boerse.com/secure/attachment/65266/ACER+Decision+01-2019+on+intraday+cross-zonal+capacity+pricing.pdf","30/Jan/19 16:21;qz412;Annex I - ACER Decision on IDCZCP.PDF;https://jira.deutsche-boerse.com/secure/attachment/65267/Annex+I+-+ACER+Decision+on+IDCZCP.PDF",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,64454400,,,,,,,,,,XP-4085,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yrt:000000j7zw",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 13,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Feb/19 12:55;ll664;My 2c:

h4. Pricing of intraday cross-zonal capacity

To me _Pricing of intraday cross-zonal capacity_ is equal to matching orders during an intraday auction (IDA), i.e. buying/selling of electricity and not something related to cross border capacity as such. This is confirmed in Article 3.2
{quote}
The pricing of intraday cross-zonal capacity shall be established by allocating the available
cross-zonal capacity for the respective MTUs by IDAs using the marginal pricing principle.
{quote}

and Article 4.3:

{quote}
The IDAs shall be organised as implicit auctions where collected orders shall be matched and
cross-zonal capacity shall be allocated simultaneously for different bidding zones. IDAs shall
take into account all valid orders submitted for the respective auctions and determine a clearing
price for the relevant bidding zones based on matched orders.
{quote}

So, the whole pricing thing means inserting auction windows into continuous trading (Articlet 5) to determined fair market price at that moment, correct?

h4. Marginal pricing principle

Article 3.2 defines the pricing based on _Marginal pricing principle_. I'm missing the definition and/or reference to external resource providing more detail.

h4. General

The concrete methodology/process of capacity pricing is something that TSOs come up with and XBID implements (Article 6).

","07/Feb/19 09:23;rg535;[~ll664], please contact [~yp416] to discuss the topic on marginal pricing / congestion rent. 

The auction described in the Acer paper would be a separate trading model, or, as you stated, ""auction windows"" would be implemented. During an auction continuuous trading for the time units being auctioned would not be possible.

The main question is also whether it makes sense to implement such an auction / auction windows in XBID. Of course, the XBID customers can mandate another Service Provider to implement / conduct the auction, and then XBID would just get the remaining ATC after the auction and would function as it does today to a greater extent.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Report Generation - weighted average price last trading hour report,XP-1055,78011,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,qz412,hj444,hj444,30/Jan/19 16:13,04/Aug/20 19:40,22/Feb/21 13:21,27/Feb/19 16:47,,,Pre2020,,,,,,,,,,"{color:#00875A}*[ FEATURE ]*{color}

According to Intraday Prices document paragraph 5.1. it should be possible to deliver reports aggregated per month.
 * create Spring Batch job for ACER metric *weighted average price in last trading hour* that will be triggered at the beginning of each month.
 * job needs to have a state to check last processed month and generate report for all remaining months
 * there is and XSD describing the report's content. Classes need to be generated according to this XSD.
 * job will collect data from respective DB table where data is already aggregated. (Four tables are in Report Tool DB and one (bid ask spread) is in Core DB). After that job will create object representation and marshall to XML.
 * verify that XML data for one report and one month is not bigger than 100MB. If the size is very far from the limit then dynamic splitting of data is not necessary at the moment and can be implemented later. See https://jira.deutsche-boerse.com/browse/XP-289
 * reports will be stored on disk

_full description could be found XP-980_
 _The most actual Documentation, xsd specification,... customer comments could be found_ : https://jira.deutsche-boerse.com/browse/XBID-3922
 also : S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\Planned\PER120 Change Management\Change Requests\CR090 - Acer Reporting (included in CR093 and CR094)",,hj444,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,65059200,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000ycx:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 12,Ampere Sprint 13 [S],Home Office Team Sprint 14,Home Office Team Sprint 15 [S],Home Office Team Sprint 16,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Report Generation - weighted average price report,XP-1054,78010,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,uv683,hj444,hj444,30/Jan/19 16:09,04/Aug/20 19:40,22/Feb/21 13:21,07/Feb/19 09:15,,,Pre2020,,,,,,,,,,"According to Intraday Prices document paragraph 5.1. it should be possible to deliver reports aggregated per month.

   * create Spring Batch job for ACER metric *weighted average price* that will be triggered at the beginning of each month.
   * job needs to have a state to check last processed month and generate report for all remaining months
   * there is and XSD describing the report's content. Classes need to be generated according to this XSD.
   * job will collect data from respective DB table where data is already aggregated. (Four tables are in Report Tool DB and one (bid ask spread) is in Core DB). After that job will create object representation and marshall to XML.
   * verify that XML data for one report and one month is not bigger than 100MB. If the size is very far from the limit then dynamic splitting of data is not necessary at the moment and can be implemented later. See https://jira.deutsche-boerse.com/browse/XP-289
   * reports will be stored on disk

_full description could be found XP-980_
_The most actual Documentation, xsd specification,... customer comments could be found_ : https://jira.deutsche-boerse.com/browse/XBID-3922
also : S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\Planned\PER120 Change Management\Change Requests\CR090 - Acer Reporting (included in CR093 and CR094)
",,hj444,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,65059200,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yrt:000000j6i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 12,Alpha Team Sprint 13,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Report Generation - Intraday trade volume report,XP-1053,78009,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,de698,hj444,hj444,30/Jan/19 16:05,04/Aug/20 19:41,22/Feb/21 13:21,12/Feb/19 11:11,,,Pre2020,,,,,,,,,,"{color:#00875a}*[ FEATURE - more information about the market, new data consumer ]*{color}

According to Intraday Prices document paragraph 5.1. it should be possible to deliver reports aggregated per month.
 * create Spring Batch job for ACER metric *intraday trade volume* that will be triggered at the beginning of each month.
 * job needs to have a state to check last processed month and generate report for all remaining months
 * there is and XSD describing the report's content. Classes need to be generated according to this XSD.
 * job will collect data from respective DB table where data is already aggregated. (Four tables are in Report Tool DB and one (bid ask spread) is in Core DB). After that job will create object representation and marshall to XML.
 * verify that XML data for one report and one month is not bigger than 100MB. If the size is very far from the limit then dynamic splitting of data is not necessary at the moment and can be implemented later. See https://jira.deutsche-boerse.com/browse/XP-289
 * reports will be stored on disk

_full description could be found XP-980_
 _The most actual Documentation, xsd specification,... customer comments could be found_ : https://jira.deutsche-boerse.com/browse/XBID-3922
 also : S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\Planned\PER120 Change Management\Change Requests\CR090 - Acer Reporting (included in CR093 and CR094)",,dw255,hj444,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Feb/19 13:22;dw255;2019-01_INTRADAY_TRADE_VOLUME_2019-02-06T122243.897Z.xml;https://jira.deutsche-boerse.com/secure/attachment/65609/2019-01_INTRADAY_TRADE_VOLUME_2019-02-06T122243.897Z.xml","11/Feb/19 13:23;dw255;intraday_volume_test.xls;https://jira.deutsche-boerse.com/secure/attachment/65610/intraday_volume_test.xls",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Implemented.
Requirements (fixes) from comments moved to:
XP-1106
XP-1123",,,,,,,,,,64022400,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000ycd:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 12,Alpha Team Sprint 13,Alpha Team Sprint 14 [S],,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Feb/19 13:44;dw255;Tested with SLA reporting tool version 2.4 in SYT1. All relevant records from table acer_intraday_trade_volume are in report.

The report has wrong documentID. Correct is SIDC_B01_2019-01.

Also colon "":"" should be removed from filename: 2019-01_INTRADAY_TRADE_VOLUME_2019-02-06T12:22:43.897Z.xml",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Credit points bug introduced with ACER,XP-1052,78008,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,eh941,qz412,qz412,30/Jan/19 15:55,06/Nov/20 10:55,22/Feb/21 13:21,05/Feb/19 17:10,,,Pre2020,,,,,,,,,,Introducing 24/7 running ReportTool application a new error occurred. If the application runs longer than a month the current month report contains all previous months as well. It's cause by using static fields as value holder in {{CreditPointsReportGenerator}},,qz412,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,65059200,,,,,,,,,,XP-4092,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yrt:000000j7zz",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 13,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Report Generation - extend CLI to enable report generation,XP-1051,78005,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,hj444,hj444,30/Jan/19 14:15,04/Aug/20 19:40,22/Feb/21 13:21,07/Feb/19 09:18,,,Pre2020,,,,,,,,,,"Improve CLI (Command Line Interface) for possibility to generate reports for specific month.
",,hj444,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,65059200,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y07zy7:qw",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 13,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Dynamic product mapping - do we need it?,XP-1050,78004,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ll664,ll664,ll664,30/Jan/19 14:14,04/Aug/20 19:40,22/Feb/21 13:21,01/Feb/19 13:57,,,Pre2020,,,,,,,,,,"Currently the product names are hardcoded, which is a problem in envs like syt1 where the product have different names.

 

Do we need to have them dynamic?",,ll664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,65059200,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yrt:000000j7zz9",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 13,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Block product - decide how to identify that trade belongs to block product,XP-1049,78003,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,ll664,ll664,30/Jan/19 14:12,04/Aug/20 19:40,22/Feb/21 13:21,13/Feb/19 16:58,,,Pre2020,,,,,,,,,,"{color:#00875a}*[ FEATURE ]*{color}

Block trades comes into ACER report as separate product (BLOCK). However, we cannot identify whether the trade is for a block contract in a robust way at the moment.

The only information imported into Report Tool DB is delivery start/end. This is not enough, theoretically, there might be blocks smaller than 1 hour, i.e. 3x15min.

We need to get this information at the moment of import, i.e. select it from the contract history table.
  

Text proposal in ACER Reporting spec, Chapter 3.4.2:
{quote}User defined blocks are distinguished form the pre-defined products throughout the reporting solution. The collectors and generators detect whether a canonical unit of a pre-defined product is present multiple times within the delivery duration time span (e.g. 15 minutes is a canonical unit of Quarter hourly product), and in such a way identifies user defined blocks.{quote}
Spec stored under: S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\Planned\PER120 Change Management\Change Requests\CR090 - Acer Reporting (included in CR093 and CR094)",,hj444,ll664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-980,XP-1132,XP-1134,XP-1043,XP-1131,XP-1130,XP-1133,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,63849600,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yco:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 14 [S],,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Feb/19 15:14;hj444;tasks for all Reports generation and verification valid values for block/non block trades. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ASR for the Losses PoC - Initial RCB proposal,XP-1048,78002,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,de698,qz412,qz412,30/Jan/19 13:53,04/Aug/20 19:31,22/Feb/21 13:21,07/Feb/19 09:04,,,Losses ASR,,Trading,,,,,waiting-po,,,"Dear all, The XBID Parties have officially requested an ASR from us for the Losses POC. Please add this to your planning sessions and revert to me with your ideas. I will then draft the ASR for us. The ASR must include a description of what we want to do during the POC as well as what type of support we expect from the Parties and if we expect them active testing on a prototype (last year we did not want to do this, but you can think about it). I would like to include initial ideas in the RCB slides for next week. This means I need initial internal feedback by *Thursday evening*.Thanks, Suzanna 

Please when considering the tasks in the description of XP-1048 consider the approach listed in XP-955 and let [~rg535] know whether the approach makes sense.

DoD for Thursday 31st Jan EoD (preferrably as a list of bullet points / catchy sentences :)):
 * A High level list of ""features"" the PoC should have (grid representation, a set of scenarios to be tested, trading functionality excluding/including blocks, recalls, etc.)
 * A paragraph about the need to include perf tests in the PoC for Losses
 * An estimate of how much involvement from the customers side we will need (a set of perf scenarios is expected to be executed with NEMOs / TSOs participation etc.)",,de698,qz412,rg535,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,64454400,,,,,,,,,,XP-955,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yrt:000000j7zr",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 13,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Jan/19 15:21;rg535;please when considering the tasks in the description of XP-1048 consider the approach listed in XP-955 and let me know whether the approach makes sense.","07/Feb/19 09:04;de698;Communicated on Fri 2nd Feb.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Report Generation - generate longest report for one month,XP-1045,77982,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,hj444,hj444,30/Jan/19 10:27,31/Aug/20 15:39,22/Feb/21 13:21,30/Jan/19 15:42,,,Pre2020,,,,,,,,,,"# _Generate longest report from prodcopy_
# _Check size_


description from XP-980
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
According to Intraday Prices document paragraph 5.1. it should be possible to deliver reports aggregated per month.

    * create five Spring Batch jobs for all ACER metrics (intraday trade volume, trade volume hour to delivery, weighted average price, weighted average price in last trading hour and bid ask spread) that will be triggered at the beginning of each month.
    * jobs need to have a state to check last processed month and generate reports for all remaining months
    * there is and XSD describing the report's content. Classes need to be generated according to this XSD.
    * every job will collect data from respective DB tables (where data is already aggregated. Four tables are in Report Tool DB and one (bid ask spread) is in Core DB. AFter that job will create object representation and marshall to XML.
    * *verify that XML data for one report and one month is not bigger than 100MB. If the size is very far from the limit then dynamic splitting of data is not necessary at the moment and can be implemented later.* See https://jira.deutsche-boerse.com/browse/XP-289
    * reports will be stored on disk

",,hj444,qz412,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,65059200,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000ym0:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Jan/19 15:42;qz412;[~uv683] estimated the size to not exceed 10MB, closing the ticket",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Report Generation - Intraday trade volume hour to delivery report,XP-1044,77980,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,hj444,hj444,30/Jan/19 10:17,04/Aug/20 19:41,22/Feb/21 13:21,21/Feb/19 08:26,,,Pre2020,,,,,,,,,,"{color:#00875A}*[ FEATURE ]*{color}

According to Intraday Prices document paragraph 5.1. it should be possible to deliver reports aggregated per month.
 * create Spring Batch job for ACER metric *trade volume hour to delivery* that will be triggered at the beginning of each month.
 * job needs to have a state to check last processed month and generate report for all remaining months
 * there is and XSD describing the report's content. Classes need to be generated according to this XSD.
 * job will collect data from respective DB table where data is already aggregated. (Four tables are in Report Tool DB and one (bid ask spread) is in Core DB). After that job will create object representation and marshall to XML.
 * verify that XML data for one report and one month is not bigger than 100MB. If the size is very far from the limit then dynamic splitting of data is not necessary at the moment and can be implemented later. See https://jira.deutsche-boerse.com/browse/XP-289
 * reports will be stored on disk

_full description could be found XP-980_
 _The most actual Documentation, xsd specification,... customer comments could be found_ : https://jira.deutsche-boerse.com/browse/XBID-3922
 also : S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\Planned\PER120 Change Management\Change Requests\CR090 - Acer Reporting (included in CR093 and CR094)",,hj444,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,65145600,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000ycl:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 14 [S],Alpha Team Sprint 15,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Report Generation - bid ask spread report,XP-1043,77979,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,qo794,hj444,hj444,30/Jan/19 10:12,04/Aug/20 19:40,22/Feb/21 13:21,13/Feb/19 11:21,,,Pre2020,,,,,,,,,,"{color:#00875A}*[ FEATURE ]*{color}

----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 According to Intraday Prices document paragraph 5.1. it should be possible to deliver reports aggregated per month.
 * create Spring Batch job for ACER metric *bid ask spread* that will be triggered at the beginning of each month.
 * job needs to have a state to check last processed month and generate reports for all remaining months
 * there is and XSD describing the report's content. Classes need to be generated according to this XSD.
 * job will collect data from respective DB tables where data is already aggregated. _(Four tables are in Report Tool DB and one (bid ask spread) is in Core DB.)_ After that job will create object representation and marshall to XML.
 * verify that XML data for one report and one month is not bigger than 100MB. If the size is very far from the limit then dynamic splitting of data is not necessary at the moment and can be implemented later. See https://jira.deutsche-boerse.com/browse/XP-289 this was done already
 * reports will be stored on disk

 * {color:#de350b}open point: How to determine whether the contract is a block{color}: will be done within XP-1049

_full description could be found XP-980_
 _The most actual Documentation, xsd specification,... customer comments could be found_ : https://jira.deutsche-boerse.com/browse/XBID-3922
 also : S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\Planned\PER120 Change Management\Change Requests\CR090 - Acer Reporting (included in CR093 and CR094)",,hj444,qo794,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,64108800,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yd4:r",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 13,Home Office Team Sprint 14,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,XP-1043-refactoring,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Feb/19 09:46;qo794;Block contracts will be implemented within XP-1049",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Spec Changes: H2H values for DE-DK1 are incorrect,XP-1041,77950,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,29/Jan/19 13:38,06/Nov/20 11:29,22/Feb/21 13:21,27/Feb/19 16:41,,,Pre2020,,,,,,,,,,"Check the specification and propose changes relevant to the changes made in XP-244.

1. No changes to the XSD
2. In case the capacity reported in the H2H Matrix would be larger than 1073741822, the shown capacity is 1073741822
3. In case the capacity reported in a broadcast or response message would be larger than 1073741822, the communicated capacity is 1073741822

Acceptance criteria:
- Relevant specification documents checked whether any changes are necessary due to the fix
- The proposed changes communicated to the customer as a Batch_5 container",,radeale,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4317,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,62640000,,,,,,,,,,XP-4090,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yek:i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 16,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Feb/19 16:46;radeale;Checked DFS700, DFS510, HLSA100 and DFS800, proposed change:

*Document:* DFS510

*Chapter:* 5.5.17 Hub-to-Hub Matrix Report (HubToHubResp)

*Details:* Text added to the chapter before the second table:

{code}The maximum reported ATC is 1073741822.{code}

*Chapter:* 5.5.18 Hub-to-Hub Notification (HubToHubNtf)

*Details:* Text added to the chapter before the second table:

{code}The maximum reported ATC is 1073741822.{code}

*Document:* HLS100A

*Chapter:* 3.2.3 H2H Matrix Overview

*Details:* Text added as a new bullet point at the end of the bullet point list:

{code}The maximum reported ATC is 1073741822{code}
","21/Feb/19 17:10;radeale;Please perform sanity check :)","27/Feb/19 16:38;zi174;Good work Alex, please create a container :) ","27/Feb/19 16:41;radeale;Spec clarification wording communicated via XBID-4317.",,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Decision on Cross-Zonal Capacity Pricing - Study [HOT],XP-1021,77843,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,rg535,rg535,25/Jan/19 16:13,06/Nov/20 09:02,22/Feb/21 13:21,07/Feb/19 09:06,,,Pre2020,,,,,,,,,,"Please find attached two documents with ACER's decision on capacity pricing. DBAG will most likely be asked to do some analysis work on this topic in 2019 for XBID R3.0

Flag potential problems if explicitly apparent and list questions you have directly below:

{color:#de350b}*Questions / concerns / problems:*{color}",,lt112,rg535,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Jan/19 16:12;rg535;ACER Decision 01-2019 on intraday cross-zonal capacity pricing.pdf;https://jira.deutsche-boerse.com/secure/attachment/65089/ACER+Decision+01-2019+on+intraday+cross-zonal+capacity+pricing.pdf","25/Jan/19 16:12;rg535;Annex I - ACER Decision on IDCZCP.PDF;https://jira.deutsche-boerse.com/secure/attachment/65088/Annex+I+-+ACER+Decision+on+IDCZCP.PDF",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,64454400,,,,,,,,,,XP-4085,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y07zy7:k",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 13,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Feb/19 09:58;lt112;As far as I understand, the document merely informs about decision on the capacity pricing solution. It does not describe it, thus I'm missing an information about what actually needs to be done from our side.
I have no questions to the documents themselves.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER - report generation solution - prepare and split work,XP-980,77695,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,qz412,qz412,23/Jan/19 15:36,04/Aug/20 19:41,22/Feb/21 13:21,31/Jan/19 09:41,,,Pre2020,,,,,,,,,,"According to Intraday Prices document paragraph 5.1. it should be possible to deliver reports aggregated per month.
 * create five Spring Batch jobs for all ACER metrics (intraday trade volume, trade volume hour to delivery, weighted average price, weighted average price in last trading hour and bid ask spread) that will be triggered at the beginning of each month.
 * jobs need to have a state to check last processed month and generate reports for all remaining months
 * there is and XSD describing the report's content. Classes need to be generated according to this XSD.
 * every job will collect data from respective DB tables (where data is already aggregated. Four tables are in Report Tool DB and one (bid ask spread) is in Core DB. AFter that job will create object representation and marshall to XML.
 * verify that XML data for one report and one month is not bigger than 100MB. If the size is very far from the limit then dynamic splitting of data is not necessary at the moment and can be implemented later. See https://jira.deutsche-boerse.com/browse/XP-289
 * reports will be stored on disk

-----

[~hj444], please split, thx!",,qz412,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-1054,XP-1053,XP-1055,XP-1043,XP-1044,XP-1045,XP-1051,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,65664000,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yrt:000000j7y",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 12,,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-980-intraday-trade-volume,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Reporting - Product Quantity decimal shift <> 3 - Volume values are not recalculated,XP-962,77533,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ll664,hj444,hj444,21/Jan/19 12:24,04/Aug/20 19:40,22/Feb/21 13:21,07/Feb/19 09:06,,,Pre2020,,,,,,,,,,"In SOB Create products with decimal shift <> 3, (0,1,2).
 Do trades on these products 
 example with qty=""7000"" for all products:
{code:java}
        <Ordr acctId=""BG-EPEX-------01""  contractId=""1919"" prod=""TESTzeroDECshiftVolume""  side=""BUY"" px=""10"" qty=""7000"" ordrExeRestriction=""NON"" dlvryAreaId=""10YAT-APG------L"" clOrdrId=""1540462223570"" type=""O"" validityRes=""GFS"" state=""ACTI""/>
{code}
{code}
   <Ordr acctId=""BG-EPEX-------01"" contractId=""1778"" prod=""TESToneDECshiftVolume"" side=""SELL"" px=""10"" qty=""7000"" ordrExeRestriction=""NON"" dlvryAreaId=""10YDE-RWENET---I"" clOrdrId=""1540462223570"" type=""O"" validityRes=""GFS"" state=""ACTI""/>{code}
{code}  <Ordr acctId=""BG-EPEX-------01""  contractId=""1852"" prod=""TESTtwoDECshiftVolume""  side=""BUY"" px=""10"" qty=""7000"" ordrExeRestriction=""NON"" dlvryAreaId=""10YDE-VE-------2"" clOrdrId=""1540462223570"" type=""O"" validityRes=""GFS"" state=""ACTI""/>{code}

Expected: Volume in ACER reporting will be recalculated based on decimal shift setting and sent qty.

Actual : 
All values of volume are visible like 7000. 
",,dw255,hj444,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,64627200,,,,,,,,,,XP-6,,,,,,,,,,,,,,21/Jan/19 12:24,,,,,,,,,,,,,,,,,,,,,"1|000yrt:000000j6w",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 12,Alpha Team Sprint 13,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Feb/19 10:31;dw255;This is not a bug. Quantity in OrdrEntry is always in kW. The volume collected by ACER data collector should not be recalculated. Details in XP-1077.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CMI - incoming email processed 2x - fix,XP-930,77414,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,tr866,cf948,cf948,17/Jan/19 09:15,04/Aug/20 19:22,22/Feb/21 13:21,25/Jan/19 14:05,,,Pre2020,,Capacity,,,,,R2.0-AgreedFixScope,,,"{color:#de350b}<<<Added to Latent Faults 1.x based on e-mail from Vlada Satek, 31/10/2018>>>

{color}*Issue was reproduces, we need to fix it.*

Test Conditions:
 * To test the new email server on SysTest 3,
 * Sending an encrypted and signed email from [amp@xbid-test.deutsche-boerse.com|mailto:amp@xbid.deutsche-boerse.com] to CMI SysTest 3 component - check the correct processing and acknowledgement

Test Results:
 * email is sent with NTC file for IC AMP-APG
 * Email is received, decrypted and file is saved and published
 * The ACK is sen
 * Email is processed twice, the 1st ACK is an 'OK' the 2nd is 'duplicate, ignoring'

{code:java}
2018-04-26T10:43:36.020Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.MailHandler - [imap://10.136.12.249:143/INBOX, imap://10.136.140.250:143/INBOX] : [1] messages. Fetching...2018-04-26T10:43:36.020Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - From : amp <amp@xbid-test.deutsche-boerse.com>, subject: tramtata2018-04-26T10:43:36.026Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - Email encryption is enabled for 10XDE-RWENET---W, email being processed is required to be encrypted and signed2018-04-26T10:43:36.026Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.SMIMEConverter - Email message decrypting2018-04-26T10:43:36.086Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.SMIMEConverter - Email message signature veryfing2018-04-26T10:43:36.125Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.MailUtils - Changing header key from  <U+0080>$<U+0080>^D<U+0082>^K!Content-Type to Content-Type with value multipart/mixed;        boundary=""----=_NextPart_000_0058_01D3DD5C.3001A420""2018-04-26T10:43:36.125Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - Message multipart/mixed;        boundary=""----=_NextPart_000_0058_01D3DD5C.3001A420""2018-04-26T10:43:36.129Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.EotFilteredStream - Skipped 4 byte-blocks from incoming email file2018-04-26T10:43:37.370Z [mportExecutor-3][][] INFO  c.d.e.f.e.GenericExporter - File saved successfully : File:ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000.xml in 0.002 seconds2018-04-26T10:43:37.370Z [mportExecutor-3][][] INFO  c.d.e.c.s.AckServiceImpl - Acknowledgement created: ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000.xml2018-04-26T10:43:37.390Z [mportExecutor-3][][] INFO  c.d.e.c.s.AckServiceImpl - Acknowledgement sending: File:ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000.xml to: 10XDE-RWENET---W2018-04-26T10:43:37.397Z [mportExecutor-3][][] INFO  c.d.e.c.t.m.MailHandler - Creating encrypted e-mail for 10XDE-RWENET---W2018-04-26T10:43:37.415Z [mportExecutor-3][][] INFO  c.d.e.c.t.m.MailHandler - Sending From: xbsyt3-cmi@xbid-test.deutsche-boerse.com, To: amp@xbid-test.deutsche-boerse.com, Subject: ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000.xml, Attachment: ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000.xml2018-04-26T10:43:37.494Z [mportExecutor-3][][] INFO  c.d.e.c.s.AsyncFileImporterImpl - Capacity publishing of incoming file: 39002602018-04-26T10:43:37.842Z [ventExecutor-50][][] INFO  c.d.e.c.s.EventService - Handling PublishEvent{publishMode=NTC_ADJUSTMENT} AbstractCmmApplicationEvent{connectorIds=[5], days=[2018-04-26T00:00:00.000+02:00], eventTimestamp=2018-04-26T12:43:37.616+02:00} AbstractApplicationEvent{uuid='e26ae454-d1f5-30a8-18c7-43d835ee89a6'}2018-04-26T10:43:41.013Z [TaskScheduler-9][][] INFO  c.d.e.c.t.m.MailHandler - [imap://10.136.12.249:143/INBOX, imap://10.136.140.250:143/INBOX] : [1] messages. Fetching...2018-04-26T10:43:41.013Z [TaskScheduler-9][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - From : amp <amp@xbid-test.deutsche-boerse.com>, subject: tramtata2018-04-26T10:43:41.018Z [TaskScheduler-9][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - Email encryption is enabled for 10XDE-RWENET---W, email being processed is required to be encrypted and signed2018-04-26T10:43:41.018Z [TaskScheduler-9][][] INFO  c.d.e.c.t.m.SMIMEConverter - Email message decrypting2018-04-26T10:43:41.029Z [TaskScheduler-9][][] INFO  c.d.e.c.t.m.SMIMEConverter - Email message signature veryfing2018-04-26T10:43:41.035Z [TaskScheduler-9][][] INFO  c.d.e.c.t.m.MailUtils - Changing header key from  <U+0080>$<U+0080>^D<U+0082>^K!Content-Type to Content-Type with value multipart/mixed;        boundary=""----=_NextPart_000_0058_01D3DD5C.3001A420""2018-04-26T10:43:41.035Z [TaskScheduler-9][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - Message multipart/mixed;        boundary=""----=_NextPart_000_0058_01D3DD5C.3001A420""2018-04-26T10:43:41.038Z [TaskScheduler-9][][] INFO  c.d.e.c.t.m.EotFilteredStream - Skipped 4 byte-blocks from incoming email file2018-04-26T10:43:42.072Z [mportExecutor-4][][] INFO  c.d.e.f.e.GenericExporter - File saved successfully : File:ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000.xml in 0.001 seconds2018-04-26T10:43:42.072Z [mportExecutor-4][][] INFO  c.d.e.c.s.AckServiceImpl - Acknowledgement created: ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000.xml2018-04-26T10:43:42.074Z [mportExecutor-4][][] INFO  c.d.e.c.s.AckServiceImpl - Acknowledgement sending: File:ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000.xml to: 10XDE-RWENET---W2018-04-26T10:43:42.080Z [mportExecutor-4][][] INFO  c.d.e.c.t.m.MailHandler - Creating encrypted e-mail for 10XDE-RWENET---W2018-04-26T10:43:42.095Z [mportExecutor-4][][] INFO  c.d.e.c.t.m.MailHandler - Sending From: xbsyt3-cmi@xbid-test.deutsche-boerse.com, To: amp@xbid-test.deutsche-boerse.com, Subject: ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000.xml, Attachment: ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000.xml2018-04-26T10:45:00.071Z [ventExecutor-79][][] INFO  c.d.e.c.s.EventService - Handling DeliveryIntervalPhaseEvent{phase=BALANCING} AbstractCmmApplicationEvent{connectorIds=[78], days=[2018-04-26T00:00:00.000+02:00], eventTimestamp=2018-04-26T12:45:00.045+02:00} AbstractApplicationEvent{uuid='655d9f4c-4fc0-2b9d-5140-83100f6255d1'}2018-04-26T10:45:00.072Z [ventExecutor-77][][] INFO  c.d.e.c.s.EventService - Handling DeliveryIntervalPhaseEvent{phase=CLOSED} AbstractCmmApplicationEvent{connectorIds=[49, 50, 51, 3, 52, 53, 7, 8, 78], days=[2018-04-26T00:00:00.000+02:00], eventTimestamp=2018-04-26T12:45:00.045+02:00} AbstractApplicationEvent{uuid='dc205a23-3f79-107a-593b-ae452bacf0cb'}2018-04-26T10:45:00.073Z [ventExecutor-80][][] INFO  c.d.e.c.s.EventService - Handling DeliveryIntervalPhaseEvent{phase=DELIVERY} AbstractCmmApplicationEvent{connectorIds=[49, 50, 51, 3, 52, 5, 53, 78], days=[2018-04-26T00:00:00.000+02:00], eventTimestamp=2018-04-26T12:45:00.045+02:00} AbstractApplicationEvent{uuid='5e96abf9-4377-836d-75f4-7179f1400bee'}{code}",,cf948,pd122,tr866,,,,,,,,,,,,,,,,,,,,,,,,,XP-134,,,,,,,,,,,,,,,,,"25/Jan/19 13:58;tr866;20190125_104506_26a0439356ec5091b04dc057ab142502.xml;https://jira.deutsche-boerse.com/secure/attachment/65074/20190125_104506_26a0439356ec5091b04dc057ab142502.xml","17/Jan/19 09:15;cf948;ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000_1xml;https://jira.deutsche-boerse.com/secure/attachment/64440/ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000_1xml","17/Jan/19 09:15;cf948;ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000_2.xml;https://jira.deutsche-boerse.com/secure/attachment/64441/ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000_2.xml","17/Jan/19 09:15;cf948;ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000_2xml;https://jira.deutsche-boerse.com/secure/attachment/64442/ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000_2xml","17/Jan/19 09:15;cf948;C0001_AT-DE_NTC_AMP_2.xml;https://jira.deutsche-boerse.com/secure/attachment/64443/C0001_AT-DE_NTC_AMP_2.xml",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,65491200,,,,,,,,,,XP-53,,,,,,,,,,,,,,26/Apr/18 13:12,,,,,,,,,,,,,,,,,,,,,"1|000yrt:0uji",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Ampere Sprint 11 [S],Ampere Sprint 12,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Jan/19 15:34;tr866;Last time reproduced on Syt3 with version XB R1.6.0.22 (Build 135c171877af9737499de3e3558071f1bb5c638b)
{code:xml|title=xb_xbid_syt3_cmi-1_standard_ixe.log|borderStyle=solid}
2019-01-18T14:31:01.071Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.MailHandler - [imap://englobmail1:143/INBOX, imap://englobmail2:143/INBOX] : [1] messages. Fetching...
2019-01-18T14:31:01.072Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - From : AMP <amp@xbid-test.deutsche-boerse.com>, subject: test
2019-01-18T14:31:01.108Z [TaskScheduler-3][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-18T14:31:01.118Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - Email encryption is enabled for 10XDE-RWENET---W, email being processed is required to be encrypted and signed
2019-01-18T14:31:01.125Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.SMIMEConverter - Email message decrypting
2019-01-18T14:31:01.516Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.SMIMEConverter - Email message signature veryfing
2019-01-18T14:31:01.662Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.MailUtils - Changing header key from  <U+0080>$<U+0080>^D<U+0082>^K±Content-Type to Content-Type with value multipart/mixed;
        boundary=""----=_NextPart_000_0007_01D4AF42.CFA9C8A0""
2019-01-18T14:31:01.662Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - Message multipart/mixed;
        boundary=""----=_NextPart_000_0007_01D4AF42.CFA9C8A0""
2019-01-18T14:31:01.697Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.EotFilteredStream - Skipped 4 byte-blocks from incoming email file
2019-01-18T14:31:02.218Z [mportExecutor-1][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-18T14:31:02.220Z [mportExecutor-1][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-18T14:31:02.222Z [mportExecutor-1][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-18T14:31:02.222Z [mportExecutor-1][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-18T14:31:02.646Z [mportExecutor-1][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-18T14:31:02.646Z [mportExecutor-1][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-18T14:31:02.723Z [mportExecutor-1][][] INFO  c.d.e.f.e.GenericExporter - File saved successfully : File:ACK_C0001_AT-DE_NTC_AMP_2_1_20190118000000.xml in 0.016 seconds
2019-01-18T14:31:02.724Z [mportExecutor-1][][] INFO  c.d.e.c.s.AckServiceImpl - Acknowledgement created: ACK_C0001_AT-DE_NTC_AMP_2_1_20190118000000.xml
2019-01-18T14:31:02.738Z [mportExecutor-1][][] INFO  c.d.e.c.s.AckServiceImpl - Acknowledgement sending: File:ACK_C0001_AT-DE_NTC_AMP_2_1_20190118000000.xml to: 10XDE-RWENET---W
2019-01-18T14:31:02.757Z [mportExecutor-1][][] INFO  c.d.e.c.t.m.MailHandler - Creating encrypted e-mail for 10XDE-RWENET---W
2019-01-18T14:31:02.827Z [mportExecutor-1][][] INFO  c.d.e.c.t.m.MailHandler - Sending From: xbsyt3-cmi@xbid-test.deutsche-boerse.com, To: amp@xbid-test.deutsche-boerse.com, Subject: ACK_C0001_AT-DE_NTC_AMP_2_1_20190118000000.xml, Attachment: ACK_C0001_AT-DE_NTC_AMP_2_1_20190118000000.xml
2019-01-18T14:31:02.897Z [mportExecutor-1][][] INFO  c.d.e.c.s.AsyncFileImporterImpl - Capacity publishing of incoming file: 1
2019-01-18T14:31:06.024Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.MailHandler - [imap://englobmail1:143/INBOX, imap://englobmail2:143/INBOX] : [1] messages. Fetching...
2019-01-18T14:31:06.024Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - From : AMP <amp@xbid-test.deutsche-boerse.com>, subject: test
2019-01-18T14:31:06.025Z [TaskScheduler-3][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-18T14:31:06.030Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - Email encryption is enabled for 10XDE-RWENET---W, email being processed is required to be encrypted and signed
2019-01-18T14:31:06.030Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.SMIMEConverter - Email message decrypting
2019-01-18T14:31:06.043Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.SMIMEConverter - Email message signature veryfing
2019-01-18T14:31:06.051Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.MailUtils - Changing header key from  <U+0080>$<U+0080>^D<U+0082>^K±Content-Type to Content-Type with value multipart/mixed;
        boundary=""----=_NextPart_000_0007_01D4AF42.CFA9C8A0""
2019-01-18T14:31:06.051Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - Message multipart/mixed;
        boundary=""----=_NextPart_000_0007_01D4AF42.CFA9C8A0""
2019-01-18T14:31:06.054Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.EotFilteredStream - Skipped 4 byte-blocks from incoming email file
2019-01-18T14:31:06.449Z [mportExecutor-2][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-18T14:31:06.450Z [mportExecutor-2][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-18T14:31:06.450Z [mportExecutor-2][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-18T14:31:06.450Z [mportExecutor-2][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-18T14:31:06.845Z [mportExecutor-2][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-18T14:31:06.845Z [mportExecutor-2][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-18T14:31:06.856Z [mportExecutor-2][][] INFO  c.d.e.f.e.GenericExporter - File saved successfully : File:ACK_C0001_AT-DE_NTC_AMP_2_1_20190118000000.xml in 0.007 seconds
2019-01-18T14:31:06.856Z [mportExecutor-2][][] INFO  c.d.e.c.s.AckServiceImpl - Acknowledgement created: ACK_C0001_AT-DE_NTC_AMP_2_1_20190118000000.xml
2019-01-18T14:31:06.858Z [mportExecutor-2][][] INFO  c.d.e.c.s.AckServiceImpl - Acknowledgement sending: File:ACK_C0001_AT-DE_NTC_AMP_2_1_20190118000000.xml to: 10XDE-RWENET---W
2019-01-18T14:31:06.864Z [mportExecutor-2][][] INFO  c.d.e.c.t.m.MailHandler - Creating encrypted e-mail for 10XDE-RWENET---W
2019-01-18T14:31:06.888Z [mportExecutor-2][][] INFO  c.d.e.c.t.m.MailHandler - Sending From: xbsyt3-cmi@xbid-test.deutsche-boerse.com, To: amp@xbid-test.deutsche-boerse.com, Subject: ACK_C0001_AT-DE_NTC_AMP_2_1_20190118000000.xml, Attachment: ACK_C0001_AT-DE_NTC_AMP_2_1_20190118000000.xml
{code}","18/Jan/19 18:18;pd122; This is what I observed on the mail server.

Message  received by SMTP server:
{code:java}
Jan 18 15:30:59 englobmail2 postfix/smtpd[13022]: 02C38160: client=MFOATS211.oa.pnrad.net[10.250.6.195]
Jan 18 15:30:59 englobmail2 postfix/cleanup[17564]: 02C38160: message-id=<000c01d4af3a$6e1e9910$4a5bcb30$@xbid-test.deutsche-boerse.com>
Jan 18 15:30:59 englobmail2 postfix/qmgr[1342]: 02C38160: from=<amp@xbid-test.deutsche-boerse.com>, size=48528, nrcpt=1 (queue active)
Jan 18 15:30:59 englobmail2 postfix/pipe[17565]: 02C38160: to=<xbsyt3-cmi@xbid-test.deutsche-boerse.com>, relay=dovecot, delay=0.1, delays=0.03/0.03/0/0.04, dsn=2.0.0, status=sent (delivered via dovecot service)
Jan 18 15:30:59 englobmail2 postfix/qmgr[1342]: 02C38160: removed
{code}
 

Message is delivered to inbpox:
{code:java}
Jan 18 15:30:59 englobmail2 dovecot: lda: Debug: auth input: xbsyt3-cmi@xbid-test.deutsche-boerse.com uid=1981 gid=1981 shell=/bin/bash home=/var/spool/mail/virtual/xbid-test.deutsche-boerse.com/xbsyt3-cmi/
Jan 18 15:30:59 englobmail2 dovecot: lda(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: Effective uid=1981, gid=1981, home=/var/spool/mail/virtual/xbid-test.deutsche-boerse.com/xbsyt3-cmi/
Jan 18 15:30:59 englobmail2 dovecot: lda(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: Namespace inbox: type=private, prefix=, sep=, inbox=yes, hidden=no, list=yes, subscriptions=yes location=maildir:/var/spool/mail/virtual/xbid-test.deutsche-boerse.com/xbsyt3-cmi
Jan 18 15:30:59 englobmail2 dovecot: lda(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: maildir++: root=/var/spool/mail/virtual/xbid-test.deutsche-boerse.com/xbsyt3-cmi, index=, indexpvt=, control=, inbox=/var/spool/mail/virtual/xbid-test.deutsche-boerse.com/xbsyt3-cmi, alt=
Jan 18 15:30:59 englobmail2 dovecot: lda(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: none: root=, index=, indexpvt=, control=, inbox=, alt=
Jan 18 15:30:59 englobmail2 dovecot: lda(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: Destination address: xbsyt3-cmi@xbid-test.deutsche-boerse.com (source: user@hostname)
Jan 18 15:30:59 englobmail2 dovecot: lda(xbsyt3-cmi@xbid-test.deutsche-boerse.com): msgid=<000c01d4af3a$6e1e9910$4a5bcb30$@xbid-test.deutsche-boerse.com>: saved mail to INBOX
{code}
 

message synced across both cluster nodes:
{code:java}
Jan 18 15:30:59 englobmail2 dovecot: doveadm(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: auth input: xbsyt3-cmi@xbid-test.deutsche-boerse.com uid=1981 gid=1981 shell=/bin/bash home=/var/spool/mail/virtual/xbid-test.deutsche-boerse.com/xbsyt3-cmi/
Jan 18 15:30:59 englobmail2 dovecot: doveadm(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: Added userdb setting: plugin/shell=/bin/bash
Jan 18 15:30:59 englobmail2 dovecot: doveadm(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: Effective uid=1981, gid=1981, home=/var/spool/mail/virtual/xbid-test.deutsche-boerse.com/xbsyt3-cmi/
Jan 18 15:30:59 englobmail2 dovecot: doveadm(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: Namespace inbox: type=private, prefix=, sep=, inbox=yes, hidden=no, list=yes, subscriptions=yes location=maildir:/var/spool/mail/virtual/xbid-test.deutsche-boerse.com/xbsyt3-cmi
Jan 18 15:30:59 englobmail2 dovecot: doveadm(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: maildir++: root=/var/spool/mail/virtual/xbid-test.deutsche-boerse.com/xbsyt3-cmi, index=, indexpvt=, control=, inbox=/var/spool/mail/virtual/xbid-test.deutsche-boerse.com/xbsyt3-cmi, alt=
Jan 18 15:30:59 englobmail2 dovecot: doveadm(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: Namespace : Using permissions from /var/spool/mail/virtual/xbid-test.deutsche-boerse.com/xbsyt3-cmi: mode=0700 gid=default
Jan 18 15:30:59 englobmail2 dovecot: dsync-local(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: doveadm-sieve: Iterating Sieve mailbox attributes
Jan 18 15:30:59 englobmail2 dovecot: dsync-local(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: sieve: Pigeonhole version 0.4.2 initializing
Jan 18 15:30:59 englobmail2 dovecot: dsync-local(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: sieve: include: sieve_global_dir is not set; it is currently not possible to include `:global' scripts.
Jan 18 15:30:59 englobmail2 dovecot: dsync-local(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: sieve-storage: sieve active script path is unconfigured; using default (sieve=~/.dovecot.sieve)
Jan 18 15:30:59 englobmail2 dovecot: dsync-local(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: sieve-storage: root exists (/var/spool/mail/virtual/xbid-test.deutsche-boerse.com/xbsyt3-cmi/)
Jan 18 15:30:59 englobmail2 dovecot: dsync-local(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: sieve-storage: using active sieve script path: /var/spool/mail/virtual/xbid-test.deutsche-boerse.com/xbsyt3-cmi//.dovecot.sieve
Jan 18 15:30:59 englobmail2 dovecot: dsync-local(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: sieve-storage: using sieve script storage directory: /var/spool/mail/virtual/xbid-test.deutsche-boerse.com/xbsyt3-cmi//sieve
Jan 18 15:30:59 englobmail2 dovecot: dsync-local(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: sieve-storage: using permissions from /var/spool/mail/virtual/xbid-test.deutsche-boerse.com/xbsyt3-cmi//sieve: mode=0700 gid=-1
Jan 18 15:30:59 englobmail2 dovecot: dsync-local(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: sieve-storage: relative path to sieve storage in active link: sieve/
{code}
{code:java}
Jan 18 15:31:01 englobmail1 dovecot: doveadm(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: auth input: xbsyt3-cmi@xbid-test.deutsche-boerse.com uid=1981 gid=1981 shell=/bin/bash home=/var/spool/mail/virtual/xbid-test.deutsche-boerse.com/xbsyt3-cmi/
Jan 18 15:31:01 englobmail1 dovecot: doveadm(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: Added userdb setting: plugin/shell=/bin/bash
Jan 18 15:31:01 englobmail1 dovecot: doveadm(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: Effective uid=1981, gid=1981, home=/var/spool/mail/virtual/xbid-test.deutsche-boerse.com/xbsyt3-cmi/
Jan 18 15:31:01 englobmail1 dovecot: doveadm(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: Namespace inbox: type=private, prefix=, sep=, inbox=yes, hidden=no, list=yes, subscriptions=yes location=maildir:/var/spool/mail/virtual/xbid-test.deutsche-boerse.com/xbsyt3-cmi
Jan 18 15:31:01 englobmail1 dovecot: doveadm(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: maildir++: root=/var/spool/mail/virtual/xbid-test.deutsche-boerse.com/xbsyt3-cmi, index=, indexpvt=, control=, inbox=/var/spool/mail/virtual/xbid-test.deutsche-boerse.com/xbsyt3-cmi, alt=
Jan 18 15:31:01 englobmail1 dovecot: doveadm(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: Namespace : Using permissions from /var/spool/mail/virtual/xbid-test.deutsche-boerse.com/xbsyt3-cmi: mode=0700 gid=default
Jan 18 15:31:01 englobmail1 dovecot: dsync-local(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: doveadm-sieve: Iterating Sieve mailbox attributes
Jan 18 15:31:01 englobmail1 dovecot: dsync-local(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: sieve: Pigeonhole version 0.4.2 initializing
Jan 18 15:31:01 englobmail1 dovecot: dsync-local(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: sieve: include: sieve_global_dir is not set; it is currently not possible to include `:global' scripts.
Jan 18 15:31:01 englobmail1 dovecot: dsync-local(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: sieve-storage: sieve active script path is unconfigured; using default (sieve=~/.dovecot.sieve)
Jan 18 15:31:01 englobmail1 dovecot: dsync-local(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: sieve-storage: root exists (/var/spool/mail/virtual/xbid-test.deutsche-boerse.com/xbsyt3-cmi/)
Jan 18 15:31:01 englobmail1 dovecot: dsync-local(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: sieve-storage: using active sieve script path: /var/spool/mail/virtual/xbid-test.deutsche-boerse.com/xbsyt3-cmi//.dovecot.sieve
Jan 18 15:31:01 englobmail1 dovecot: dsync-local(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: sieve-storage: using sieve script storage directory: /var/spool/mail/virtual/xbid-test.deutsche-boerse.com/xbsyt3-cmi//sieve
Jan 18 15:31:01 englobmail1 dovecot: dsync-local(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: sieve-storage: using permissions from /var/spool/mail/virtual/xbid-test.deutsche-boerse.com/xbsyt3-cmi//sieve: mode=0700 gid=-1
Jan 18 15:31:01 englobmail1 dovecot: dsync-local(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Debug: sieve-storage: relative path to sieve storage in active link: sieve/
Jan 18 15:31:01 englobmail1 dovecot: doveadm: Error: dsync-remote(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Error: net_connect_unix(/var/run/dovecot/replicator-doveadm) failed: Permission denied
{code}
 

app replies:
{code:java}
Jan 18 15:31:02 englobmail1 postfix/smtpd[40421]: D1688146: client=xbsyt3cmi1.deutsche-boerse.de[10.139.41.73]
Jan 18 15:31:02 englobmail1 postfix/cleanup[43087]: D1688146: message-id=<1129996960.6.1547821862856.JavaMail.tomcat@xbsyt3cmi1.deutsche-boerse.de>
Jan 18 15:31:02 englobmail1 postfix/qmgr[1332]: D1688146: from=<xbsyt3-cmi@xbid-test.deutsche-boerse.com>, size=8189, nrcpt=1 (queue active)
Jan 18 15:31:02 englobmail1 postfix/pipe[44216]: D1688146: to=<amp@xbid-test.deutsche-boerse.com>, relay=dovecot, delay=0.03, delays=0.01/0/0/0.02, dsn=2.0.0, status=sent (delivered via dovecot service)
Jan 18 15:31:02 englobmail1 postfix/qmgr[1332]: D1688146: removed

Jan 18 15:31:06 englobmail1 postfix/smtpd[42858]: DB862134: client=xbsyt3cmi1.deutsche-boerse.de[10.139.41.73]
Jan 18 15:31:06 englobmail1 postfix/cleanup[43889]: DB862134: message-id=<625456723.13.1547821866898.JavaMail.tomcat@xbsyt3cmi1.deutsche-boerse.de>
Jan 18 15:31:06 englobmail1 postfix/qmgr[1332]: DB862134: from=<xbsyt3-cmi@xbid-test.deutsche-boerse.com>, size=8233, nrcpt=1 (queue active)
Jan 18 15:31:06 englobmail1 postfix/pipe[43870]: DB862134: to=<amp@xbid-test.deutsche-boerse.com>, relay=dovecot, delay=0.03, delays=0.01/0/0/0.03, dsn=2.0.0, status=sent (delivered via dovecot service)
Jan 18 15:31:06 englobmail1 postfix/qmgr[1332]: DB862134: removed
{code}
 

There are 2 things I find interesting:
 * there is bsyt3-cm IMAP client session recorded prior and after the exchange but not during it

{code:java}
Jan 18 15:29:19 englobmail2 dovecot: imap-login: Login: user=<xbsyt3-cmi@xbid-test.deutsche-boerse.com>, method=PLAIN, rip=10.250.6.195, lip=10.136.12.249, mpid=16803, secured, session=<x0UfVrx/mQAK+gbD>
Jan 18 15:29:57 englobmail2 dovecot: imap(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Disconnected: Logged out in=500 out=3347

Jan 18 15:31:19 englobmail2 dovecot: imap-login: Login: user=<xbsyt3-cmi@xbid-test.deutsche-boerse.com>, method=PLAIN, rip=10.250.6.195, lip=10.136.12.249, mpid=17650, secured, session=<u5dLXbx/mQAK+gbD>
Jan 18 15:31:51 englobmail2 dovecot: imap(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Disconnected: Logged out in=500 out=3347{code}
 
 * unix socket error when syncing reeived email

{code:java}
Jan 18 15:31:01 englobmail1 dovecot: doveadm: Error: dsync-remote(xbsyt3-cmi@xbid-test.deutsche-boerse.com): Error: net_connect_unix(/var/run/dovecot/replicator-doveadm) failed: Permission denied
{code}
I believe I have addressed the error but I am not sure it had any impact on the issue here.  [~tr866] is it possible for you to re-test?

 

Based on the log file it would appear that the IMAP client attempts connection every 2 min.   Could it be there are several active IMAP client sessions at any given time?

 ","22/Jan/19 12:17;tr866;Tested in environment Syt2 witch version XB R1.6.0.22 (Build 135c171877af9737499de3e3558071f1bb5c638b), SM 1.5.0.14
When uploading NTC file via email last time only one Acknowledgement was received back as expected:
{code:xml|title=xb_xbid_syt2_cmi-1_standard_ixe.log|borderStyle=solid}
2019-01-22T10:42:26.017Z [TaskScheduler-1][][] INFO  c.d.e.c.t.m.MailHandler - [imap://englobmail1:143/INBOX, imap://englobmail2:143/INBOX] : [1] messages. Fetching...
2019-01-22T10:42:26.018Z [TaskScheduler-1][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - From : AMP <amp@xbid-test.deutsche-boerse.com>, subject: test
2019-01-22T10:42:26.018Z [TaskScheduler-1][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-22T10:42:26.025Z [TaskScheduler-1][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - Email encryption is enabled for 10XDE-RWENET---W, email being processed is required to be encrypted and signed
2019-01-22T10:42:26.025Z [TaskScheduler-1][][] INFO  c.d.e.c.t.m.SMIMEConverter - Email message decrypting
2019-01-22T10:42:26.037Z [TaskScheduler-1][][] INFO  c.d.e.c.t.m.SMIMEConverter - Email message signature veryfing
2019-01-22T10:42:26.189Z [TaskScheduler-1][][] INFO  c.d.e.c.t.m.MailUtils - Changing header key from  <U+0080>$<U+0080>^D<U+0082>^K±Content-Type to Content-Type with value multipart/mixed;
        boundary=""----=_NextPart_000_001F_01D4B247.8AD00DE0""
2019-01-22T10:42:26.189Z [TaskScheduler-1][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - Message multipart/mixed;
        boundary=""----=_NextPart_000_001F_01D4B247.8AD00DE0""
2019-01-22T10:42:26.192Z [TaskScheduler-1][][] INFO  c.d.e.c.t.m.EotFilteredStream - Skipped 4 byte-blocks from incoming email file
2019-01-22T10:42:26.709Z [mportExecutor-3][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-22T10:42:26.712Z [mportExecutor-3][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-22T10:42:26.713Z [mportExecutor-3][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-22T10:42:26.713Z [mportExecutor-3][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-22T10:42:27.211Z [mportExecutor-3][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-22T10:42:27.211Z [mportExecutor-3][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-22T10:42:27.241Z [mportExecutor-3][][] INFO  c.d.e.f.e.GenericExporter - File saved successfully : File:ACK_C0001_AT-DE_NTC_AMP_2_1_20190122000000.xml in 0.004 seconds
2019-01-22T10:42:27.241Z [mportExecutor-3][][] INFO  c.d.e.c.s.AckServiceImpl - Acknowledgement created: ACK_C0001_AT-DE_NTC_AMP_2_1_20190122000000.xml
2019-01-22T10:42:27.243Z [mportExecutor-3][][] INFO  c.d.e.c.s.AckServiceImpl - Acknowledgement sending: File:ACK_C0001_AT-DE_NTC_AMP_2_1_20190122000000.xml to: 10XDE-RWENET---W
2019-01-22T10:42:27.253Z [mportExecutor-3][][] INFO  c.d.e.c.t.m.MailHandler - Creating encrypted e-mail for 10XDE-RWENET---W
2019-01-22T10:42:27.274Z [mportExecutor-3][][] INFO  c.d.e.c.t.m.MailHandler - Sending From: xbsyt2-cmi@xbid-test.deutsche-boerse.com, To: amp@xbid-test.deutsche-boerse.com, Subject: ACK_C0001_AT-DE_NTC_AMP_2_1_20190122000000.xml, Attachment: ACK_C0001_AT-DE_NTC_AMP_2_1_20190122000
000.xml
2019-01-22T10:42:27.341Z [mportExecutor-3][][] INFO  c.d.e.c.s.AsyncFileImporterImpl - Capacity publishing of incoming file: 10
2019-01-22T10:42:27.537Z [ventExecutor-59][][] INFO  c.d.e.c.s.EventService - Handling PublishEvent{publishMode=NTC_ADJUSTMENT} AbstractCmmApplicationEvent{connectorIds=[65], days=[2019-01-22T00:00:00.000+01:00], eventTimestamp=2019-01-22T11:42:27.417+01:00} AbstractApplicationEven
t{uuid='a81775e6-1aa4-0614-08c9-172f8335b5bf'}{code}

When acknowledgement was sent to Shipping Module for HNT file the email was also processed only once this time as expected and not again 1 minute later as before
{code:xml|title=xb_xbid_syt2_smi-1_standard_ixe.log|borderStyle=solid}
2019-01-22T11:12:04.416Z [scpAck-1][][] INFO  c.d.m.s.a.AckReceiverScp - Reading and processing of scp acknowledgements
2019-01-22T11:12:10.602Z [emailAck-1][][] INFO  c.d.m.s.a.AckReceiverEmail - Reading and processing of email acknowledgements
2019-01-22T11:12:10.606Z [emailAck-1][][] INFO  o.s.i.m.ImapMailReceiver - attempting to receive mail from folder [INBOX]
2019-01-22T11:12:10.617Z [emailAck-1][][] INFO  c.d.m.s.a.AckReceiverEmail - Processing 1 email messages
2019-01-22T11:12:10.617Z [emailAck-1][][] INFO  c.d.m.s.a.AckReceiverEmail - Started processing mail from: [AMP <amp@xbid-test.deutsche-boerse.com>] subject: ship
2019-01-22T11:12:10.617Z [emailAck-1][][] INFO  c.d.e.c.t.m.SMIMEConverter - Email message decrypting
2019-01-22T11:12:10.629Z [emailAck-1][][] INFO  c.d.e.c.t.m.SMIMEConverter - Email message signature veryfing
2019-01-22T11:12:10.634Z [emailAck-1][][] INFO  c.d.e.c.t.m.MailUtils - Changing header key from  <U+0080>$<U+0080>^D<U+0082>^OüContent-Type to Content-Type with value multipart/mixed;
        boundary=""----=_NextPart_000_0059_01D4B24B.AFF3AA60""
2019-01-22T11:12:10.646Z [emailAck-1][][] INFO  c.d.m.s.s.AcknowledgmentService - Processing acknowledgement for file header 468811001, incomingAck Ack{7d987ff1d95d5fa74d76c7336ef1d874,534,Pos} with reason code A01.


2019-01-22T11:13:04.418Z [scpAck-1][][] INFO  c.d.m.s.a.AckReceiverScp - Reading and processing of scp acknowledgements
2019-01-22T11:13:10.664Z [emailAck-1][][] INFO  c.d.m.s.a.AckReceiverEmail - Reading and processing of email acknowledgements
2019-01-22T11:13:10.675Z [emailAck-1][][] INFO  o.s.i.m.ImapMailReceiver - attempting to receive mail from folder [INBOX]
2019-01-22T11:13:10.676Z [emailAck-1][][] INFO  c.d.m.s.a.AckReceiverEmail - Processing 0 email messages
2019-01-22T11:13:25.338Z [ecpAck-1][][] INFO  c.d.m.s.a.AckReceiverEcp - Reading and processing of ecp acknowledgements

{code}","23/Jan/19 10:30;tr866;When tested on Syt2 it looked that the last change [~pd122] made worked well. But because of the random character of the issue it would be good to test it also on one more environment and especially some double-side environment. Currently the environments are not running and have to wait for TECHLOG-1873 to get solved.","23/Jan/19 15:38;pd122;Just FYI - a brief description of the change: user owning the virtual mailboxes (and triggering the mailbox synchronization across the individual cluster nodes) has been given explicit access to the replication process adm socket (up until now only the user running the app had access).","25/Jan/19 12:08;tr866;Tested in environment Syt3 witch version XB R1.6.0.23 (Build 7244cee1eefe04d4056eeca9a02081fced1b9499), SM 1.5.0.15
 When uploading NTC file via email last time only one Acknowledgement was received back as expected:
{code:xml|title=xb_xbid_syt3_cmi-1_standard_ixe.log|borderStyle=solid}
2019-01-25T10:43:21.015Z [TaskScheduler-9][][] INFO  c.d.e.c.t.m.MailHandler - [imap://englobmail1:143/INBOX, imap://englobmail2:143/INBOX] : [1] messages. Fetching...
2019-01-25T10:43:21.016Z [TaskScheduler-9][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - From : AMP <amp@xbid-test.deutsche-boerse.com>, subject: est
2019-01-25T10:43:21.016Z [TaskScheduler-9][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-25T10:43:21.021Z [TaskScheduler-9][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - Email encryption is enabled for 10XDE-RWENET---W, email being processed is required to be encrypted and signed
2019-01-25T10:43:21.021Z [TaskScheduler-9][][] INFO  c.d.e.c.t.m.SMIMEConverter - Email message decrypting
2019-01-25T10:43:21.047Z [TaskScheduler-9][][] INFO  c.d.e.c.t.m.SMIMEConverter - Email message signature veryfing
2019-01-25T10:43:21.086Z [TaskScheduler-9][][] INFO  c.d.e.c.t.m.MailUtils - Changing header key from  <U+0080>$<U+0080>^D<U+0082>^K±Content-Type to Content-Type with value multipart/mixed;
        boundary=""----=_NextPart_000_0404_01D4B4A3.28C44F90""
2019-01-25T10:43:21.086Z [TaskScheduler-9][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - Message multipart/mixed;
        boundary=""----=_NextPart_000_0404_01D4B4A3.28C44F90""
2019-01-25T10:43:21.089Z [TaskScheduler-9][][] INFO  c.d.e.c.t.m.EotFilteredStream - Skipped 4 byte-blocks from incoming email file
2019-01-25T10:43:21.187Z [TaskScheduler-3][][] WARN  c.d.e.c.t.s.SftpHandler - Sftp server not configured for '10X1001A1001A418', missing 'syt3/IN/cmi'. Skipping.
2019-01-25T10:43:21.607Z [mportExecutor-3][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-25T10:43:21.608Z [mportExecutor-3][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-25T10:43:21.608Z [mportExecutor-3][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-25T10:43:21.608Z [mportExecutor-3][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-25T10:43:21.638Z [TaskScheduler-3][][] WARN  c.d.e.c.t.s.SftpHandler - Sftp server not configured for '10X1001A1001A58S', missing 'syt3/IN/cmi'. Skipping.
2019-01-25T10:43:22.004Z [mportExecutor-3][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-25T10:43:22.004Z [mportExecutor-3][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-25T10:43:22.031Z [mportExecutor-3][][] INFO  c.d.e.f.e.GenericExporter - File saved successfully : File:ACK_C0001_AT-DE_NTC_AMP_2_3_20190125000000.xml in 0.007 seconds
2019-01-25T10:43:22.031Z [mportExecutor-3][][] INFO  c.d.e.c.s.AckServiceImpl - Acknowledgement created: ACK_C0001_AT-DE_NTC_AMP_2_3_20190125000000.xml
2019-01-25T10:43:22.033Z [mportExecutor-3][][] INFO  c.d.e.c.s.AckServiceImpl - Acknowledgement sending: File:ACK_C0001_AT-DE_NTC_AMP_2_3_20190125000000.xml to: 10XDE-RWENET---W
2019-01-25T10:43:22.046Z [mportExecutor-3][][] INFO  c.d.e.c.t.m.MailHandler - Creating encrypted e-mail for 10XDE-RWENET---W
2019-01-25T10:43:22.063Z [mportExecutor-3][][] INFO  c.d.e.c.t.m.MailHandler - Sending From: xbsyt3-cmi@xbid-test.deutsche-boerse.com, To: amp@xbid-test.deutsche-boerse.com, Subject: ACK_C0001_AT-DE_NTC_AMP_2_3_20190125000000.xml, Attachment: ACK_C0001_AT-DE_NTC_AMP_2_3_20190125000
000.xml
{code}
When acknowledgement was sent to Shipping Module for XBR file the email was also processed only once this time as expected and not again 1 minute later as before
{code:xml|title=xb_xbid_syt3_smi-2_standard_hau.log|borderStyle=solid}
2019-01-25T10:58:06.768Z [emailAck-1][][] INFO  c.d.m.s.a.AckReceiverEmail - Reading and processing of email acknowledgements
2019-01-25T10:58:06.771Z [emailAck-1][][] INFO  o.s.i.m.ImapMailReceiver - attempting to receive mail from folder [INBOX]
2019-01-25T10:58:06.780Z [ecpAck-1][][] INFO  c.d.e.c.t.e.ConfirmAfterProcessingEcpMessageReceiverImpl - Starting processing ECP messages for message type: MRC-XBID-A01A19-514-ACK
2019-01-25T10:58:06.783Z [emailAck-1][][] INFO  c.d.m.s.a.AckReceiverEmail - Processing 1 email messages
2019-01-25T10:58:06.783Z [emailAck-1][][] INFO  c.d.m.s.a.AckReceiverEmail - Started processing mail from: [AMP <amp@xbid-test.deutsche-boerse.com>] subject: test
2019-01-25T10:58:06.783Z [emailAck-1][][] INFO  c.d.e.c.t.m.SMIMEConverter - Email message decrypting
2019-01-25T10:58:06.796Z [emailAck-1][][] INFO  c.d.e.c.t.m.SMIMEConverter - Email message signature veryfing
2019-01-25T10:58:06.805Z [emailAck-1][][] INFO  c.d.e.c.t.m.MailUtils - Changing header key from  <U+0080>$<U+0080>^D<U+0082>^OüContent-Type to Content-Type with value multipart/mixed;
        boundary=""----=_NextPart_000_0419_01D4B4A5.19866A70""
2019-01-25T10:58:06.834Z [emailAck-1][][] INFO  c.d.m.s.s.AcknowledgmentService - Processing acknowledgement for file header 28616001, incomingAck Ack{26a0439356ec5091b04dc057ab142502,111,Pos} with reason code A01.

2019-01-25T10:59:03.544Z [scpAck-1][][] INFO  c.d.m.s.a.AckReceiverScp - Reading and processing of scp acknowledgements
2019-01-25T10:59:06.864Z [emailAck-1][][] INFO  c.d.m.s.a.AckReceiverEmail - Reading and processing of email acknowledgements
2019-01-25T10:59:06.867Z [emailAck-1][][] INFO  o.s.i.m.ImapMailReceiver - attempting to receive mail from folder [INBOX]
2019-01-25T10:59:06.868Z [emailAck-1][][] INFO  c.d.m.s.a.AckReceiverEmail - Processing 0 email messages
{code}","25/Jan/19 13:57;tr866;Tested in environment Syt3 witch version XB R1.6.0.23 (Build 7244cee1eefe04d4056eeca9a02081fced1b9499)
 When uploading NTC file via email last time only one Acknowledgement was received back as expected:
{code:xml|title=xb_xbid_syt1_cmi-1_standard_ixe.log|borderStyle=solid}
2019-01-25T12:46:11.079Z [TaskScheduler-7][][] INFO  c.d.e.c.t.m.MailHandler - [imap://englobmail1:143/INBOX, imap://englobmail2:143/INBOX] : [1] messages. Fetching...
2019-01-25T12:46:11.080Z [TaskScheduler-7][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - From : AMP <amp@xbid-test.deutsche-boerse.com>, subject: test
2019-01-25T12:46:11.118Z [TaskScheduler-7][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-25T12:46:11.128Z [TaskScheduler-7][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - Email encryption is enabled for 10XDE-RWENET---W, email being processed is required to be encrypted and signed
2019-01-25T12:46:11.136Z [TaskScheduler-7][][] INFO  c.d.e.c.t.m.SMIMEConverter - Email message decrypting
2019-01-25T12:46:11.679Z [TaskScheduler-7][][] INFO  c.d.e.c.t.m.SMIMEConverter - Email message signature veryfing
2019-01-25T12:46:11.857Z [TaskScheduler-7][][] INFO  c.d.e.c.t.m.MailUtils - Changing header key from  <U+0080>$<U+0080>^D<U+0082>^K±Content-Type to Content-Type with value multipart/mixed;
        boundary=""----=_NextPart_000_0453_01D4B4B4.53A40C80""
2019-01-25T12:46:11.857Z [TaskScheduler-7][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - Message multipart/mixed;
        boundary=""----=_NextPart_000_0453_01D4B4B4.53A40C80""
2019-01-25T12:46:11.883Z [TaskScheduler-7][][] INFO  c.d.e.c.t.m.EotFilteredStream - Skipped 4 byte-blocks from incoming email file
2019-01-25T12:46:12.313Z [mportExecutor-1][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-25T12:46:12.314Z [mportExecutor-1][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-25T12:46:12.317Z [mportExecutor-1][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-25T12:46:12.317Z [mportExecutor-1][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-25T12:46:12.629Z [mportExecutor-1][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-25T12:46:12.629Z [mportExecutor-1][][] WARN  o.h.orm.deprecation - HHH90000022: Hibernate's legacy org.hibernate.Criteria API is deprecated; use the JPA javax.persistence.criteria.CriteriaQuery instead
2019-01-25T12:46:12.681Z [mportExecutor-1][][] INFO  c.d.e.f.e.GenericExporter - File saved successfully : File:ACK_C0001_AT-DE_NTC_AMP_2_1_20190125000000.xml in 0.017 seconds
2019-01-25T12:46:12.681Z [mportExecutor-1][][] INFO  c.d.e.c.s.AckServiceImpl - Acknowledgement created: ACK_C0001_AT-DE_NTC_AMP_2_1_20190125000000.xml
2019-01-25T12:46:12.695Z [mportExecutor-1][][] INFO  c.d.e.c.s.AckServiceImpl - Acknowledgement sending: File:ACK_C0001_AT-DE_NTC_AMP_2_1_20190125000000.xml to: 10XDE-RWENET---W
2019-01-25T12:46:12.711Z [mportExecutor-1][][] INFO  c.d.e.c.t.m.MailHandler - Creating encrypted e-mail for 10XDE-RWENET---W
2019-01-25T12:46:12.792Z [mportExecutor-1][][] INFO  c.d.e.c.t.m.MailHandler - Sending From: xbsyt1-cmi@xbid-test.deutsche-boerse.com, To: amp@xbid-test.deutsche-boerse.com, Subject: ACK_C0001_AT-DE_NTC_AMP_2_1_20190125000000.xml, Attachment: ACK_C0001_AT-DE_NTC_AMP_2_1_20190125000
000.xml
2019-01-25T12:46:12.864Z [mportExecutor-1][][] INFO  c.d.e.c.s.AsyncFileImporterImpl - Capacity publishing of incoming file: 1
2019-01-25T12:46:13.119Z [entExecutor-133][][] INFO  c.d.e.c.s.EventService - Handling PublishEvent{publishMode=NTC_ADJUSTMENT} AbstractCmmApplicationEvent{connectorIds=[65], days=[2019-01-25T00:00:00.000+01:00], eventTimestamp=2019-01-25T13:46:13.024+01:00} AbstractApplicationEven
t{uuid='acf2e236-c08e-4717-ccfd-528e32ede61a'}

{code}
When acknowledgement was sent to Shipping Module for HNT file the email was also processed only once this time as expected and not again 1 minute later as before
{code:xml|title=xb_xbid_syt1_smi-2_standard_hau.log|borderStyle=solid}
2019-01-25T12:51:04.608Z [scpAck-1][][] INFO  c.d.m.s.a.AckReceiverScp - Reading and processing of scp acknowledgements
2019-01-25T12:51:09.341Z [emailAck-1][][] INFO  c.d.m.s.a.AckReceiverEmail - Reading and processing of email acknowledgements
2019-01-25T12:51:09.345Z [emailAck-1][][] INFO  o.s.i.m.ImapMailReceiver - attempting to receive mail from folder [INBOX]
2019-01-25T12:51:09.369Z [emailAck-1][][] INFO  c.d.m.s.a.AckReceiverEmail - Processing 1 email messages
2019-01-25T12:51:09.369Z [emailAck-1][][] INFO  c.d.m.s.a.AckReceiverEmail - Started processing mail from: [AMP <amp@xbid-test.deutsche-boerse.com>] subject: test
2019-01-25T12:51:09.370Z [emailAck-1][][] INFO  c.d.e.c.t.m.SMIMEConverter - Email message decrypting
2019-01-25T12:51:09.726Z [emailAck-1][][] INFO  c.d.e.c.t.m.SMIMEConverter - Email message signature veryfing
2019-01-25T12:51:09.871Z [emailAck-1][][] INFO  c.d.e.c.t.m.MailUtils - Changing header key from  <U+0080>$<U+0080>^D<U+0082>^OüContent-Type to Content-Type with value multipart/mixed;
        boundary=""----=_NextPart_000_0461_01D4B4B4.E47039A0""
2019-01-25T12:51:10.011Z [emailAck-1][][] INFO  c.d.m.s.s.AcknowledgmentService - Processing acknowledgement for file header 29700001, incomingAck Ack{f52a9ff49cb3763c56efa230435b0b95,101,Pos} with reason code A01.
2019-01-25T12:51:55.485Z [ecpAck-1][][] INFO  c.d.m.s.a.AckReceiverEcp - Reading and processing of ecp acknowledgements
2019-01-25T12:51:55.485Z [ecpAck-1][][] INFO  c.d.e.c.t.e.ConfirmAfterProcessingEcpMessageReceiverImpl - Starting processing ECP messages for message type: MRC-XBID-A23-510-ACK
2019-01-25T12:51:55.504Z [ecpAck-1][][] ERROR c.d.e.c.t.e.MultiNodeWsTemplate - Action failed on primary WS node.
2019-01-25T12:53:10.293Z [emailAck-1][][] INFO  c.d.m.s.a.AckReceiverEmail - Reading and processing of email acknowledgements
2019-01-25T12:53:10.299Z [emailAck-1][][] INFO  o.s.i.m.ImapMailReceiver - attempting to receive mail from folder [INBOX]
2019-01-25T12:53:10.301Z [emailAck-1][][] INFO  c.d.m.s.a.AckReceiverEmail - Processing 0 email messages

{code}","25/Jan/19 14:01;tr866;As first the issue was easily reproducible this time and after the change on all 3 systemtests including single-sided and double-sided environments emails are now behaving correctly and were processed always just once with no duplication I would consider the issues as fixed.",,,,,,,,,,,,,,,,,,,,,,,,
ACER Reporting - testing of data collectors in parallel with customer tests,XP-915,77358,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,,de698,de698,16/Jan/19 11:17,04/Aug/20 19:41,22/Feb/21 13:21,23/Jan/19 18:03,,,Pre2020,,,,,,,,,,"Both data collectors are planned to be delivered to customer by Monday 21st Jan.

There is no visibility of the collectors functionality in the frontend. Customer testing will focus on regression.

*What needs to be done:*
 * it is necessary to track the data created during this test phase
 * verify the correctness of captured data in the DB, ideally daily, during the whole test phase
 * check bid_ask_spread table in core DB. Bid-ask spread data collector runs every hour at hh:10 and adds records to this table.
 * other ACER indicators are collected by SLA reporting tool once a day around 6 AM except acer_trade_volume_hour_to_delivery - that is collected only on 1. day of month.
 * collected data is in report_tool_db running in xbcutsrpt1, ACER reporting tables have prefix ""acer_"". Connection details are here: [https://confluence.energy.svc.dbgcloud.io/pages/viewpage.action?pageId=10470502#CustomerEnvironments(Non-Production)-XBID-SLA]
 * check logfiles in xbcutsrpt1 in /xbid/logs/xbid-cute-report-tool/",,de698,dw255,od044,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,65664000,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yrt:000000z6009",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 11,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/19 14:01;dw255;It is not possible to directly connect to report_tool_db on xbcutsrpt1 from citrix. It is possible to create a tunnel to xbcutsrpt1 and connect to DB on localhost, port 5432.","23/Jan/19 18:02;od044;Test passed 
- data were captured accordingly 
- below can find a manual check for some example data.

- Bid ask spread - OK (verified on random contract)

{code}
--bid ask spread for particular contract within particular collected_at time
select * from bid_ask_spread
where
	to_timestamp(collected_at,'YYYY-MM-dd HH24:MI:SS')= to_timestamp('2019-01-23 09:10:00','YYYY-MM-dd HH24:MI:SS')
	and market_area_long_name = 'Germany'
	and contract_long_name = '20190123 15:00-20190123 15:30'
order by
	product_long_name,
	contract_long_name desc;

""id"",""contract_id"",""product_long_name"",""contract_long_name"",""delivery_startdate"",""delivery_enddate"",""market_area_eic"",""market_area_long_name"",""cent_spread"",""collected_at""
""2,400,027"",""48,831"",XBID_Half_Hour_Power,""20190123 15:00-20190123 15:30"",2019-01-23 14:00:00,2019-01-23 14:30:00,""10Y1001A1001A82H"",Germany,300,2019-01-23 09:10:00
""2,800,033"",""48,831"",XBID_Half_Hour_Power,""20190123 15:00-20190123 15:30"",2019-01-23 14:00:00,2019-01-23 14:30:00,""10YFR-RTE-TEST-W"",France,300,2019-01-23 09:10:00

--query check to core db about SELL orders within specific time period (1 hour)
select c.long_name, min (o.execution_price) from xbcutecor.cx_100_order o, xbcutecor.cx_210_contract c
where
	to_timestamp(o.order_entry_time,'YYYY-MM-dd HH24:MI:SS') between to_timestamp('2019-01-23 08:10:00','YYYY-MM-dd HH24:MI:SS') and to_timestamp('2019-01-23 09:00:00','YYYY-MM-dd HH24:MI:SS')
and o.buy_code = 'S'
and o.contract_id = c.contract_id
and c.long_name = '20190123 15:00-20190123 15:30' 
group by c.long_name;

parent_area_id		long_name 						min
10YFR-RTE-TEST-W	20190123 15:00-20190123 15:30	800
10Y1001A1001A82H	20190123 15:00-20190123 15:30	800

--query check to core db about BUY orders within specific time period (1 hour)
select d.parent_area_eic, c.long_name, max (o.execution_price) from xbcutecor.cx_101_order_history o, xbcutecor.cx_210_contract c, cx_254_delivery_area d
where
	to_timestamp(o.order_entry_time,'YYYY-MM-dd HH24:MI:SS') between to_timestamp('2019-01-23 08:10:00','YYYY-MM-dd HH24:MI:SS') and to_timestamp('2019-01-23 09:10:00','YYYY-MM-dd HH24:MI:SS')
and o.buy_code = 'B'
and o.contract_id = c.contract_id
and o.tso_area_eic = d.tso_area_eic
and c.long_name = '20190123 15:00-20190123 15:30' 
group by c.long_name, d.parent_area_eic;

parent_area_id		long_name 						max
10YFR-RTE-TEST-W	20190123 15:00-20190123 15:30	500
10Y1001A1001A82H	20190123 15:00-20190123 15:30	500
{code}


- manual check acer_intraday_trade_volume

{code}
select * from public.acer_intraday_trade_volume where delivery_start_date = '2018-11-23 03:30:00';

""product_long_name"",""delivery_start_date"",""delivery_end_date"",""ma_buy"",""ma_sell"",""volume""
XBID_Hour_Power	2019-01-22 13:00:00	2019-01-22 14:00:00	10YES-1--------Y	10YES-1--------Y	429900
XBID_Hour_Power	2019-01-22 13:00:00	2019-01-22 14:00:00	10YPT-1--------R	10YPT-1--------R	528000
XBID_Hour_Power	2019-01-22 13:00:00	2019-01-22 14:00:00	10YPT-1--------R	10YES-1--------Y	100


select c.product_long_name, sum(t.match_quantity),(select d.parent_area_eic from cx_254_delivery_area d where d.tso_area_eic = t.tso_area_eic_buy) as ma_buy, (select d.parent_area_eic from cx_254_delivery_area d where d.tso_area_eic = t.tso_area_eic_sell) as ma_sell 
from cx_110_trade t,xbcutecor.cx_210_contract c where t.delivery_start_date = '2019-01-22 13:00:00'
and t.contract_id = c.contract_id
group by product_long_name,t.tso_area_eic_buy, t.tso_area_eic_sell
;

""product_long_name"",""sum"",""ma_buy"",""ma_sell""
XBID_Hour_Power	429900	10YES-1--------Y	10YES-1--------Y
XBID_Hour_Power	528000	10YPT-1--------R	10YPT-1--------R
XBID_Hour_Power	100	10YPT-1--------R	10YES-1--------Y
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
HLS100A - Capacity files for virtual ICs,XP-863,77049,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,08/Jan/19 15:49,31/Aug/20 15:39,22/Feb/21 13:21,09/Jan/19 12:40,,,Pre2020,,Capacity,,,,,,,,"*Document*: HLS100A

*Chapter*: 2.7.3 Allocation Files

*Details:*

_Text removed:_

A capacity allocation between two VAs, or a VA and its PDA, results in no updated Allocation file, being generated or sent, because the XBID system ensures that there will always be a corresponding allocation on a VA – non VA interconnector that represents the allocation on the physical interconnector and results in an allocation file being sent (if configured).

*Reason:* Outdated information, the files are generated accordingly to the IC the configuration is created for, so files can be generated even for PDA-VDA.",,qo794,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,66960000,,,,,,,,,,XP-174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y07y28:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Jan/19 15:50;radeale;Kamil, please check whether it is really so - my testing shows it is so, but to make sure. Or just return ticket to me.","09/Jan/19 08:35;qo794;You're right, the current description in HLS100A is not valid - CMI behaves exactly as you stated and it's written in the ""to be replaced by"" text.","09/Jan/19 12:40;radeale;Thanks.","09/Jan/19 12:40;radeale;Waiting for the response from the customer.",,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Reporting - BA DC please fix the decShiftPx issue,XP-820,76833,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,cf948,de698,de698,02/Jan/19 09:54,04/Aug/20 19:40,22/Feb/21 13:21,09/Jan/19 10:19,,,Pre2020,,,,,,,,,,"Current solution of BA DC does not process the price spread correctly if it comes from a product with decShiftPx other than two. See XP-740

The scenario is not very probable, but it still poses a way how incorrect values might end up in the report.

*What needs to be done:*
 * improve the current sql query so that it captures correct price spread also for products with decShiftPx other than 2
 * basic test to verify the functionality - re-run existing test",,de698,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67564800,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yrt:2",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Ampere Sprint 9,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CR095 analysis work on ATC Reporting for ENSTO-E,XP-800,76600,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,rg535,rg535,17/Dec/18 12:50,06/Nov/20 10:55,22/Feb/21 13:21,13/Mar/19 11:49,,,Pre2020,,Capacity,,,,,,,,"[~radeale], please complete section 3.2 of attached ASR015 for ATC Reporting and provide [~rg535] with an effort estimate for the analysis work including collaboration with the TSOs / PXs.",,qm925,qz412,radeale,rg535,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Feb/19 09:25;qm925;20190227_CR095_Samplefiles.zip;https://jira.deutsche-boerse.com/secure/attachment/66282/20190227_CR095_Samplefiles.zip","15/Jan/19 16:19;radeale;ASR015 Analysis on ATC Reporting for ENTSO-E-proposal.docx;https://jira.deutsche-boerse.com/secure/attachment/64286/ASR015+Analysis+on+ATC+Reporting+for+ENTSO-E-proposal.docx","17/Dec/18 13:27;rg535;ASR015 Analysis on ATC Reporting for ENTSO-E.docx;https://jira.deutsche-boerse.com/secure/attachment/63647/ASR015+Analysis+on+ATC+Reporting+for+ENTSO-E.docx","27/Feb/19 09:25;qm925;ATC Reporting Interface.xlsx;https://jira.deutsche-boerse.com/secure/attachment/66283/ATC+Reporting+Interface.xlsx","17/Dec/18 12:52;rg535;CR ENTSO-E ATC Reporting.docx;https://jira.deutsche-boerse.com/secure/attachment/63646/CR+ENTSO-E+ATC+Reporting.docx","12/Feb/19 16:18;qm925;CR095  ENTSO-E ATC Reporting_v0.1.docx;https://jira.deutsche-boerse.com/secure/attachment/65682/CR095++ENTSO-E+ATC+Reporting_v0.1.docx","13/Feb/19 14:23;qz412;CR095  ENTSO-E ATC Reporting_v0.1_OS.docx;https://jira.deutsche-boerse.com/secure/attachment/65709/CR095++ENTSO-E+ATC+Reporting_v0.1_OS.docx","27/Feb/19 09:25;qm925;iec62325-451-3-publication_v7_3.zip;https://jira.deutsche-boerse.com/secure/attachment/66281/iec62325-451-3-publication_v7_3.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,62640000,,,,,,,,,,XP-4092,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yml:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Ampere Sprint 10,Ampere Sprint 11 [S],Home Office Team Sprint 14,Home Office Team Sprint 15 [S],Home Office Team Sprint 16,Home Office Team 17 [S],Home Office Team 18,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Jan/19 17:31;radeale;TSOs were asked some additional questions.","15/Jan/19 16:19;radeale;Dear Suzanna,

please find attached the ASR file with the chapter 3.2 filled in:

 [^ASR015 Analysis on ATC Reporting for ENTSO-E-proposal.docx] 

The backup of the file is placed in:

S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\Planned\PER120 Change Management\Change Requests\ASR015 ENTSO-E ATC Reporting\

The calculated workload is 16 MDs.

Regards Alexandr","24/Jan/19 08:31;rg535;Commercial offer provided to PXs / TSOs on 23.01.19. Waiting for response. ASR is renamed and now called CR095. CR will be provided to Parties after they take a decision. Decision expected no later than 15. February.","12/Feb/19 16:20;qm925;Dear all,

Please find attached the first draft of  [^CR095  ENTSO-E ATC Reporting_v0.1.docx].
Please provide feedback on the open questions.

Thank you.

Best regards,
Simona","13/Feb/19 14:23;qz412;Dear [~qm925],[~rg535], please see commented version attached - [^CR095  ENTSO-E ATC Reporting_v0.1_OS.docx]. Alex + Ondra.","18/Feb/19 13:50;rg535;Sent to customer for approval last week.","27/Feb/19 09:27;qm925;Dear all,

The required XSD is attached to this ticket [^iec62325-451-3-publication_v7_3.zip]- for your information this is a final version as the customers managed to speed up the process on their side.

In relation to that they also updated previously shared sample files [^20190227_CR095_Samplefiles.zip]and added [^ATC Reporting Interface.xlsx]

Best regards,
Simona

","27/Feb/19 18:10;radeale;Implementation task (WIP) - XP-1242.",,,,,,,,,,,,,,,,,,,,,,,,
run scenario 14 from RTS3SB with configuration 5,XP-795,76529,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,tz118,tz118,13/Dec/18 15:58,06/Nov/20 10:51,22/Feb/21 13:21,14/Dec/18 14:39,,,Pre2020,,,,,,,,,,"Outcome from Meeting about DB PoC from 13/12:
execute scenario 14 with configuration 5 (DB setup) on perf, two executions
potentially there might be a request from TechOps to execute more tests with different configuration

Additionally, results shall include persister and journal time percentiles

DoD
execute tests
add persister and jouranl times statstics
update results comparions Excel
Share/present results with/to TechOps
",,tz118,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Dec/18 16:00;tz118;Kopie von Perf_DB_OBK_results_analysis_v7.xlsx;https://jira.deutsche-boerse.com/secure/attachment/63560/Kopie+von+Perf_DB_OBK_results_analysis_v7.xlsx","14/Dec/18 14:39;tz118;Perf_DB_OBK_results_analysis_v8.xlsx;https://jira.deutsche-boerse.com/secure/attachment/63602/Perf_DB_OBK_results_analysis_v8.xlsx","14/Dec/18 14:39;tz118;db_tests.xlsx;https://jira.deutsche-boerse.com/secure/attachment/63603/db_tests.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,69120000,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y07v1k:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Dec/18 14:40;tz118;results attached [^Perf_DB_OBK_results_analysis_v8.xlsx]  [^db_tests.xlsx] ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prepare 1.5.9 (ACER BA + Vol data collectors + 3 bugfixes) for release,XP-775,76441,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ll664,qz412,qz412,12/Dec/18 14:03,06/Nov/20 10:51,22/Feb/21 13:21,16/Jan/19 17:02,,,Pre2020,,,,,,,,,,"A hotfix + feature release (expected v1.5.9 of Core) to be released:
 * 21/1 - 25/1 to CuTes
 * ~30th to SIMU
 * early Feb to PROD

It will include following items:

Features:
 * ACER BA + Vol data collectors (relevant part of XP-6)

Fixes:
 * SMXBID-818, SMXBID-995 (XP-487)
 * XBID-4165 (XP-626)

Todos:
 * Prepare the branch
 * Fix e2e tests, deploy to SYT1
 * Implement/merge all fixes
 * Prepare release notes (align with [~qz412])
 * -Test ([~qz412] to create a separate task for a R1.5.9 test)- XP-906
 * 1.5.9 evaluate database conversion run for cute/simu/prod

[~rehapav]: Please take this as an official kick-off to the hotfix release. Let's have a discussion on the process and structuring of the tasks.

{color:#de350b}*Deployment request:*{color} SERVICE-2362",,ll664,qz412,rehapav,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-693,XP-911,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,66268800,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yrt:000000gi",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Christmas Sprint 8,Alpha Team Sprint 10 [S],,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2501-to-xbid-dev-env,XP-2942,traversal-XP-2485,tomcat-rollback,XP-2506-xbid-dev-env,XP-3025-catalina-timezone,trailing-slash-syt1,XP-2484,XP-3110-deprecated-log,XP-2488-xbid-dev-env,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Jan/19 14:14;rehapav;suggested timeline (to be agreed via PO on RCB level)
*16/1 deploy to all CuTes / LIPs (alternative day would be week later 23/1)* 
   Product team to take care for 
# installation date agreement with Clients on RCB level
#  release delivery 
#  internal testing 
# deployment request for CuTes and communication of the deployment to clients
# creation and provision of Release notes to clients
  
*23/1 deploy to SIMU (alternative day would be week later 30/1)*
Suggesting to use whole day 23/1 for GlusterFS internal testing (details in XP-693)
Product team to take care for 
# installation date agreement with Clients on RCB level
# agreement from clients to let DBAG perform GlusterFS testing
# creation Release notees

BIZOps team to take care for
# deployment request for SIMU and communication of the deployment to clients
# provision of Release notes to clients
# collection of pending configuration changes (if any) and including these into the release
 at the moment n/a

*30/1 deploy to PROD (alternative day would be week later 7/2 altought we expect clients requirement that this release is already in PROD for Jan 2019 in order to have complete data for Feb 2019 ++)*
Product team to take care for 
# installation test on PROD data snapshot with 1 consequetive execution day
# installation date agreement with Clients
# creation Release notes 
# acceptance declaration delivery from clients

BIZOps team to take care for
# deployment request to PROD and communication of the deployment to clients
 # provision of Release notes to clients
# collection of pending configuration changes (if any) and including these into the release
at the moment: TECHLOG-574 (aka XP-71) ","10/Jan/19 11:11;rehapav;From BIZOps perspective this requirement is completely covered as part of: Deployment request: SERVICE-2362 ","17/Jan/19 09:45;ll664;h2.  Release notes

h3.  Components

* *xbid-1.5.9*
*  m7-shipping-1.0.39
*  comtrader-2.5.1.31
*  reporting-engine-5.0.41
*  *m7-xbid-report-tool-2.2.2*
*  pmilogger-1.0.28
*  pmiarchiving-1.0.18        
*  m7-dataset-1.3.38

h3. Changelog

h4. xbid-1.5.9

XP-626 Block order across 2 days not contained in PblcOrdrBookRprt
XP-487 CMM Report doesn't finish - Solution analysis
XP-287 ACER Reporting - Implement Bid-Ask spread data collector
XP-820 ACER Reporting - BA DC please fix the decShiftPx issue

h4. m7-xbid-report-tool-2.2.2

XP-288 ACER Reporting - Implement Volume&Prices data collector

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Common ATC broadcast on non-leading interconnectors,XP-767,76381,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,10/Dec/18 13:54,31/Aug/20 15:38,22/Feb/21 13:21,28/Jan/19 16:27,,,Pre2020,,Capacity,,,,,Batch_5,,,"Dear DBAG,

According to HLS100A Sec. 2.11 ""_For borders with common ATC the broadcast is sent for the leading interconnector""_ and according to DFS500 Sec. 5.4.2 _""Please notice that the broadcast information is sent on interconnector level, i.e. the In- and OutArea fields, as shown above, are the EIC codes of the Delivery Area. For borders with common ATC, i.e. where the available capacity is common for all interconnectors of the border, this broadcast is sent for the leading interconnector...""._

We noticed that these provisions can be interpreted as the ATC is published only on the leading interconnector while in reality the capacity is visible/distributed for both leading and non-leading interconnectors.

Please suggest a clarification and turn this ticket into Batch 5 container.",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4213,,,,,,,,,,,,,,,,,"12/Dec/18 10:41;radeale;ATC1.txt;https://jira.deutsche-boerse.com/secure/attachment/63509/ATC1.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,65232000,,,,,,,,,,XP-174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yvu:r01v",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Ampere Sprint 7,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Dec/18 15:20;radeale;Customer asked to clarify its request.","11/Dec/18 10:57;radeale;I have to check the actual situation, however it is not possible to connect with Test Client and/or ComTrader to system test envs - TECHLOG-1720.","12/Dec/18 11:43;radeale;Solution proposed to the customer.

*Document:* HLS100A

*Chapter:* 2.11 ATC Broadcasts

*Details:*
Text removed:
{code}For borders with common ATC the broadcast is sent for the leading interconnector. The participants, however, can still allocate for all interconnectors of the common ATC border. {code}

*Document:* DFS500

*Chapter:*  5.4.2 ATC Data Notification

*Details:*
Text removed:
{code}For borders with common ATC, i.e. where the available capacity is common for all interconnectors of the border, this broadcast is sent for the leading interconnector, i.e. the interconnector of the Shipping agent. {code}

*Reason:* The information is incorrect, the capacity is received for all ICs of the Common ATC border.","28/Jan/19 16:27;radeale;Proposal accepted by the customer.",,,,,,,,,,,,,,,,,,,,,,,,,,,,
marketAgreement.mRID missing in RID file for Explicit Balancing group,XP-766,76379,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,radeale,radeale,radeale,10/Dec/18 13:53,04/Aug/20 19:22,22/Feb/21 13:21,09/May/19 16:51,,,Pre2020,,Capacity,,,,,Latent_Faults,R2.0-AgreedFixScope,,"* Steps to reproduce

Eles and  Hops acted as an Explicit Participant on Slovenian - Croatian Border and requested for Explicit allocation on this border. RID was sent out from CMM module to Eles and Hops.
 * Expected results

RID file has to encompass different Time Series:

-IMPL-TRADING

-Technical Group
 - Explicit Balancing Group 

 * Current result:

RID file was distributed with Time Series, but there was one parameter empty in Time Series of Explicit Balancing Group:

<marketAgreement.mRID/> 

According to the Specification:
|marketAgreement.mRID |ID_String|The unique identification of the agreement.|6|[1..1]| |Unique identification of the contract between auction office and rights holder|

 

 
 * Environment details: LIP A (LIP TESTING FIT RUN 1)

 - environment name: LIP A

 - user name: Files distributed via ECP end node: 28V0000000000030

 - time of when the issue encountered: 05. 12. 2018 11:04:47

 - user browser name: ECP folder used and local application

Can you please check why this parameter was empty? 

Thank you in advance for your assistance.",,jy268,qo794,radeale,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4209,,,,,,,,,,XP-1626,,,,,,,"30/Jan/19 18:06;radeale;20190130_RID_RTE-AMP_001.xml;https://jira.deutsche-boerse.com/secure/attachment/65271/20190130_RID_RTE-AMP_001.xml","09/May/19 16:46;radeale;20190509_RID_AMP-APG_002.xml;https://jira.deutsche-boerse.com/secure/attachment/68871/20190509_RID_AMP-APG_002.xml","09/May/19 16:50;radeale;20190509_RID_AMP-APG_003.xml;https://jira.deutsche-boerse.com/secure/attachment/68872/20190509_RID_AMP-APG_003.xml","14/Dec/18 15:36;radeale;Screenshot from 2018-12-14 15-37-19.png;https://jira.deutsche-boerse.com/secure/attachment/63606/Screenshot+from+2018-12-14+15-37-19.png","10/Dec/18 13:53;radeale;_10V1001C--00005G_MRC-XBID-A23-503__6dffded5-dafd-4a2a-a227-c5d409f0646a.xml;https://jira.deutsche-boerse.com/secure/attachment/63438/_10V1001C--00005G_MRC-XBID-A23-503__6dffded5-dafd-4a2a-a227-c5d409f0646a.xml",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,56505600,,,,,,,,,,XP-53,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yrt:0ujzo",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Ampere Sprint 7,Ampere Sprint 12,Ampere Sprint 13 [S],Home Office Team Sprint 14,Home Office team 22,Home Office team 23 [S],Home Office team 24,Home Office Team 25 [S],,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Dec/18 16:46;jy268;[~radeale] according to my code inspection this field is never populated in RID files.","11/Dec/18 17:54;radeale;Solution proposed to the customer.","14/Dec/18 15:36;radeale;Solution rejected. According the reporter the filed should be filled with the contract information defined as ECAN_CONTRACT_ID_TMPL in the CMM Reference Data Border Configuration. Please investigate the possibilities.

 !Screenshot from 2018-12-14 15-37-19.png! ","02/Jan/19 16:27;radeale;_DFS700, chapter 9.1.1_

{code}‘Date’-A1-A2-’EIC Code’
Eg. ‘131007-A1-A2-1673490197’, where 131007 means 7/10/2013 and '1673490197' is ean/eic code of BG{code}

What do you think?","04/Jan/19 08:37;qo794;The current implementation fills the {{marketAgreement.mRID}} field with a balancing mechanism if it exists, otherwise it's empty.","04/Jan/19 10:27;radeale;Thanks. That is no good for RID files, as they aggregate all allocations for the BG including the BM allocations. So it needs to be fixed as described above.","25/Jan/19 10:40;radeale;Summary of the current situation and desired situation:

+Current state:+
For RID files the marketAgreement.mRID field is filled with the balancing mechanism code for BM allocations, otherwise it's empty.

+Desired state:+

_DFS700, chapter 9.1.1_

{code}‘Date’-A1-A2-’EIC Code’
Eg. ‘131007-A1-A2-1673490197’, where 131007 means 7/10/2013 and '1673490197' is ean/eic code of BG{code}

As as side note, Kamil Nezval also analyzed the issue.","11/Feb/19 14:28;radeale;Test OK, the fix scope agreed with the reporter.","08/Apr/19 10:56;radeale;The customer returns with a bug. We need to assure the uniqueness of the parameter. What are possible solutions? To 
add the timestamp? Random number? Or just to tell them ""no go""?

Customer report:

{code}Yesterday we performed Explicit allocation on Slovenian - Croatian border and the file we received was rejected by our system. 

The reasons for rejecetion was that two time series (Import,Export direction) had identical mRID argument. 

<marketAgreement.mRID>190404-A1-A2-28XDUMMY-EXP-TE7</marketAgreement.mRID>

<marketAgreement.mRID>190404-A1-A2-28XDUMMY-EXP-TE7</marketAgreement.mRID>

Uniqueness of this parameter is expected for each times series within Rid document

Document:

<mRID>5a4015a53e13fb4ff6cbc059cdf5e136</mRID>

<revisionNumber>500</revisionNumber>

<type>A23</type>{code}","29/Apr/19 12:59;radeale;Kamil, please assess the proposed solution. For me it is OK, however the values has to be a hash, otherwise it would be too long?
{color:#00875A}
- MSD agree the reference in DFS700 seems to be matching the way of implementation by DBAG however other specifications such DFS800 are providing different information / requiremens, i.e. the system behaviour is not consistent
- We can see as possible solution A1 and A2 in the ECAN Contract ID template will be replaced by DA short names similarly as done in RCA file (i.e. direction 1 = DA1-DA2; direction 2 = DA2-DA1)
- We kindly ask DBAG to assess the indicated solution{color}","30/Apr/19 15:11;qo794;The proposed solution is fine, but as you correctly pointed out it would breach the maximum length allowed for marketAgreement.mRID field (35 characters). I would suggest to create a hash and also get rid of ""A1-A2""- a hash from ""day_inArea_outArea_balancingGroup"".","03/May/19 16:04;radeale;Considering the customer offer to use the DA short name instead of the EIC code:

Date-DA1-DA2-EIC Code
190420-DA1ShortName-DA2ShortName-10XDE-RWENET---W

6-8-8-16 = up to 41 characters, which is 6 more than the max field.

Please confirm the assumption.","03/May/19 16:13;qo794;The calculation above is correct","06/May/19 13:29;radeale;Please proceed with the fix as suggested, i.e.:

Date-DA1 EIC code-DA2 EIC code-EIC Code

Hashed.","07/May/19 07:21;qo794;The last comment in the external jira says
{quote}
We accept to use the EIC codes and hash as you suggested in your comment from 30/4.
{quote}
Please confirm EIC codes (not DA short names) should be used, thanks.","07/May/19 10:41;radeale;I confirm this solution:

_Date-DA1 EIC code-DA2 EIC code-EIC Code of the BG_

_Hashed_","07/May/19 14:00;qo794;No substitution for VDA passed to the hash implemented, real VDA EIC codes used instead of PDA.","09/May/19 16:46;radeale;Test OK on SYT2, XBID 2.0.14.

AMP-APG IC, hash in the file:
901c075709e4ffe1747773b188fb7871 = 20190509-10YDE-RWENET---I-10YAT-APG------L-11XREDISPATCH–T
The same as via [https://www.md5hashgenerator.com/
=> {color:#00875A}OK{color}

Opposite direction:
cb1143462fc5a0f4206be36d6ba2b5d3 = 20190509-10YAT-APG------L-10YDE-RWENET---I-11XREDISPATCH--T
The same as via [https://www.md5hashgenerator.com/
=> {color:#00875A}OK{color}

 [^20190509_RID_AMP-APG_002.xml] 
 [^20190509_RID_AMP-APG_003.xml] ",,,,,,,,,,,,,,
ACER Reporting - response to commented HLC,XP-763,76362,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Trivial,Done,de698,de698,de698,10/Dec/18 11:20,04/Aug/20 19:41,22/Feb/21 13:21,12/Dec/18 16:45,,,Pre2020,,,,,,,,,,"We received the commented version of HLC for BA DC (in mail).

Prepare the response and confirm with the dev team.

Communicate to the customers - after review! - via Jira XBID-3922.

 ",,de698,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,69292800,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y07u40:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Dec/18 16:45;de698;Response to customers is prepared, reviewed by team members.

*It will be sent out when the customers deliver their clarification regarding the storing period.*",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
BA data collector - test with decShiftPx on product,XP-740,76204,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,de698,de698,de698,05/Dec/18 11:11,04/Aug/20 19:41,22/Feb/21 13:21,05/Dec/18 17:07,,,Pre2020,,,,,,,,,,"Test:
 # create new product with DecShiftPx other than 2
 # enter buy and sell orders into the order book
 # check the DB for Bid-Ask spread data
 # verify the correct price is captured. Expected: price should be in eurocents no matter what the DecShiftPx is on the product",,de698,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Dec/18 16:46;de698;DB results_test with DecShiftPx.png;https://jira.deutsche-boerse.com/secure/attachment/63303/DB+results_test+with+DecShiftPx.png","05/Dec/18 16:46;de698;DecShiftPx 0.png;https://jira.deutsche-boerse.com/secure/attachment/63304/DecShiftPx+0.png","05/Dec/18 16:46;de698;DecShiftPx 2.png;https://jira.deutsche-boerse.com/secure/attachment/63305/DecShiftPx+2.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,69897600,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y07t68:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Dec/18 17:07;de698;Environment: Syt1

User: XBEPEXX2
 # new product testBADC created with DecShiftPx=0, based on Intraday_Power_D
 # Orders entered in PT delivery area:
 ## ID Buy @ 10.4eur, Sell @ 15.4eur == spread 500 eurocents
 ## testBADC Buy @ 10eur, Sell @ 15eur == spread 500 eurocents
 # DB results: spread for product with DecShiftPx was collected as 5 cents, instead of 500 cents

*Proposed solution:*

Current products have DecShiftPx =2 and the value is not changeable. Only newly created products could have shift other than 2. Such scenario is not expected to occur. It was concluded that if such situation would, however, happen, the most feasible solution would be to identify corresponding values in the collected B-A spread data and recalculate based on the related product. Any other approaches are deemed as over-complicated, especially for not very likely scenarios like this one.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
XTG Support week 49,XP-694,75984,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tm431,tm431,tm431,29/Nov/18 12:23,06/Nov/20 10:51,22/Feb/21 13:21,05/Dec/18 14:49,,,Pre2020,,,,,,,,,,"• Lessons learnt 
o AP DBAG 849 / XTG organization: Acknowledged by DBAG
o AP DBAG 853 / Dataset versus Snapshot: DBAG will take that point internally and come back in written by next coordination CC (2018/12/05). The pro and cons related to both approaches have been briefly discussed during the call to ensure that XTG and DBAG share the same understanding of the situation.
o AP DBAG 858
DBAG 858 R1.5 Lessons Learnt: 
DBAG will review XTG comments and will then come back to XTG DBAG 2018/11/28 Done
DBAG comments have been received: XTG will come back to DBAG by next coordination CC 2018/12/05

• XBID-3958 / Robustness of the processes 
DBAG 856 XBID-3958 / Robustness of the processes: 
XTG to review XTG comments and will then come back to XTG DBAG 2018/11/28 Done
DBAG answers have been received: XTG will come back to DBAG by next coordination CC 2018/12/05

• Release 2.0 / DST tests
Could DBAG indicate whether this NTP server could be connected to any other environments than Common Cute PXs?
DBAG: DST tests with NTP server can only be executed on Common Cute PXs

• DBAG Security Tests in Simulation environment:
DBAG need to check internally and will come back to XTG with a comprehensive view by next coordination CC 2018/12/05

• SIMU Availability after DBAG's Penetration Test 
DBAG will check internally by when the agreed snapshot will be restored in Simulation environment and then inform XTG by 2018/11/30 EOD

• Downtime for all non-prod environments on 22/11/2018
It is confirmed that DBAG will provide the updated Release Notes by 2018/11/30 EOD. The only change in the ComTrader is in the context of the new certificates.
DBAG is currently investigating on XBID-4187 and will directly update all parties in the JIRA tickets.",,tm431,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,70502400,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y07rjz:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 6,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Add rest of the components to release notes, list all components (not only those that were changed since previous release)",XP-685,75965,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,cf948,cf948,cf948,29/Nov/18 09:35,06/Nov/20 10:51,22/Feb/21 13:21,05/Dec/18 16:06,,,Pre2020,,,,,,,,,,"Add these components:
 * Trading Test Client
 * Cmm Test Client
 * Dataset

{color:#172b4d}Also, all components have to be listed, not only those that were changed since previous release. Every component is listed only once (latest version).{color}",,cf948,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-586,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,70502400,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y07rso:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Ampere Sprint 6,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix and validate minimal dataset,XP-667,75858,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,dw255,dw255,26/Nov/18 13:16,06/Nov/20 10:51,22/Feb/21 13:21,06/Dec/18 10:24,,,Pre2020,,Shipping,,,,,,,,"An error in XBID minimal dataset has been identified.
 * SPMADM01 user in SPM has user name with invalid characters: SuperAdmin_User_1. New veriosn of USM998 needs to be released as this user is listed in the Minimal Dataset.
 * Also other entities should be validated in order to avoid further validation errors and issues like SMXBID-1055.

 ",,dw255,jy268,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,69984000,,,,,,,,,,XP-4091,,,,,,,,,,,,,,26/Nov/18 13:16,,,,,,,,,,,,,,,,,,,,,"1|y07rsv:i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Ampere Sprint 6,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Nov/18 13:34;radeale;Hey guys, I looked through USM998 and is seems that only the SM user is invalid.","04/Dec/18 11:36;jy268;Dataset 1.3.44 was released.","04/Dec/18 11:37;jy268;Minimal dataset is present in shipping module itself so it has to be released as well. SuperAdmin_User_1 will be changed to SuperAdminUser1 .","05/Dec/18 09:56;jy268;Please test in 1.5.0.6","05/Dec/18 12:24;radeale;Tested in SM 1.5.0.8/DST in the DB - the user name is correct.",,,,,,,,,,,,,,,,,,,,,,,,,,,
XTG Support,XP-647,75690,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tm431,tm431,tm431,22/Nov/18 14:52,06/Nov/20 10:51,22/Feb/21 13:21,29/Nov/18 09:38,,,Pre2020,,,,,,,,,,"• Lessons learnt 
o AP DBAG 847
DBAG 847 R1.5 Lessons Learnt: 
DBAG/XTG to take XTG/DBAG inputs into account and to then come back to XTG with their feedbacks on those DBAG / XTG 2018/11/21 Done 
DBAG will review XTG comments and will then come back to XTG by 2018/11/28 (next coordination CC)
Could DBAG inform XTG whether DBAG would have any feedback on the R1.5 lessons learnt collected by XTG and shared with DBAG?
DBAG confirm that DBAG has no comment on the lessons learnt collected by XTG, means that those are acknowledged by DBAG

o AP DBAG 854
The reporting rule and the related explanation are fine for both XTG and DBAG.

• AP DBAG 850 / XBID-3958 
DBAG will review XTG comments and will then come back to XTG by 2018/11/28 (next coordination CC)

• AP DBAG 853
DBAG 853 R1.5 Lessons Learnt: 
DBAG to clarify whether this statement is correct: For upcoming UAT we will need to agree on one dataset that we will use during UAT deployment for test environment. It would apply only in case there is a need to redeploy the database as part of a deployment, i.e. not for all deployments DBAG 2018/11/28 Updated
DBAG will provide XTG with an answer during the next coordination CC (2018/11/28 / AP Updated)
Already discussed during the call: even though it cannot be already known which exact dataset will be used for Release 2.0 UAT, it is already known that the dataset will have to be adjusted in order to properly include all XTG second wave parties.

• LIP B environment
o AP DBAG 857: Acknowledged by DBAG. Topic closed

• DST Test Completion Report
Acknowledged and welcomed from DBAG
XTG to share that document together with those MMs

• Release 2.0
o R2.0 Failover Tests:
Questions understood by DBAG. DBAG will check internally and aims at coming back to XTG with answers by next coordination call (2018/11/28). However, DBAG already informed that this is tightly linked to the finalization of R2.0 scope.

o R2.0 DST tests: DBAG will check whether DBAG NTP server could be connected to Simulation environment in order to have DST tests executed on Simulation environment during R2.0 UAT (AP DBAG by next coordination CC 2018/11/28)",,tm431,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,70934400,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yu5:xhhz",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 5 (PS),,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Nov/18 14:27;tm431;Please find our answers in BLUE. Let us know if we have forgotten anyting.

BR
Patrik


o AP DBAG 847
DBAG 847 R1.5 Lessons Learnt: 
DBAG/XTG to take XTG/DBAG inputs into account and to then come back to XTG with their feedbacks on those DBAG / XTG 2018/11/21 Done 
DBAG will review XTG comments and will then come back to XTG by 2018/11/28 (next coordination CC)
 DBAG: See comments in the document.


• AP DBAG 850 / XBID-3958 
DBAG will review XTG comments and will then come back to XTG by 2018/11/28 (next coordination CC)
 DBAG: See comments in the document.


• AP DBAG 853
DBAG 853 R1.5 Lessons Learnt: 
DBAG to clarify whether this statement is correct: For upcoming UAT we will need to agree on one dataset that we will use during UAT deployment for test environment. It would apply only in case there is a need to redeploy the database as part of a deployment, i.e. not for all deployments DBAG 2018/11/28 Updated
DBAG will provide XTG with an answer during the next coordination CC (2018/11/28 / AP Updated)
Already discussed during the call: even though it cannot be already known which exact dataset will be used for Release 2.0 UAT, it is already known that the dataset will have to be adjusted in order to properly include all XTG second wave parties
 DBAG: We have reviewed our comment. And our only concern was if there will be two Datasets one with XTG second wave parties and one without. We strongly suggest to have only one. During the call DBAG understood that there will be only one dataset with XTG second wave parties data. So our comment is answered. XTG must now decide on a form of the new dataset (excel file from which we will generate the dataset, in this way this can be time-consuming and require

• Release 2.0
o R2.0 Failover Tests:
Questions understood by DBAG. DBAG will check internally and aims at coming back to XTG with answers by next coordination call (2018/11/28). However, DBAG already informed that this is tightly linked to the finalization of R2.0 scope.
 DBAG: As indicated in the last call this can be only properly answered after the scope of 2.0 is finalized. But as there is no major “technical” change in 2.0 as was in 1.5 (3node Rabbit Cluster) we do not currently foresee any major extension. DBAG thus consider current failover test steps as good starting point for 2.0 failover execution. DBAG suggest to jointly review all failover testcases as was done before failover tests in 1.5 were executed. (XTG has provided first draft of failover testscenario/steps and there were couple of rounds to review/understand/extend some teststeps which according to DBAG has added big value before the execution)


o R2.0 DST tests: DBAG will check whether DBAG NTP server could be connected to Simulation environment in order to have DST tests executed on Simulation environment during R2.0 UAT (AP DBAG by next coordination CC 2018/11/28)
 DBAG: NO this is not possible.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Release 2.0 Managerial Documents,XP-645,75680,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,qm925,qm925,22/Nov/18 12:50,06/Nov/20 10:51,22/Feb/21 13:21,22/Nov/18 15:10,,,Pre2020,,,,,,,,,,"Respond to the PXs comments:

* Acceptance Criteria Plan
* Release Plan
* Test Strategy
* High-level Timeline

Documents directory: https://projects.deutsche-boerse.de/sites/ps0080/Shared%20Documents/Forms/AllItems.aspx?RootFolder=%2Fsites%2Fps0080%2FShared%20Documents%2F02%20XBID%20Releases%2FXBID%202%2E0%2FManagerial%20Documents&View=%7B6C81558C-B2AA-42D3-A854-B2860B7C1829%7D",,qm925,qz412,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,71020800,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yu5:xhhi",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 5 (PS),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Nov/18 15:10;qz412;Done by [~rg535], [~gd553]. Closing this task, thx.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Batch 5 Documentation Update - Shipping Module,XP-635,75640,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,zi174,radeale,radeale,21/Nov/18 16:15,04/Aug/20 19:40,22/Feb/21 13:21,29/Apr/19 14:26,,,Pre2020,,Capacity,,,,,Batch_5,,,"The following documents need to be checked (whether an update is needed) and updated with the Batch 5 Spec Clarification containers.
 A thorough review must follow.

DFS300 - Shipping Module Reference Data and Handover
 DFS310 - Shipping Module File Management
 DFS320 - Shipping Module Graphical User Interfaces
 DFS520 - Rest WebServices Interface for Shipping Module

As a part of the task please also finalize discussion of the related B5 Spec Clarification tickets. The rest should be moved to Batch 6.",,radeale,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,XP-634,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,57369600,,,,,,,,,,XP-174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yrt:0ujzc",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office team 24,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Apr/19 14:55;zi174;Based on a jira filter (project = XBID AND issuetype = ""Spec Clarification"" AND labels = Batch_5 ORDER BY summary ASC, description ASC, priority DESC, updated DESC) 

These tickets are incorporated:
XBID-3754
XBID-4037
XBID-3742
XBID-4242

WIP version:
S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\03 Functional Specifications\Batch_5","29/Apr/19 14:24;radeale;Review OK :)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Batch 5 Documentation Update - Trading,XP-634,75639,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,de698,radeale,radeale,21/Nov/18 16:13,04/Aug/20 19:41,22/Feb/21 13:21,06/May/19 14:29,,,Pre2020,,Capacity,,,,,Batch_5,,,"The following documents need to be checked (whether an update is needed) and updated with the Batch 5 Spec Clarification containers.
 A thorough review must follow.

DFS240 - XML Report Structure
 DFS510 - AMQP Public Message Interface - Trading
 DFS700 - Reference Data Module GUI - _The Trading part_
 HLS100 - Functional Description SOB
 HLS500 - PMI Logger Functional Concept*

*The document is not strictly related only the Trading

 As a part of the task please also finalize discussion of the related B5 Spec Clarification tickets. The rest should be moved to Batch 6.

 

Documentation WIP:

S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\03 Functional Specifications\Batch_5",,de698,radeale,tz118,,,,,,,,,,,,,,,,,,,,,,,,,XP-633,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,57024000,,,,,,,,,,XP-174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y08eso:1u",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 24 [S],Alpha Team Sprint 25,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Apr/19 15:33;de698;XBID-3801 needs additional work - proposed changes incorporated
 XBID-3750 needs minor additional work - updated Figure attached to external Jira for approval","03/May/19 16:42;tz118;DFS510, HLS100 and DFS900 reviewed and updated",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Batch 5 Documentation Update - Capacity,XP-633,75638,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,21/Nov/18 16:12,04/Aug/20 19:40,22/Feb/21 13:21,29/Apr/19 14:27,,,Pre2020,,Capacity,,,,,Batch_5,,,"The following documents need to be checked (whether an update is needed) and updated with the Batch 5 Spec Clarification containers.
 A thorough review must follow.

DFS500 - AMQP Public Message Interface
 DFS700 - Reference Data Module GUI - _The CMM part_
 DFS700a - Roles and Rights*
 DFS800 - Capacity Management TSO Interface
 HLS100A - Functional Description Capacity Management Module

*The document is not strictly related only the CMM

As a part of the task please also finalize discussion of the related B5 Spec Clarification tickets. The rest should be moved to Batch 6.",,radeale,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,57369600,,,,,,,,,,XP-174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yrt:0ujz6",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office team 24,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Apr/19 17:04;radeale;Hi Jakub!

Please check the following documents in:

S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\03 Functional Specifications\Batch_5\

- DFS500
- DFS520
- DFS700
- DFS800
- HLS100A

Thanks!","29/Apr/19 14:02;zi174;Hi Alex,
the review is done. From my point of view, everything seems OK
","29/Apr/19 14:28;radeale;To be sent out as a whole package once the SOB doc update is done. But let's leave the external communication to another ticket. Or reopen this one.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Release ComTrader to all non-prod environments,XP-627,75628,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,cf948,qz412,qz412,21/Nov/18 13:48,06/Nov/20 10:51,22/Feb/21 13:21,22/Nov/18 09:22,,,Pre2020,,,,,,,,,,,,cf948,qz412,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,71107200,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yus:b2r",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Ampere Sprint 4,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Nov/18 09:22;cf948;ComTrader 2.5.1.35 prepared for:
 * XBID SIMU
 * XBID CUTE int
 * XBID CUTE PX A
 * XBID CUTE PX B
 * XBID CUTE PX C
 * XBID CUTE PX D
 * XBID CUTE PX E
 * XBID CUTE PX F
 * XBID CUTE PX G
 * XBID CUTE PX H
 * XBID CUTE PX I
 * XBID CUTE PX J
 * XBID CUTE PX K
 * XBID CUTE PX L
 * XBID CUTE PX TSOs
 * LIP A
 * LIP B",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Add rest of the components to release notes, list all components (not only those that were changed since previous release)",XP-586,75361,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,cf948,ll664,ll664,14/Nov/18 18:08,06/Nov/20 10:51,22/Feb/21 13:21,29/Nov/18 09:36,,,Pre2020,,,,,,,,,,"List of components:
 * XBID (/)
 * Shipping (/)
 * Comtrader (/)
 * Reporting Engine (/)
 * PMI Logger (/)
 * PMI Archiving (/)
 * SLA Report Tool (/)
 * AlarmTilt (/)

 * Trading Test Client
 * Cmm Test Client
 * Dataset
 * XBID-test

{color:#172b4d}Also, all components have to be listed, not only those that were changed since previous release. {color}",,cf948,ll664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,70502400,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yus:b009",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Ampere Sprint 4,Ampere Sprint 5,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Nov/18 09:29;cf948;Added these components:
 * Comtrader (/)
 * Reporting Engine (/)
 * PMI Logger (/)
 * PMI Archiving (/)
 * SLA Report Tool (/)
 * AlarmTilt (/)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Process R2.0 specification documents,XP-585,75354,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,14/Nov/18 16:08,06/Nov/20 10:51,22/Feb/21 13:21,19/Nov/18 12:02,,,Pre2020,,,,,,,,,,"Process R2.0 specification documents as communicated in XBID-4046:
- Check the clean versions and put the into their respective folders
- Respond to customers comments",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,71107200,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yus:b01y",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Ampere Sprint 4,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Nov/18 12:01;radeale;Replied to the customers comments. The clean versions of the specification documents were uploaded to their respective folders.","22/Nov/18 12:05;radeale;Done, done^2.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[Sprint 4] XTG activity support,XP-578,75321,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,cs131,qz412,cs131,14/Nov/18 14:50,06/Nov/20 10:51,22/Feb/21 13:21,21/Nov/18 14:48,,,Pre2020,,,,,,,,,,"XTG Call, recurring every Wednesday at 13:00. agenda is send 30minutes before the call. Responsible [~cs131], [~tm431].
 * 21/11/2018 is 30min scheduled to informal feedback from customers regarding XBID project
 * meeting minutes review
 * action points review and follow ups
 * distribute below tasks from previous call 

============================================================

   * *|*Action detail*  |*Responsible*|*Target Date*|*Overall Due Date*|*Status*|
 * 
 ** Entry and exit criteria negotiation with XTG team
 ** clarify with techops below :- For upcoming UAT we will need to agree on one dataset that we will use during UAT deployment for test environment.

Additional information provided during the call: it would apply only in case there is a need to redeploy the database as part of a deployment, i.e. not for all deployments *(DBAG to clarify whether this statement is correct)*

 

 

 ",,cs131,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-483,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,71107200,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yu5:wi",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 4,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Nov/18 14:48;cs131;Per discussion with XTG from today's call
- Entry and exit criteria negotiation with XTG team:- it will be same as to what was on R1.5 ( 8 minor, 0 high for UAT )
- clarify with techops below :- For upcoming UAT we will need to agree on one dataset that we will use during UAT deployment for test environment:- below answer from techops has been communicated to XTG team. 
{code}
sually they provided an excel sheet with all their required configurations and we build a data set out of it (edited)
if they don't want to pay for a new one than we will simply use the last available dataset
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Bid-Ask spread - doc internal review,XP-575,75308,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Trivial,Done,hj444,de698,de698,14/Nov/18 12:15,04/Aug/20 19:41,22/Feb/21 13:21,28/Nov/18 16:30,,,Pre2020,,Trading,,,,,,,,"The attached document requires internal review after several changes coming from the test results.

Question to consider: should more examples or test results summary be added?

This separate task is created after a discussion with the team.

The document is NOT TO BE SENT OUT.",,de698,hj444,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Nov/18 12:55;de698;ACER Reporting_Phase 1_v3.00_NOT SEND OUT.docx;https://jira.deutsche-boerse.com/secure/attachment/62166/ACER+Reporting_Phase+1_v3.00_NOT+SEND+OUT.docx","28/Nov/18 15:57;de698;ACER Reporting_Phase 1_v4.00_NOT SEND OUT.docx;https://jira.deutsche-boerse.com/secure/attachment/63040/ACER+Reporting_Phase+1_v4.00_NOT+SEND+OUT.docx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,70502400,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yvu:r0000006",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Nov/18 13:35;hj444;Comments after review delivered via email. 
I change the status to waiting.
 ","28/Nov/18 15:59;de698;Please find attached the updated version with reflected comments in track changes.

Response to comments sent via email - we can discuss.

Shall we close this one?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
LIP connectivity testing WS TLS handshake and secure channel protocol,XP-546,75192,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,tm431,tm431,12/Nov/18 12:16,06/Nov/20 10:51,22/Feb/21 13:21,12/Nov/18 12:17,,,Pre2020,,,,,,,,,,"XBID-4115

 

Dear DBAG,

with reference to the LIP connectivity testing (LIP A) started today, we had an issue with the Rest webservice connection to Shipping Module.

In connection with the feasable solutions the following questions have been arisen:
 # Can DBAG provide a list of the TLS handshake and secure channel protocol versions that are supported by the REST webservice endpoints?
 # If TLS 1.0 isn’t supported by the webservice endpoints, is it possible to enable this secure channel protocol on DBAG's side?
 # If the SSLv2Hello *+handshake+* protocol isn’t supported by the webservice endpoints, is it possible to enable this *+handshake+* protocol on DBAG's side (note that *this is different from* the deprecated and insecure *SSL 2.0* secure channel protocol, which we have no intention of using! SSLv2Hello is only used during the SSL handshake and not during subsequent encrypted communication)?

Thank you in advance.

Best regards,

Balázs Szabó",,tm431,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,71971200,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y07ncg:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Nov/18 12:17;tm431;wrongly created, this should be techlog jira. closing this one",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Enhance the RTS 3 scenario dataset 82ICs, 52DAs",XP-541,75184,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,radeale,radeale,radeale,12/Nov/18 11:54,06/Nov/20 10:51,22/Feb/21 13:21,12/Nov/18 11:54,,,Pre2020,,Capacity,,,,,,,,"Enhanced dataset to contain 82 ICs and 52 DAs (from previous 74 and 46)

 [^XBID dataset RTS3 B Wave 2 for DBAG_52_82_v2.xlsx] 

There is one deleted IC in the dataset: SI-MAVIR, I didn't touched it.

",,ll664,od044,qz412,radeale,tz118,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Nov/18 12:42;radeale;XBID dataset RTS3 B Wave 2 for DBAG_52_82_v2.xlsx;https://jira.deutsche-boerse.com/secure/attachment/61947/XBID+dataset+RTS3+B+Wave+2+for+DBAG_52_82_v2.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,71798400,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y07nao:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Ampere Sprint 3,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Nov/18 12:36;tz118;[~eh941 [~od044]]please validete","12/Nov/18 12:36;od044;[~radeale] There are still missing the definition of DA and SOB product. 

Just want to highlight for DEV that enhanced data are:
Delivery Area: RS, BG, GR, REE, RLV, RLT
Market Area: MA_RS, MA_BG, MA_GR, MA_REE, MA_RLV, MA_RLT
Borders, interconnectors and products relate to Market area and delivery mentioned above
","12/Nov/18 12:37;qz412;ACK, najs, thx!","12/Nov/18 12:43;radeale;Hi guys,

I added the missing basic products assignment to the DAs (and I've deleted the previous file to prevent confusion):

[^XBID dataset RTS3 B Wave 2 for DBAG_52_82_v2.xlsx]  

All hail the RTS3/b!

Alexandr","13/Nov/18 17:42;ll664;The dataset implemented and released.

Version: *1.3.43*
Dataset name: *rts3-uplift-data-ext*

[~od044]",,,,,,,,,,,,,,,,,,,,,,,,,,,
RTS3 - SB Answer customers' questions,XP-540,75183,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,rg535,qz412,qz412,12/Nov/18 11:24,06/Nov/20 10:51,22/Feb/21 13:21,15/Nov/18 09:49,,,Pre2020,,Trading,,,,,,,,"Questions to be added by [~tz118] {color:#4C9AFF}done{color}

Effort needed to be estimated on Alpha's team standup on 13/11

-----
 * In file RTS3_sliceB_execution_results_1.0,
 ** Sheet “(1) Order Execution Time”:
 *** Versions: are they internal only, or how we should understand the versioning ?
 ** Sheet “KPIs”
 *** TWG FTF is of opinion the order of values is opposite to the order of the title RTS3SB/ Degraded (just swapped)

*Questions on simulation counts/parameters*:
 # _Prefill order entries_ and _Non-prefill order entries_
 What do these categories mean? What are they used for in simulation run?
 # _The ratio (total number of border reservations) / (total number of trades)_:
 Is this just calculated value from simulation results, dependent on topology, ATCs and order distribution? Or is there any special related simulation parameter to control a range of the simulated value?
 # _Fat peak events_ and _Sub-second peak events_:
 It seems to match meaning of scenario parameters Peak 2 and Peak 1. But values are a bit confusing, because Sub-second peaks match to “Peak 1: Nr of peaks  * Peak 1: Number of Transactions”, but Fat peaks (and Block peaks as well) match only to “Peak 2: Number of Transactions” (see RTS3B - Scenario parameters v3.1, rows 45-48 and 69-72).
 I would prefer to have the first meaning, because then we can evaluate real number of order transactions in peak.
 # _Block peak events_:
 Similar question as for _Fat peak events_ above – value has different meaning than _Sub-second peak events_.
 # _Question on all peaks in general_:
 How the peaks are distributed within the testing hour?
 Could we have overall characteristics of peaks height  (max/average/median/min order transactions/s)?
 # _Explicit capacity allocations_:
 What is distribution of this event (how is number of events determined and how are the events spread within the testing hour?)

 

*Questions on results:*
 # What is the meaning of the second run results, respectively what is the difference between the first and second run?
 # I expected that all scenarios will be tested without LTSs connected and 4 selected scenarios once more with LTS connected. If this is correct understanding, I don’t see results of the additional runs of scenarios 2, 5, 9 and 15 with LTSs connected (should be available from PERF and SIMU as well?). I would like to compare the results.

 

*Questions on simulation process:*
 # I would like to know more on simulation model definition and logic of generating simulation events to understand how close to or far from reality it is and in which aspects. It should answer questions as for example:
 ## What are all parameters used to control simulation, what rules or frequency distribution/probability distribution is used for each of the parameters?
 ## What is algorithm (high level) of generating order events and other events influencing the simulation outputs? Explain principles used to generate various characteristics of system load required in the scenarios (for example I would like to understand how % in peaks, peak load, peak time, cross-border/local trades etc. are achieved).
 ## Is the same simulation model with differently calibrated parameters used for all required test scenarios or does each scenario require implementation of own model? Can be shared the calibration setup of each scenario used to produce system load required by the scenario?
 ## What is the “simulation architecture” and setup:
 ### Is one or more load generators with different purpose used, only one DBAG LTS is connected or how many LTS simulated etc.
 ### Does the generator use only own member and balancing group with all DAs assigned? 
 What configuration of interconnectors was used (there are 2 files with different default capacity…)? 
 Could we obtain export of full dataset used (including users, BG setup, final interconnectors etc.)?

 * Is PblcOrdrBooksDeltaRprt written to rabbit-mq only for users of connected members? Does it mean that number of reports written during OBK calculation depends on number of LTSs connected during simulation?

 # Can you estimate what portion of OBK calculation time (roughly approximated as PblcOrdrBooksDeltaRprt Time - Order Execution Time) is necessary for the final phase of PblcOrdrBooksDeltaRprt messages compilation and distribution (I assume there is a first calculation phase independent on number of connected LTSs and then the message creation and distribution phase).",,eh941,qz412,tz118,uv683,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Nov/18 11:47;tz118;RTS3SB questions from TWG_201801112.docx;https://jira.deutsche-boerse.com/secure/attachment/61938/RTS3SB+questions+from+TWG_201801112.docx","13/Nov/18 12:05;tz118;RTS3SB questions from TWG_201801113.docx;https://jira.deutsche-boerse.com/secure/attachment/62057/RTS3SB+questions+from+TWG_201801113.docx","13/Nov/18 14:50;eh941;RTS3SB questions from TWG_201801113_v2.docx;https://jira.deutsche-boerse.com/secure/attachment/62086/RTS3SB+questions+from+TWG_201801113_v2.docx","13/Nov/18 15:36;uv683;RTS3SB questions from TWG_201801113_v3.docx;https://jira.deutsche-boerse.com/secure/attachment/62093/RTS3SB+questions+from+TWG_201801113_v3.docx","14/Nov/18 15:56;tz118;RTS3SB questions from TWG_201801113_v4.docx;https://jira.deutsche-boerse.com/secure/attachment/62188/RTS3SB+questions+from+TWG_201801113_v4.docx","14/Nov/18 18:49;qz412;RTS3SB questions from TWG_201801113_v5.docx;https://jira.deutsche-boerse.com/secure/attachment/62209/RTS3SB+questions+from+TWG_201801113_v5.docx","15/Nov/18 11:05;tz118;RTS3SB questions from TWG_201801113_v6.docx;https://jira.deutsche-boerse.com/secure/attachment/62250/RTS3SB+questions+from+TWG_201801113_v6.docx","13/Nov/18 13:25;uv683;test_scenario.xml;https://jira.deutsche-boerse.com/secure/attachment/62068/test_scenario.xml",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,71712000,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yu5:xz",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Nov/18 11:49;tz118;Questions uploaded, disucssion and estiamtion will follow","13/Nov/18 14:58;eh941;I attached file [^RTS3SB questions from TWG_201801113_v2.docx]. I need to warn though that all _my_ questions *are political* yet my *answers aren't political at all* and they *{color:#de350b}truly reflect reality{color}*. Someone should *review* them.","13/Nov/18 15:36;uv683;I appended my portions of answers to Franta's v2 and created [^RTS3SB questions from TWG_201801113_v3.docx].

[~qz412] The one question we spoke about has *{color:#00875a}Ondrej's answer{color}* under it. Please provide your resolution.","14/Nov/18 15:58;tz118;consolidated proposed answers attached  [^RTS3SB questions from TWG_201801113_v4.docx] 
[~qz412] please feel free to review. ","14/Nov/18 18:50;qz412;Dear all, In v5 I have made tiny modifications + one change that requires your check / approval. Please finalize and feel free to distribute.

*Good job, thank you!*","15/Nov/18 11:07;tz118;Please find latest Version attached  [^RTS3SB questions from TWG_201801113_v6.docx] 

[~rg535], please feel free to Review and provide Feedback if any. In case of no questions/comments it will be distributed today eob
",,,,,,,,,,,,,,,,,,,,,,,,,,
Halting of internal ICs must be possible,XP-528,75127,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,eg288,radeale,radeale,09/Nov/18 15:05,04/Aug/20 19:41,22/Feb/21 13:21,14/Mar/19 12:22,,,Pre2020,,Capacity,Trading,,,,,,,"{color:#00875a}*[ New feature ]*{color}

*+Current state+*

The halting of internal interconnectors (iICs) is technically possible, but is discouraged due to the following reasons:
 - The H2H Matrix is known no to work correctly when an iIC is halted (thus violating the required 'infinite' capacity condition)
 - Behaviour of the system is not tested thoroughly in a situation when an IIC is halted as this option has not been requested up to now

*+Desired state+*

Halting of iICs is possible without negative impact on the system.
 - Halted iICs behave like any other IC, i.e. any kind of allocation is not possible on the IC and the reported ATC is 0
 - H2H Matrix reports correct capacity values even when one or more iICs are halted
 - Depending on the product configuration when GCT of the iIC is reached, but products are still available in the two individual delivery areas, matching of orders within the individual delivery areas is possible
 - When all ICs (including iICs) around a delivery area are halted or closed, but contracts are available for trading in the DA, matching of orders in the DA is possible

*+Impact Analysis and proposed solution+*

+_CMM Routing_+
 - The routing algorithm does not distinguish between internal and ""normal"" interconnectors hence routing should not be affected, CMM allocations are made on ICs - nothing related only to ""normal"" ICs, working already, no changes needed here.

+_H2H Matrix_+
 MA-MA needs to be changed to DA-DA in general (API, GUI).

The resulting H2H Matrix design described in the most recent R2.0 HLS100A specification (v24).

_API changes where MAs has to be replaced with DAs_
 - XSD - HubToHubReq contains mktArea (would work with mktArea, but woild be confusing) (DFS510)
 - X_AREA header in AMQP messages contains MA (not mentioned in a spec)
 - x-m7-group-id contains MA (x-m7-group-id is mentioned in DFS510, but not detailed)
 - PblcOrdrBooksDeltaRprt contains LastTradeInfo per market area, it will be per delivery area (not detailed in DFS510)
 - H2H broadcasts are sent to cmm.h2h.MA (internal, not visible to the customer)
 - Internal routing is based on market areas (internal, not visible to the customer)

+_SOB Trading_+
 - No changes necessary, the trading depends on the CMM in this regard

+_Shipping Module_+
 - No direct impact seen, halting operations on the internal ICs should trigger related file generation normally

+_CMI_+
 - No impact, outbound and inbound configurations can be created for iICs",,fh971,qo794,radeale,uv683,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-867,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,62035200,,,,,,,,,,XP-110,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y088u7:i6",9223372036854775807,,,,,,,,,CR ID 45,,,,,,,,,,,,,,Ampere Sprint 7,Alpha Team Sprint 9,Alpha Team Sprint 10 [S],Home Office Team 17 [S],Home Office Team 18,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,plewmic-scripts,XP-1261-guava-28,selenide-poc,XP-1504,xbid-losses-poc,XP-456,XP-2979-postgresql,XP-3264,XP-3230,develop,XP-2694,XP-1241-new-failover-docker,XP-2232,XP-3070,XP-4273-owasp-zap-enable,inline-tomcat-params,XP-528-feature-file-testcases,XP-4526-resource-managment-fix,xbid-2.0.25.x,fixing-failover,XP-2080-finishing-price-rounding-integration,,,,,,,,,,,,,true,"14/Nov/18 17:36;fh971;Any chance to reduce duplicity in API? Same information is sent twice:
{code:xml}
<HubToHubAtcList dlvryStart=""2018-11-14T21:00:00.000Z"" dlvryEnd=""2018-11-14T22:00:00.000Z"" timestmp=""2018-11-14T15:39:11.013Z"">
    <HubFrom frm=""DE"">
      <Atc to=""FR"" in=""1200"" out=""8900""/>
    </HubFrom>
    <HubFrom frm=""FR"">
      <Atc to=""DE"" in=""8900"" out=""1200""/>
	</HubFrom>
  </HubToHubAtcList>
</HubToHubNtf>
{code}
 ","20/Nov/18 09:17;fh971;With {{HubToHubReq}} I would propose to set DateTime interval instead of Delivery Day. 
Current scenario is send 2 request to get data for 2 days:
{code:xml}<HubToHubReq xmlns=""http://www.deutsche-boerse.com/m7/v6"" mktArea=""FR"" dlvryDay=""2018-11-20"">{code}
Wouldn't be better to get it in one request with less data (I don't need zeroes for hours in the past):
{code:xml}<HubToHubReq xmlns=""http://www.deutsche-boerse.com/m7/v6"" mktArea=""FR"" dlvryStart=""2018-11-20 15:00"" dlvryEnd=""2018-11-21 23:59"">{code}

Or imagine that {{mktArea}} is not required, so when is not filled, I get all market areas data in one response:
{code:xml}<HubToHubReq xmlns=""http://www.deutsche-boerse.com/m7/v6"" dlvryStart=""2018-11-20 15:00"" dlvryEnd=""2018-11-21 23:59"">{code}","07/Dec/18 10:45;radeale;Please propose the future possible API changes to:
https://jira.deutsche-boerse.com/browse/XP-621","10/Dec/18 12:04;radeale;The changes are described in the most recent version of the documentation:

*HLS100A* (H2H Matrix Redesign)
S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\03 Functional Specifications\HLS100A Functional Description Capacity Management Module\HLS100A - Functional Description Capacity Management Module v24.00.docx

*DFS510* (API related changes)
S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\03 Functional Specifications\DFS510 AMQP Public Message Interface - Trading\DFS510 - AMQP Public Message Interface - Trading v21.00.docx

*DFS700* (Default values for internal ICs are deleted)
S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\03 Functional Specifications\DFS700 Reference Data Module\DFS700 - Reference Data Module GUI v27.00.docx

Actual changes are also described in container ticket:
https://jira.deutsche-boerse.com/browse/XP-114

Also you can find the track-changes documentation in the following folder, open the documentation document and look for comments with _CR ID 45_:
S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\03 Functional Specifications\Batch_4\Level 2 review - 5-Sent out","11/Jan/19 09:56;uv683;It has been found out that implicit allocation across common ATC border will be broken when iIC is halted. Need to solve XP-892 first.","25/Feb/19 11:05;radeale;The behaviour described in XP-892 acknowledged in XBID-4248, output is container XBID-4299.

Feel free to continue with the development.","06/Mar/19 10:19;radeale;Notes from testing in the Docker:
- DAs in the H2H matrix should be alphabetically sorted both in the table (it is OK in the drop-down menu)

There is a problem with HubToHubReq message:
<?xml version=""1.0"" encoding=""UTF-8""?><HubToHubReq xmlns=""http://www.deutsche-boerse.com/m7/v1"" deliveryArea=""10YNL----------L"" dlvryDay=""2019-03-06T20:00:00.000Z"">
   <StandardHeader marketId=""XSOB""/>
</HubToHubReq>

Response:
<?xml version=""1.0"" encoding=""UTF-8""?>
<ErrResp xmlns=""http://www.deutsche-boerse.com/m7/v1"">
   <StandardHeader marketId=""XSOB""/>
   <Error err=""REF_DATA_DELIVERY_AREA_DOES_NOT_EXIST{&lt;null&gt;}""/>
</ErrResp>

The same response is returned to even the old format of the message (with mktArea). The test user has the necessary Capacity Info user right.","06/Mar/19 21:37;qo794;The correct {{HubToHubReq}} message is the following:
{code:xml}
<?xml version=""1.0"" encoding=""UTF-8""?><HubToHubReq xmlns=""http://www.deutsche-boerse.com/m7/v1"" dlvryArea=""10YNL----------L"" dlvryDay=""2019-03-06T20:00:00.000Z"">
<StandardHeader marketId=""XSOB""/>
</HubToHubReq>
{code}","07/Mar/19 09:58;qo794;Subtasks created to fix the findings",,,,,,,,,,,,,,,,,,,,,,,
DST LCC tests 10/2018: SM files incorrect behaviour during DST moment,XP-521,75100,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,aesteban@omie.es,qz412,09/Nov/18 10:10,04/Aug/20 19:22,22/Feb/21 13:21,22/Jan/19 14:16,,,Pre2020,,Shipping,,,,,R2.0-AgreedFixScope,,,"Real priority: MAJOR/CRITICAL

During DST moment (28/10 between 2 A.M. and 3 A.M.) it was identified that SM in Common Cute PXs was not producing SM files anymore. 

From 3 A.M. (that was indeed again 2 A.M.) SM files were delivered again. After further investigation it was identified that all SM files that were supposed to be delivered within mentioned hour were sent in a bundle at 3 A.M. (that was indeed again 2 A.M.), and after that the system started delivering the files with the normal frequency (every 5 minutes). 

Find attached SM GUI screenshot that reflects the previous described incorrect behaviour.

This applies to all NEMOs, and potentially to some TSOs (depending on the frequency set up for the FTC).

Previous unexpected behaviour has been confirmed by our design experts (IT TF).

Following agreed approach to report DST issues in IMT we have raised this ticket as minor in order to avoid triggering ICCC on operation side, but we consider this issue as MAJOR/CRITICAL because unless fixed by DBAG prior DST day, it will be experienced in PROD on 28/10 and it affects post-coupling processes on NEMO/TSO side (still being assessed at the moment).
",,od044,qz412,,,,,,,,,,,,,,,,,,,,,,,,,,SMXBID-968,,,XDEV-5549,,,,,,,SERVICE-1937,,,,,,,"09/Nov/18 10:10;qz412;SM files during DST LCC.jpg;https://jira.deutsche-boerse.com/secure/attachment/61847/SM+files+during+DST+LCC.jpg",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, Minor Incident,,65750400,,,,,,,,,,XP-53,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yrt:000000z600c",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 11,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jan/19 14:14;od044;Test passed on Docker (XBID 1.6.0.23-SNAPSHOT-89728c4214952d29e0a3e19d3bd9a9f392245270)
- synchronization events work properly during DST period
{code}
2018-10-28T00:55:05.008Z [sformingHandler][][] INFO  c.d.m.s.c.t.ShippingSynchronizationPointEventTransformer - Received ShippingSynchronizationEvent with timestamp 2018-10-28T02:55:05.000+02:00, extraordinary false
2018-10-28T00:55:05.008Z [sformingHandler][][] INFO  c.d.m.s.s.AmqpTradeFetcherImpl - Fetching trades between 2018-10-28T02:50:00.000+02:00 and 2018-10-28T02:55:00.000+02:00
....
....
....
2018-10-28T01:00:05.009Z [sformingHandler][][] INFO  c.d.m.s.c.t.ShippingSynchronizationPointEventTransformer - Received ShippingSynchronizationEvent with timestamp 2018-10-28T02:00:05.000+01:00, extraordinary false
2018-10-28T01:00:05.009Z [sformingHandler][][] INFO  c.d.m.s.s.AmqpTradeFetcherImpl - Fetching trades between 2018-10-28T02:55:00.000+02:00 and 2018-10-28T02:00:00.000+01:00
...
...
...
2018-10-28T01:05:05.008Z [sformingHandler][][] INFO  c.d.m.s.c.t.ShippingSynchronizationPointEventTransformer - Received ShippingSynchronizationEvent with timestamp 2018-10-28T02:05:05.000+01:00, extraordinary false
2018-10-28T01:05:05.008Z [sformingHandler][][] INFO  c.d.m.s.s.AmqpTradeFetcherImpl - Fetching trades between 2018-10-28T02:00:00.000+01:00 and 2018-10-28T02:05:00.000+01:00
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Crossed order books 23-00 (Buy higher than Sell),XP-520,75099,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,cf948,a.vanderzijden@epexspot.com,qz412,09/Nov/18 10:07,04/Aug/20 19:22,22/Feb/21 13:21,10/Jan/19 15:41,,,Pre2020,,Capacity,Trading,,,,R2.0-AgreedFixScope,,,"Hello DBAG,

A member of EPEX detected an price issue:
my colleague Matus identified a potential issue where buy price is greater than sell price. This seems to happen frequently at 19:00 (UTC +2) for contracts with delivery 23:00-00:00.
As you can see in the example below, we are not missing any delta (no gap in revision number).

Could you please let us know if there could be a legal situation where buy px > sell px and why we observe this frequently at the same time for the same contracts?

Attached you can find the xml messages for the example below (orderbooks_grep.txt) and an overview of where this issue occurs.

logfiles attached. Please have a look into it.
Thank you very much.

Please investigate order id 10251437670 onXBID side
",,cf948,qz412,,,,,,,,,,,,,,,,,,,,,,,,,,SMXBID-869,,,,,,,,,,,,,,,,,"09/Nov/18 10:07;qz412;PMI_logs.zip;https://jira.deutsche-boerse.com/secure/attachment/61845/PMI_logs.zip","09/Nov/18 10:07;qz412;orderbooks_grep.txt;https://jira.deutsche-boerse.com/secure/attachment/61846/orderbooks_grep.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, Minor Incident,,66787200,,,,,,,,,,XP-53,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y07vfz:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Ampere Sprint 10,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Jan/19 15:25;cf948;Code and test already in code base.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cost coefficient information to be added to USM998,XP-514,75083,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,08/Nov/18 17:36,04/Aug/20 19:40,22/Feb/21 13:21,03/Jan/19 17:31,,,Pre2020,,,,,,,,,,"Dear DBAG,

DFS290 Cross border routing Section 3.2.2 provide in (4) Cost coefficient following information

_“This is a virtual positive cost coefficient accounting for the cost of a flow. The cost coefficient is independent of the period and determines over which paths power should be routed preferrably. The cost coefficient is direction independent, i.e. it is the same for an interconector and its reverse. Cost coefficients will be configured in CMM. There will not be a GUI or API for entering this coefficients. DBAG configures the cost coefficient in the XBID System, based on provided Input from TSOs. For subsets of the grid without special routing requirements, a default cost coefficient will be used”_

Value of cost coefficients is not listed in any documentation now. MSD kindly ask DBAG this information is added to USM998. We recommend to list only value for interconnectors where the value deviate from default value 1.",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4098,,,,,,,,XBID-4219,XP-833,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,69379200,,,,,,,,,,XP-174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yvu:r01ui",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Ampere Sprint 3,Ampere Sprint 4,Ampere Sprint 5,Ampere Sprint 6,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Nov/18 17:37;radeale;Production data:
{code}xbprodcor=# SELECT * FROM cmm_230_inter_connector;
 connector_id | version | cost_factor |    area_1_eic    |    area_2_eic    | border_id | status_id
--------------+---------+-------------+------------------+------------------+-----------+-----------
            2 |       5 |             | 10Y1001A1001A64J | 10YNO-1--------2 |        21 |         2
           29 |       2 |             | 10YNO-1--------2 | 10YNO-3--------J |        22 |        29
           30 |       2 |             | 10YNO-1--------2 | 10Y1001A1001A46L |        24 |        30
           24 |       1 |             | 10YDOM-1001A084H | 10YFI-1--------U |        18 |        24
           31 |       2 |             | 10YNO-2--------T | 10Y1001A1001A48H |        25 |        31
           32 |       3 |             | 10YNO-2--------T | 10YNL----------L |        26 |        32
           33 |       2 |             | 10YNO-3--------J | 10YNO-4--------9 |        27 |        33
           34 |       2 |             | 10YNO-3--------J | 10Y1001A1001A48H |        28 |        34
           35 |       2 |             | 10YNO-3--------J | 10Y1001A1001A45N |        29 |        35
           36 |       3 |             | 10YNO-4--------9 | 10Y1001A1001A44P |        30 |        36
            9 |       2 |             | 10YDE-RWENET---I | 10YDE-ENBW-----N |           |         9
           37 |       2 |             | 10YNO-4--------9 | 10Y1001A1001A45N |        31 |        37
           38 |       3 |             | 10YFR-RTE------C | 10YBE----------2 |         6 |        38
            8 |       2 |             | 10YDE-RWENET---I | 10YFR-RTE------C |         7 |         8
           10 |       2 |             | 10YDE-RWENET---I | 10YDE-EON------1 |           |        10
           39 |       4 |             | 10YFR-RTE------C | 10YES-REE------0 |         8 |        39
           40 |       2 |             | 10Y1001A1001A44P | 10Y1001A1001A45N |        32 |        40
           43 |       2 |             | 10YDE-ENBW-----N | 10YDE-EON------1 |           |        43
           41 |       2 |             | 10Y1001A1001A45N | 10Y1001A1001A46L |        33 |        41
           42 |       2 |             | 10Y1001A1001A46L | 10Y1001A1001A47J |        34 |        42
           20 |       4 |             | 10YES-REE------0 | 10YMA-ONE------O |        35 |        20
            3 |       3 |             | 10YDE-VE-------2 | 10YDE-RWENET---I |           |         3
           46 |       3 |             | 10YDE-ENBW-----N | 10YFR-RTE------C |         7 |        46
           44 |       1 |             | 10YDE-EON------1 | 10YDK-1--------W |         3 |        44
           45 |       4 |             | 10YDE-EON------1 | 10YNL----------L |         5 |        45
           11 |       6 |             | 10YDE-RWENET---I | 10YNL----------L |         5 |        11
            1 |       6 |             | 10YDK-1-------AA | 10YDK-1--------W |        10 |         1
            4 |       1 |             | 10YDE-VE-------2 | 10YDK-2--------M |         4 |         4
            5 |       3 |             | 10YDE-VE-------2 | 10YDE-ENBW-----N |           |         5
            6 |       3 |             | 10YDE-VE-------2 | 10YDE-EON------1 |           |         6
           12 |       6 |             | 10YDK-1-------AA | 10YNO-2--------T |        10 |        12
           13 |       6 |             | 10YDK-1-------AA | 10Y1001A1001A46L |        11 |        13
           14 |       2 |             | 10YDK-1--------W | 10YDK-2--------M |         9 |        14
           15 |       1 |             | 10YDK-1--------W | 10YNL----------L |        12 |        15
           16 |       2 |             | 10YDK-2--------M | 10Y1001A1001A47J |        13 |        16
           17 |       1 |             | 10Y1001A1001A39I | 10YFI-1--------U |        14 |        17
           18 |       2 |             | 10Y1001A1001A39I | 10YLV-1001A00074 |        15 |        18
           19 |       2 |             | 10YBE----------2 | 10YNL----------L |         1 |        19
           21 |       2 |             | 10YES-REE------0 | 10YPT-REN------W |        36 |        21
           22 |       2 |             | 10YFI-1--------U | 10Y1001A1001A44P |        16 |        22
           23 |       2 |             | 10YFI-1--------U | 10Y1001A1001A46L |        17 |        23
           25 |       1 |             | 10YLT-1001A0008Q | 10Y1001A1001A47J |        19 |        25
           26 |       1 |             | 10YLV-1001A00074 | 10YLT-1001A0008Q |        20 |        26
           27 |       5 |             | 10Y1001A1001A64J | 10YNO-2--------T |        21 |        27
           28 |       5 |             | 10Y1001A1001A64J | 10Y1001A1001A48H |        23 |        28
            7 |       6 |             | 10YDE-RWENET---I | 10YAT-APG------L |         2 |         7
           48 |       2 |             | 10YDE-EON------1 | 10YAT-APG------L |         2 |        48
           47 |       2 |             | 10YDE-ENBW-----N | 10YAT-APG------L |         2 |        47
(48 rows)

xbprodcor=#{code}","22/Nov/18 13:12;radeale;Wording proposed to the customer.","11/Dec/18 15:33;radeale;Customer unable to answer in three weeks, new version of USM998 anyway - XBID-4219.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
 [Sprint 3] XTG activity support,XP-483,74961,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,cs131,qz412,cs131,08/Nov/18 08:53,06/Nov/20 10:51,22/Feb/21 13:21,14/Nov/18 14:36,,,Pre2020,,,,,,,,,,"XTG Call, recurring every Wednesday at 13:00. agenda is send 30minutes before the call. Responsible [~cs131], [~tm431].
 * 14/11/2018 is 30min scheduled to informal feedback from customers regarding XBID project
 * meeting minutes review
 * action points review and follow ups
 * distribute below tasks from previous call 

============================================================

  * *|*Action detail*  |*Responsible*|*Target Date*|*Overall Due Date*|*Status*|
 * 
 ** 
|DBAG 850|XBID-3958 / Robustness of the processes:
 DBAG to discuss XTG feedbacks internally and to then come back with official answers by next weekly coordination CC|DBAG|2018/11/14| | |

 * 
 ** 
|DBAG 851|XBID-4013:
 DBAG to check internally whether it would be technically possible that LDAP and the snapshot could be synchronized by next weekly XTG/DBAG coordination call. If not possible, DBAG to suggest any other solutions if possible.|DBAG|2018/11/14| | |

 * 
 ** 
|DBAG 847|R1.5 Lessons Learnt:
 DBAG to take XTG inputs into account and will then come back to XTG with their feedbacks on those together with their own identified R1.5 lessons learnt.|DBAG|2018/11/14|Checkpoint to be done on weekly basis|

** Entry and exit criteria negotiation with XTG team

 

 

 ",,cs131,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-435,,,,,,,,,,XP-435,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,71712000,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yus:9",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 3 (PS),,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Nov/18 14:36;cs131;meeting minutes and action items have been delivered with XTG",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Release 2.0 Managerial Documents - Test Strategy,XP-459,74801,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,cs131,qm925,qz412,06/Nov/18 08:38,06/Nov/20 10:51,22/Feb/21 13:21,09/Nov/18 10:56,,,Pre2020,,,,,,,,,,"Following documents need to be delivered:
 - *{color:#ff0000}Test Strategy{color}*
 ** {color:#172b4d}*Template:* [http://projects.deutsche-boerse.de/sites/ps0080/Shared%20Documents/02%20XBID%20Releases/XBID%202.0/Managerial%20Documents/Test%20Strategy]{color}
 - -Release Plan (covered in XP-419)-
 - -Acceptance Criteria Plan (covered in XP-419)-

Internal delivery date: 8/11 noon, reviewers [~rg535], [~gd553]

External delivery date: 09/11 (confirmed in the JSC on 2. November, it is 9/11)",,cs131,qz412,tm431,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,M7ACM-259,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,72230400,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yus:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 2,Home Office Team Sprint 3 (PS),,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Nov/18 12:18;tm431;Document was updated from our side. Please find comments directly in the documents.","08/Nov/18 09:16;cs131;*updated:-*  from yesterday core meeting, we still need to review and updated document with outcomes from yesterday core meeting.
 * there will not be a dedicated FAT phase and it will be taken care of during development cycle of R2.0 and that needs to be reflected into the test startegy","09/Nov/18 10:56;cs131;Test strategy and AC plan document has been reviewed from my end and send it to Malina for further review. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Trade recall status on RREQ where RREJ is expected,XP-438,74499,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,uv683,qz412,qz412,01/Nov/18 16:33,04/Aug/20 19:22,22/Feb/21 13:21,24/Jan/19 15:08,,,Pre2020,,Trading,,,,,R2.0-AgreedFixScope,,,"{color:#de350b}<<<Item added based on Vlada's e-mail from 31st Oct 2018>>>{color}

During the test case below, XBID PWG expected that the status of the trade would change to ‘RREJ’, but instead it keep stating ‘RREQ’. 
 In a comparable case the status do change to RREJ. This case is where the user tries to process a trade recall, which is refused because there is not sufficient capacity. 
 Therefor we see this behaviour as a bug.

Test case:
 -EPEX was configured in SOB as supporting trade recall and OMIE was configured in SOB as unsupporting trade recall.

-Then a trade recall EPEX-OMIE was requested, where we simulated that the operator forgot to reject the trade and tried to accept it instead. The outcome was that the status of the trade states in 'RREJ'.

----------------------------------------------------------------------

From HLS100 v18.00 (see diagram attached):
 * An attribute on the Member level (“Trade Recall and Cancel supported/unsupported”) indicates whether or not the Member supports the Trade Recall grant functionality.
 * The following grant recall rules apply:

 * 
 ** If both sides of a trade come from PXs represented by Members that at the moment of execution support the trade recall operation, the grant recall operation can be executed.
 ** If one or both sides of the trade come from PXs represented by Members that at the moment of the execution do not support the trade recall operation, then the trade on which the grant recall operation is executed is not recalled:

 * 
 ** 
 *** {color:#00875a}If the central admin *accepts* the recall request, an error response with explanation is sent and the trade status is changed to RREJ.{color}
 *** {color:#00875a}If the central admin *rejects* the request, the status is changed to RREJ.{color}",,qz412,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Jan/19 15:55;de698;HLS100_Recall process diagram_XBID-2933.jpg;https://jira.deutsche-boerse.com/secure/attachment/64212/HLS100_Recall+process+diagram_XBID-2933.jpg",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, Minor Incident,,72835200,,,,,,,,,,XP-53,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yrt:000000hi",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 10 [S],Alpha Team Sprint 11,Alpha Team Sprint 12,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-1261-guava-28,selenide-poc,XP-69,master-m7-api-1.0.x,xbid-losses-poc,m7-api-1.0.x,master-m7-api-1.0.40.x,XP-2583,XP-3230,XP-3070,m7-api-1.0.40.x,xbid-2.0.25.x,fixing-failover,plewmic-scripts,XP-1504,XP-456,XP-2979-postgresql,XP-3264,develop,XP-2694,XP-2232,XP-2554,master,XP-4273-owasp-zap-enable,comtrader-2.5.x,inline-tomcat-params,XP-528-feature-file-testcases,XP-4526-resource-managment-fix,XP-2080-finishing-price-rounding-integration,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[Sprint 2] XTG activity support,XP-435,74477,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,cs131,qz412,cs131,01/Nov/18 14:06,06/Nov/20 10:51,22/Feb/21 13:21,08/Nov/18 08:54,,,Pre2020,,,,,,,,,,"XTG Call, recurring every Wednesday at 13:00. agenda is send 30minutes before the call. Responsible [~cs131], [~tm431]. 
 * 7/11/2018 is 30min scheduled to informal feedback from customers regarding 1.5 UAT 
 * meeting minutes review
 * action points review and follow ups
 * distribute tasks from that call
 * joint process improvement for upcoming UAT and testing activities ",,cs131,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-346,,,,,,,,,,,,,,,,,"02/Nov/18 16:19;cs131;Enhancing robustness of the processes with XBID_draft_V1.docx;https://jira.deutsche-boerse.com/secure/attachment/61405/Enhancing+robustness+of+the+processes+with+XBID_draft_V1.docx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,72316800,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yur:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 2,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Nov/18 16:20;cs131;- [^Enhancing robustness of the processes with XBID_draft_V1.docx] has been sent to XTG memebers for review.

 

- sFTP connectivity details inquiry has been sent to Techops team for review. ","06/Nov/18 08:48;cs131;sFTP connectivity details has been sent to XTG community team for review. ","08/Nov/18 08:54;cs131;this task is complete. new tasks will be added to https://jira.deutsche-boerse.com/browse/XP-483 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Respond to customers' comments on R2.0 specs, prepare clean versions where applicable",XP-424,74409,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,qz412,qz412,31/Oct/18 09:51,06/Nov/20 12:52,22/Feb/21 13:21,06/Nov/18 10:22,,,Pre2020,,,,,,,,,,"On 31st Oct the customers have delivered commented versions of 2.0 specs - all conveniently added to XBID-4046. There is a relatively low number of comments that need DBAG's reaction.

Next steps:
 * React to all comments
 * Where applicable prepare clean versions
 * Attach the updated docs to the external Jira (preferably  zipped in one archive :))
 * Send out by *5/11 EOB*

SMEs: [~radeale], [~qz412]",,qz412,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,72489600,,,,,,,,,,XP-4090,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yu1:w",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Ampere Sprint 2,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Nov/18 10:22;radeale;Took two story points in reality.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Release 2.0 Managerial Documents - Acceptance Criteria, Release Plan",XP-419,74394,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,gd553,qm925,qm925,30/Oct/18 17:27,06/Nov/20 10:51,22/Feb/21 13:21,09/Nov/18 15:08,,,Pre2020,,,,,,,,,,"Following documents need to be delivered:
 - {color:#ff0000}*Release Plan*{color}
 - {color:#ff0000}*Acceptance Criteria Plan*{color}
 - -Test Strategy (covered in XP-459)-

Delivery date 09/11 - to be confirmed
 {color:#ff8b00}*The delivery date for the management documents was confirmed in the JSC on 2. November, it is 9/11*{color}",,gd553,qm925,qz412,rg535,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-459,M7ACM-259,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,72144000,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yuu:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Nov/18 17:03;rg535;Please ensure that this is planned accordingly so that we meet the agreed deadline of 09/11 for delivery to PXs.","05/Nov/18 17:05;rg535;[~cs131], [~tm431], [~qz412], Test Strategy for R2.0 - please amend draft as needed. It is saved on SharePoint. ","05/Nov/18 17:08;rg535;email from Malina on 5/11:

Please note that the following documents are ready for your review in SharePoint (02 XBID Releases/XBID 2.0/Managerial Documents):
Timeline – comments added on the slides
Acceptance Criteria Plan – changes added in track changes, comments included
@ Haitham and Patrick  – I have added you for the review of the Acceptance Criteria Plan. 

@ Ondrej – Has the Test Strategy been included in the product backlog and did the team start work on this, meaning, will it be finished by 09/11? 

Simona and myself will proceed with the Release Plan and send you the draft for review tomorrow.","06/Nov/18 16:24;gd553;[~qz412], [~rg535] - the managerial documents are ready for your review.

[~cs131], [~tm431] - please as well review the Acceptance Criteria Plan. I have inserted my comments on the Test Strategy, you might want to go through that as well.

Let's all please discuss these documents during the Core Meeting tomorrow. In order for these documents to go out on Friday, I would like to have a final version by Thursday eob.","07/Nov/18 12:12;qz412;Dear [~gd553], [~rg535], [~cs131]. I have reviewed all man docs. Please see my reaction in the comments section (there is quite a lot, sorry :)).","09/Nov/18 15:07;qz412;Final version to be sent out agreed, task done.",,,,,,,,,,,,,,,,,,,,,,,,,,
Log application HeartBeats in PMI Logger,XP-383,74195,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,jy268,cf948,cf948,26/Oct/18 17:09,11/Sep/20 13:55,22/Feb/21 13:21,11/Sep/20 13:55,,,Pre2020,,PMI Tools,,,,,R2.0-AgreedFixScope,,,"----
 

{color:#de350b}<<<Added to Latent Faults 1.x based on e-mail from Vlada Satek, 31/10/2018>>>{color}

HeartBeats are not logged now, they should be as stated in specification. Alignment with the customers where to fix pending.",,cf948,qm925,qz412,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-4428,XBID-4083,XBID-3999,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,66355200,,,,,,,,,,XP-53,,,,,,,,,,,,,,26/Oct/18 17:09,,,,,,,,,,,,,,,,,,,,,"1|000yrt:3y",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Ampere Sprint 9,Ampere Sprint 10,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Nov/18 15:07;qz412;Customers agree to be fixed as Minor in R2.0","15/Jan/19 16:15;radeale;Test OK on SYST3, XBID 1.6.0.22, PMI Logger 1.0.29.

From pmi-messages.log:

{code}2019-01-15 14:42:30.004: BROADCAST - Body: SYSTEM_ALIVE:5000. MessageProperties [headers={timestamp_in_ms=1547563350002, x-m7-group-sequence=403, x-m7-group-id=1.comxerv.heartbeat, server-timestamp=1547563350002}, timestamp=Tue Jan 15 14:42:30 UTC 2019, messageId=null, userId=null, receivedUserId=null, appId=null, clusterId=null, type=null, correlationId=null, correlationIdString=null, replyTo=null, contentType=x-m7/heartbeat; version=1, contentEncoding=gzip, contentLength=0, deliveryMode=null, receivedDeliveryMode=NON_PERSISTENT, expiration=null, priority=0, redelivered=false, receivedExchange=comxerv.heartbeatExchange, receivedRoutingKey=1.comxerv.heartbeat, receivedDelay=null, deliveryTag=968, messageCount=0, consumerTag=amq.ctag-PJjTaNQrBUk79ER9ILIqbQ, consumerQueue=xbid.monitoring.2]{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
MFG120 Central Admin Manual XBID-ComTrader - points to be addressed,XP-373,74162,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,zi174,qm925,qm925,26/Oct/18 10:29,06/Nov/20 12:52,22/Feb/21 13:21,16/Jan/19 17:31,,,Pre2020,,,,,,,,,,"Clients' comments received on 25/10/2018.

5 remaining open Points to be addressed.

No specific deadline has been provided. ",,qm925,radeale,zi174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Oct/18 10:28;qm925;MFG120 - Central Admin Manual XBID-ComTrader v9.1.docx;https://jira.deutsche-boerse.com/secure/attachment/60925/MFG120+-+Central+Admin+Manual+XBID-ComTrader+v9.1.docx","21/Jan/19 15:12;zi174;MFG120 - Central Admin Manual XBID-ComTrader v9.1.docx_DBAG.docx;https://jira.deutsche-boerse.com/secure/attachment/64668/MFG120+-+Central+Admin+Manual+XBID-ComTrader+v9.1.docx_DBAG.docx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,65836800,,,,,,,,,,XP-4090,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yrw:ozw",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Ampere Sprint 10,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Jan/19 11:26;zi174;The questions answered. [~radeale] please review.

Thank you

Jakub","16/Jan/19 17:28;radeale;Review done :)

 [^MFG120 - Central Admin Manual XBID-ComTrader v9.1.docx_DBAGr.docx] 

Backup in:
S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\04 User Manuals\MFG120 - Central Admin Manual M7-ComTrader\","21/Jan/19 15:14;zi174;I have modified an answer regarding comtrader version. The newest version in production is 31 not 37 (as I wrongly mentioned).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
" PX XBID - LIP Testing | Connectivity/integration test for 2nd wave parties",XP-354,74117,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,cs131,cs131,cs131,25/Oct/18 13:07,06/Nov/20 12:51,22/Feb/21 13:21,01/Nov/18 08:16,,,Pre2020,,,,,,,,,,"Dear DBAG (XTG & LIP Testing members in copy),

 

In order to prepare for the connectivity/integration test of 2^nd^ wave parties please find below draft timeline of the process, suggestions regarding process organization and some questions. We would appreciate to get your feedback *by 09/10 EOD*.

 

The latest high level plan for 2^nd^ wave LIP Testing expects the above mentioned connectivity/integration test will take place in period *12/11 – 30/11*. LIP Testing group discussed the planning in more details resulting in following suggestion:
 * *22/10* DBAG to upload to LIP A selected snapshot to “clean” the system after XTG tests

-          *This is understood by DBAG. The NEMOs would need to inform DBAG on what snapshot should be used via a support request.*
 * *23/10 – 02/11* LIP A configuration will be extended to include 2^nd^ wave parties (JAO resources availability to be confirmed, might be delayed for one week)

o   This means DBAG activity which might be dependent on fact that party is configured in XBID may be triggered only after *02/11* (respectively after *09/11*)

o   Prior connectivity phase starts we expect DBAG to prepare the network and technical infrastructure and perform necessary configurations for connectivity which are not under control by JAO and SOB Central Admin

-          *For this task DBAG would need to be informed on which communication channel each TSO is going to use.*

-          *We understand then that DBAG would have time to prepare the network and technical infrastructure and perform the necessary configurations for connectivity in the time between 02/11 and 12/11. Is that correct?*
 * *12/11 – 16/11* Connectivity Phase

o   DBAG to support in dedicated timeslot 2^nd^ wave parties individually → each party will get dedicated support from DBAG for 60 minutes, max 4 slots per day considered to be used (e.g. 09-10, 11-12, 13-14, 15-16)

o   Assuming all 2^nd^ wave parties will be ready it is 14 slots, the slots are not yet suggested but they will be provided asap after DBAG confirms this planning

-          *This is the same procedure we used in the past. DBAG agrees to this. We request the planning of the slots as soon as possible in order to make sure we have the necessary resources available.*

o   We are ready to provide overview of interfaces/channels planned to be used by each party

-          *Please do so as soon as possible.*

o   For sFTP communication channel we suggest to follow the standard process used by XTG in past i.e.
 * The respective project party create a JIRA ticket type “Support Request” in order to inform DBAG about its configuration need for sFTP
 * The related sensible information, such as IP addresses and SSH public keys, are sent by the respective project party to the LTC by email
 * LTC provide DBAG with those sensible information via email
 * DBAG confirms the configuration completion directly via the JIRA ticket

o   DBAG is expected to provide the TSOs with technical and infrastructure support and problem analysis for entered JIRAs

-          *This is fine for DBAG.*
 * *- 30/11* Integration Phase

o   We expect the integration phase will not have fixed schedule i.e. any party which managed to complete connectivity phase can start integration testing

o   During the integration phase the main support expected from DBAG is on level of problem analysis for entered JIRAs

o   Trading traffic will be created where needed by NEMOs who are already operational

-          *How long do you expect that the Integration Phase will last? Do the Parties have a deadline for this?*

 

2^nd^ wave parties would need to be informed also as soon as possible

(a)    which information DBAG would need from them in advance (if not mentioned already above)

-          *DBAG would need to be informed on which communication channel each TSO is going to use.*

(b)    which certificates shall be used by 2^nd^ wave parties to configure their local systems for connection to LIP A

-          *No certificates are required for the webgui. TSO that use email as communication channel need to exchange keys as described in MFG410*

(c)     if sFTP users creation can be triggered already before LIP A is configured by JAO/NEMO central admin for 2^nd^ wave respectively before the past LIP A snapshot is uploaded (concern that LIP A snapshot upload will impact these preparations is addressed with this point).

-          *Users, SSH keys and firewall can be prepared. The actual mapping need to be done after the snapshot has been restored* 

 

For transparency reasons please be aware that first Functional Integration Test Run (FIT Run 1) is expected to start immediately after connectivity/integration test , i.e. on 03/12.

-          *Do the NEMOs have a project plan containing the above information that can be shared with DBAG?*

 

Do not hesitate to contact me in case of any questions.

 

Kind regards

David

 

David Myška
 Senior Consultant
 
 E-Bridge Consulting GmbH
 Baumschulallee 15
 53115 Bonn

tel: +49 228 90 90 65 13
fax: +49 228 90 90 65 29
 Mobile: +49 170 7800966

email: +[dmyska@e-bridge.com|mailto:dmyska@e-bridge.com]+ 
 [www.e-bridge.de|http://www.e-bridge.de/]

Sitz: Bonn
 Geschäftsführer: Dr.-Ing. Jens Büchner und Dipl.-Ing. Tuncay Türkucar
 Registergericht: Amtsgericht Bonn, HRB 12932",,cs131,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Oct/18 13:08;cs131;RE PX XBID - LIP Testing  Connectivityintegration test for 2nd wave parties.msg;https://jira.deutsche-boerse.com/secure/attachment/60877/RE+PX+XBID+-+LIP+Testing++Connectivityintegration+test+for+2nd+wave+parties.msg",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,73008000,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yvu:r0000002i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 1,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Oct/18 14:33;cs131;2nd wave support requests list 

https://jira.deutsche-boerse.com/issues/?jql=issuetype%20%3D%20%22Support%20Request%22%20AND%20labels%20%3D%202nd-wave","31/Oct/18 09:19;cs131;this is ongoing task for sftp creation support ticket and user access for second wave. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[Sprint 1] XTG activity support,XP-346,74105,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,cs131,qz412,qz412,25/Oct/18 11:10,06/Nov/20 10:51,22/Feb/21 13:21,01/Nov/18 08:16,,,Pre2020,,,,,,,,,,"XTG Call, recurring every Wednesday at 13:00. agenda is send 30minutes before the call. Responsible [~cs131], [~tm431]. 
 * 31/10/2018 is 30min scheduled to informal feedback from customers regarding 1.5 UAT 
 * meeting minutes review
 * action points review and follow ups
 * distribute tasks from that call",,cs131,qz412,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Oct/18 14:48;cs131;XTG with DBAG MM 20181031.docx;https://jira.deutsche-boerse.com/secure/attachment/61278/XTG+with+DBAG+MM+20181031.docx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,72921600,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y07hew:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 1,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Oct/18 14:49;cs131;meeting minutes received and attached, *https://jira.deutsche-boerse.com/secure/attachment/61278/XTG%20with%20DBAG%20MM%2020181031.docx* - Action points to be distribute to team accordingly ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
UAT 1.5 retrospective Bugs Rootcause ,XP-344,74095,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tm431,tm431,tm431,25/Oct/18 10:01,06/Nov/20 10:51,22/Feb/21 13:21,31/Oct/18 10:10,,,Pre2020,,,,,,,,,,"Outcome will be confluence page or excel file, RCA - code fix, Techops issue.",,tm431,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Oct/18 09:00;xu897;UAT 1.5 RETRO curent fields - added graph.xlsx;https://jira.deutsche-boerse.com/secure/attachment/61233/UAT+1.5+RETRO+curent+fields+-+added+graph.xlsx","29/Oct/18 14:13;tm431;UAT 1.5 RETRO curent fields.xlsx;https://jira.deutsche-boerse.com/secure/attachment/61037/UAT+1.5+RETRO+curent+fields.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,73353600,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000ytp:2g",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 1,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Oct/18 14:53;tm431;final filter:

project = XBID AND affectedVersion in (UAT-XBID-1.5, ""xbid 1.5"", 1.5) AND created > ""2018/08/28"" AND created < ""2018/10/18"" ORDER BY created DESC",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
XBID 1.5 UAT Test completion report and Test protocol,XP-341,74077,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,cs131,rehapav,rehapav,25/Oct/18 08:51,06/Nov/20 10:51,22/Feb/21 13:21,15/Nov/18 09:48,,,Pre2020,,,,,,,,,,"{color:#FF0000}*To be delivered by customers, reviewed by DBAG*{color}

-----

Create, review together with clients and get final sign of for 2 documents
 - UAT 5 Failover Test Protocol
 - UAT 5 Failover Test Completion Rerpot

Example from 1.4:
 S:\Energie\Prod_DEVELOP\002 Test\002 XBid Release\Test Workproducts\XBID 1.4\UAT V

Required inputs:
 - scope for Failvoer test (Niklas / Patrik / Haitham)
 - Execution schedule
 - defect overview

Internal Reviewers: 
 Malina Solomon, Ondrej Strba, Pavel Rehak

Deadline for sending out to the customers: 9/11/2018
----
FYI External reviewers; 
 Eeva Haljukovski, Matthieu Neuport (XTG)",,cs131,qz412,rehapav,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,71971200,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yu9:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 2,Home Office Team Sprint 3 (PS),,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Oct/18 08:52;rehapav;Before you start implementing this report, please contact on 31/10 XTG group during XTG call at 13:00
to clarify if this report is needed.

During XBID 1.0 - 1.4 we generated all reports.
However if I read managerial documents for XBID 1.5, it may be valid that only
Overall UAT Test Compleion report (to be created by XTG) is needed.
Confirm with [~qm925]

In such a case this task is obsolete.","06/Nov/18 09:11;qz412;This is going to be delivered by customers, template already shared with them.

*Review pending*, waiting for the customers to deliver the document.

Task replaced in Sprint by XP-459, effort changed to 0 story points.","12/Nov/18 08:30;cs131;Report has been reviewed and sent to XTG for further confirmation. hence setting ticket status waiting. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Finalise work on DeactOrdersForDlvryArea,XP-324,74007,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,de698,de698,de698,24/Oct/18 11:36,04/Aug/20 19:22,22/Feb/21 13:21,14/Jan/19 14:31,,,Pre2020,,Trading,,,,,R2.0-AgreedFixScope,,,"{color:#de350b}<<<Added to Latent Faults 1.x based on e-mail from Vlada Satek, 31/10/2018>>>{color}

*Current state:*
 External Jira XBID-3870 is InProgress with the last comment from 16/10
{quote}NEMO OPSCOM agreed that related fix should be part of R2.0.
{quote}
{color:#de350b}*!*{color} Internal Jira XDEV-5394 is Closed with fix version 1.5.4 _- this was the item that was reverted from R1.5?_

Analysis of spec.clarification jiras is provided: S:\Energie\Prod_DEVELOP\001 XBID\016 Functional\Issues\XBID-3699

*What needs to be done:*
 * finalise the implementation within the R2.0 (dev+test)
 * external Spec.Clarification Jiras are related to this topic and need to be finished: XBID-3697, XBID-3698, XBID-3699 (follow the analysis indicated above)",,de698,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-3870,XDEV-5394,,,,,,"11/Jan/19 18:13;de698;XBID-3699 et al analysis_new.xlsx;https://jira.deutsche-boerse.com/secure/attachment/64239/XBID-3699+et+al+analysis_new.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,66441600,,,,,,,,,,XP-53,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yrt:000000u",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 10 [S],,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/19 18:08;de698;While analysing the jiras XBID-3697, XBID-3698 and XBID-3699, a latent fault was found and handled in XBID-3870. The fix is delivered with 1.5.4.
 Current behaviour is summarised in the table
||Scenario||DeactOrdersForDlvryArea||DeactOrdersForExchange||
|The message is sent by a PX User For a DA with orders|AckResp
 ErrResp (""Unauthorized"")|AckResp
 OrdrExeRprt
 PblcOrdrBooksDeltaRprt
 DeactOrdersForExchangeResp|
|The message is sent by a PX User For a DA without orders|AckResp
 ErrResp (""Unauthorized"")|AckResp
 DeactOrdersForExchangeResp|
|The message is sent by an Admin For a DA with orders|AckResp
 OrdrExeRprt
 PblcOrdrBooksDeltaRprt|AckResp
 ErrResp (""Unauthorized"")|
|The message is sent by an Admin For a DA without orders|AckResp|AckResp
 ErrResp (""Unauthorized"")|

Following changes need to apply to DFS510:

*Document:* DFS510
 *Chapter:* 5.2.4 System Info request, 5.2.6 AckResp, 5.5.14 Market State Request, 5.5.22 Deactivate Orders for Exchange, 5.7.11 All Members Request
 *Details:* text to be added to each of the listed chapters
{code:java}
The message is sent with Header only.
{code}
XBID-3698: 
 *Document:* DFS510
 *Chapter:* 5.6.7 Deactivate Orders For Exchange Response
 *Details:* Change the title:
{code:java}
5.6.7 Deactivate Orders For Exchange Response (DeactOrdersForExchangeResp){code}
*Chapter:* 5.6.7 Deactivate Orders For Exchange Response 
 *Details:* add text
{code:java}
The message is sent with Header only.
Messages AckResp, OrdrExeRprt, PblcOrdrBooksDeltaRprt, and DeactOrdersForExchangeResp are sent in response when active orders are present for the Exchange.
Only AckResp and DeactOrdersForExchangeResp are sent if there are no orders.
{code}
XBID-3697:
 *Document:* DFS510
 *Chapter:* 5.5.23
 *Details:* chapters 5.5.22 _Deactivate Orders For Exchange_ and 5.6.7 _Deactivate Orders For Exchange Response_ with all its content to be moved under 5.3 _Order Entry and Maintenance_
 *Reason:* the message can be sent by Exchange user only

XBID-3699:
 There is no Resp message to Deactivate Orders for Delivery Area. Implementation of such message would require a change in the API.

*Document:* DFS510
 *Chapter:* 5.3.4 Order Execution Report
 *Details:* add bullet point to list of triggers for sending the OrdrExeRprt
{code:java}
Sending the Deactivate Orders request for Delivery area or Exchange
{code}
*Chapter:* 5.6.6 Deactivate Orders For Delivery Area (DeactOrdersForDlvryArea)
 *Details:* add text
{code:java}
Messages AckResp, OrdrExeRprt, and PblcOrdrBooksDeltaRprt are sent in response when active orders are present for given Delivery Areas.
Only AckResp is sent if there are no orders.
{code}","11/Jan/19 18:14;de698;Test results captured in the attached .xls

Please review internally proposed changes to the specs.","14/Jan/19 14:31;de698;Milan Cech and Franta Odehnal reviewed.

Response sent to customer.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SXS file - adjust backend,XP-298,73933,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ll664,ll664,ll664,23/Oct/18 11:11,04/Aug/20 19:41,22/Feb/21 13:21,06/Dec/18 09:01,,,Pre2020,,,,,,,,,,Adjust backend for cases the file is set for 'All Inteconnectors',,ll664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,73699200,,,,,,,,,,XP-227,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yus:00vz",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 6,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"SHS,SHC files - adjust backend",XP-297,73932,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tr866,ll664,ll664,23/Oct/18 11:10,04/Aug/20 19:41,22/Feb/21 13:21,06/Dec/18 00:25,,,Pre2020,,Shipping,,,,,,,,Adjust file generation for transfer configurations that are set to 'All delivery areas'.,,jy268,ll664,radeale,tr866,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Nov/18 15:18;radeale;DFS310 - Shipping Module File Management v21.00_L0_2_0CRs_MSD_DBAG2.docx;https://jira.deutsche-boerse.com/secure/attachment/63077/DFS310+-+Shipping+Module+File+Management+v21.00_L0_2_0CRs_MSD_DBAG2.docx","05/Dec/18 19:53;tr866;XP-297_SHC,SHS Files_CR ID 18.xlsx;https://jira.deutsche-boerse.com/secure/attachment/63319/XP-297_SHC%2CSHS+Files_CR+ID+18.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,69897600,,,,,,,,,,XP-227,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y07rsv:r",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Ampere Sprint 6,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Nov/18 15:12;radeale;The changes are integrated into the newest version of DFS310:

S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\03 Functional Specifications\DFS310 Shipping Module File Management\DFS310 - Shipping Module File Management v21.00.docx

However the changes can be explicitly seen the in track-changed document - look for the text with notes described as ""Related to CR ID 18"" (also attached - [^DFS310 - Shipping Module File Management v21.00_L0_2_0CRs_MSD_DBAG2.docx]):

S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\03 Functional Specifications\Batch_4\Level 2 review - 5-Sent out\DFS310 - Shipping Module File Management v21.00_L0_2_0CRs_MSD_DBAG2.docx

[~zi174]: Please validate and/or enhance the description as you see fit.","03/Dec/18 15:56;jy268;Change implemented, [~tr866] please test.","05/Dec/18 19:56;tr866;Successfully tested in environment Syt1 with version XB R1.6.0.9-2f3a58d390f1b10d31e9364a7748de4bf383cead, SM 1.5.0.5
The SHC, SHS files are generated with correct filenames and containing the data for trades according to the selected filter selected in the FTC, the document identifier stores the correct value in <mRID> elements. For more details check the attached test model with saved progress [^XP-297_SHC,SHS Files_CR ID 18.xlsx].
","06/Dec/18 00:25;radeale;Thanks, Tomas. It would be nice if you could also attach the test files in case you still has them :)",,,,,,,,,,,,,,,,,,,,,,,,,,,,
[Sprint 1] XBID Support,XP-293,73925,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,cf948,xu897,xu897,23/Oct/18 10:28,06/Nov/20 10:51,22/Feb/21 13:21,01/Nov/18 09:25,,,Pre2020,,,,,,,,,,"XBID responsible team : *Ampere*

See sub-tasks for individual items.

How XBID support works: [http://172.19.250.235:8090/confluence/display/AGILE/XBID+Support+Team]",,xu897,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,73699200,,,,,,,,,,XP-4091,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000ytp:2hi",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Ampere Sprint 1,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Reporting - Implement Volume&Prices data collector,XP-288,73838,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,de698,de698,de698,19/Oct/18 12:23,04/Aug/20 19:40,22/Feb/21 13:21,22/Jan/19 10:46,,,Pre2020,,Trading,,,,,,,,"{color:#172b4d}*Pre-condition:{color} *GO from the customer*{color:#00875a} - ""Unblocked and rolling, expected release of the BA DC late Jan / early Feb, full functionality potentially part of R2.0""{color}

*Background:*

Data required for Volume&Prices indicator reports is available retrospectively for 40 days. This means the functionality needs to be developed and delivered +first week of February at latest+, otherwise the data will be lost.

Implementation does not require any release to production.

Other aspects to the report data processing: collection of data, calculation (e.g. volume weighted prices), aggregation (e.g per contract, product, BZ, month), will be solved in upcoming tasks.

*Task:*

Implement the _Volume & Prices data collector_.

The aim is to collect data that will be later used in following reports:
 * Intraday volumes Indicator 1.1 - Aggregated volumes of all trades made per contract per combination of BZ
 * Intraday volumes - hours to delivery Indicator 1.2 - Traded volumes, grouped per contract with same “delivery time start-end”, per combination of BZs, grouped according to the hours left to delivery and aggregated per month
 * Weighted average intraday prices Indicator 1.3a - Volume-weighted average prices of all trades per contract per BZ (for all contracts under continuous trading and auction; calculation rules defined separately for continuous and auction)
 * Weighted average intraday prices - last trading hour Indicator 1.3b - Volume-weighted average prices of all trades per contract per BZ corresponding to the last trading hour (for all contracts under continuous trading and auction; calculation rules defined separately for continuous and auction) 

 

*What needs to be done:*
 * describe exactly what data will be collected (follow the requirements)
 * decide on the technical solution
 ** standalone? or part of Reporting tool? - {color:#4c9aff}part of Report Tool{color}
 ** how often will the extraction run, e.g. daily from prod copy?
 ** where will be the data stored? design the data structure in target table

 * implement the solution
 * test if the data is
 ** collected correctly (check the DB)
 ** check handling of recalled/cancelled trades, they do not enter the reports
 ** check handling of auction trades
 ** fit for future aggregation and calculation

 * describe the solution in a form suitable for HLC document


*Outcomes:*
 * HLC is prepared and internally reviewed
 * implementation finished
 * relevant data is in place",,de698,rg535,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-962,XP-1237,,,,,,"22/Oct/18 12:42;de698;1_3_intraday_prices_EXAMPLE.xml;https://jira.deutsche-boerse.com/secure/attachment/60694/1_3_intraday_prices_EXAMPLE.xml","18/Jan/19 13:59;de698;ACER Reporting_Phase 2_v1.0.docx;https://jira.deutsche-boerse.com/secure/attachment/64552/ACER+Reporting_Phase+2_v1.0.docx","03/Jan/19 17:46;de698;ACER Reporting_Phase 2_v1.00_draft_NOT SEND OUT.docx;https://jira.deutsche-boerse.com/secure/attachment/64026/ACER+Reporting_Phase+2_v1.00_draft_NOT+SEND+OUT.docx","02/Jan/19 13:09;de698;ACER test scenarios.xlsx;https://jira.deutsche-boerse.com/secure/attachment/63955/ACER+test+scenarios.xlsx","22/Oct/18 12:42;de698;Implementation_Guide_prices_v1r3.pdf;https://jira.deutsche-boerse.com/secure/attachment/60693/Implementation_Guide_prices_v1r3.pdf","22/Oct/18 12:43;de698;prices-0.1.xsd;https://jira.deutsche-boerse.com/secure/attachment/60695/prices-0.1.xsd",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,66096000,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yrt:000000h",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 7,Christmas Sprint 8,Alpha Team Sprint 9,Alpha Team Sprint 10 [S],Alpha Team Sprint 11,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,tomcat-rollback,XP-2942,XP-2506-xbid-dev-env,XP-3025-catalina-timezone,trailing-slash-syt1,master-report-tool-2.2.x,XP-2484,XP-3110-deprecated-log,master,XP-2501-to-xbid-dev-env,traversal-XP-2485,XP-288-weighted-average,report-tool-2.2.x,XP-2488-xbid-dev-env,,,,,,,,,,,,,,,,,,,,true,"09/Nov/18 14:44;rg535;see information provided to customer in XBID-3922","02/Jan/19 15:34;de698;New attachments:
 * test scenarios for VP DC, which should be executed once the implementation is ready
 * first draft of HLC for the phase 2, describing the VP DC; should be finalised within this task","18/Jan/19 14:00;de698;Latest version of HLC document ACER Reporting_Phase 2_v1.0, which was communicated to the customers for review, is attached.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Reporting - Implement Bid-Ask spread data collector,XP-287,73831,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,uv683,de698,de698,19/Oct/18 10:30,04/Aug/20 19:40,22/Feb/21 13:21,14/Nov/18 10:47,,,Pre2020,,Trading,,,,,,,,"{color:#ff8b00}*Wait for the NEMOs decision on 25th October*{color}

*What needs to be done:*
 * develop the functionality
 * verify that correct data is being extracted and stored
 * collected data must be fit for further calculation of the B-A spread (NEMO's example attached)
 * functional description based on XP-272 is provided and needs to be finalised. We keep the description in (external) JIRA

Update: customer accepted the proposal for timing of the snapshot job as suggested to be fixed and set as _x_ minutes after full-hour.
*Questions from customer:* DST impact, Infrastructure details, Performance (confirmation there is none)

---------------------------------------------------------

For the Bid-Ask spread, where in order to capture the input data for calculation, an instantaneous snapshot once per full-hour is required. This can only be achieved with an addition to the current implementation and new functionality has to be developed and implemented.

The new functionality will ensure extracting the information about Bid-Ask spread in the sense: 
 it is the difference between best (highest) bid and best (lowest) ask price per product, contract, BZ, i.e. one value per full-hour will be extracted. For a contract/product/BZ these values from each hour are averaged.

The data will be collected directly from the XBID core by a job running once per hour.
 The job will extract the data from OBK and store them separately in the dedicated part of the database.
 A reporting tool will further on process the prepared data outside of the XBID core.",,de698,rg535,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-1236,,,,,,,"19/Oct/18 10:28;de698;1_3_intraday_prices_EXAMPLE.xml;https://jira.deutsche-boerse.com/secure/attachment/60634/1_3_intraday_prices_EXAMPLE.xml","19/Oct/18 10:22;de698;Implementation_Guide_prices_v1r3.pdf;https://jira.deutsche-boerse.com/secure/attachment/60635/Implementation_Guide_prices_v1r3.pdf","19/Oct/18 10:21;de698;exampleAskBidSpread.xlsx;https://jira.deutsche-boerse.com/secure/attachment/60636/exampleAskBidSpread.xlsx","26/Oct/18 10:17;de698;prices-0.1.xsd;https://jira.deutsche-boerse.com/secure/attachment/60922/prices-0.1.xsd",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,72144000,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yu5:i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 1,Alpha Team Sprint 2,Alpha Team Sprint 3,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Nov/18 14:44;rg535;See information provided to customer in XBID-3922",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Reporting - Analyse the communication channels,XP-285,73814,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,de698,de698,de698,18/Oct/18 17:12,04/Aug/20 19:41,22/Feb/21 13:21,05/Feb/19 15:00,,,Pre2020,,Trading,,,,,,,,"Document describing the communication channels provided by ACER was delivered and is attached.

*Task:*
 * analyse this document
 * +decide on the preferred solution+
 * identify if there are any potential risks, open points, missing information

*Output:* 
 * preferred solution is chosen",,de698,tz118,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Oct/18 17:14;de698;File_exchange_methods.pdf;https://jira.deutsche-boerse.com/secure/attachment/60610/File_exchange_methods.pdf",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,64540800,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yrt:000000j6s",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 12,Alpha Team Sprint 13,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Feb/19 11:35;tz118; Will DBAG communicate reports directly to ACER or to NEMOs (which are responsible to communicate to ACER)? Not sure if this was discussed/decided.","05/Feb/19 15:00;de698;Discussed with the dev team and Suzanna. Proposed specification text will read:
{quote}All generated reports will be stored on the internal DBAG sFTP server in a zip file. User with access rights will be able to download the required reports. The zip file size will be less than 25 MB. Only one file is expected in the archive.

Upload of the reports to ACER sFTP server will be completed by respective NEMOs.
{quote}
Specification will be delivered for internal review on 11th Feb, and for review to NEMOs on 20th Feb and open for discussion.","05/Feb/19 15:17;tz118;very good, one additional question, probably for the different ticket regarding detailed specs -  it is expected to have one  or more users per one NEMO? how Access rights will be managed?(e.g. all users with same rights and permissions?) What does it mean that only one file is expected in the Archive?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SMXBID CLONE: XBR sent at wrong time and wrong day,XP-282,73145,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ll664,ub113,ub113,03/Oct/18 15:24,04/Aug/20 19:22,22/Feb/21 13:21,13/Nov/18 14:58,,,Pre2020,,Shipping,,,,,R2.0-AgreedFixScope,,,"{color:#de350b}<<<Added to Latent Faults 1.x based on e-mail from Vladimir Satek, 31st Oct 2018>>>{color}

Border: DE-AT --> AMP-APG 
 The XBR Files was configured for the fist delivery day 01.10.2018 at 21:45 
 It was expected that the first file would be sent on the 30.09 at 22:00 with the data of the first delivery day 01.10.2018.
 The first file that was sent was on the 30.09.2018 at 00:00 by ECP and at 00:03 by Email.

On the 01.10.2018 an XBR were sent. The first one at 00:21 for the delivery day 30.09.2018 the second one was correct. It contained the correct delivery day 01.10.2018
 It was not expected to receive any XBR with delivery days Prior to 01.10.2018

User: APGTSO01",,ll664,tm431,ub113,,,,,,,,,,,,,,,,,,,,,,,,,SMXBID-947,XBID-3965,,,,,,,,,,,,,,,,"03/Oct/18 15:24;ub113;20180929_XBR_4053_11XID-CAPACITY-9_APG_AMP-APG_100_2.xml;https://jira.deutsche-boerse.com/secure/attachment/60063/20180929_XBR_4053_11XID-CAPACITY-9_APG_AMP-APG_100_2.xml","03/Oct/18 15:24;ub113;2cf92276-482c-417e-a818-0c9f1dd36ef4.xml;https://jira.deutsche-boerse.com/secure/attachment/60064/2cf92276-482c-417e-a818-0c9f1dd36ef4.xml","03/Oct/18 15:24;ub113;Sent Files XBR.JPG;https://jira.deutsche-boerse.com/secure/attachment/60065/Sent+Files+XBR.JPG","03/Oct/18 15:24;ub113;XBR configuration.JPG;https://jira.deutsche-boerse.com/secure/attachment/60066/XBR+configuration.JPG","03/Oct/18 15:24;ub113;f63c45ea-205d-45ce-aac0-85354de948a2.xml;https://jira.deutsche-boerse.com/secure/attachment/60067/f63c45ea-205d-45ce-aac0-85354de948a2.xml",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Implementation done.
Test passed.",,,,,,,, Minor Incident,,75340800,,,,,,,,,,XP-53,,,,,,,,,,,,,,16/Oct/18 11:20,,,,,,,,,,,,,,,,,,,,,"1|000yu5:w",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 2,Alpha Team Sprint 3,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Oct/18 15:24;ana.jordallopis@apg.at;

[^20180929_XBR_4053_11XID-CAPACITY-9_APG_AMP-APG_100_2.xml] _(28 kB)_

[^2cf92276-482c-417e-a818-0c9f1dd36ef4.xml] _(28 kB)_

!Sent Files XBR.JPG!

!XBR configuration.JPG!

[^f63c45ea-205d-45ce-aac0-85354de948a2.xml] _(28 kB)_","03/Oct/18 15:24;ub113;Hello [~ana.jordallopis@apg.at],
We are looking into this.","03/Oct/18 16:21;ub113;EPEX writes:
""From EPEX side, we experienced similar issue where the TNG-APG and TTG-APG SXS files were sent not according to configuration for 1st delivery day 01.10.2018, however the SXS sent was at 2018-10-01 at 00:00 with delivery 20180930. As EPEX we would also like to know why this behaviour was shown.""","03/Oct/18 16:58;ll664;Bug confirmed. For any frequency based file transfer configuration, the initial generation time is not respected, but first file is generated on midnight of the day the generation should start with content of yesterday's delivery day.

Please communicate towards customer and indicate how to proceed further.","04/Oct/18 09:35;ub113;Hello [~ll664], I notified customers about your findings. I opened a bug  XBID-3965 regarding this issue. ",,,,,,,,,,,,,,,,,,,,,,,,,,,
Block Order - possible to create with closed contract   ,XP-280,73629,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,radeale,hj444,hj444,15/Oct/18 13:48,04/Aug/20 19:21,22/Feb/21 13:21,14/Jan/19 16:33,,,Pre2020,,Trading,,,,,R2.0-AgreedFixScope,,,"{color:#de350b}<<<Added to Latent Faults 1.x based on e-mail from Vlada Satek, 31/10/2018>>>{color}
 # Login like Admin Into SOB
 # Halt contract 18-19 for Delivery Area APG/Intraday product
 # Run Test Client
 ** contract 18-19 is grey-inactive
 # Create BUY Block Order and use within the block closed contract
 # Use APG for delivery area
 # Submit
 ** Expected : block order is not created
 ** Actual : block order is created

note:
 # After creating SEND Block order-opposite to previously created BUY, Trade is executed.
 # _creating order only with closed contract - validation of closed contract appears and order is not created_

_from doc : HLS100 Functional Description Trading Module_
 _The contract of the order must be in status “Active”. Orders for user-defined block contracts can only be submitted if all underlying predefined contracts are in status “Active”. Note: If a delivery area or market area is set to “Halt”, all contracts of these entities are set to status “Halt”_

pictures added

tested : 
 SYT1: Version R1.5.8-ab8e53121ac115fb25f9f9620eaf14619338f0e4
 SYT2: Version R1.4.10.8-263a80952cdd3b67dcf8d638f45df97c0f8c4",,eg288,hj444,radeale,rehapav,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Oct/18 13:47;hj444;blockOrders.png;https://jira.deutsche-boerse.com/secure/attachment/60449/blockOrders.png","15/Oct/18 13:47;hj444;blockTrade.png;https://jira.deutsche-boerse.com/secure/attachment/60448/blockTrade.png","16/Oct/18 10:08;hj444;trade_closedContractsInBlock.png;https://jira.deutsche-boerse.com/secure/attachment/60480/trade_closedContractsInBlock.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,66441600,,,,,,,,,,XP-53,,,,,,,,,,,,,,15/Oct/18 13:48,,,,,,,,,,,,,,,,,,,,,"1|000yrt:3i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Ampere Sprint 9,Ampere Sprint 10,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Oct/18 09:54;hj444;[~rehapav] please consider latent fault of 1.5.","16/Oct/18 10:03;rehapav;Latent fault announced to clients - see linked ticket, I personally expect this will make it earleist into XBID 2.0 scoping

 ","16/Oct/18 10:08;hj444;* Test Case2:
# In SOB : Close 2 contracts (15-16, 16-17) for DA APG
# In Test Client Submit BUY block order 15-17,  from closed contracts - 15-16,16-17
** Expected : Block order will not be created.
** Actual : Block order is successfully created
# Create SELL block order 15-17,  from closed contracts - 15-16,16-17
# Trade (on closed contracts ) is executed

picture added","11/Jan/19 16:12;eg288;fixed -> please test","14/Jan/19 16:32;radeale;Test OK on SYST2, XBID vR1.6.0.21:
- It is not possible to create a block order when an underlying contract in the DA is HIBErnated
- When an underlying contract is hibernated, the block order utilizing the contract is deactivated
- When an underlying contract is activated, the block order utilizing the contract is not re-activated",,,,,,,,,,,,,,,,,,,,,,,,,,,
MFG500 - Respond to review comments,XP-277,73587,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,qz412,qz412,12/Oct/18 13:13,04/Aug/20 19:41,22/Feb/21 13:21,30/Nov/18 12:58,,,Pre2020,,AlarmTilt,,,,,,,,"There are 2 comments inserted by the customers that need DBAG's reaction.

Please visit XBID-3599, study the comments in the latest version provided by Jirka Zavada and provide reaction to the same ticket.",,qz412,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,74649600,,,,,,,,,,XP-174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yu3:i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Ampere Sprint 2,Ampere Sprint 6,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Solution and impact analysis,XP-275,73581,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,qz412,qz412,12/Oct/18 12:32,04/Aug/20 19:41,22/Feb/21 13:21,01/Nov/18 09:29,,,Pre2020,,Shipping,,,,,,,,,,qz412,,,,,,,,,,,,,,,,,86400,86400,,0%,86400,86400,50400,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,74649600,,,,,,,,,,XP-227,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000ytp:2c",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 1,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
UI for aggregated SA/CCP files,XP-274,73580,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,qz412,qz412,12/Oct/18 12:29,04/Aug/20 19:41,22/Feb/21 13:21,01/Nov/18 09:29,,,Pre2020,,Shipping,,,,,,,,"When creating a file transfer configuration enable grouping:
 * for SHC, SHS - 'All Delivery Areas' or 'Per delivery area'
 * for SXS - 'All Interconnectors' or 'Per interconnector'

 

Do not adjust backend, that is separate task, FTC with such a configuration should generate file with header only (no timeseries) at the moment.",,ll664,qz412,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,73699200,,,,,,,,,,XP-227,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000ytp:2f",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 1,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Oct/18 15:26;qz412;Dear Dave, pls split. Thx, Ondra.","23/Oct/18 11:09;ll664;Split, ignore subtasks.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Blank point removal,XP-273,73579,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,qz412,qz412,12/Oct/18 12:23,14/Nov/18 18:31,22/Feb/21 13:21,14/Nov/18 18:31,,,SM-1.5.0.5,,Shipping,,,,,,,,"Change description: 
 SA/CCP files will not include blank spots (points with 0 trading allocations)",,qz412,,,,,,,,,,,,,,,,,86400,86400,,0%,86400,86400,,,,,,,,,,,,,,,XP-577,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,74649600,,,,,,,,,,XP-223,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yus:97",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Ampere Sprint 3,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Reporting - Decide on architecture solution,XP-272,73575,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,qz412,de698,de698,12/Oct/18 11:40,04/Aug/20 19:40,22/Feb/21 13:21,19/Oct/18 15:17,,,Pre2020,,Trading,,,,,,,,"XP-152 assessment shows that 1) data for ID volumes and ID price reports can be retrieved retrospectively, but 2) data needed for Bid-Ask spread require significant development work.

Task is to discuss and *decide on the implementation approach* to data collection.

Identified options:
 # daily collection of data from production database -> solution requires changes in the core; a minor release in December needs to be allowed
 # listening to amqp messages and reconstructing the OBK

Potential performance impact of discussed options should be provided.

Discussion: 15.10.2019  14:00",,de698,qz412,rg535,tz118,uv683,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,73958400,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yvu:r0000009",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Oct/18 11:20;de698;+Results from the discussion+
 *Main goal is:* have the functionality for B-A spread data extraction fully ready before the 1st of January 2019.
 *Output is:* relevant data is stored in the database.

+*Functional description:*+ _first slice of functionality that needs to be implemented before ethe nd of the year._
 Analysis of the requirements identified that collecting the data for indicators on volumes and prices is possible retrospectively without any changes to the current implementation. Different situation occurs for Bid-Ask spread where in order to capture the input data for calculation, instantaneous snapshot once per full-hour is required.
 This can only be achieved with an addition to the current implementation and new functionality has to be developed and implemented.
 New functionality will ensure extracting the information about Bid-Ask spread in the sense: it is the difference between best (highest) bid and best (lowest) ask price per product, contract, BZ, i.e. one value per full-hour will be extracted. For a contract/product/BZ these values from each hour are averaged.

The data will be collected directly from the XBID core by a job running once per hour.
 The job will extract the data from OBK and store them separately in the dedicated part of the database.
 Reporting tool will further on process the prepared data outside of the XBID core.

Instructions for the calculation are as per the _CACM-monitoring-Detailed_Data_Description_v2_ provided by customer:
{quote}The calculation requires to take instantaneous snapshot (one per full-hour) of the active orders at different points in time during the trading period of a given contract and average out the bid-ask spreads corresponding to these snapshots.
 Note:
 · If there are no active orders on one or both of the sell and the buy side of the market for a snapshot, the snapshot is not considered for the calculation of average to be reported.
 · If there are no orders for the whole trading period of a contract, the value is not reported at all for the specific contract.
{quote}
+*Potential impact:*+
 Deployment to production will be required in a minor release latest in beginning of December.
 Targeted area is the XBID core.
 Performance impact after the change is not expected.

*+Timeline:+*
 # When can we start?
 # In what time are we able to develop&test it on our side? - 5MD is the estimation for creating the task/job only. Testing effort is not included.
 # How much time is needed for the customers to test it?
 # Latest possible deploy is 1st week of December?

*+Further clarification:+*
 # Timing of the snapshot taking is not explicitly given. We assume there is no strong preference at what minute of the hour the job runs.
 # Exchange disputes are not supported within this functionality.
 # Test environments need to be agreed.
 # How are we going to provide the first functionality outputs to customers for test? Some communication channel has to be in place already?

 ","16/Oct/18 11:33;tz118;just few comments/question, otherwise very well written
*  what is SOB core? don't we say XBID core?
* this part provides solution, seems to soon to provide such a detail about implementation at this stage
The data will be collected directly from the SOB core by a job running once per hour.
The job will extract the data from OBK and store them separately in the dedicated part of the database.
Reporting tool will further on process the prepared data outside of the SOB core.","16/Oct/18 12:39;rg535;Thank you for the details. I will discuss the release needed by beginning of December with the customers. After this discussion, I will provide you with feedback and then I will start to draft a commercial offer for the customers. I will discuss the commercial offer with you prior to releasing it to the PXs / TSOs.","16/Oct/18 14:12;qz412;Dear all - Thank you, I have slightly changed the formulation, suggestion is below. Feel free to accept/reject and please put to XBID-3922 by EOB today. Ondra
----
+Results from the discussion+
 *Main goal is:* have the functionality for B-A spread data extraction fully ready before the 1st of January 2019.
 *Output is:* relevant data is stored in the database.

+*Functional description:*+ _first slice of functionality that needs to be implemented before ethe nd of the year._
 Analysis of the requirements identified that collecting the data for indicators on volumes and prices is possible retrospectively without any changes to the current implementation. Different situation occurs for Bid-Ask spread where in order to capture the input data for calculation, instantaneous snapshot once per full-hour is required.
 This can only be achieved with an addition to the current implementation and new functionality has to be developed and implemented.
 New functionality will ensure extracting the information about Bid-Ask spread in the sense: it is the difference between best (highest) bid and best (lowest) ask price per product, contract, BZ, i.e. one value per full-hour will be extracted. For a contract/product/BZ these values from each hour are averaged.

The data will be collected directly from the XBID core by a job running once per hour.
 The job will extract the data from OBK and store them {color:#de350b}-separately in the dedicated part of the database.-{color}
 {color:#de350b}A{color} reporting tool will further on process the prepared data outside of the XBID core.

Instructions for the calculation are as per the _CACM-monitoring-Detailed_Data_Description_v2_ provided by -{color:#de350b}customer{color}- {color:#de350b}NEMOs{color}:
{quote}The calculation requires to take instantaneous snapshot (one per full-hour) of the active orders at different points in time during the trading period of a given contract and average out the bid-ask spreads corresponding to these snapshots.
 Note:
 · If there are no active orders on one or both of the sell and the buy side of the market for a snapshot, the snapshot is not considered for the calculation of average to be reported.
 · If there are no orders for the whole trading period of a contract, the value is not reported at all for the specific contract.
{quote}
+*{color:#de350b}-Potential- {color}Impact:*+
 Deployment to production will be required in a minor release latest in beginning of December.
 Targeted area is the XBID core.
 Performance impact after the change is not expected.
----
{color:#de350b}This is apparently for internal purposes, please do not put to XBID-3922{color} :)

{color:#de350b}▼▼▼{color}

*+Timeline:+*
 # When can we start?
 # In what time are we able to develop&test it on our side? - 5MD is the estimation for creating the task/job only. Testing effort is not included.
 # How much time is needed for the customers to test it?
 # Latest possible deploy is 1st week of December?

*+Further clarification:+*
 # Timing of the snapshot taking is not explicitly given. We assume there is no strong preference at what minute of the hour the job runs.
 # Exchange disputes are not supported within this functionality.
 # Test environments need to be agreed.
 # How are we going to provide the first functionality outputs to customers for test? Some communication channel has to be in place already?","17/Oct/18 09:59;rg535;The text has been added to the external jira. However, we still need to provide them answer to the following questions today (17.10.2018):
# When could we start with development?
# How much effort is need for DBAG's test activities? (rough estimate)
# When can we deliver a specification to the PXs or update of a current spec? Which specification would be affected?
# When could we deliver it to the customer for test activities? Could they test anything specific or would they just need to a general shakedown of the Solution?
# Is it possible for us to provide them with our test cases?
","17/Oct/18 12:10;de698;Discussed within the team:
 # When could we start with development? {color:#4c9aff}- we can start now according to the dev{color}
 # How much effort is need for DBAG's test activities? (rough estimate) {color:#4c9aff}- estimation is 1 team in 1 sprint = 7 x 5MD = 35MD (consider this rough estimate) {color:#ff8b00}*UPDATE: see XP-287 with estimate 8 Story Points (2 people x 4 days)*{color}{color}
 # When can we deliver a specification to the PXs or update of a current spec? Which specification would be affected? - we propose to describe ACER reporting functionality in a separate document. Only the first part of the document describing the B-A spread data collection can be provided before EoY.
 # When could we deliver it to the customer for test activities? Could they test anything specific or would they just need to a general shakedown of the Solution? {color:#4c9aff}- delivery for testing: mid-November. Recommendation for testing: general shakedown, regression test if considered necessary.{color}
 # Is it possible for us to provide them with our test cases? {color:#4c9aff}- no specific test cases can be provided, as the customers will not see any changes in the frontend.{color}","19/Oct/18 15:17;qz412;Solution agreed, communicated to the customers, closing.",,,,,,,,,,,,,,,,,,,,,,,,,
Slow respons in Users Form SPM,XP-268,66809,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Fixed,tm431,tm431,tm431,29/Mar/18 14:17,11/Sep/20 14:13,22/Feb/21 13:21,03/Apr/18 13:39,,,Pre2020,,Shipping,,,,,,,,"Some fields in Modify new user in SPM have very slow response on typing. e.g. modification of email address must be typed really slow.(x)

Saving of changes works OK.(/)

ver. SPM 1.0.26

 

 ",,tm431,ym281,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,89424000,,,,,,,,,,XP-53,,,,,,,,,,,,,,29/Mar/18 14:11,,,,,,,,,,,,,,,,,,,,,"1|y06c4w:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Apr/18 13:07;ym281;caused by trying to fix XDEV-4642","03/Apr/18 13:39;ym281;the bug was introduced with some changes made in order to try to fix XDEV-4642, those changes were reverted, since this bug should not be valid anymore","24/Apr/18 14:13;tm431;Works OK. Retested in SyT3 ver. 1.0.28",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Order creation - missing clOrdrId attribute,XP-267,72735,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,cf948,de698,de698,21/Sep/18 11:49,04/Aug/20 19:22,22/Feb/21 13:21,11/Jan/19 16:40,,,Pre2020,,Trading,,,,,R2.0-AgreedFixScope,,,"We send this basket - it contains 6 orders (2 valid, 2 with invalid contracts, 2 with invalid display qty )
{code:java}
<?xml version=""1.0"" encoding=""UTF-8""?><ns2:OrdrEntry xmlns:ns2=""http://www.deutsche-
boerse.com/m7/v1"" listExecInst=""NONE"">
    <ns2:StandardHeader marketId=""XSOB""/>
    <ns2:OrdrList>
        <ns2:Ordr acctId=""BG-GER--------01"" contractId=""32568"" side=""BUY"" px=""100"" qty=""10000"" displayQty=""5000"" ordrExeRestriction=""NON"" txt=""100457348"" dlvryAreaId=""10YDE-VE-------2"" clOrdrId=""lvitasekw10_1537511892626_25"" type=""I"" validityRes=""GFS"" state=""ACTI""/>
        <ns2:Ordr acctId=""BG-GER--------01"" contractId=""32568"" side=""BUY"" px=""100"" qty=""10200"" displayQty=""5000"" ordrExeRestriction=""NON"" txt=""100457349"" dlvryAreaId=""10YDE-VE-------2"" clOrdrId=""lvitasekw10_1537511892626_26"" type=""I"" validityRes=""GFS"" state=""ACTI""/>

        <!—invalid contract -->
        <ns2:Ordr acctId=""BG-GER--------01"" contractId=""-123"" side=""BUY"" px=""100"" qty=""10300"" displayQty=""5000"" ordrExeRestriction=""NON"" txt=""100457350"" dlvryAreaId=""10YDE-VE-------2"" clOrdrId=""lvitasekw10_1537511892626_27"" type=""I"" validityRes=""GFS"" state=""ACTI""/>
        <ns2:Ordr acctId=""BG-GER--------01"" contractId=""-123"" side=""BUY"" px=""100"" qty=""10400"" displayQty=""5000"" ordrExeRestriction=""NON"" txt=""100457351"" dlvryAreaId=""10YDE-VE-------2"" clOrdrId=""lvitasekw10_1537511892626_28"" type=""I"" validityRes=""GFS"" state=""ACTI""/>

        <!—invalid display qty -->
        <ns2:Ordr acctId=""BG-GER--------01"" contractId=""32568"" side=""BUY"" px=""100"" qty=""10500"" displayQty=""100"" ordrExeRestriction=""NON"" txt=""100457352"" dlvryAreaId=""10YDE-VE-------2"" clOrdrId=""lvitasekw10_1537511892626_29"" type=""I"" validityRes=""GFS"" state=""ACTI""/>
        <ns2:Ordr acctId=""BG-GER--------01"" contractId=""32568"" side=""BUY"" px=""100"" qty=""10600"" displayQty=""100"" ordrExeRestriction=""NON"" txt=""100457353"" dlvryAreaId=""10YDE-VE-------2"" clOrdrId=""lvitasekw10_1537511892626_30"" type=""I"" validityRes=""GFS"" state=""ACTI""/>
    </ns2:OrdrList>
</ns2:OrdrEntry>
{code}
We received 1 Acknowledge:
{code:java}
<?xml version=""1.0"" encoding=""UTF-8""?><AckResp xmlns=""http://www.deutsche-boerse.com/m7/v1"">
    <StandardHeader marketId=""XSOB""/>
</AckResp>
{code}
{color:#ff0000}+Then we received only 1 ErrResp:+{color}
{code:java}
<?xml version=""1.0"" encoding=""UTF-8""?>
<ErrResp xmlns=""http://www.deutsche-boerse.com/m7/v1"">
    <StandardHeader marketId=""XSOB""/>
    <Error err=""Contract -123 not found."" errCode=""2022""/>
</ErrResp>
{code}
Documentation says that all orders are treated independently.
 According this we expect:
 * 4 invalid orders in ErrResp
 * 2 valid orders in OrdrExeRprt

Environment is Individual Cute 10.",,de698,eg288,eh941,qz412,radeale,rehapav,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-3955,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,66700800,,,,,,,,,,XP-53,,All validations are done separately now.,,,,,,,,,,,,21/Sep/18 11:46,,,,,,,,,,,,,,,,,,,,,"1|y07vfx:",9223372036854775807,,,,,,,,,,,The input data validation was done differently for contract ID and Product. When any of those two attribute was invalid the whole basket was rejected and only one {{ErrResp}} broadcast was sent,,,,,,,,,,,,Ampere Sprint 10,,,,,,,,,,,,,,,,1.0,,,,,,,CreateOrderIntegrationTest,"Try to create orders from a basket which contains both valid and invalid data. Relevant invalid data is wrong product or wrong contract ID. Of course you can test other restrictions, like price, quantity etc.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Sep/18 11:39;eh941;MR - https://github.deutsche-boerse.de/dev/xbid/pull/195
When MR review passes I'll create a version to develop branch","25/Sep/18 12:54;eg288;[~rehapav], [~cs131] - shall the fix be included in xbid-1.5.x?","25/Sep/18 14:53;rehapav;[~eg288] please wait I have asked clients in external ticket for confirmation.","08/Oct/18 16:29;rehapav;Deliver into 1.6, do not merge into 1.5

 ","15/Oct/18 15:37;qz412;In 1.6 => Done from perspective of R2.0. Putting the ticket to Resolved.

Test once XB-1.6.x is released.","11/Jan/19 16:38;radeale;Test OK with XBID-16.0.18, SYST2.

Correct error messages received.

Sent message:

{code}<?xml version=""1.0"" encoding=""UTF-8""?>
<OrdrEntry xmlns=""http://www.deutsche-boerse.com/m7/v1"" listExecInst=""NONE"">
    <StandardHeader marketId=""XSOB""/>
    <OrdrList>
        <Ordr acctId=""BG-NP---------01"" contractId=""2127"" side=""BUY"" px=""100"" qty=""300000"" displayQty=""25000"" ordrExeRestriction=""NON"" txt=""100457348"" dlvryAreaId=""10YDK-1--------W"" clOrdrId=""xxyy_25"" type=""I"" validityRes=""GFS"" state=""ACTI""/>
        <Ordr acctId=""BG-NP---------01"" contractId=""2141"" side=""BUY"" px=""100"" qty=""300000"" displayQty=""25000"" ordrExeRestriction=""NON"" txt=""100457349"" dlvryAreaId=""10YDK-1--------W"" clOrdrId=""xxyy_26"" type=""I"" validityRes=""GFS"" state=""ACTI""/>

        <Ordr acctId=""BG-NP---------01"" contractId=""-123"" side=""BUY"" px=""100"" qty=""1030"" displayQty=""5000"" ordrExeRestriction=""NON"" txt=""100457350"" dlvryAreaId=""10YDK-1--------W"" clOrdrId=""xxyy_27"" type=""I"" validityRes=""GFS"" state=""ACTI""/>
        <Ordr acctId=""BG-NP---------01"" contractId=""-123"" side=""BUY"" px=""100"" qty=""1040"" displayQty=""5000"" ordrExeRestriction=""NON"" txt=""100457351"" dlvryAreaId=""10YDK-1--------W"" clOrdrId=""xxyy_28"" type=""I"" validityRes=""GFS"" state=""ACTI""/>

        <Ordr acctId=""BG-NP---------01"" contractId=""32568"" side=""BUY"" px=""100"" qty=""1050"" displayQty=""100"" ordrExeRestriction=""NON"" txt=""100457352"" dlvryAreaId=""10YDK-1--------W"" clOrdrId=""xxyy_29"" type=""I"" validityRes=""GFS"" state=""ACTI""/>
        <Ordr acctId=""BG-NP---------01"" contractId=""32568"" side=""BUY"" px=""100"" qty=""1060"" displayQty=""100"" ordrExeRestriction=""NON"" txt=""100457353"" dlvryAreaId=""10YDK-1--------W"" clOrdrId=""xxyy_30"" type=""I"" validityRes=""GFS"" state=""ACTI""/>
    </OrdrList>
</OrdrEntry>{code}

Received error message:
{code}<?xml version=""1.0"" encoding=""UTF-8""?>
<ErrResp xmlns=""http://www.deutsche-boerse.com/m7/v1"">
    <StandardHeader marketId=""XSOB""/>
    <Error err=""Contract -123 not found."" errCode=""2022"" clOrdrId=""xxyy_27""/>
    <Error err=""Contract -123 not found."" errCode=""2022"" clOrdrId=""xxyy_28""/>
    <Error err=""Contract 32568 not found."" errCode=""2022"" clOrdrId=""xxyy_29""/>
    <Error err=""Contract 32568 not found."" errCode=""2022"" clOrdrId=""xxyy_30""/>
</ErrResp>{code}

Received confirmation messages:
{code}<?xml version=""1.0"" encoding=""UTF-8""?>
<OrdrExeRprt xmlns=""http://www.deutsche-boerse.com/m7/v1"">
    <StandardHeader marketId=""XSOB""/>
    <OrdrList>
        <Ordr ordrId=""160"" initialOrdrId=""160"" acctId=""BG-NP---------01"" contractId=""2127"" side=""BUY"" px=""100"" ppd=""0"" qty=""25000"" hiddenQty=""275000"" displayQty=""25000"" initialQty=""300000"" ordrExeRestriction=""NON"" txt=""100457348"" dlvryAreaId=""10YDK-1--------W"" clOrdrId=""xxyy_25"" preArranged=""false"" type=""I"" state=""ACTI"" usrCode=""Asdsfs"" revisionNo=""1"" timestmp=""2019-01-11T15:35:38.764Z"" validityDate=""2019-01-11T18:00:00.000Z"" validityRes=""GFS"" action=""UADD"" lastUpdateUsrInfo=""BG-NP---------01Asdsfs""/>
        <Ordr ordrId=""161"" initialOrdrId=""161"" acctId=""BG-NP---------01"" contractId=""2141"" side=""BUY"" px=""100"" ppd=""0"" qty=""25000"" hiddenQty=""275000"" displayQty=""25000"" initialQty=""300000"" ordrExeRestriction=""NON"" txt=""100457349"" dlvryAreaId=""10YDK-1--------W"" clOrdrId=""xxyy_26"" preArranged=""false"" type=""I"" state=""ACTI"" usrCode=""Asdsfs"" revisionNo=""1"" timestmp=""2019-01-11T15:35:38.764Z"" validityDate=""2019-01-11T19:00:00.000Z"" validityRes=""GFS"" action=""UADD"" lastUpdateUsrInfo=""BG-NP---------01Asdsfs""/>
    </OrdrList>
</OrdrExeRprt>

<?xml version=""1.0"" encoding=""UTF-8""?>
<PblcOrdrBooksDeltaRprt xmlns=""http://www.deutsche-boerse.com/m7/v1"">
    <StandardHeader marketId=""XSOB""/>
    <OrdrbookList>
        <OrdrBook contractId=""2127"" dlvryAreaId=""10YDK-1--------W"" totalQty=""0"" pxDir=""0"" revisionNo=""8"">
            <BuyOrdrList>
                <OrdrBookEntry ordrId=""160"" qty=""25000"" px=""100"" ordrEntryTime=""2019-01-11T15:35:38.764Z""/>
            </BuyOrdrList>
        </OrdrBook>
        <OrdrBook contractId=""2127"" dlvryAreaId=""10YDE-EON------1"" totalQty=""0"" pxDir=""0"" revisionNo=""8"">
            <BuyOrdrList>
                <OrdrBookEntry ordrId=""160"" qty=""25000"" px=""100"" ordrEntryTime=""2019-01-11T15:35:38.764Z""/>
            </BuyOrdrList>
        </OrdrBook>
        <OrdrBook contractId=""2127"" dlvryAreaId=""10YDE-VE-------2"" totalQty=""0"" pxDir=""0"" revisionNo=""8"">
            <BuyOrdrList>
                <OrdrBookEntry ordrId=""160"" qty=""25000"" px=""100"" ordrEntryTime=""2019-01-11T15:35:38.764Z""/>
            </BuyOrdrList>
        </OrdrBook>
        <OrdrBook contractId=""2127"" dlvryAreaId=""10YDE-RWENET---I"" totalQty=""0"" pxDir=""0"" revisionNo=""8"">
            <BuyOrdrList>
                <OrdrBookEntry ordrId=""160"" qty=""25000"" px=""100"" ordrEntryTime=""2019-01-11T15:35:38.764Z""/>
            </BuyOrdrList>
        </OrdrBook>
        <OrdrBook contractId=""2127"" dlvryAreaId=""10YDE-ENBW-----N"" totalQty=""0"" pxDir=""0"" revisionNo=""8"">
            <BuyOrdrList>
                <OrdrBookEntry ordrId=""160"" qty=""25000"" px=""100"" ordrEntryTime=""2019-01-11T15:35:38.764Z""/>
            </BuyOrdrList>
        </OrdrBook>
        <OrdrBook contractId=""2141"" dlvryAreaId=""10YDK-1--------W"" lastPx=""600"" lastQty=""6000"" totalQty=""6000"" lastTradeTime=""2019-01-11T14:33:38.454Z"" pxDir=""0"" revisionNo=""8"" highPx=""600"" lowPx=""600"">
            <BuyOrdrList>
                <OrdrBookEntry ordrId=""161"" qty=""25000"" px=""100"" ordrEntryTime=""2019-01-11T15:35:38.764Z""/>
            </BuyOrdrList>
        </OrdrBook>
        <OrdrBook contractId=""2141"" dlvryAreaId=""10YDE-EON------1"" lastPx=""600"" lastQty=""6000"" totalQty=""6000"" lastTradeTime=""2019-01-11T14:33:38.454Z"" pxDir=""0"" revisionNo=""8"" highPx=""600"" lowPx=""600"">
            <BuyOrdrList>
                <OrdrBookEntry ordrId=""161"" qty=""25000"" px=""100"" ordrEntryTime=""2019-01-11T15:35:38.764Z""/>
            </BuyOrdrList>
        </OrdrBook>
        <OrdrBook contractId=""2141"" dlvryAreaId=""10YDE-VE-------2"" lastPx=""600"" lastQty=""6000"" totalQty=""6000"" lastTradeTime=""2019-01-11T14:33:38.454Z"" pxDir=""0"" revisionNo=""8"" highPx=""600"" lowPx=""600"">
            <BuyOrdrList>
                <OrdrBookEntry ordrId=""161"" qty=""25000"" px=""100"" ordrEntryTime=""2019-01-11T15:35:38.764Z""/>
            </BuyOrdrList>
        </OrdrBook>
        <OrdrBook contractId=""2141"" dlvryAreaId=""10YDE-RWENET---I"" lastPx=""600"" lastQty=""6000"" totalQty=""6000"" lastTradeTime=""2019-01-11T14:33:38.454Z"" pxDir=""0"" revisionNo=""8"" highPx=""600"" lowPx=""600"">
            <BuyOrdrList>
                <OrdrBookEntry ordrId=""161"" qty=""25000"" px=""100"" ordrEntryTime=""2019-01-11T15:35:38.764Z""/>
            </BuyOrdrList>
        </OrdrBook>
        <OrdrBook contractId=""2141"" dlvryAreaId=""10YDE-ENBW-----N"" lastPx=""600"" lastQty=""6000"" totalQty=""6000"" lastTradeTime=""2019-01-11T14:33:38.454Z"" pxDir=""0"" revisionNo=""8"" highPx=""600"" lowPx=""600"">
            <BuyOrdrList>
                <OrdrBookEntry ordrId=""161"" qty=""25000"" px=""100"" ordrEntryTime=""2019-01-11T15:35:38.764Z""/>
            </BuyOrdrList>
        </OrdrBook>
    </OrdrbookList>
</PblcOrdrBooksDeltaRprt>{code}",,,,,,,,,,,,,,,,,,,,,,,,,,
SPM GUI doesen't stay responsive while looking through files (use case discussion with the customers),XP-264,59030,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Cannot Reproduce,,rehapav,rehapav,24/Jul/17 21:17,14/Aug/20 14:43,22/Feb/21 13:21,14/Aug/20 14:43,,,3.1.0,,Shipping,,,,,,,," 
Steps to reproduce:

1) Have FTCs for SPM

2) Select one file type and start browsing down the list

3) Keep scrolling until the issue occurs.

Expected result:The GUI stays responsive and loads all the files saved

Current result: The GUI stops loading the files after the 5 hours files are loaded

Tested with TC4180",,ll664,qz412,rehapav,,,,,,,,,,,,,,,,,,,,,,,,,XBID-2453,,,,,,,,,,,,,,,,,"24/Jul/17 21:17;rehapav;GUI_loading_bug.png;https://jira.deutsche-boerse.com/secure/attachment/44852/GUI_loading_bug.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,72403200,,,,,,,,,,XP-53,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y07czz:zzy",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/18 08:17;rehapav;Increasing to minor as I find this annoying to user - can we easily fix this?","11/Jan/18 15:22;ll664;Pavel, I tried to reproduce this one, and even when scrolled huge amount of pages down, the application felt pretty responsive (though bit slower, I must admit).

However I did try this on Firefox and Chrome, I don't have access to IE.

We can fix this one, but it would be huge effort, with serious impact on the UI, as the core grid component would need to be modified.

 

Anyway, what is the use case of a man scrolling thousand pages down?

Apart from trying to kill his browser, I think he might be looking for particular file. If that is the case, we can implement additional filter, as currently we search only by filename and recipient. That would be much safer and with lower effort, but we need to know what they need to filter first.","28/Mar/18 12:12;rehapav;Wont do at the moment.","11/Oct/18 17:57;qz412;Customers' reaction.

Should be considered for R2.0.
In order to be coherent ITTF recommends the behaviour is checked with use of IE. ITTF recommends the issue is fixed assuming the behaviour is still noticed. ITTF would also appreciate to get more information on “serious impact on the UI” mentioned by DBAG before the implementation","07/Nov/18 09:10;qz412;Communication to the customers in XBID-4097:

This item can be delivered with R2.0 into UAT only if further discussion on how to fix is concluded by end of November 2018. DBAG needs to understand the use case of infinite scrolling, may propose a fix based on additional filtering.",,,,,,,,,,,,,,,,,,,,,,,,,,,
EXT: Icons disappear after refresh in SM,XP-263,59011,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Trivial,Done,jy268,sv648,sv648,24/Jul/17 14:51,11/Sep/20 14:13,22/Feb/21 13:21,21/Nov/18 14:04,,,Pre2020,,Shipping,,,,,,,,"This bug was encountered using Internet Explorer v11

1/Log into the shipping module (with SA operations rights) 

2/ go in the ""sent files"" tab and select XBN. The screen is correctly displayed. Cf screen shot 3 attached.

3/ refresh the page and select XBN again => the icons that enable to resend or download a file are not visible (although they seem to be there when scrolling with the mouse) Cf screen shot 4 attached.

 

 ",,hu772,jy268,od044,qz412,rehapav,sv648,ub113,wg141,,";02/Aug/18 12:03;jy268;3600",,,,,,,,,0,3600,,,0,3600,,,,XBID-2470,,,,,,,,,,SMXBID-998,,,,,,,"31/Oct/18 11:11;qz412;Capture.PNG;https://jira.deutsche-boerse.com/secure/attachment/61249/Capture.PNG","25/Aug/17 09:42;sv648;Video.mp4;https://jira.deutsche-boerse.com/secure/attachment/46237/Video.mp4","24/Aug/17 17:07;sv648;image-2017-08-24-15-42-09-756.png;https://jira.deutsche-boerse.com/secure/attachment/46221/image-2017-08-24-15-42-09-756.png","25/Aug/17 10:21;sv648;image-2017-08-24-22-30-26-594.png;https://jira.deutsche-boerse.com/secure/attachment/46240/image-2017-08-24-22-30-26-594.png","25/Aug/17 10:21;sv648;image-2017-08-24-22-31-17-200.png;https://jira.deutsche-boerse.com/secure/attachment/46239/image-2017-08-24-22-31-17-200.png","06/Aug/18 12:42;od044;missing-icons.png;https://jira.deutsche-boerse.com/secure/attachment/58022/missing-icons.png","24/Jul/17 14:51;sv648;screen shot 3.gif;https://jira.deutsche-boerse.com/secure/attachment/44842/screen+shot+3.gif","24/Jul/17 14:51;sv648;screen shot 4.gif;https://jira.deutsche-boerse.com/secure/attachment/44843/screen+shot+4.gif",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,71107200,,,,,,,,,,XP-53,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yvu:r00007c",9223372036854775807,,,,,,,,,,,https://jira.deutsche-boerse.com/browse/XDEV-5149,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master-sm-1.0.x,sm-1.0.x,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Jul/17 16:34;jy268;I'm not able to reproduce this issue. It looks like temporary problem with your browser. Could you please try it on a different machine?","24/Aug/17 11:21;sv648;Dear Filip,

We agree that this is cosmetic, but can be a blocking issue for the operators if they can't see the bouton anymore.

Also unless I am mistaken, the browser we are using (IE 11) is the browser recommanded by DBAG.

We then would like to keep it to minor and have this issue corrected in the next release.

Thank you for your understanding,

Antony","24/Aug/17 13:39;jy268;Is anyone able to reproduce this issue? Did you try on a different machine?","24/Aug/17 17:07;sv648;Dear Filip,

 

The error occurs when we click on the refresh button of IE Unable to render embedded object:   which is located on the URL line :

!image-2017-08-24-15-42-09-756.png!

Could you try again ?

Thank you,

Antony","25/Aug/17 09:43;sv648;Customer reproduced this issue, please see the video attached.","25/Aug/17 10:08;jy268;Filip, I'm asking once again. Is it reproducible on every machine or just on one specific computer / citrix account? Me and Duc were trying hard to get the same result and we were not successful at all...","25/Aug/17 10:20;sv648;Please, see the comment below:
Dear Filip,

 

I have followed exactly the same step as in the video and I got the following screen.

!image-2017-08-24-22-31-17-200.png|width=1123,height=400!

Also please find information about our current IE Version :

!image-2017-08-24-22-30-26-594.png!","25/Aug/17 10:23;sv648;It looks like one specific computer so far. I am not able to reproduce it too. I will request more information.","01/Sep/17 09:53;jy268;I recommend closing this looks like an issue with one specific workstation.","23/Dec/17 13:05;rehapav;[~sv648] please 
 * get acess to IE 11.0 either via Citrix or via some Linux emulator
 * reproduce the problem on this IE 11.0 with developers

Issue cannot be closed its happening to all the parties using this feature with IE 11.0","25/May/18 13:53;od044;Reproduced on SM 1.0.26 and IE11 version: 11.0.9600.18617, Update Version: 11.0.40
","18/Jun/18 09:51;jy268;[~od044], could you please share knowledge how did you run SPM in IE11? Did you use any virtual machine? If yes can I have it as well? :)","27/Jun/18 13:37;od044;Test passed on DST SM 1.0.31, IE 11.0.9600.18617
The icon resp. a hyperlink is visible and a file is downloadable.

Steps:
1. Log in and log out with a user and check that the icons are visible.
2. Refresh a page (F5) and check that the icons are visible.
3. A smoke test over others icons on others screens.","02/Aug/18 12:02;jy268;Rollback in 1.0.x branch, still present in 1.1.x","06/Aug/18 12:42;od044;Fix has been rollbacked. An issue reproduced on SYT1 SPM 1.0.35
 !missing-icons.png! ","31/Oct/18 10:18;ub113;Hello [~jy268],

We suggested the change of the browser to the participants, but they refuse workaround. 
_""Change of browser is not an option for operators. In the previous release of XBID the functionality was available in Internet Explorer 11._ 
_No information has been provided that we had to upgrade the browser for this release, otherwise we would not have given a go for this release..""_

Please increase the priority of the fix or advise further steps. __ ","31/Oct/18 10:54;jy268;[~ub113] please discuss it with Pavel Rehak and Ondrej Strba. This fix was reverted on purpose due to Pavel's decision.","31/Oct/18 11:01;hu772;[~qz412]

 ","31/Oct/18 11:11;qz412;This is an accepted *Trivial* issue requested transparently to be fixed in R2.0 - one of the R1.x leftovers.

See excerpt from the document delivered by Vlada Satek where the desired fix version is named as 2.0.

!Capture.PNG!

[~rehapav] - please check, then communicate.","31/Oct/18 12:08;hu772;that  is good enough to for me to use with customers  - [~qz412] can i share it?","31/Oct/18 13:12;qz412;OK, please provide response as outlined below.

[~rehapav] - no need to do anything, I checked myself...
----
This is an accepted *Trivial* issue requested transparently to be fixed in R2.0 - one of the R1.x leftovers.

See excerpt from the ""leftovers"" document delivered by Vlada Satek to DBAG on 5th Oct where the desired fix version is named as *2.0*.

!Capture.PNG!

Therefore fix of this issue will be delivered as planned - with R2.0.","31/Oct/18 13:54;hu772;[~qz412] customers came back

This issue was only known for incidentially disappearance of the icons. Now it is structural and therefore cannot be seen as a known bug.
This implies that there is no way of getting the files when the communication channels are down.

 ","31/Oct/18 13:59;jy268;[~hu772] Does it happen in other browsers as well?","31/Oct/18 14:09;hu772;All from IE i will ask tennet to reproduce it with another browser

 ","20/Nov/18 17:55;wg141;Permalink [Edit|https://jira.deutsche-boerse.com/secure/EditComment!default.jspa?id=74380&commentId=193424] [Delete|https://jira.deutsche-boerse.com/secure/DeleteComment!default.jspa?id=74380&commentId=193424]
On a privat machine I have tested both with Microsoft Edge and Google Chrome. The same issue is applicable using these browsers. No action icons (hyperlinks) available in SM - Sent Files.
 added a comment - 02/Nov/18 08:22
REPORTER
Permalink [Edit|https://jira.deutsche-boerse.com/secure/EditComment!default.jspa?id=74380&commentId=193753] [Delete|https://jira.deutsche-boerse.com/secure/DeleteComment!default.jspa?id=74380&commentId=193753]
Dear DBAG,

please be informed that the issue is really at the presentation layer. It looks like the icons (hyperlinks) are moved to the background. 
When moving the mouse over the place where the hyperlink is expected, the pointer changes into the hand and the tip is shown. Clicking at that very moment activates the respect hyperlink.

BR,
Chris","21/Nov/18 14:01;jy268;Fix was delivered here https://jira.deutsche-boerse.com/browse/XDEV-5149 but reverted later due to [~rehapav] request.
Currently we are delivering a fix which will make icons visible in all browsers except few IE versions (this is related with popup login window appearing) https://jira.deutsche-boerse.com/browse/XP-409",,,,,,
Double authentification requested to File Management user on CMM,XP-262,73551,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Trivial,Not a Bug,,qz412,qz412,11/Oct/18 17:30,31/Aug/20 15:38,22/Feb/21 13:21,07/Jul/20 09:07,,,3.1.0,,Capacity,Trading,,,,,,,"A user affected with multiple roles including File Management is requested twice by the system to fill in his credentials to access the File Management page.

+Expected behavior :+
Users are expected to login once and navigate to any page within their rights

+Actual behavior :+
Login is requested twice for some users with File Management rights

+Steps to reproduce :+
1. Affect roles File Management and Ref Management to a user
2. Connect to CMM
3. Choose File management page
4. The login popup is presented again",,qo794,qz412,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-1804,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,not a bug.,,,,,,,,,,23500800,,,,,,,,,,XP-53,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y07czz:zzu",9223372036854775807,,,,,,,,,,,CMM and CMI are separate applications (modules) they do not share user sessions and this should not be considered as a bug. This has been discussed on QARM level. ,,,,,,,,,,,,,,,,,,,,,,,,,as in description,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/May/20 13:21;qo794;CMM and CMI are separate applications (modules) they do not share user sessions, I do not think it's a bug.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Usability: Useless file management view for Central Admin in SM,XP-260,62790,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,jy268,rehapav,rehapav,24/Nov/17 13:12,04/Aug/20 19:22,22/Feb/21 13:21,02/Jan/19 17:44,,,Pre2020,,Shipping,,,,,R2.0-AgreedFixScope,,,"If you are logged in as Central Admin to the Shipping Module Webgui, you got the button “File Management View”. When clicked you are redirected to an empty screen with no additional information or functions then the start screen.",,jy268,od044,qz412,rehapav,,,,,,";26/Jun/18 14:21;jy268;18000",";02/Aug/18 12:22;jy268;3600",,,,,,,,0,21600,,,0,21600,,,,XBID-2924,,,,,,,,,,,,,,,,,"27/Jun/18 14:04;od044;CentralAdmin.png;https://jira.deutsche-boerse.com/secure/attachment/57037/CentralAdmin.png","06/Aug/18 15:14;od044;central_admin-File_management_view.png;https://jira.deutsche-boerse.com/secure/attachment/58037/central_admin-File_management_view.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,landing page,,,,,,,,,,,,,,,,67478400,,,,,,,,,,XP-53,,Button will be hidden if user does not have rights,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yrt:3z",9223372036854775807,,,,,,,,,,,button was always visible,,,,,,,,,,,,Ampere Sprint 9,,,,,,,,,,,,,,,,1.0,,,,,,,n/a,please test positive and negative scenarios,,,,,,,,,,,,,,,,,,,,master-sm-1.0.x,sm-2.0.x,sm-1.0.x,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Jan/18 10:10;qz412;Dear dev, bug confirmed, please remove the button.","06/Jun/18 15:25;rehapav;Implement into 1.5","27/Jun/18 14:04;od044;Test passed on DST env SM 1.0.31

- The button “File Management View” is not there anymore.
 [^CentralAdmin.png] ","02/Aug/18 12:23;jy268;Rollback in 1.0.x, still present in 1.1.x","06/Aug/18 15:14;od044;The fix has been rollbacked.
Verified on SYT2 SPM 1.0.35
 !central_admin-File_management_view.png! ","02/Jan/19 17:32;jy268;this change was already present in develop branch.",,,,,,,,,,,,,,,,,,,,,,,,,,
Usability:Unused/redundant buttons in SOB WebGui,XP-259,62792,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Trivial,Done,,rehapav,rehapav,24/Nov/17 13:13,11/Sep/20 14:13,22/Feb/21 13:21,23/Jul/18 09:32,,,Pre2020,,Trading,,,,,R2.0-AgreedFixScope,,,"In the SOB WebGui the Market and Delivery area configuration screens are read-only screens for all users. The information is taken/modifiable in CMM. However the buttons of “Create”, “Modify” and “Delete” still exist with no further use in SOB.",,de698,lt112,qz412,radeale,rehapav,,,,,,,,,,,,,,,,,,,,,,,XBID-2926,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,81648000,,,,,,,,,,XP-53,,,,,,,,,,,,,,11/Oct/18 17:27,,,,,,,,,,,,,,,,,,,,,"1|y05pa8:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/18 11:05;radeale;Documentation changes needed:

*Document*: DFS700

*Chapter*: 5.1.1 Market Area Overview

*Details*:
_Figure 62: Market Setup Overview Page_ updated.

*Chapter*: 5.2.1 Delivery Area Overview

*Details*:
_Figure 65: Delivery Area Overview_ updated.

Sentence removed:
{code}(For XBID: Create and Delete buttons are disabled on this page as creation and deletion of Delivery areas is handled in Capacity Reference Data GUI).{code}

*Reason:*
The buttons are no longer user, for details please see XBID-2926.","11/Jan/18 11:05;radeale;As a side note, there are also still references to _Download_ and _Upload_ buttons in the Market Areas and Delivery Areas chapters which are no longer used and they are described as _""The upload and download functionalities are for internal testing purposes.""_","16/Jan/18 11:16;qz412;Dear Alex,

please follow through in R1.4. Also, please include Download / Upload, Import / Export buttons to the suggestion where applicable, we will see how the customers react.

Thx, Ondra","30/Jan/18 14:55;radeale;Waiting for the customer input on the external jira.","10/Jul/18 14:20;de698;Responded to customers in external jira, as new discussion arose in the TWG FTF call with a question - why DBAG wants to remove the buttons - despite this was the initial input in the JIRA description.

Waiting for the answer.

 ","12/Jul/18 15:52;de698;Dear Jirka,

as discussed, ""PXs are OK with removing all buttons as proposed by DBAG (Option 2. Remove the buttons completely from said GUIs. +This would have no further impact on the functionality+.)""

That would mean to remove in SOB Ref.Data GUI:
 * from Market area overview (read-only):
 ** Create, Modify, and Delete buttons
 * from Delivery area overview (partially read-only):
 ** Create and Delete
 ** keep the Modify button active (DA needs to be halted in order to modify it)

Please proceed with the fix.

 

Kind Regards,

Alena","18/Jul/18 08:51;rehapav;Remove the damn buttons as part of XBID 1.5","23/Jul/18 09:33;lt112;https://github.deutsche-boerse.de/dev/xbid/pull/74",,,,,,,,,,,,,,,,,,,,,,,,
EXT:Failure of the Configuration Validity Filter - File Management- Outbound Overview,XP-258,60733,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Trivial,Not a Bug,xl987X,xl987X,xl987X,26/Sep/17 09:53,11/Sep/20 14:13,22/Feb/21 13:21,06/Oct/17 17:25,,,Pre2020,,Capacity,,,,,,,,"Description: 
 ============

The filtering of displayed data on the Outbound Overview tab doesn't work properly.

Steps to reproduce: 
 ===================

1 - Log on to CMM - File management  and go to Outbound Overview

2 - Choose RTE-AMP (as there are many files configured with different validity dates)

3 - Filter on Valid From = 15/09/2017 (A) or Valid From = 23/09/2017 (B)

Expected behaviour: 
 ===================

1 - Case (A), only files with validity date from >=15/09/2017 should be displayed (4 files)

!image-2017-09-25-15-48-13-576.png|width=1205,height=253!

2 - Case (B), only files with validity date from >=23/09/2017 should be displayed (1 file)

!image-2017-09-25-15-49-06-711.png|width=1233,height=256!
   
 Current behaviour: 
 ==============

All files are displayed.",,qo794,qz412,xl987X,,,,,,,,,,,,,,,,,,,,,,,,,XBID-2753,,,,,,,,,,,,,,,,,"26/Sep/17 09:53;xl987X;image-2017-09-25-15-48-13-576.png;https://jira.deutsche-boerse.com/secure/attachment/47257/image-2017-09-25-15-48-13-576.png","26/Sep/17 09:53;xl987X;image-2017-09-25-15-49-06-711.png;https://jira.deutsche-boerse.com/secure/attachment/47258/image-2017-09-25-15-49-06-711.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,70675200,,,,,,,,,,XP-53,,,,,,,,,,,,,,25/Sep/17 15:50,,,,,,,,,,,,,,,,,,,,,"1|y05dew:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Sep/17 09:54;xl987X;This is true, the filter is not working.","26/Sep/17 12:05;qo794;The described scenarios work properly, all displayed files are valid for the given filter. If a file is valid from 14.9. till ""forever"" it means it is valid also from 23.9. Maybe the other way round, what is the expected behavior? Provide some examples, thanks.","26/Nov/18 13:38;qz412;External bug closed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
EXT: Shipping Module user certificate not shown on modification,XP-256,67747,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Trivial,Done,jy268,sv648,sv648,26/Apr/18 10:30,13/Aug/20 19:41,22/Feb/21 13:21,21/Jul/20 12:52,,,3.1.0,,,,,,,,,,"The user certificate attached to the user in the Shipping module is not shown. You need to press the reset button to see it.

*+Steps to reproduce+***
 # Attach a certificate to a Shipping module user
 # Press ""save changes""
 # Click on the ""edit"" button for the previous update user
 # Check if Certificate is shown
 # Press Reset followed by OK in the pop up
 # Check if Certificate is shown

+*Expected Result*+

Certificate is always shown when editing the user

+*Actual Result*+

Certificate is not shown prior to the reset action of step 5",,jy268,ll664,od044,radeale,sv648,tm431,,,,";26/Jun/18 16:36;ll664;7200",";27/Jun/18 16:40;ll664;14400",";28/Jun/18 11:54;ll664;10800",";02/Aug/18 13:00;jy268;3600",,,,,,0,36000,,,0,36000,,,,XBID-3371,,,,,,,,,,,,,,,,,"29/Jun/18 13:05;od044;TSO_cetificate_visible.png;https://jira.deutsche-boerse.com/secure/attachment/57079/TSO_cetificate_visible.png","26/Apr/18 14:02;tm431;certificate shown after reset.png;https://jira.deutsche-boerse.com/secure/attachment/55096/certificate+shown+after+reset.png","26/Apr/18 14:02;tm431;certificate uploaded.png;https://jira.deutsche-boerse.com/secure/attachment/55095/certificate+uploaded.png","26/Apr/18 14:01;tm431;certificate uploaded.png;https://jira.deutsche-boerse.com/secure/attachment/55094/certificate+uploaded.png","29/Jun/18 13:05;od044;user_certificate_visible.png;https://jira.deutsche-boerse.com/secure/attachment/57078/user_certificate_visible.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,User CRUD.,,,,,,,,,,,,,,,,18662400,,,,,,,,,,XP-53,,Added the certificate to the response from backend,,,,,,,,,,,,01/Mar/18 16:47,,,,,,,,,,,,,,,,,,,,,"1|y0b2dj:",9223372036854775807,,,,,,,,,,,The certificate was not part of user response.,,,,,,,,,,,,HOT Sprint 12 (S),HOT Sprint 13,,,,,,,,,,,,,,,0.5,,,,,,,None.,See JIRA description.,,,,,,,,,,,,,,,,,,,,master-sm-1.0.x,sm-2.0.x,sm-1.0.x,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Apr/18 14:04;tm431;trivial bug confirmed in version SPM 1.0.28

1) choose user who has no certificate

2) edit the user and add certificate, click save

3) click edit user again window where no certificate (no name of file) in the field is shown (x)

[^certificate uploaded.png]

^4) Click reset button then OK and proper name of certificate file is shown^

^[^certificate shown after reset.png]^

 

^please display the name of certificate immediately after edit.^

 

 

 ","27/Jun/18 13:44;od044;Test failed on DST env, SM 1.0.31 

(/) The certificate is visible when on user edit form 
(x) a Remove certificate button doesn't remove the certificate. 
","28/Jun/18 11:54;ll664;Remove cert bug fixed.","29/Jun/18 13:05;od044;Teste passed on SM 1.0.32

(/) a certificate is visible on creation and edit form
(/) a remove button work properly

 [^TSO_cetificate_visible.png]  [^user_certificate_visible.png] ","02/Aug/18 13:01;jy268;Rollback in sm-1.0.x, still present in sm-1.1.x","06/Aug/18 15:10;od044;The fix has been rollbacked. An issue occurred as in description. 
Verified on SYT2 SPM 1.0.35","09/Jan/20 11:03;radeale;Hi Duc,
please is the issue still present in the current SPM version or not?
Thanks, /A/","09/Jan/20 12:30;od044;Cannot reproduce an issue on SPM 2.0.12 - close ticket","03/Jun/20 15:17;tm431;just double check, and retest with latest SPM","21/Jul/20 12:52;jy268;I did a double check and certificate is visible in UI.",,,,,,,,,,,,,,,,,,,,,,
EXT: AU execution restriction is not listed in any specification ,XP-255,65900,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Trivial,Done,,sv648,sv648,05/Mar/18 09:14,13/Aug/20 19:41,22/Feb/21 13:21,08/Jul/20 12:15,,,3.1.0,,Trading,,,,,,,,"Hi,

please find below the steps to be performed:
 # enter an order with an invalid execution restriction (""FUK"" instead of ""FOK"") (/)
 # the order is not entered in the book and an error message is received (/)

Anyway, the text of the error message contains an execution restriction which is not mentioned, not explained in any specification: ""{color:#d04437}*AU*{color}""

{color:#205081}{{<?xml version=""1.0"" encoding=""UTF-8""?>}}{color}

{color:#205081}{{<ErrResp xmlns=""http://www.deutscheboerse.com/m7/v1"">}}\{\{  }}{color}

{color:#205081}{{<StandardHeader marketId=""XSOB""/>}}\{\{    }}{color}

{{{color:#205081}<Error err=""Invalid request: cvc-enumeration-valid: Value 'FUK' is not facet-valid with respect to enumeration '[FOK, IOC, NON, AON, *AU*{color}]'. It must be a value from the enumeration."" errCode=""0""/>}}

{{</ErrResp>}}

And even trying entering an order with such execution restriction, the system replies with a further error message:

<?xml version=""1.0"" encoding=""UTF-8""?>
<ErrResp xmlns=""http://www.deutsche-boerse.com/m7/v1"">
 <StandardHeader marketId=""XSOB""/>
 <Error err=""Invalid message."" errCode=""0""/>
</ErrResp>

Could you please check and clarify? 

{color:#205081}Thanks {color}

 ",,de698,eg288,ek176,rehapav,sv648,tm431,tr866,,,,,,,,,,,,,,,,,,,,,XBID-3381,,,,XP-3258,,,,,,,,,,,,,"07/Jul/20 08:17;ek176;tm-trading-v1.xsd;https://jira.deutsche-boerse.com/secure/attachment/85420/tm-trading-v1.xsd",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,19785600,,,,,,,,,,XP-53,,,,,,,,,,,,,,02/Mar/18 15:42,,,,,,,,,,,,,,,,,,,,,"1|y0b3xj:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Sprint 12,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-3904,XP-2979-postgresql,XP-3264,develop,XP-3230,XP-2232,XP-3094-sonar-gate,master,master-acceptance,master-comtrader-2.5.x,XP-4273-owasp-zap-enable,acceptance,comtrader-2.5.x,XP-3161-pom-cleanup-develop,XP-4526-resource-managment-fix,,,,,,,,,,,,,,,,,,,true,"05/Mar/18 09:28;eg288;* order execution restriction AU is not supported in XBID, but it is listed in XSD
* XSD was used to be shared with M7 platform which has more functionality including execution restriction AU

@Functional team please provide description inlined with the documentation","18/Jul/18 11:12;de698;Dear Pavel,

From functional point of view the value ""AU"" is redundant and could be removed without any functional impact.
 The fix itself would be easy (removing the value from enumeration), however, new API release would be necessary (update the xsd document, customers to download it and update their LTSs).

This makes the whole fixing procedure highly complicated.

 

Kind Regards,
 Alena","18/Jul/18 11:16;rehapav;Waiting for clients feedback in external ticket","12/Oct/18 10:09;de698;From external JIRA:

""From leftovers_1.0

TWG FTF is of opinion it is a trivial issue requiring a xsd change. It makes sense to fix it. The API and XSD shall be provided to NEMOs with enough time to adapt and test the change on LTS side.""","03/Jul/20 14:53;ek176;Tested with (comxerv.request.management) FUK:
{noformat}
<?xml version=""1.0"" encoding=""UTF-8""?>
<OrdrEntry xmlns=""http://www.deutsche-boerse.com/m7/v1"">
    <StandardHeader marketId=""XSOB""/>
    <OrdrList>
        <Ordr acctId=""BG-EPEX-------01"" contractId=""727"" prod=""XBID_Hour_Power"" side=""BUY"" px=""5000"" qty=""100000"" ordrExeRestriction=""FUK"" txt=""test FUK"" dlvryAreaId=""10YAT-APG------L"" clOrdrId=""1593776583418"" type=""O"" validityRes=""NON"" state=""ACTI""/>
    </OrdrList>
</OrdrEntry>
{noformat}
Response:
{noformat}
<?xml version=""1.0"" encoding=""UTF-8""?>
<ErrResp xmlns=""http://www.deutsche-boerse.com/m7/v1"">
    <StandardHeader marketId=""XSOB""/>
    <Error err=""Invalid request: cvc-enumeration-valid: Value 'FUK' is not facet-valid with respect to enumeration '[FOK, IOC, NON, AON]'. It must be a value from the enumeration."" errCode=""0""/>
</ErrResp>
{noformat}","03/Jul/20 19:11;ek176;Released:

xbid-api-1.0.56

 

To be released (already merged to develop-like branch):
 * XBID
 * ComTrader (uses the API, code change)
 * SPM
 * TestClient","07/Jul/20 08:17;ek176;Attached the updated XSD file (1 line change)","08/Jul/20 12:14;tr866;Issue split into:
|XP-3258|(Split 1) EXT: AU execution restriction is not listed in any specification |
",,,,,,,,,,,,,,,,,,,,,,,,
EXT: User code: hyphen and underscore are the only listed allowed characters the system accepts ,XP-254,65721,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Trivial,Done,,sv648,sv648,28/Feb/18 09:16,31/Aug/20 15:39,22/Feb/21 13:21,21/Jun/19 15:30,,,XBID 2.0,,Trading,,,,,,,,"Dear all,

when creating a new user, the user code filed cannot be filled as expected for what is related allowed characters.

Except for hyphen and underscore, all the other listed characters trigger an erro message.

Could you please clarify?

Thanks

 ",,de698,ei349,jb991,sv648,tm431,,,,,,,,,,,,,,,,,,,,,XDEV-4716,,XBID-3350,,,,,,,,,,XDEV-4558,,,,,,,"28/Feb/18 15:06;jb991;screenshot-1.png;https://jira.deutsche-boerse.com/secure/attachment/53296/screenshot-1.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,User management create screen. ,,,,,,,,,,,,,,,,52790400,,,,,,,,,,XP-53,,"Updated validation to accept all characters listed from DFS700 ('-.,_()&:; '). Space can be only in the middle of user code, all leading and ending spaces will be trimmed.

 ",,,,,,,,,,,,27/Feb/18 18:44,,,,,,,,,,,,,,,,,,,,,"1|y07czz:zzc",9223372036854775807,,,,,,,,,,,"There was a wrongly specified validation rule on the user code accepting only ""a-z 0-9 , _""",,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,Unit test covering valid and invalid scenarios. ,"Try to put any not white listed character into user code field (all except ""-.,_()&:; "")",,,,,,,,,,,,,,,,,,,,XDEV-4683-losses-matcher,XDEV-4641-Losses-PoC,XDEV-4928-performance,master-xbid-1.4.x,jenkins-failing-nightly-build,XDEV-4816-order-book,xbid-sm2-poc,XDEV-4685-auction,xbid-1.4.x,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Feb/18 15:24;jb991;Retested on DST env. against XBID v1.3.38 
From 10 allowed characters mentioned in DFS700 only two(hyphen and underscore) are accepted exactly as client says.
 !screenshot-1.png|thumbnail! 


Issue probably apparead after changes were implemented in XDEV-4127 ","23/Mar/18 09:44;ei349;Agreed with [~de698], [~tm431] and [~jb991] that user code can contain every character from the list above except "" "" (blank space). ","23/Mar/18 10:29;ei349;update: leading and ending spaces will be trimmed but blank space(s) in the middle will be allowed.This is aligned with the DFS700. ","26/Mar/18 13:40;ei349;Can you please review [~uv683]? ","29/Mar/18 13:21;sv648;Why is this ticket in ""In test"" status? 1.4.11 is not released yet.","13/Apr/18 09:29;tm431;Works OK Syt2 ver. 1.4.11","08/Aug/18 09:49;tm431;issue reverted in 1.4.20. Syt2","21/Jun/19 15:29;de698;According to linked jiras, all necessary implementation work was finalised.

There are no residuals to documentation, as the goal was to have validations reflecting the DFS700 1.3.1 list of allowed characters. Error message was aligned to reflect this as well, however, its text is not explicitly part of the specification document.",,,,,,,,,,,,,,,,,,,,,,,,
EXT: Dynamic filter in Message Panel seems to not behave correctly (drop-down menu),XP-253,67749,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Trivial,Done,hj444,sv648,sv648,26/Apr/18 10:34,13/Aug/20 19:41,22/Feb/21 13:21,02/Jul/20 15:01,,,3.1.0,,ComTrader,,,,,,,,"{color:#333333}Regression Testing: {color}{color:#000000}154_FP_ComTrader_Messages_5{color}

{color:#333333} {color}{color:#333333}*Description:*{color}

{color:#333333}In the Message Panel - dynamic filter, the drop-down menu for ""Market"" field, seems to not behave correctly. {color}

*Expected result:*

{color:#333333}We expect two possible behaviours:{color}
 # {color:#333333}The drop-down menu for ""Market"" field, displays all possible ""Market"" values independent of whether or not there are information related to them in the Messsage Panel. {color}
 # The drop-down menu for ""Market"" field, displays only the possible ""Market"" values for which there are information in the Message Panel

*Current result:*{color:#333333}
 The drop-down menu for ""Market"" field, displays only the value ""XBID-SOB"" even if there is information regarding to other market (e.g. ComTrader).{color}

*Additional Information:*
 A screenshot  is attached (.png)

ComTrader version: 2.5.1.18 (64 bit)

 ",,ei349,ek176,hj444,jb991,sv648,tm431,,,,,,,,,,,,,,,,,,,,,,XBID-3409,,,,,,,,,,,,,,,,,"02/Jul/20 13:57;hj444;CT_MarketFilter_beforeSetting.png;https://jira.deutsche-boerse.com/secure/attachment/85365/CT_MarketFilter_beforeSetting.png","09/Jun/20 12:12;ek176;CT_fixed.png;https://jira.deutsche-boerse.com/secure/attachment/84561/CT_fixed.png","02/Jul/20 13:57;hj444;MarketFilter_AfterSetting.png;https://jira.deutsche-boerse.com/secure/attachment/85366/MarketFilter_AfterSetting.png","26/Apr/18 10:34;sv648;MarketFilter_ComTrader.png;https://jira.deutsche-boerse.com/secure/attachment/55080/MarketFilter_ComTrader.png","17/May/18 17:31;jb991;SYT1 CT filter.png;https://jira.deutsche-boerse.com/secure/attachment/55720/SYT1+CT+filter.png","02/Jul/20 13:56;hj444;contains_moreMarkets_empty.png;https://jira.deutsche-boerse.com/secure/attachment/85363/contains_moreMarkets_empty.png","26/Jun/18 14:58;jb991;image-2018-06-26-14-58-26-653.png;https://jira.deutsche-boerse.com/secure/attachment/57010/image-2018-06-26-14-58-26-653.png","02/Jul/20 13:56;hj444;more_selectionsMarket.png;https://jira.deutsche-boerse.com/secure/attachment/85364/more_selectionsMarket.png",,,,,,,,,,,,,,,,,,,,,,,,,,comtrader filtering ,,,,,,,,,,,,,,,,20217600,,,,,,,,,,XP-53,,-,,,,,,,,,,,,08/Mar/18 13:27,,,,,,,,,,,,,,,,,,,,,"1|y0b1gn:",9223372036854775807,,,,,,,,,,,already fixed but not delivered. ,,,,,,,,,,,,Alpha Sprint 10,Alpha Sprint 12,,,,,,,,,,,,,,,1.0,,,,,,,-,check the market drop down on filtering screen. ,,,,,,,,,,,,,,,,,,,,comtrader-2.5.x,XP-69,XP-2583,XP-2554,master-comtrader-2.5.x,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/May/18 17:32;jb991;Retested on SYT1 env against XBID 1.4.14 and CT version 2.5.1.27. 

Filtr for markets shows really only XBID-SOB market and its not possible to filter out only messages from Comtrader itself.

!SYT1 CT filter.png!

 ","30/May/18 10:02;ei349;[~jy268]: implementation done, can you please do the review? ","26/Jun/18 14:58;jb991;Retested on DST env. against v.28 of CT with negative result. Filter still doesn't contain option to filter just Comtrader messages

!image-2018-06-26-14-58-26-653.png!","27/Jun/18 14:54;ei349;It's fixed already but was not merged and delivered. Can you please retest after the next comtrader release? ","29/Jun/18 12:41;ei349;new comtrader including the fix has just been released. Can you please re-test? ","29/Jun/18 14:12;jb991;Retested on v. 29 of CT. now working fine. Closing Jira","02/Aug/18 13:05;cf948;This change was reverted as customer don't want it in xbid-1.5 release. We should merge it later.","06/Aug/18 14:30;jb991;on Version .30 I can confirm that change was reverted and filter now show only XBID-SOB value.","03/Jun/20 15:13;tm431;Find the commit and make new CT release with it.","09/Jun/20 12:12;ek176;Works (Oracle Java) !CT_fixed.png!","22/Jun/20 16:01;ek176;ComTrader 2.5.1.64 was released, containing the fix. Please test.","01/Jul/20 17:43;ek176;ComTrader 2.5.1.65 released (should also work). Works for me on SIMU","02/Jul/20 13:32;hj444;test SYT1:

ComTrader V. 2.5.1.65 2020-07-01T15:26:18Z
 JRE: 1.8.0_191-b12, Webstart: javaws-11.191.2.12
 JVM: Java HotSpot(TM) 64-Bit Server VM by Oracle Corporation
 OS: Linux 4.15.0-96-generic amd64
 265MB / 4096MB
 XBID-SOB 2.0.42

It is possible to select from Markets.

*clarification* :
*  Set more Market Filters :
 Set Market : contains XSOB
 Set Market : contains comtrader

I would expect selected all messages with XSOB or comtrader Market
 _*Actual - Empty message panel.*_
 The same is with '='
 *Is this expected behaviour?*
","02/Jul/20 14:58;ek176;The relation between filters is _logical AND_ in order to restrict the messages displayed:

The following displays all ComTrader messages (the second rule has no effect)
 * Market = Comtrader
 * Market != XSOB

The following display no messages (provided that only those two Market messages are avail):
 * Market = Comtrader
 * Market = XSOB",,,,,,,,,,,,,,,,,,
EXT: Usability: No change of user without closing ALL IE-sessions ,XP-252,67743,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Trivial,Done,od044,sv648,sv648,26/Apr/18 10:26,04/Aug/20 19:20,22/Feb/21 13:21,31/Jul/20 14:56,,,3.1.0,,Capacity,Shipping,,,,,,,"When I log is with user UserA, I cannot login with UserB as long as I have any InternetExplorer open since the UserA was logged on. Currently all InternetExplorer sessions/tabs have to be closed first, even when I log off with UserA. This means that all other applications that use InternetExplorer (like Java Applications) need to be closed. This is very inefficient for operators. And testers.
 When UserA has logged off, please disable the auto-logon in any new XBID-session, so a new session is not always logged in as this UserA.",,od044,rehapav,sv648,tm431,,,,,,,,,,,,,,,,,,,,,,,,XBID-3420,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,17712000,,,,,,,,,,XP-53,,,,,,,,,,,,,,12/Mar/18 15:16,,,,,,,,,,,,,,,,,,,,,"1|y0b2dj:i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 12 (S),HOT Sprint 13,HOT Sprint 14 (S),,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Sep/18 09:14;rehapav;[~qz412] clients reported on RCB 18/9 

- XBID-3420 – this issue is still relevant and would like to fix it

 ","03/Jun/20 15:16;tm431;Should be done. Please retest. No foreseen developement","31/Jul/20 14:56;od044;Test passed on R2.0.43-65563f14c1dea14399c22b0864824255ee5728d4
- auto logon is disable, when user is logged out 
- after logged out user has to log in again 
- only one session per application resp. module can be open at once in one browser",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
EXT: Timestamp for auction is before trade timestamp and before contract start allocation point,XP-251,67739,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Trivial,Not a Bug,jb991,sv648,sv648,26/Apr/18 10:21,11/Sep/20 14:14,22/Feb/21 13:21,17/Jul/18 14:43,,,Pre2020,,,,,,,,,,"Hi, 

please find below steps to be reproduced before 11:00 CET:
 * log in CMM with TSO admin and modify start allocation point for one of the tomorrow contracts (T01:00-02:00), for Intraday Power product, interconnector CNOR-NORD and put it equal to DD/MM/YYYY 14:30 (the date is the one of the execution)

and below steps that can be performed only after 14:00 CET (with default schedule/activation tomorrow contracts are tradable from 14:00 CET) 
 * enter a buy order on NORD 10@10 for contract T01:00-02:00
 * enter a sell order on CNOR 10@10 for contract T01:00-02:00

Then wait until 14:30 CET. A trade is performed through auction because before that time the respective order book didn't contain the orders

Anyway, the timestamp of the start of the auction - and of all the other messages - is related to a previous time. Please check the attachement.

Could you please verify?

Thanks a lot

 ",,jb991,sv648,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-3465,,,,,,,,,,,,,,,,,"26/Apr/18 10:21;sv648;AUCT_msg.png;https://jira.deutsche-boerse.com/secure/attachment/55073/AUCT_msg.png","17/Jul/18 14:41;jb991;Trade.JPG;https://jira.deutsche-boerse.com/secure/attachment/57398/Trade.JPG",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,82080000,,,,,,,,,,XP-53,,,,,,,,,,,,,,20/Mar/18 15:56,,,,,,,,,,,,,,,,,,,,,"1|y06hi0:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Jul/18 14:41;jb991;Retested against XBID v. 1.4.18 on DST env. with positive result. Messages were completely removed on previous version so even if trade is triggered via auction (viz XML message in attachment) at 1430 we don't receive any message before  !Trade.JPG!","17/Jul/18 15:23;jb991;Change in (not) showing auction messages via CT was caused by JIRA XDEV-5168",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"EXT: TC810 report contains the element ""membCtpyIdCod""",XP-249,65755,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,eg288,sv648,sv648,28/Feb/18 13:59,04/Aug/20 19:21,22/Feb/21 13:21,07/Jan/19 10:16,,,Pre2020,,Reporting Engine,,,,,R2.0-AgreedFixScope,,,"In the TC810 report the element ""membCtpyIdCod"" is present and filled (ECCEX).

However this element is not described in the DFS240 and is marked in ticket XBID-476 as ""_“Not Valid for XBID” as OTC trade function is not supported in XBID_"".
In the same ticket this mark has the following action:

_If attribute is marked as Not valid for XBID (in the Description) it is never displayed in the final report._

Therefore this element is not expected in the TC810 report.",,eg288,radeale,rehapav,sv648,tm431,uv683,xl987X,zi174,,";11/Apr/18 13:38;uv683;3600",,,,,,,,,0,3600,,,0,3600,,,,XBID-3355,,,,,,,,,,,,,,,,,"08/Aug/18 09:39;tm431;reverted_sob_TC810_20180807_ADMIN.xml;https://jira.deutsche-boerse.com/secure/attachment/58099/reverted_sob_TC810_20180807_ADMIN.xml","13/Apr/18 13:21;tm431;sob_TC810_20180412_ADMIN.xml;https://jira.deutsche-boerse.com/secure/attachment/54647/sob_TC810_20180412_ADMIN.xml",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67305600,,,,,,,,,,XP-53,,,,,,,,,,,,,,28/Feb/18 13:44,,,,,,,,,,,,,,,,,,,,,"1|000yrt:3w",9223372036854775807,,,,,,,,,,,"membCtpyIdCod element has been removed from XSD and from code

update 11.4.

membClgIdCod,stlIdAct,stlIdLoc fields removed from TC810 report as well",,,,,,,,,,,,Ampere Sprint 9,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-2546,XP-2546-added-latest,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Feb/18 13:59;sv648;Stefan, please retest and re-assign on dev.","14/Mar/18 16:17;xl987X;in RE vs. 5.0.37 there indeed is <membCtpyIdCod> included. This is not specified in DFS240, it is a bug/

 

    <tc810Grp>
        <tc810KeyGrp>
            <membExcIdCod>TRM03</membExcIdCod>
            <membClgIdCod>ECCEX</membClgIdCod>
            <stlIdAct>0000</stlIdAct>
            <stlIdLoc>ECC</stlIdLoc>
            <instTitl>
                <isinCod>20180313 01:00-20180313 01:15</isinCod>
            </instTitl>
            <cntcUnt>1.00</cntcUnt>
            <product>Quarterly_Hour_Power</product>
        </tc810KeyGrp>
        <tc810Grp1>
            <tc810KeyGrp1>
                <partIdCod>TRD001</partIdCod>
            </tc810KeyGrp1>
            <tc810Rec>
                <mktArea>DE</mktArea>
                <tso>TTG</tso>
                <balGrp>BG-EPEX-------01</balGrp>
                <tranTim>00:00:25.007+01:00</tranTim>
                <tranIdNo>6719818</tranIdNo>
                <tranIdSfxNo>1</tranIdSfxNo>
                <tranTypCod> </tranTypCod>
                <ordrNo>23961832</ordrNo>
                <acctTypCodGrp>P1</acctTypCodGrp>
                <ordrBuyCod>S</ordrBuyCod>
                <tradMtchQty>3.000</tradMtchQty>
                <tradMtchPrc>0.00</tradMtchPrc>
                <tradPhase>CONT</tradPhase>
                <stlDate>2018-03-13</stlDate>
                <feeAmt>0</feeAmt>
                <feesCurrTypCod>EUR</feesCurrTypCod>
                <membCtpyIdCod>ECCEX</membCtpyIdCod>
                <text>Hub L|ADD|15Bas</text>
                <state>ACTI</state>","22/Mar/18 11:18;xl987X;Re-Tested in 5.0.38, membCtpyIdCod is not present in TC 810 anymore.  Closing the issue.","06/Apr/18 10:43;sv648;Please, could you elaborate on the comment from the customer?



""Pplease take into account that also following tags shouldn't be in the report, based on DFS240 + XBID-476.

<membClgIdCod> is equal to ECCEX, when it should be empty instead, because marked as “Not Valid for XBID” as clearing member function is not supported in XBID. Made optional so it is not viewed in the reports as it is always empty.
<stlIdAct> is equal to 0000 when it should be empty instead, because marked as “Not Valid for XBID” as settlement function is not supported in XBID. Made optional so it is not viewed in the reports as it is always empty.
<stlIdLoc> is equal to ECC when it should be empty instead, because marked as “Not Valid for XBID” as settlement is not supported in XBID. Made optional so it is not viewed in the reports as it is always empty.

Could you please check also those?

Thanks""
","09/Apr/18 11:27;rehapav;Increasing priority to Major - this is within exit critera.","13/Apr/18 13:20;tm431;retest OK. Syt2 cor version 1.4.11, Reporting Engine version 5.0.38 no membClgIdCod, stlIdAct and stlIdLoc were not found in TC810. See attached report [^sob_TC810_20180412_ADMIN.xml]","02/Aug/18 13:52;uv683;Reverted in version 5.0.41.

 

When this issue will be on scope again, fix is ready in XDEV-4564-report-contains-element-membctpyidcod and XDEV-4564-another-tc810-fields-removed","08/Aug/18 09:38;tm431;Test OK, in version 5.0.41, this issue was reverted and membClgIdCod, stlIdAct and stlIdLoc  are in TC810.  See attached report [^reverted_sob_TC810_20180807_ADMIN.xml]","04/Jan/19 10:34;eg288;Implemented in version 5.0.42 -> please test.","04/Jan/19 15:13;zi174;Tested correctly on systemTest II - reporting tool the version 5.0.42. (/)

please see the XP-838",,,,,,,,,,,,,,,,,,,,,,
EXT: Performance Test: IDCB message for user-defined contract with no capacity update,XP-248,67989,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Not a Bug,,tm431,tm431,07/May/18 10:03,11/Sep/20 14:14,22/Feb/21 13:21,16/Oct/18 11:48,,,Pre2020,,Capacity,,,,,,,,"Dear all,

with regard to today execution of R1.4 performance regression (scenario 5) test, we noticed the following occurrence.

Conditions:

execution finished before 11:00 CEST (last trade at 10:54:52)

+Occurred result+:

As long as the execution was ongoing, several MsgRprt were broadcasted with regard to Hourly and block contract IDCB (see attached IDCB_pre_user..). It was expected also based on the clarification come with XBID-2831. 

*Starting from 11:00 CEST, we are receiving a MsgRprt every 15 minutes, with regard to start/finish of IDCB auctions for block contracts*

+Expected result:+ 

Since no update in capacity was performed (through explicit allocation or due to counter allocation due to trades) after 11:00 CEST, no auction would have been expected from 11:00 on.

 

Further information: there seems to be no relation between assignment product-DAs  and the DAs involved in the auctions: meaning that the auctions seem to involve all the DAs, no matter if they are hub with just 60' product or not.

 

Could you please check and clarify?

Thanks a lot for your support

Kind regards,

Lara 

 ",,eh941,rehapav,tm431,,,,,,,,,,,,,,,,,,,,,,,,,XBID-3584,,,,,,,,,,,,,,,,,"07/May/18 10:03;tm431;IDCB_MsgRprt_20180504_11_45.txt;https://jira.deutsche-boerse.com/secure/attachment/55394/IDCB_MsgRprt_20180504_11_45.txt","07/May/18 10:03;tm431;IDCB_pre_user_defined_20180504.xml;https://jira.deutsche-boerse.com/secure/attachment/55395/IDCB_pre_user_defined_20180504.xml","20/Jun/18 09:43;tm431;MSgRprt hourly block .png;https://jira.deutsche-boerse.com/secure/attachment/56820/MSgRprt+hourly+block+.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,74649600,,,,,,,,,,XP-53,,,,,,,,,,,,,,04/May/18 15:45,,,,,,,,,,,,,,,,,,,,,"1|000yvu:rb6",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/May/18 14:58;tm431;When remote contract expire and there are open orders, and there was trade on the that contract no IDCB message *is not received. (/)*

When block contract expire (first remote contract of the block contract) and there are open orders on that block contract, and there was trade on that contract, or on one of the remote contracts IDCB message *is received. (x)*

*Please do not send IDCB MsgRprt in this case* 

 ","21/May/18 13:41;eh941;I've checked the current state and from the code I can see that the auction is triggered (and therefore the MsgRprt is sent) only in case there are at least *2 possibly matching order on the affected contract*. Possibly matching are those *orders which have matchable price*. From this perspective there is no difference between regular (canonical) and block contract.

I also did my own test and the only thing I got on contract closure what {{OrdrExeRprt}}, {{ContractInfoRprt}} and {{PblcOrdrBooksDeltaRprt}}.

Please re-test.

 ","13/Jun/18 20:27;rehapav;[~tm431] any update here?","20/Jun/18 09:43;tm431;This is true. The condition is met. There are two or more Block Orders which could be matched as the price spread exists, but never will be as the quantity is not same. (block orders are matched only if the orders are on same quantity). But the problem is that the orders are based on *Hourly Contracts*. But the auction is triggered whend *Quarterly contracts expires,* i.e. each 15min.

Steps to reproduce

1) make BUY order on block products 10-19 (Hourly Contract) qty 1000 price 1000. make counter order (SELL 10-19, qty 1000 price 1000) trade is created.

2) make same BUY order, and place other SELL order on same block 10-19 to other DA buty with qty 1500 and price 1000. You can place more orders to same DA, other DAs always on same price, but different qty, so they will not be matched.

3) then each 15min MsgRprt about IDCB auction is received, even if the blocks are on *Hourly Contracts.*

see attached screenshot.... [^MSgRprt hourly block .png]

 

I agree that this is super minor bug (and pain it the a**), and mostly customers will disable the IDCB MsgRprt in Prod at all. But I have to be formal with them.

 

 

 ","16/Jul/18 11:45;tm431;As MsgRprt are switched off in all cutes and also in Prod, there is no need to fix this minor.","18/Sep/18 09:09;rehapav;fyi XBID-3700 disabled ICBD messages

 ","18/Sep/18 09:15;rehapav;[~eh941] and [~rehapav] - clients reported on RCB 18/9:
 * XBID-3584 – we need feedback from DBAG (root cause analysis)
 *","21/Sep/18 14:01;eh941;The auction is executed due to *CMM delivery intervals maintenance* which runs each 5 minutes. It *opens or closes the intervals* according to their schedules so that the *allocations can or cannot be created* on them. When the *delivery interval is closed* the *auction is triggered for the trading contracts* that overlaps the closed delivery intervals. Furthermore it takes the neighbors of these contracts as well because of ramping. If there are *any orders that have matching prices* on those trading contracts the *auction* for each contract and the orders' delivery areas *is executed*. It's done even though the reason the orders don't match isn't lack of the capacity but e.g. their quantity (in case of AoN orders).

Let's take a look on this on simple example.

Having capacities between DA1 and DA2, DA1-DA2 interconnector has capacity resolution set to 60 minutes:
 # Add Buy AoN block order 12-16 with qty=300 on DA1 = *order1*
 # Sell AoN block order 12-16 with qty=600 on DA2 (can't be matched with the first one due to qty) = *order2*
 # It's 11.15 and delivery intervals between DA1-DA2 close 45 minutes before the delivery. It means that the trading contract 12-13 is affected by this change. The auction is triggered. The system searches for *all orders that are created on contract 12-13*. It finds order1 on buy side and order2 on sell side. The message that the auction is triggered for contract 12-13 and delivery areas DA1 and DA2.
 # The action above is repeated for all delivery intervals of the trading contract 12-16","27/Sep/18 08:32;tm431;Dear Pavel,

thank you for your reply.

I've a further question though. If the delivery interval along an IC closes 45' before delivery, I would expect:
 * at 11.15, an auction for contract 12-13
 * at 12.15 an auction for contract 13-14 
 * and so on.

But, messages were received each 15'. That would mean that for the same hourly contract, I have several delivery closure and that's not the case.

Could you kindly check also that?

In the meantime, I'll try to recollect information about the dataset used for that scenario, in order to double check the values of the closing time.

Thanks a lot for your support.

Kind regards,

Lara 

 ","01/Oct/18 09:44;eh941;{quote}That would mean that for the same hourly contract, I have several delivery closure and that's not the case.
{quote}
In fact it is the case. Because of *quarterly capacity resolution* on any of the affected inter-connectors the auction is triggered whenever any of the inter-connectors (which affects the trading contract) is closed. 

Let's say we have the block order 12-16. The contract 12-13 is affected by delivery intervals 
# 12:00-12:15
# 12:15-12:30
# 12:30-12:45
# 12:45-13:00

The inter-connector is configured to *close 30 minutes before delivery* so auction would be triggered *each 15 minutes starting at 11:30.*

Quarterly capacity resolution is set for instance on inter-connector AMP-TNG.","12/Oct/18 08:00;tm431;external ticket was closed

Dear Patrik,

thanks for your further reply. Now it is clear.

Closing ticket.

KR,

Lara ",,,,,,,,,,,,,,,,,,,,,
EXT: Short/long Throttling Limits exceeded do not trigger Alarmtilt messages,XP-247,66200,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,lt112,sv648,sv648,13/Mar/18 12:42,04/Aug/20 19:21,22/Feb/21 13:21,15/Jan/19 14:31,,,Pre2020,,AlarmTilt,Capacity,,,,R2.0-AgreedFixScope,,,"Steps to reproduce:
 Submit  more than 50 HubToHubReq message in 1minute or more than 500 in one hour

Expected results:

AMQP messages are received see screenshot attached

Alarmtil messages should be received:

FR_IE_005 SOB Short Throtling limit execeeded trigger

FR_IE_006 SOB Long  Throtling limit execeeded trigger

Actual results:

Alarmtil messages was not received:

FR_IE_005 SOB Short Throtling limit execeeded trigger

FR_IE_006 SOB Long  Throtling limit execeeded trigger",,nn481,qo794,qz412,radeale,rehapav,sv648,,,,,,,,,,,,,,,,,,,,,,XBID-3425,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,72921600,,,,,,,,,,XP-53,,"Introducing a memberId field to CMM (optional, not visible to end users, filled in only when a CMM user is automatically created from an SOB user)",,,,,,,,,,,,13/Mar/18 12:04,,,,,,,,,,,,,,,,,,,,,"1|000yrt:000000yi",9223372036854775807,,,,,,,,,,,"SOB requests (com.deutscheboerse.m7.trading.api.v1.AtcDataReq, com.deutscheboerse.m7.trading.api.v1.HubToHubReq) go through CMM module. AlarmTilt calls are not present in CMM at all. AlarmTilt calls are bound to memberId which is completely missing in CMM.",,,,,,,,,,,,Home Office Team Sprint 10,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,plewmic-scripts,XP-1261-guava-28,selenide-poc,XP-1504,xbid-losses-poc,XP-456,XP-2979-postgresql,XP-3264,develop,XP-3230,XP-2694,XP-2232,XP-3070,XP-4273-owasp-zap-enable,inline-tomcat-params,XP-528-feature-file-testcases,XP-4526-resource-managment-fix,xbid-2.0.25.x,fixing-failover,XP-2080-finishing-price-rounding-integration,,,,,,,,,,,,,,true,"13/Mar/18 15:48;qz412;Dear Franta, customers have added new screenshots + 4 additional clarification comments in the external JIRA. Please have a look there when investigating. Thx.","16/Mar/18 16:15;nn481;Regarding missing both (Short, Long) SOB requests:
We discovered that some SOB requests (com.deutscheboerse.m7.trading.api.v1.AtcDataReq, com.deutscheboerse.m7.trading.api.v1.HubToHubReq) go through CMM module. There are missing AlarmTilt calls in CMM at all. AlarmTilt calls are bound to memberId which is completely missing in CMM. This makes FIX difficult task because we need to add memberId to CMM.

Regarding missing single SOB Long Throtling limit exceeded trigger there might occur following situation. When one SOB request triggers both AlarmTilt alarms (Short, Long) then short alarm has higher priority and is reported while long alarm is not.

by Jiri Kuchta:
implementation is too complex, added value is low -> no plan to implement ","27/Mar/18 10:05;qz412;It has been decided that:
 # this is a bug that eventually will need to be fixed
 # there is too much risk in implementing pre-GL

[~rehapav], please keep this one with you until a suitable time for implementation is found as agreed","29/May/18 16:39;rehapav;Take into the scope as part of XBID 2.0","26/Jun/18 14:44;qz412;Dear Pavel, we should discuss the decision path leading to putting this to 2.0 tomorrow :). Ondra","27/Jun/18 09:25;rehapav;[~nn481] please provide effort estimation and potential risk analysis in case we would still decide to implement this in 1.5 release

(that would mean finish implementation in 2-3 weeks and then testing and in 4 weeks for client testing)

Is it feasible?","27/Jun/18 09:36;nn481;This is about ""How to get memberId to CMM?"", [~qo794] what is your opinion on that?","28/Jun/18 09:33;qo794;It's not complicated to introduce a memberId field to CMM (optional, not visible to end users, filled in only when a CMM user is automatically created from an SOB user) or query a trading table. I would estimate it to 2-3MD for dev for the whole fix.","09/Jul/18 11:58;rehapav;Internally agreed that this is *not* needed for XBID 1.5","08/Oct/18 16:02;rehapav;Please update based on following comment from TWG>

 

DBAG acknowledges the issue and that a fix is needed but says it is too expensive to fix compared to added value. Even if the priority is indeed minor, DBAG should provide the source of the issue and the cost associated to the fix so the NEMOs can decide if it’s worth fixing. If it’s decided a fix should not take place, documentation (i.e. MFG500) should be amended. 
o TWG FTF is of opinion DBAG has not explained yet what is the root cause, therefore before taken any decision, NEMOs ask DBAG to provide the description of solution to the issue.

 ","10/Oct/18 17:40;qz412;Reaction provided, I made it 7MDs. Thank you guys, let's see what happens next.","31/Oct/18 14:30;qz412;Agreed by the customers to be delivered as part of R2.0",,,,,,,,,,,,,,,,,,,,
Total quantity incorrectly represented in case of user-defined trades,XP-246,69319,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,qo794,tm431,tm431,14/Jun/18 12:47,04/Aug/20 19:22,22/Feb/21 13:21,24/Jan/19 09:04,,,Pre2020,,ComTrader,,,,,R2.0-AgreedFixScope,,,"ComTrader shows the user a *TQty* value, which stands for *Total quantity*.

The documentation regarding this attribute is quite limited, it is only mentioned in the MFG120: “The total quantity of all trades in the contract”.
{quote}For example a trade is done on the hourly contract 13-14 with a quantity of 10MW and another trade is done on the same hourly contract of 20MW the {color:#ff0000}*TQty is 30MW*{color}.
{quote}
For predefined contracts this works as expected. However for the user-defined contracts the behavior is different.

When you trade on a user-defined contract (BLOCK trade) the TQty is the traded quantity multiplied by the delivery duration, which is incorrect.
{quote}For example a block trade of 10MW and a block trade of 20MW are done on the user-defined contract 13-15 then the {color:#ff0000}*TQty is* *60MW*{color} instead of the expected 30MW.
{quote}
This applies to XBID ComTrader & PMI Interfaces used by LTSs

 

*{color:#ff0000}NOTE:{color} The fix shouldn’t be part of any deployment without having received the explicit confirmation from PXs, which will be provided as part of this ticket.*

 

*Current state:*

Currently, the Total quantity (TQty) is multiplied by hours of block contract. E. g. the block contract is set 19-21 (3 hours). Thus, the traded quantity is multiplied by 3. In case of 2 hours, the multiplier would be 2 etc.

*Desired state:*

TQty shall be an amount of traded quantity without any multiplication (with an exception of a rule in same market area).. I. e. if the traded quantity for a block contract 19-21 is 30, the TQty shall be 30. In case the trade is done in *one market area* (both sides are in same market area), the amount must be multiplied by 2.

Acceptance Criteria
* Cucumber tests verifying functionality (added on refinement)",,de698,radeale,tm431,zi174,,,,,,,,,,,,,,,,,,,,,,,,XBID-3691,,,,,,,,,,XBID-3789,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,66787200,,,,,,,,,,XP-53,,,,,,,,,,,,,,14/Jun/18 11:03,,,,,,,,,,,,,,,,,,,,,"1|000yrt:000000z6003",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office Team Sprint 11,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,plewmic-scripts,XP-1261-guava-28,selenide-poc,XP-1504,xbid-losses-poc,XP-456,XP-2979-postgresql,XP-3264,XP-3230,develop,XP-2232,XP-2694,XP-3070,XP-4273-owasp-zap-enable,inline-tomcat-params,XP-528-feature-file-testcases,XP-4526-resource-managment-fix,xbid-2.0.25.x,fixing-failover,XP-2080-finishing-price-rounding-integration,,,,,,,,,,,,,,true,"14/Jun/18 12:52;tm431;Alenka can you confirm customers expectations? XBID does not support market sweep that 3hours block order will be matched with 1hour 1hour 1hour contracts.","26/Jun/18 10:50;de698;Hi Patrik, regarding this last question:

DFS700 chapter 4.1.6:
{quote}Block orders can be matched only with the very same block orders on opposite side with same quantity.

Example:
 Block order (dlvryStart=""2016-03-15T19:00:00.000Z"" dlvryEnd=""2016-03-15T21:00:00.000Z) side=""BUY"" on qty=""40000"" is matched only with order 
 Block order (dlvryStart=""2016-03-15T19:00:00.000Z"" dlvryEnd=""2016-03-15T21:00:00.000Z) side=""SELL"" on qty=""40000""

And is not matched with orders:
 Block order (dlvryStart=""2016-03-15T19:00:00.000Z"" dlvryEnd=""2016-03-15T21:00:00.000Z) side=""SELL"" on qty=""10000""
 Block order (dlvryStart=""2016-03-15T19:00:00.000Z"" dlvryEnd=""2016-03-15T21:00:00.000Z) side=""SELL"" on qty=""10000""
 Block order (dlvryStart=""2016-03-15T19:00:00.000Z"" dlvryEnd=""2016-03-15T21:00:00.000Z) side=""SELL"" on qty=""10000""
 Block order (dlvryStart=""2016-03-15T19:00:00.000Z"" dlvryEnd=""2016-03-15T21:00:00.000Z) side=""SELL"" on qty=""10000""
{quote}
Kind Regards,
 Alena","27/Jun/18 14:44;de698;Proposal for the solution description:

*Document:* DFS510
 *Chapter:* 5.5.3 Public Order Books Response
 *Details:*
 Text to be added in the attribute
{code:java}
totalQty == The total quantity traded during this trading session per contract. For block orders, the value is not accumulated from the whole delivery period covered by multiple contracts.
The total quantity value is multiplied by 2 in case that both sides of the trade are from the same Market area.{code}
Customers should review the proposal.

Kind Regards,
 Alena","11/Jan/19 10:45;zi174;*Current state:*

Currently, the Total quantity (TQty) is multiplied by hours of block contract. E. g. the block contract is set 19-21 (3 hours). Thus, the traded quantity is multiplied by 3. In case of 2 hours block contract, the multiplier would be 2 etc.

*Desired state:*

TQty shall be an amount of traded quantity without any multiplication (with an exception of a rule in same market area). I. e. if the traded quantity for a block contract 19-21 is 30, the TQty shall be 30. In case the trade is done in *one market area* (both sides are in same market area), the amount must be multiplied by 2.

*TO DO:* 
 * fix the bug with multiplication of total quantity -> ""TQty shall be an amount of traded quantity without any multiplication""
 * add the condition of same market area -> In case the trade is done in *one market area* (both sides are in same market area), the amount must be multiplied by 2.

 

 The TQty attribute is sent by API ""PblcOrdrBooksResp"" in the field ""totalQty""",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Two OrdrExeRprts send after Order modification,XP-245,69729,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,tr866,tm431,tm431,27/Jun/18 12:01,04/Aug/20 19:22,22/Feb/21 13:21,22/Jan/19 16:21,,,Pre2020,,Trading,,,,,R2.0-AgreedFixScope,,,"Environment: LIP A

*Steps to reproduce:*
* Enter an order
* Modify the order by increasing the price of the order
* Verifying the OrdrExeRprt messages (SOB ComTrader Recorded messages)

*Expected result:*
As stated in the DFS510 - AMQP Public Message Interface - Trading v18.00 - chapter 5.3.2
Order Modify;

_If the order modification has impact on the order execution priority, the old order will be removed by the system and a new order with a new order ID will be entered instead. As a result, after an order modification with impact on the execution priority, a *single* OrdrExeRprt messages with two entries is returned: 
•	First the deletion of the modified order is reported.
•	Second indicating the newly added order is returned.


*Actual result:*
In case of an order modification which impacts the execution priority, 2 OrdrExeRprt messages are send where 
•	First the deletion of the modified order is reported.
•	Second indicating the newly added order is returned.",,cf948,dw255,hu772,lt112,tm431,tr866,,,,,,,,,,,,,,,,,,,,,,XBID-3712,,,,,,,,,,SMXBID-816,SMXBID-815,,,,,,"09/Jul/18 09:11;tm431;PMI logs 20180627 - Order ID 782860.txt;https://jira.deutsche-boerse.com/secure/attachment/57220/PMI+logs+20180627+-+Order+ID+782860.txt","27/Jun/18 12:01;tm431;XBID-3712.docx;https://jira.deutsche-boerse.com/secure/attachment/57028/XBID-3712.docx","12/Jul/18 11:02;dw255;XDEV-5207 examples.txt;https://jira.deutsche-boerse.com/secure/attachment/57292/XDEV-5207+examples.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,65750400,,,,,,,,,,XP-53,,{{NONE}} list execution instruction is now really default value - if it isn't specified it automatically filled in. If set to {{NONE}} no basketId is assigned therefore just a single {{OrdrExeRprt}} is sent when order is modified (basketId = first order ID in the basket),,,,,,,,,,,,26/Jun/18 13:18,,,,,,,,,,,,,,,,,,,,,"1|y07vfy:",9223372036854775807,,,,,,,,,,,{{OrdrExeRprt}} messages are grouped byt baskeId. OrdrEntry might specify list execution instruction. DFS510 says it should be {{NONE}} by default (when not specified) but in the code the default was {{NULL}}. When set to {{NULL}} {{basketId}} wasn't set otherwise it was (even with {{NONE}} instruction.,,,,,,,,,,,,Ampere Sprint 10,Ampere Sprint 11 [S],,,,,,,,,,,,,,,1.0,,,,,,,"ModifyOrderIntegrationTest#

shouldProduceSingleOrderExeRprt","# Create an Order with {{listExecInst=""NONE""}} (you should try to do so also without any specification)
 # Create counter order which doesn't match because of the price
 # Modify the first order so the price between these two orders are matchable
 # Check {{OrdrExeRprt}} messages - there should be just one.",,,,,,,,,,,,,,,,,,,,plewmic-scripts,XP-1261-guava-28,selenide-poc,XP-1504,xbid-losses-poc,XP-456,XP-2979-postgresql,XP-3264,XP-3230,develop,XP-2232,XP-2694,XP-4273-owasp-zap-enable,XP-3070,inline-tomcat-params,XP-528-feature-file-testcases,XP-4526-resource-managment-fix,xbid-2.0.25.x,fixing-failover,XP-2080-finishing-price-rounding-integration,,,,,,,,,,,,,,true,"27/Jun/18 12:02;tm431;Michal can you please investigate that OrdrId (in attached .doc file) exists in LIPA? and what was the workflow for it.

 

it is strange because reported OrdrExeRprt has remoteOrdrId=""782860"" which XBID never sends","27/Jun/18 13:55;lt112;This is not from XBid
{{<StandardHeader marketId=""EPEX""/>}}

Also, it might happen, it is strange, but not a bug
","09/Jul/18 09:13;tm431;Please see attachement [^PMI logs 20180627 - Order ID 782860.txt] [Delete this attachment|https://jira.deutsche-boerse.com/secure/DeleteAttachment!default.jspa?id=69729&deleteAttachmentId=57220&from=issue]09/07/18 09:11179 kB from LIPA environment. I cannot validate if this realy happens that way in LIPA. And I cannot reproduce this issue by testclient on test environment, I always get only one OrdrExeRprt with two orders.","11/Jul/18 13:41;dw255;Two OrdrExeRprt messages are sent after activating the order. I am not sure if only one OrdrExeRprt message should be returned also for OrdrModify with ordrModType=""ACTI"".
{code:java}
<OrdrModify xmlns=""http://www.deutsche-boerse.com/m7/v1"" ordrModType=""ACTI"">
    <StandardHeader marketId=""XSOB""/>
    <OrdrList>
        <Ordr ordrId=""1037""...
result:
<OrdrExeRprt xmlns=""http://www.deutsche-boerse.com/m7/v1"">
    <StandardHeader marketId=""XSOB""/>
    <OrdrList>
        <Ordr ordrId=""1037"" initialOrdrId=""1037"" ... state=""IACT"" ... revisionNo=""2"" ... action=""UDEL""/>
<OrdrExeRprt xmlns=""http://www.deutsche-boerse.com/m7/v1"">
    <StandardHeader marketId=""XSOB""/>
    <OrdrList>
        <Ordr ordrId=""1038"" initialOrdrId=""1037"" parentOrdrId=""1037"" ... state=""ACTI"" ... revisionNo=""1"" ... action=""UADD""/>{code}","12/Jul/18 09:52;lt112;[~dw255] would it be possible to also include timestamps in the snippet or have you already deleted it?
It is not crucial, so just in case you already have it somewhere.","12/Jul/18 11:03;dw255;Messages from above example are already deleted. I did the same scenario today in SYT2 and example messages including timestamps are in attached file. But this might not be the same case as in JIRA description. This is ordrModType=""ACTI"". Change of order price is probably ordrModType=""MODI"".

[^XDEV-5207 examples.txt]","10/Aug/18 11:54;hu772;hello [~lt112] is there more testing left to he done or can we move this to done with fix version
[~eg288]","10/Aug/18 12:55;lt112;Hi [~hu772]
I guess so, the code-change in question is still in review
Only then it can move to the testing phase","11/Jan/19 10:23;cf948;Implementation done, automatic integration test in place.","22/Jan/19 16:19;tr866;As described in the subtask XP-245 modification of the order and activation are both working correctly with only one OrdrExeRprt message received with the list of two items.",,,,,,,,,,,,,,,,,,,,,,
SMXBID CLONE: H2H values for DE-DK1 are incorrect,XP-244,69228,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,ek176,ld849,ld849,12/Jun/18 20:52,04/Aug/20 19:22,22/Feb/21 13:21,05/Feb/19 10:06,,,Pre2020,,Capacity,,,,,R2.0-AgreedFixScope,,,"In the H2H matrix the value between TTG and DK1 are displayed as 0 even though the ATC on the direct border is 1695,3. The value is correctly reflected on the H2H between AT and DK1.",,ek176,hu772,ld849,qo794,qz412,radeale,,,,";26/Jun/18 16:25;qo794;7200",";28/Jun/18 09:55;qo794;14400",";09/Jul/18 15:40;qo794;21600",";10/Jul/18 14:12;qo794;7200",";11/Jul/18 14:33;qo794;25200",,,,,0,75600,,,0,75600,,,,SMXBID-752,,,,,,,,XP-1041,,M7P-2440,,,,,,,"12/Jun/18 20:52;ld849;H2H.png;https://jira.deutsche-boerse.com/secure/attachment/56507/H2H.png","12/Jun/18 20:52;ld849;TTG-DK1.png;https://jira.deutsche-boerse.com/secure/attachment/56508/TTG-DK1.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"The H2H matrix calculation library is already fixed, produces long values. Thus, fixing the overflow problem.

The H2H matrix calculation was capped by the CappedLong class at the value of 1.073.741.822 as agreed. Also the relevant XML messages have been capped.",,,,,,,, Major Incident,,64627200,,,,,,,,,,XP-53,,VectorInt replaced by VectorLong in PPMaxFlowCalculator,,,,,,,,,,,,12/Jun/18 20:35,,,,,,,,,,,,,,,,,,,,,"1|000yrt:000000j7",9223372036854775807,,,,,,,,,,,int overflow in PPMaxFlowCalculator,,,,,,,,,,,,Alpha Team Sprint 11,Alpha Team Sprint 12,Alpha Team Sprint 13,,,,,,,,,,,"Create multiple iIC with max capacity with NO common ATC. The value in H2H would in real be the sum of these iIC, but with this fix/hack is capped to the value 1.073.741.822 as agreed.",,,3.0,,,,,,,com.deutscheboerse.math.graph.routing.impl.MaxFlowCalculatorTest#shouldCalculateMaxFlowCorrectlyWithBigIntegers,Reply the same scenario as the customer,,,,,,,,,,,,,,,,,,,,master-graphx-2.1.x,graphx-2.1.x,XDEV-5053-performance,XP-244-h2h-values-integer-to-long,XDEV-5170-grid-copy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Jun/18 20:52;cbc@energinet.dk;

!H2H.png!

!TTG-DK1.png!","12/Jun/18 20:52;sw455;Please join the XBID Incident Committee conference call as soon as possible within the next 5 minutes.

Details for joining the Incident Committee conference call:
Conference ID:  101-703-487
Online meeting session URL: https://join.me/xbid_iccc 
Primary numbers:
Austria		+43.720.881.959
Belgium		+32.2.808.8662
Bulgaria		+359.2.437.2476
Croatia		+385.1.775.7101
Czech Republic	+420.228.881.313
Denmark	+45.6991.8003
Finland		+358.9.4259.9698
France		+33.9.7518.1777
Germany	+49.30.2240.3071
Greece		+30.21.1198.2986
Hungary		+36.1.700.8899
Ireland 		+353.1.531.4868
Italy		+39.06.8339.9900
Latvia 		+371.6616.3227
Lithuania	+370.521.40705
Luxembourg	+352.20.880.005
Netherlands	+31.20.808.3218
Norway		+47.2.396.1004
Poland		+48.22.397.0104
Portugal		+351.308.800.816
Romania		+40.31.630.2291
Slovakia		+421.2.3345.6680
Spain		+34.91.123.0202
Sweden		+46.8.4030.9107
Switzerland	+41.43.508.1539
United Kingdom	+44.20.3582.4515
","12/Jun/18 20:52;ld849;Hi [~cbc@energinet.dk], 
DBAG has just joined the ICCC","12/Jun/18 20:52;sw455;Dear all, DBAG has joined the ICCC Call - we are standing by for other all parties to join","12/Jun/18 20:52;mvancura@minsait.com;The incident is being discussed as part of the Launch process in the specific Launch call which you can join via the following details:

Please join my Online Meeting session by following the link below.
https://service.projectplace.com/pub/english.cgi/0/1?op=join_online_meeting&session_key=594269311


To join the conference call, dial one of the phone numbers below and enter the following access code when prompted:
594-269-311

No standard ICCC is expected at this moment, we agreed we will keep things focused in one call and that is the Launch call.","12/Jun/18 22:09;qo794;Trading/matching is not affected as ATC is calculated correctly, see an Atc broadcast from around that specific time:
{noformat}
2018-06-12 18:36:56.734: BROADCAST - Body: <?xml version=""1.0"" encoding=""UTF-8"" standalone=""yes""?>
<AtcDataNtf xmlns=""http://www.deutsche-boerse.com/m7/v1"">
    <AtcDataList date=""2018-06-12T22:00:00.000Z"" inArea=""10YDK-1--------W"" outArea=""10YDE-EON------1"" border=""DE-MA_DK1"">
        <AtcData periodStart=""2018-06-12T22:00:00.000Z"" periodEnd=""2018-06-12T23:00:00.000Z"" quantity=""683900""/>
        <AtcData periodStart=""2018-06-12T23:00:00.000Z"" periodEnd=""2018-06-13T00:00:00.000Z"" quantity=""260600""/>
        <AtcData periodStart=""2018-06-13T00:00:00.000Z"" periodEnd=""2018-06-13T01:00:00.000Z"" quantity=""0""/>
        <AtcData periodStart=""2018-06-13T01:00:00.000Z"" periodEnd=""2018-06-13T02:00:00.000Z"" quantity=""0""/>
        <AtcData periodStart=""2018-06-13T02:00:00.000Z"" periodEnd=""2018-06-13T03:00:00.000Z"" quantity=""0""/>
        <AtcData periodStart=""2018-06-13T03:00:00.000Z"" periodEnd=""2018-06-13T04:00:00.000Z"" quantity=""0""/>
        <AtcData periodStart=""2018-06-13T04:00:00.000Z"" periodEnd=""2018-06-13T05:00:00.000Z"" quantity=""335200""/>
        <AtcData periodStart=""2018-06-13T05:00:00.000Z"" periodEnd=""2018-06-13T06:00:00.000Z"" quantity=""116800""/>
        <AtcData periodStart=""2018-06-13T06:00:00.000Z"" periodEnd=""2018-06-13T07:00:00.000Z"" quantity=""217400""/>
        <AtcData periodStart=""2018-06-13T07:00:00.000Z"" periodEnd=""2018-06-13T08:00:00.000Z"" quantity=""364400""/>
        <AtcData periodStart=""2018-06-13T08:00:00.000Z"" periodEnd=""2018-06-13T09:00:00.000Z"" quantity=""211000""/>
        <AtcData periodStart=""2018-06-13T09:00:00.000Z"" periodEnd=""2018-06-13T10:00:00.000Z"" quantity=""226600""/>
        <AtcData periodStart=""2018-06-13T10:00:00.000Z"" periodEnd=""2018-06-13T11:00:00.000Z"" quantity=""278200""/>
        <AtcData periodStart=""2018-06-13T11:00:00.000Z"" periodEnd=""2018-06-13T12:00:00.000Z"" quantity=""0""/>
        <AtcData periodStart=""2018-06-13T12:00:00.000Z"" periodEnd=""2018-06-13T13:00:00.000Z"" quantity=""0""/>
        <AtcData periodStart=""2018-06-13T13:00:00.000Z"" periodEnd=""2018-06-13T14:00:00.000Z"" quantity=""0""/>
        <AtcData periodStart=""2018-06-13T14:00:00.000Z"" periodEnd=""2018-06-13T15:00:00.000Z"" quantity=""0""/>
        <AtcData periodStart=""2018-06-13T15:00:00.000Z"" periodEnd=""2018-06-13T16:00:00.000Z"" quantity=""611400""/>
        <AtcData periodStart=""2018-06-13T16:00:00.000Z"" periodEnd=""2018-06-13T17:00:00.000Z"" quantity=""1296900""/>
        <AtcData periodStart=""2018-06-13T17:00:00.000Z"" periodEnd=""2018-06-13T18:00:00.000Z"" quantity=""1971600""/>
        <AtcData periodStart=""2018-06-13T18:00:00.000Z"" periodEnd=""2018-06-13T19:00:00.000Z"" quantity=""2150400""/>
        <AtcData periodStart=""2018-06-13T19:00:00.000Z"" periodEnd=""2018-06-13T20:00:00.000Z"" quantity=""2172600""/>
        <AtcData periodStart=""2018-06-13T20:00:00.000Z"" periodEnd=""2018-06-13T21:00:00.000Z"" quantity=""2478200""/>
        <AtcData periodStart=""2018-06-13T21:00:00.000Z"" periodEnd=""2018-06-13T22:00:00.000Z"" quantity=""1695300""/>
    </AtcDataList>
</AtcDataNtf>.
2018-06-12 18:36:56.740: BROADCAST - Body: <?xml version=""1.0"" encoding=""UTF-8"" standalone=""yes""?><AtcDataNtf xmlns=""http://www.deutsche-boerse.com/m7/v1"">
<AtcDataList date=""2018-06-12T22:00:00.000Z"" inArea=""10YDE-EON------1"" outArea=""10YDK-1--------W"" border=""DE-MA_DK1"">
    <AtcData periodStart=""2018-06-12T22:00:00.000Z"" periodEnd=""2018-06-12T23:00:00.000Z"" quantity=""1696100""/>
    <AtcData periodStart=""2018-06-12T23:00:00.000Z"" periodEnd=""2018-06-13T00:00:00.000Z"" quantity=""1939400""/>
    <AtcData periodStart=""2018-06-13T00:00:00.000Z"" periodEnd=""2018-06-13T01:00:00.000Z"" quantity=""2200000""/>
    <AtcData periodStart=""2018-06-13T01:00:00.000Z"" periodEnd=""2018-06-13T02:00:00.000Z"" quantity=""2200000""/>
    <AtcData periodStart=""2018-06-13T02:00:00.000Z"" periodEnd=""2018-06-13T03:00:00.000Z"" quantity=""2240000""/>
    <AtcData periodStart=""2018-06-13T03:00:00.000Z"" periodEnd=""2018-06-13T04:00:00.000Z"" quantity=""2290000""/>
    <AtcData periodStart=""2018-06-13T04:00:00.000Z"" periodEnd=""2018-06-13T05:00:00.000Z"" quantity=""2284800""/>
    <AtcData periodStart=""2018-06-13T05:00:00.000Z"" periodEnd=""2018-06-13T06:00:00.000Z"" quantity=""1283200""/>
    <AtcData periodStart=""2018-06-13T06:00:00.000Z"" periodEnd=""2018-06-13T07:00:00.000Z"" quantity=""1182600""/>
    <AtcData periodStart=""2018-06-13T07:00:00.000Z"" periodEnd=""2018-06-13T08:00:00.000Z"" quantity=""1035600""/>
    <AtcData periodStart=""2018-06-13T08:00:00.000Z"" periodEnd=""2018-06-13T09:00:00.000Z"" quantity=""1189000""/>
    <AtcData periodStart=""2018-06-13T09:00:00.000Z"" periodEnd=""2018-06-13T10:00:00.000Z"" quantity=""1173400""/>
    <AtcData periodStart=""2018-06-13T10:00:00.000Z"" periodEnd=""2018-06-13T11:00:00.000Z"" quantity=""1121800""/>
    <AtcData periodStart=""2018-06-13T11:00:00.000Z"" periodEnd=""2018-06-13T12:00:00.000Z"" quantity=""1400000""/>
    <AtcData periodStart=""2018-06-13T12:00:00.000Z"" periodEnd=""2018-06-13T13:00:00.000Z"" quantity=""1400000""/>
    <AtcData periodStart=""2018-06-13T13:00:00.000Z"" periodEnd=""2018-06-13T14:00:00.000Z"" quantity=""1400000""/>
    <AtcData periodStart=""2018-06-13T14:00:00.000Z"" periodEnd=""2018-06-13T15:00:00.000Z"" quantity=""1400000""/>
    <AtcData periodStart=""2018-06-13T15:00:00.000Z"" periodEnd=""2018-06-13T16:00:00.000Z"" quantity=""2148600""/>
    <AtcData periodStart=""2018-06-13T16:00:00.000Z"" periodEnd=""2018-06-13T17:00:00.000Z"" quantity=""1483100""/>
    <AtcData periodStart=""2018-06-13T17:00:00.000Z"" periodEnd=""2018-06-13T18:00:00.000Z"" quantity=""818400""/>
    <AtcData periodStart=""2018-06-13T18:00:00.000Z"" periodEnd=""2018-06-13T19:00:00.000Z"" quantity=""649600""/>
    <AtcData periodStart=""2018-06-13T19:00:00.000Z"" periodEnd=""2018-06-13T20:00:00.000Z"" quantity=""627400""/>
    <AtcData periodStart=""2018-06-13T20:00:00.000Z"" periodEnd=""2018-06-13T21:00:00.000Z"" quantity=""321800""/>
    <AtcData periodStart=""2018-06-13T21:00:00.000Z"" periodEnd=""2018-06-13T22:00:00.000Z"" quantity=""1114700""/>
</AtcDataList>
{noformat}","12/Jun/18 22:10;qo794;Only H2H calculation is wrong, still investigating, waiting for a db dump from prod.","13/Jun/18 01:13;qo794;The H2H calculation algorithm contains most likely a bug, a capacity set to 1073741822 on internal interconnectors causing invalid H2H calculation, by decreasing it to 900000000 on all internal ICs H2H produces correct values - this can be a workaround for now until we find a fix.","13/Jun/18 08:15;radeale;As an internal note - this is quite strange, because the same value had not caused any problems to H2H Matrix during testing and also this is the default value for internal ICs as defined in DFS700, chapter _9.2.1.1 Default values for internal interconnectors_.","13/Jun/18 08:33;yp416;See also XDEV-341 and [http://172.19.250.235:8090/confluence/display/TD/M7+Absolute+quantity+limits] .","13/Jun/18 14:47;hu772; Edit Delete

The inner german borders should be at 900.000 MW now. Still no Change visible in H2H. Can you please check, what is still blocking ?
","13/Jun/18 15:55;yp416;@ [~qo794] Probably this is an int overflow in the H2H calculation. Could you check if a value of 1073741822 / 4 = 268.435.455 on all internal ICs works?","13/Jun/18 17:21;qo794;[~yp416] I've already found the place where the bug is in the code, yes, it's indeed an int overflow as already assumed yesterday. Unfortunately all ICs are affected, not only internal ones. The maximum capacity on IC must be lower than {{1073741822 / (max degree of a grid)}}","13/Jun/18 18:10;qo794;As agreed with [~qz412] the capacity of internal interconnectors should be set to 100000000, this values should be safe, the previous value was too generous and was still causing invalid h2h calculation in some cases.

An internal comment only: fixing the bug is quite complicated and should be decided whether it makes sense or not if customers accept the new maximum capacity value.","14/Jun/18 08:00;hu772;do we advise all TSO to implement this on their IC than?
[~qo794] [~eg288]","14/Jun/18 09:36;yp416;@ [~qo794] 
 * fixing is straighforward: Use longs instead of ints in *PPMaxFlowCalculator*
 * Save setting is 1073741822 / (max degree of a grid) as workaround
 * Max degree is 6 ( node AMP) in XBID_Configuration","14/Jun/18 09:39;hu772;can we please have conclusion on communication to TSOs please? [~eg288]","14/Jun/18 15:29;hu772;[~qo794]","18/Jun/18 08:26;qo794;Do we want to fix it? I don't see any feedback from the customer regarding the new limitation.","18/Jun/18 08:28;hu772;no feedback yet  - if we want to fix it is decision that has to be made by [~qz412]","26/Jun/18 12:48;qz412;We do wish to have this issue fixed. [~qo794] - as discussed, please dedicate up to 1 day to investigation and potential fixing and let us know the outcome. We will then decide based on the risk / effort needed whether we go for 1.5, keep for later or stay with the workaround.

Aligned with [~eg288] and [~rehapav].","28/Jun/18 10:27;qo794;The fix will affect only the H2H calculation, the routing algorithm will stay untouched. The fix itself is prepared, only tests are missing. We can delivery it with 1.5. [~qz412] please confirm, thanks.","04/Jul/18 11:50;qz412;[~rehapav], please fix in 1.5, thank you. ","11/Jul/18 14:33;qo794;By fixing this bug in graphx library another issue pops up:
* {{HubToHubNtf}} and {{HubToHubResp}} API messages bear {{int}} values as a result of H2H calculation hence they do not work with the new implementation as it computes values using {{long}} type

The clean solution of this situation is to amend the API xsd specification - changing {{int}} to {{long}}. [~qz412] and [~rehapav] please decide how to proceed, thanks.","12/Jul/18 10:51;radeale;The H2H Matrix calculation fix involves using the {{long}} data type instead of {{int}} in the calculation. This fix also affects the API as {{HubToHubNtf}} and {{HubToHubResp}} API messages bear {{int}} values for the ATC and after the fix an actual value to be relayed by these messages may be in some cases over the {{int}} limit.

Therefore the proper fix of the H2H Matrix calculation also involves changing the ATC {{int}} value for these messages to {{long}} and release of the new xsd (and also changes in _DFS510 - AMQP Public Message Interface - Trading_).

Releasing the fix without the new xsd may lead to validation errors and incorrect ATC calculation (the actual situation depends on the specific LTS implementation), therefore cannot be supported by DBAG.","12/Jul/18 17:03;radeale;The information was relayed to David Myška to be shared with the ITTF members.","07/Aug/18 12:36;qz412;Update from the customers:

_ITTF recommends to update the calculation in the way that any interim steps where needed are done with long data type but if the final result is larger than max int value it is reduced to max int value for storing and further communication of H2H matrix both in the GUI and in PMI_","07/Aug/18 15:48;radeale;The proposed solution is to be discussed, I'm personally in favour of this proposed way despite it not being entirely clean. In the end I think it is up to the PO, from dev perspective, as discussed with Kamil, it is possible.","31/Aug/18 15:59;qz412;Dear guys,

I would like to avoid quick and dirty fixes in general but the change of the API is not an easy thing to push through.

Before we back down I would like to understand what it would mean to completely change the representation of infinite capacity in the system altogether (i.e. not faking it by extremely high numbers and still adding/subtracting with each allocation but really replacing it by own dedicated state - e.g. ""infinite"") with all its implications (allocation on such ICs does not change the capacity, ICs exist only in a fixed configuration, are always active etc.).

If we understand what it would mean and the effort would be reasonable, I will happily go to the customers and not only force them to accept change of the API (as putting the arbitrary value in would break current schema) but offer full fledged fix to a whole problem area.

[~qo794] - i think you are the expert here

[~radeale] - pls follow

I am happy to discuss any time, thx, Ondra","13/Sep/18 10:22;radeale;[~qz412], [~qo794]: {color:#0747A6}Please assess the folllowing proposal.{color}

DBAG proposes the following comprehensive fix for the issue of H2H Matrix regarding the internal ICs:
- No changes to the XSD
- Internal ICs will have configured ""Infinity"" capacity values in the Reference Data configuration, these cannot be modified:
-- Max Capacity
-- Min Capacity
-- Default Capacity
-- Capacity resolution (1)
-- These values along with other defined in DFS700 chapter _9.2.1.1 Default values for internal interconnectors_ will set automatically by the system during the internal IC creation and cannot be modified.
- ATC values for internal ICs will be reported in the messages, outbound capacity files and reports as max INT
- ATC values for internal ICs will be reported in the GUI as _Infinite_ (or an adequate symbol or abbreviation)
","29/Jan/19 14:06;radeale;The agreed implementation solution is as follows:

1. No changes to the XSD
2. In case the capacity reported in the H2H Matrix would be larger than 1073741822, the shown capacity is 1073741822
3. In case the capacity reported in a broadcast or response message would be larger than 1073741822, the communicated capacity is 1073741822

Thanks all for your participation :)","05/Feb/19 10:00;ek176;When XSD change is later approved (to remove this hack), it should be sufficient to replace the `CappedLong` class with standard Java `Long` class. Also, search the project for `XP-244` string in comments, where I've tried to mark places, where the capping was applied and should be later removed."
"Get familiar with the assignment rules and history of ESAAR Option 1 and 2, create test model, refresh library of corner cases",XP-240,73536,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,qz412,qz412,11/Oct/18 15:26,04/Aug/20 19:41,22/Feb/21 13:21,31/Oct/18 14:27,,,Pre2020,,Shipping,,,,,,,,"Prepare test scenarios that cover the functionality and include:
 * Application of rules
 * Correct File data
 * Correct generation of SM Reports
 * Simple and complex splits (consult corner case library)
 * Chains of different Shipping Arrangement types

Focus on automation options:
 * How to address complex datasets and configurations to force routing into splits
 * How to do file comparison (potentially including reports) elegantly

Make the difficult & repetititve work easy! :)",,qz412,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-40,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,69552000,,,,,,,,,,XP-38,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000ytp:6",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Ampere Sprint 1,,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Oct/18 14:28;radeale;Test models created by Jakub and Alexandr:
S:\Energie\Prod_DEVELOP\002 Test\002 XBid Release\Test Models\15_CRs\CR064 Enhanced Preferred Shipper\CR-064-Enhanced_Preferred_Shipper_O2_v0.3.xlsx","10/Dec/18 11:57;radeale;Test Model updated:
S:\Energie\Prod_DEVELOP\002 Test\002 XBid Release\Test Models\15_CRs\CR064 Enhanced Preferred Shipper\CR-064-Enhanced_Preferred_Shipper_O2_v0.4.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
API-Related changes,XP-237,73528,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,11/Oct/18 14:11,04/Aug/20 19:41,22/Feb/21 13:21,09/Nov/18 14:51,,,Pre2020,,Capacity,Trading,,,,,,,"API changes where MAs has to be replaced with DAs:
- XSD - HubToHubReq contains mktArea (would work with mktArea, but woild be confusing) (DFS510)
- X_AREA header in AMQP messages contains MA (not mentioned in a spec)
- x-m7-group-id contains MA (x-m7-group-id is mentioned in DFS510, but not detailed)",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,72144000,,,,,,,,,,XP-110,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yvu:r000001029",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Nov/18 14:51;radeale;Changes described in the epic issue.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SM Impact analysis,XP-236,73527,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,11/Oct/18 13:58,04/Aug/20 19:41,22/Feb/21 13:21,09/Nov/18 14:47,,,Pre2020,,Capacity,,,,,,,,Please perform SM impact analysis regarding the _CR Halting of internal ICs must be possible_.,,jy268,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,72144000,,,,,,,,,,XP-110,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yvu:r00000102",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Oct/18 09:57;jy268;There should be no impact. SM is using trade path described by trade flows which are received from CORE.","12/Oct/18 10:32;radeale;Thanks Michal, just to make sure - when an FTC is configured for a ninternal IC and a halt event is triggered for the IC (contract and/or direction), the file is gonna be generated normally?","12/Oct/18 10:46;jy268;If the message is propagated to SM, file will be generated normally.","12/Oct/18 11:47;radeale;Thanx","09/Nov/18 14:47;radeale;No direct impact seen, halting operations on the internal ICs should trigger related file generation normally.",,,,,,,,,,,,,,,,,,,,,,,,,,,
CMI Impact analysis,XP-235,73526,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,11/Oct/18 13:56,04/Aug/20 19:41,22/Feb/21 13:21,17/Oct/18 11:36,,,Pre2020,,Capacity,,,,,,,,"Please perform CMI impact analysis regarding the _CR Halting of internal ICs must be possible_.

No impact, outbound and inbound configurations can be created for IICs.",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,74736000,,,,,,,,,,XP-110,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yvu:r000001f",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
User Manuals update,XP-233,73519,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,11/Oct/18 11:31,04/Aug/20 19:41,22/Feb/21 13:21,09/Nov/18 14:50,,,Pre2020,,Capacity,,,,,,,,"When XP-114 is done, please update the user manual(s) (MFG170, possibly MFG180).",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,72144000,,,,,,,,,,XP-110,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yvu:r00000101r",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Oct/18 11:32;radeale;Waiting for XP-114 to be done.","09/Nov/18 14:49;radeale;Will be replaced by a different task for complete user manual update.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
H2H Matrix Redesign,XP-232,73518,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,11/Oct/18 11:22,04/Aug/20 19:41,22/Feb/21 13:21,09/Nov/18 14:48,,,Pre2020,,Capacity,,,,,,,,"{color:#00875a}For detailed proposed solution please see HLS100A version 24 L1, chapter *3.2.3 H2H Matrix Overview*.{color}

H2H needs to be redesigned to accommodate changes resulting from moving being MA-based to being DA-based. This can be used as a basis for more broad changes like completely new graphical representation of the matrix.

+Calculation+ either/or:
 1. Calculation performed as it is
 2. Calculation performed by a separate module, the calculation is not on the critical path within the order book calculation, performance improvement

+Display+ either/or:
 1. As it is in Tobago
 2. A new page in a new (Shipping Module) style - opened from the TSO Admin view as a pop-up window
 - Benefit: Can be displayed in parallel to the current TSO Admin session, i.e. is shown as a second window
 - Modern view

Cost/Benefit analysis
 No Kafka! (Too expensive, overkill.)

+Possible new design, depends on the result of the consultations with the TSOs+

The new H2H Matrix designs emphasis usability and readability of the H2H values taking into account that the current H2H Matrix is barely usable safe on very large monitors.

Separate page for H2H, complete new design with two views selectable by a radio button:

1. Time based
 - Two time selection drop-down menus for selecting a time interval.
 - One drop-down menu for selecting a source DA.
 - When the values are selected and the button _Calculate_ is pressed, the values are shown.
 - A table is shown showing the capacity from/to the DA to all other DAs in the selected time interval. The number of columns corresponds to the selected time interval. See the example below.
 - The result can be exported into a CSV file.

_Example:_

Contract - CE(S)T Time (Start): 16:00-17:00
 Contract - CE(S)T Time (End): 20:00-21:00
|Capacity in MW|ATC from DA1|ATC to DA1|
|DA2|100|200|
|DA3|300|0|
|...|...|...|
|DAn|250|180|

2. DA-based
 - One drop-down menu for selecting a delivery interval.
 - Five DA drop-down menus in columns and five DA drop-down menus in rows.
 - When the values are selected and the button _Calculate_ is pressed, the values are shown.
 - The table shows capacities from and to selected DAs in the selected delivery interval, see the example below.
 - The result can be exported into a CSV file.

_Example:_
|Capacity in MW|ATC from DA1|ATC from DA2|ATC from DA3|ATC from DA4|Select a DA|
|ATC to DA2|230|x|150|44|x|
|ATC to DA5|450|140|325|34|x|
|ATC to DA6|0|24|16|121|x|
|Select a DA|x|x|x|x|x|
|Select a DA|x|x|x|x|x|

VDAs are available for display.",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,72144000,,,,,,,,,,XP-110,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yvu:r00000101i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Nov/18 14:48;radeale;The resulting H2H Matrix design described in the most recent R2.0 HLS100A specification.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TAR File doesn't contain the Entity Code in case of Balancing Mechanism,XP-222,73442,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,radeale,radeale,radeale,10/Oct/18 10:35,09/Oct/20 17:34,22/Feb/21 13:21,09/Oct/20 16:39,,,3.1.0,,Capacity,,,,,,,,"*Please implement this on a feature branch and wait for Green Light.* 

23/9/2020 Status
 Agreement reached with the customer:
{quote}Therefore we would like to propose to use the field contract_MarketAgreement.mRID in the TAR file for entering the entity code in case of a Special Allocation triggered.
{quote}
For details please see this comment.

After fixing please notify [~radeale] for a spec container.

+*STEP* *+TO*+ *REPRODUCE :*+
 # Connect to the CMM GUI using Explicit participant User
 # Execute a BalancingMechanism allocation and select an entity code 
 # Go to TSO Admin user and Download the TAR file
 # Check the Balancing Mechanism entity code in the TAR File

+*CURRENT RESULT:*+

CMM created a specific Time Series for the BM allocation but doesn't contain the entity code (see enclosed TAR file)

+*EXPECTED RESULT* :+

The BM Time Series should contain the entity code

+*SPECIFICATION :*+

In DFS800 chapter 4.1.5 TAR file,

""Balancing Mechanism allocations are listed in separate Time Series dedicated only to Balancing Mechanism activities. _*For each of the entity codes for the Balancing Mechanism there is a separate Time Series, specifying the entity code in the tag CapacityAgreementIdentificatio*_""",,od044,qo794,qz412,radeale,,,,,,";09/Oct/20 15:35;radeale;21600",,,,,,,,,0,21600,,,0,21600,,,,XDEV-4592,,,,,,,,,,,,,,,,,"07/Oct/20 15:28;od044;20180215_TAR_RTE-AMP_002.xml;https://jira.deutsche-boerse.com/secure/attachment/88331/20180215_TAR_RTE-AMP_002.xml","10/Oct/18 10:35;radeale;20180304_TAR_RTE-AMP_001.xml;https://jira.deutsche-boerse.com/secure/attachment/60293/20180304_TAR_RTE-AMP_001.xml","09/Oct/20 16:39;od044;20201009_TAR_RTE-AMP_001.xml;https://jira.deutsche-boerse.com/secure/attachment/88439/20201009_TAR_RTE-AMP_001.xml",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,11664000,,,,,,,,,,XP-53,,,,,,,,,,,,,,03/Mar/18 01:42,,,,,,,,,,,,,,,,,,,,,"1|y0bo27:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,HOT Sprint 0 (S),HOT Sprint 1,HOT Sprint 2 (S),HOT Sprint 3,HOT Sprint 4 (S),HOT Sprint 5,HOT Sprint 19,,,,,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-222-develop,XP-222-acceptance,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Oct/18 10:36;radeale;Moved from XDEV-4592, for more information please see the comments there.","07/Nov/18 09:08;qz412;Communication to the customers in XBID-4097:

This item can be delivered with R2.0 into UAT only if the discussion on how to process the xsd change is concluded by end of November 2018","27/Nov/18 11:04;radeale;_David Myska added a comment - 27/Nov/18 10:28_

_Dear DBAG,_

_TSOs/NEMOs agree to move the fix to a future release (after R2.0)._

_Kind regards_

_David_","08/Jan/20 15:37;radeale;We cannot fix it without the MSD giving as go (/) regarding the XSD change.

I'll park this ticket on me while the MSD aligns.","02/Apr/20 15:52;radeale;Let's close the ticket and reopen it if anything moves on the customer side (XBID-3383).","23/Sep/20 09:59;radeale;Agreement reached with the customer:

{quote}Therefore we would like to propose to use the field contract_MarketAgreement.mRID in the TAR file for entering the entity code in case of a Special Allocation triggered.{quote}

For details please see [this comment|https://jira.deutsche-boerse.com/browse/XBID-3383?focusedCommentId=294661&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-294661].

After fixing please notify [~radeale] for a spec container.","01/Oct/20 10:52;qo794;[~radeale] {{contract_MarketAgreement.mRID}} is currently already used in TAR files, should it be empty if it is not a BM allocation or leave it as is it for non-BM allocations? Please clarify, thanks.","01/Oct/20 15:24;radeale;Hi there,

the following solution has been agreed with the customer:

solution will be following for TAR files:

- For BM allocations the _contract_MarketAgreement.mRID_ field will contain the relevant BM code
- For regular allocations the field will be empty

Cheers!","01/Oct/20 15:52;qo794;Implemented.

Acceptance:
* pull request: https://github.deutsche-boerse.de/dev/xbid/pull/799
* branch: https://github.deutsche-boerse.de/dev/xbid/tree/XP-222-acceptance

Develop:
* pull request: https://github.deutsche-boerse.de/dev/xbid/pull/800
* branch: https://github.deutsche-boerse.de/dev/xbid/tree/XP-222-develop","07/Oct/20 15:27;od044;Test passed on docker with images from acceptance branch

- contract_MarketAgreement.mRID field will contain the relevant BM entity code in case BM allocations
- contract_MarketAgreement.mRID is empty in case regular allocation 

StR:
1. Configure TAR outbound file configuration for IC RTE-AMP
2. Configure Entity for balancing mechanism on the border FR-DE for particular balancing group
3. Enter implicit allocations (test client) to match trade between the IC RTE-AMP
4. Enter explicit allocations (explicit participant) without balancing mechanism
5. Enter explicit allocations (explicit participant) with balancing mechanism
6. Download TAR file via TSO Admin for the IC 

Example of files:
 [^20180215_TAR_RTE-AMP_002.xml] ","09/Oct/20 13:52;radeale;There is a change in the fix required by MSD in that sense that the field should contain the values as previously, only different value will be included for BM allocations:

{quote}we discussed it in MSD and as the _contract_MarketAgreement.mRID_ field cannot stay empty (it will breach XSD requirements) and as it might cause issues with parties who use TAR for regular allocations data today we kindly ask you to stick to original MSD request i.e.

- _contract_MarketAgreement.mRID_ field content is changed only for BM allocations,
- for regular allocations we understand the field today contain the same information as the field _auction.mRID_ and this should remain unchanged.{quote}

Thanks","09/Oct/20 14:17;qo794;Implemented.

Acceptance:
* pull request: https://github.deutsche-boerse.de/dev/xbid/pull/799
* branch: https://github.deutsche-boerse.de/dev/xbid/tree/XP-222-acceptance

Develop:
* pull request: https://github.deutsche-boerse.de/dev/xbid/pull/800
* branch: https://github.deutsche-boerse.de/dev/xbid/tree/XP-222-develop","09/Oct/20 16:38;od044;Test passed on docker with images from acceptance branch 

- contract_MarketAgreement.mRID field will contain the relevant BM entity code in case BM allocations
- contract_MarketAgreement.mRID is same as field acution.mrid  in case regular allocation remain unchanged 

StR are them as comment above 

example of new file  [^20201009_TAR_RTE-AMP_001.xml] ",,,,,,,,,,,,,,,,,,,
AIP100 - Architecture diagram update,XP-176,73262,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,,radeale,radeale,05/Oct/18 14:26,31/Aug/20 15:39,22/Feb/21 13:21,11/Apr/19 15:33,,,Pre2020,,Capacity,Shipping,Trading,,,Batch_5,,,"Diagram Figure 1: Logical Overview of XBID Architecture needs to be updated to include the SM-Integration module.

The file is stored in:

S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\05 Architecture and Infrastructure\AIP100 Technical Concept (CX3189)\Related Files\AIP100 Technical Architecture Topology Diagram_v5.21_v2.vsd

And it would be nice if somebody with Vision could update the file.

_David Siro_ can be consulted about the technical perspective of the change.

!AIP100 Technical Architecture Topology Diagram_v5.21_v2.png!",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,XDEV-4776,,,,,,,,,,,,,,,,,"05/Oct/18 14:26;radeale;AIP100 Technical Architecture Topology Diagram_v5.21_v2.png;https://jira.deutsche-boerse.com/secure/attachment/60149/AIP100+Technical+Architecture+Topology+Diagram_v5.21_v2.png","05/Oct/18 14:26;radeale;AIP100 Technical Architecture Topology Diagram_v5.21_v3_by_XDEV-4776.PNG;https://jira.deutsche-boerse.com/secure/attachment/60150/AIP100+Technical+Architecture+Topology+Diagram_v5.21_v3_by_XDEV-4776.PNG","05/Oct/18 14:26;radeale;AIP100 Technical Architecture Topology Diagram_v5.22_XBID-2957_fixed2.png;https://jira.deutsche-boerse.com/secure/attachment/60151/AIP100+Technical+Architecture+Topology+Diagram_v5.22_XBID-2957_fixed2.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,58924800,,,,,,,,,,XP-174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yvu:r03i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Apr/19 15:33;radeale;Accepted by the customer.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AIP100 - Event-Driven Architecture diagram update,XP-175,73261,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,05/Oct/18 14:23,04/Aug/20 19:41,22/Feb/21 13:21,06/May/19 10:34,,,Pre2020,,Capacity,Trading,,,,Batch_5,waiting-customer,,"The Event-Driven Architecture diagram on the page 6 need update based on the outcome of the Batch 4 specification update process.

Also the name needs to be set. (""Event-Driven Architecture diagram"" - agreed by the customer.)

Source:
S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\05 Architecture and Infrastructure\AIP100 Technical Concept (CX3189)\Attachment 4E - AIP100 - Software Architecture_v3.00.docx

See also XBID-3607.",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,XDEV-5415,,,,,,,,,,,,,,,,,"18/Apr/19 15:19;radeale;Event-Driven Architecture diagram.png;https://jira.deutsche-boerse.com/secure/attachment/68176/Event-Driven+Architecture+diagram.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,56851200,,,,,,,,,,XP-174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yrt:0ujzw",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Home Office team 24,Home Office Team 25 [S],,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Apr/19 15:32;radeale;Info provided to the customer that the actual update is not needed.","06/May/19 10:34;radeale;Ticket conclusion agreed in the 5th of May TWG/FTF call and ticket processed in the Batch 5.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Documentation - Activate After Publish diagram,XP-171,69681,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,26/Jun/18 10:29,31/Aug/20 15:39,22/Feb/21 13:21,17/Apr/19 10:37,,,Pre2020,,Capacity,,,,,Batch_5,,,"*Document:* HLS100A

*Chapter* (new): 2.10.5.1 Capacity publishing and IC activation

*Details:* Text and diagram added to the new chapter:

The following diagrams describe on timeline examples how the system behaves before and after GOT (Gate Opening Time) in relation to the Activate After Publish interconnector setting, IC/Direction/Delivery Interval halting and capacity files providing to the system.

1. Capacity files provided, Activate After Publish = On
 When the capacity publishing is triggered when the Automatic Publish Offset is reached and the Activate After Publish option is active on the IC, the IC is put into active state even if previously the was a service, direction or contract halt present on the IC.

!IC Activation diagram AAP-ON.png|width=564,height=182!
 _IC auto-activated with the capacity publishing with AAP = On_

2. Capacity files provided, Activate After Publish = Off
 When the capacity publishing is triggered when the Automatic Publish Offset is reached and the Activate After Publish option is *not active* on the IC, the IC is not put into active state.

!IC Activation diagram AAP-OFF.png|width=564,height=182! 
 _IC not auto-activated with the capacity publishing with AAP = Off_

3. Capacity files not provided, Activate After Publish = On
 When no capacity files are provided before the Automatic Publish Offset is reached on the IC, capacity is not published and IC is not activated even when is active on the IC. The system checks every 5 minutes for available capacity files for automatic capacity publishing before the GOT is reached, then the checks are immediate.

!IC Activation diagram Not Sent.png|width=564,height=182! 
 _No capacity files provided, capacity not published, IC not activated_

*Reason:* The relation between automatic capacity publishing and Activate After Publish needed clarification (eg SMXBID-793, SMXBID-767).

{color:#707070}I am thinking about drawing a digaram - one that shows the publish offset time, publish operation, IC Halt operation and reupload of files and subsequent reactivation which clearly shows that when the offset time is passed the cascade correctly does publish -> activate. We could use that one in a container and put it in new version of specs... to end this vicious circle of ""surprises"" on TSO side{color}",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XDEV-5404,XDEV-5256,,,,,,"29/Aug/18 11:58;radeale;IC Activation diagram AAP-OFF.png;https://jira.deutsche-boerse.com/secure/attachment/58524/IC+Activation+diagram+AAP-OFF.png","29/Aug/18 11:58;radeale;IC Activation diagram AAP-ON.png;https://jira.deutsche-boerse.com/secure/attachment/58525/IC+Activation+diagram+AAP-ON.png","29/Aug/18 11:58;radeale;IC Activation diagram Not Sent.png;https://jira.deutsche-boerse.com/secure/attachment/58526/IC+Activation+diagram+Not+Sent.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,83203200,,,,,,,,,,XP-174,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000y89:00i1s0001",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Jul/18 10:47;radeale;S:\Energie\Prod_DEVELOP\001 XBID\002 System Documentation\03 Functional Specifications\HLS100A Functional Description Capacity Management Module\Support Documents\XDEV-5498 IC Activation diagram.vsdx","04/Jul/18 15:20;radeale;Comment from XDEV-5256:
bq. CBS has been uploaded at 21:55:21 but autopublishing is setup to start at 21:00:00 and is tried again every 5 minutes until 21:55:00. So no CBS was present therefore no autopublish happened.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACER Reporting - Assessment of input data,XP-152,73209,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,de698,de698,de698,04/Oct/18 15:36,04/Aug/20 19:40,22/Feb/21 13:21,19/Oct/18 15:17,,,Pre2020,,Trading,,,,,,,,"* It is a preparation task
 * Output is a specification type document sent out to the customers on 10.10.2019

The team needs to complete the assessment of input data for ACER reports: which exact data will be collected and saved, from where and with what frequency.

Reason:

“In order to deliver some of the required data retrospectively (from January 2019) a minor release may be required so that the {color:#4c9aff}data can be collected & saved and so we can generate the reports once the full functionality is integrated.{color}

Right now we know that it would not be possible to deliver the data for requested +bid-ask spread+ retrospectively because the data is not currently collected / saved.

There could be +other items+, but we need the final requirements to complete the assessment.”

 ",,de698,qz412,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-272,,,,,,,"04/Oct/18 15:55;de698;Data types and attributes - Intraday prices.PNG;https://jira.deutsche-boerse.com/secure/attachment/60111/Data+types+and+attributes+-+Intraday+prices.PNG","04/Oct/18 15:55;de698;Data types and attributes - Intraday volumes time to delivery.PNG;https://jira.deutsche-boerse.com/secure/attachment/60112/Data+types+and+attributes+-+Intraday+volumes+time+to+delivery.PNG","04/Oct/18 15:55;de698;Data types and attributes - Intraday volumes.PNG;https://jira.deutsche-boerse.com/secure/attachment/60113/Data+types+and+attributes+-+Intraday+volumes.PNG","04/Oct/18 15:35;de698;XSD Schema for Intraday Prices.png;https://jira.deutsche-boerse.com/secure/attachment/60110/XSD+Schema+for+Intraday+Prices.png","04/Oct/18 15:35;de698;XSD Schema for Intraday Volumes - time to delivery.png;https://jira.deutsche-boerse.com/secure/attachment/60109/XSD+Schema+for+Intraday+Volumes+-+time+to+delivery.png","04/Oct/18 15:35;de698;XSD Schema for Intraday Volumes.png;https://jira.deutsche-boerse.com/secure/attachment/60108/XSD+Schema+for+Intraday+Volumes.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,73958400,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yvu:r00006",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Oct/18 14:28;de698;*+Assessment:+*
 # We can conclude that the data required for creation of reports ID volume, ID volume last hour, ID Prices can be retrieved retrospectively for a period of up to 40 days.
 # In order to collect the data for Bid-Ask spread, significant development work is needed with potential risk of not having the solution ready for running the Bid-Ask spread reporting from the 1st of Jan.

*+Risk:+*

There is a concern that we would like to highlight. Based on our internal analysis, collecting all the data necessary for Bid-Ask spread will require a release latest in December. Due to amount of implementation work related to this topic, this deadline is a high risk to achieve. We would therefore like to ask for quick alignment on occurring questions and issues.

*+Questions:+*

1) ID volumes:

We would like to clarify what is understood under Auction in the provided documentation?

Is there a requirement to distinguish between trades from continuous trading and from auction in the reports?

2) BZ definition:

Can we confirm whether the Bidding Zone for ACER Reporting purposes can be mapped to Delivery Area? This question was raised in the previous communication as well and the answer was still pending. Recently provided final documentation refers to BZ definition at entso-e page: ""Bidding Zone: Bidding Zone means the largest geographical area within which Market Participants are able to exchange energy without Capacity Allocation.""

Such definition is not clear in the context of XBID and can lead to misinterpretation.

3) Bid-ask spread example

Hourly sampling will be necessary for the bid-ask spread data. There are several ways how to solve this task.

Our current understanding of the bid-ask spread: the sampling occurs periodically every hour -> the extracted data is the difference between best bid and best ask price, i.e. only the top orders from the OBK, which means one value per hour is extracted (per product, contract, BZ). For a contract and BZ these values from each hour are averaged.

Could you confirm that this understanding is correct? Could you also provide an example of Bid-Ask spread report specifically (Process type A03)? Or is there no conceptual difference between reports with process types A01, A02, A03?

4) Handling of recalled/cancelled trades is not mentioned in the documentation.

Could you please provide any specific requirements regarding the handling of recalled/cancelled trades?

5) In all provided examples, productID is given as e.g. A01, same as processType designation. Is it correct?

 ","16/Oct/18 13:45;de698;Answers were provided:
{quote}TWG FTF formulated on meeting 11/10 answers to your questions above:
 # We do not require to distinguish between continuous trading and auctions (auction doesn't mean batch matching in this connection).
 # BZ = Market area, however, PXs with more areas can better assess it
 # Your understanding is correct. Example is in the attachment [^exampleAskBidSpread.xlsx]
 # See - CACM-monitoring-Detailed_Data_Description_v2.pdf, paragraph 1. Scope and Purpose _""All data should reflect trades, which were materialized, meaning that any cancelled or withdrawn trades shall not be included in the data submission.""_
 # See documents v1.3 where the field ProductId was already altered by value e.g ""Z01""{quote}
Discussion about chosen solution followed - see XP-272.

Deadline to provide the ""XBID modification needs (functional description, impact on XBID system, potential timeline) that needs to be implemented before EoY"" is *17/10*.","19/Oct/18 15:17;qz412;Assessment done, communicated to the customers.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CMI - incoming email processed 2x - try to reproduce,XP-134,67759,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,tr866,xl987,xl987,26/Apr/18 13:12,04/Aug/20 19:21,22/Feb/21 13:21,17/Jan/19 09:16,,,Pre2020,,Capacity,,,,,R2.0-AgreedFixScope,,,"{color:#de350b}<<<Added to Latent Faults 1.x based on e-mail from Vlada Satek, 31/10/2018>>>{color}

Test Conditions:
 * To test the new email server on SysTest 3,
 * Sending an encrypted and signed email from [amp@xbid-test.deutsche-boerse.com|mailto:amp@xbid.deutsche-boerse.com] to CMI SysTest 3 component - check the correct processing and acknowledgement

Test Results:
 * email is sent with NTC file for IC AMP-APG
 * Email is received, decrypted and file is saved and published
 * The ACK is sen
 * Email is processed twice, the 1st ACK is an 'OK' the 2nd is 'duplicate, ignoring'

{code:java}
2018-04-26T10:43:36.020Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.MailHandler - [imap://10.136.12.249:143/INBOX, imap://10.136.140.250:143/INBOX] : [1] messages. Fetching...2018-04-26T10:43:36.020Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - From : amp <amp@xbid-test.deutsche-boerse.com>, subject: tramtata2018-04-26T10:43:36.026Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - Email encryption is enabled for 10XDE-RWENET---W, email being processed is required to be encrypted and signed2018-04-26T10:43:36.026Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.SMIMEConverter - Email message decrypting2018-04-26T10:43:36.086Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.SMIMEConverter - Email message signature veryfing2018-04-26T10:43:36.125Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.MailUtils - Changing header key from  <U+0080>$<U+0080>^D<U+0082>^K!Content-Type to Content-Type with value multipart/mixed;        boundary=""----=_NextPart_000_0058_01D3DD5C.3001A420""2018-04-26T10:43:36.125Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - Message multipart/mixed;        boundary=""----=_NextPart_000_0058_01D3DD5C.3001A420""2018-04-26T10:43:36.129Z [TaskScheduler-3][][] INFO  c.d.e.c.t.m.EotFilteredStream - Skipped 4 byte-blocks from incoming email file2018-04-26T10:43:37.370Z [mportExecutor-3][][] INFO  c.d.e.f.e.GenericExporter - File saved successfully : File:ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000.xml in 0.002 seconds2018-04-26T10:43:37.370Z [mportExecutor-3][][] INFO  c.d.e.c.s.AckServiceImpl - Acknowledgement created: ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000.xml2018-04-26T10:43:37.390Z [mportExecutor-3][][] INFO  c.d.e.c.s.AckServiceImpl - Acknowledgement sending: File:ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000.xml to: 10XDE-RWENET---W2018-04-26T10:43:37.397Z [mportExecutor-3][][] INFO  c.d.e.c.t.m.MailHandler - Creating encrypted e-mail for 10XDE-RWENET---W2018-04-26T10:43:37.415Z [mportExecutor-3][][] INFO  c.d.e.c.t.m.MailHandler - Sending From: xbsyt3-cmi@xbid-test.deutsche-boerse.com, To: amp@xbid-test.deutsche-boerse.com, Subject: ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000.xml, Attachment: ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000.xml2018-04-26T10:43:37.494Z [mportExecutor-3][][] INFO  c.d.e.c.s.AsyncFileImporterImpl - Capacity publishing of incoming file: 39002602018-04-26T10:43:37.842Z [ventExecutor-50][][] INFO  c.d.e.c.s.EventService - Handling PublishEvent{publishMode=NTC_ADJUSTMENT} AbstractCmmApplicationEvent{connectorIds=[5], days=[2018-04-26T00:00:00.000+02:00], eventTimestamp=2018-04-26T12:43:37.616+02:00} AbstractApplicationEvent{uuid='e26ae454-d1f5-30a8-18c7-43d835ee89a6'}2018-04-26T10:43:41.013Z [TaskScheduler-9][][] INFO  c.d.e.c.t.m.MailHandler - [imap://10.136.12.249:143/INBOX, imap://10.136.140.250:143/INBOX] : [1] messages. Fetching...2018-04-26T10:43:41.013Z [TaskScheduler-9][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - From : amp <amp@xbid-test.deutsche-boerse.com>, subject: tramtata2018-04-26T10:43:41.018Z [TaskScheduler-9][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - Email encryption is enabled for 10XDE-RWENET---W, email being processed is required to be encrypted and signed2018-04-26T10:43:41.018Z [TaskScheduler-9][][] INFO  c.d.e.c.t.m.SMIMEConverter - Email message decrypting2018-04-26T10:43:41.029Z [TaskScheduler-9][][] INFO  c.d.e.c.t.m.SMIMEConverter - Email message signature veryfing2018-04-26T10:43:41.035Z [TaskScheduler-9][][] INFO  c.d.e.c.t.m.MailUtils - Changing header key from  <U+0080>$<U+0080>^D<U+0082>^K!Content-Type to Content-Type with value multipart/mixed;        boundary=""----=_NextPart_000_0058_01D3DD5C.3001A420""2018-04-26T10:43:41.035Z [TaskScheduler-9][][] INFO  c.d.e.c.t.m.MimeMessageTransformer - Message multipart/mixed;        boundary=""----=_NextPart_000_0058_01D3DD5C.3001A420""2018-04-26T10:43:41.038Z [TaskScheduler-9][][] INFO  c.d.e.c.t.m.EotFilteredStream - Skipped 4 byte-blocks from incoming email file2018-04-26T10:43:42.072Z [mportExecutor-4][][] INFO  c.d.e.f.e.GenericExporter - File saved successfully : File:ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000.xml in 0.001 seconds2018-04-26T10:43:42.072Z [mportExecutor-4][][] INFO  c.d.e.c.s.AckServiceImpl - Acknowledgement created: ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000.xml2018-04-26T10:43:42.074Z [mportExecutor-4][][] INFO  c.d.e.c.s.AckServiceImpl - Acknowledgement sending: File:ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000.xml to: 10XDE-RWENET---W2018-04-26T10:43:42.080Z [mportExecutor-4][][] INFO  c.d.e.c.t.m.MailHandler - Creating encrypted e-mail for 10XDE-RWENET---W2018-04-26T10:43:42.095Z [mportExecutor-4][][] INFO  c.d.e.c.t.m.MailHandler - Sending From: xbsyt3-cmi@xbid-test.deutsche-boerse.com, To: amp@xbid-test.deutsche-boerse.com, Subject: ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000.xml, Attachment: ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000.xml2018-04-26T10:45:00.071Z [ventExecutor-79][][] INFO  c.d.e.c.s.EventService - Handling DeliveryIntervalPhaseEvent{phase=BALANCING} AbstractCmmApplicationEvent{connectorIds=[78], days=[2018-04-26T00:00:00.000+02:00], eventTimestamp=2018-04-26T12:45:00.045+02:00} AbstractApplicationEvent{uuid='655d9f4c-4fc0-2b9d-5140-83100f6255d1'}2018-04-26T10:45:00.072Z [ventExecutor-77][][] INFO  c.d.e.c.s.EventService - Handling DeliveryIntervalPhaseEvent{phase=CLOSED} AbstractCmmApplicationEvent{connectorIds=[49, 50, 51, 3, 52, 53, 7, 8, 78], days=[2018-04-26T00:00:00.000+02:00], eventTimestamp=2018-04-26T12:45:00.045+02:00} AbstractApplicationEvent{uuid='dc205a23-3f79-107a-593b-ae452bacf0cb'}2018-04-26T10:45:00.073Z [ventExecutor-80][][] INFO  c.d.e.c.s.EventService - Handling DeliveryIntervalPhaseEvent{phase=DELIVERY} AbstractCmmApplicationEvent{connectorIds=[49, 50, 51, 3, 52, 5, 53, 78], days=[2018-04-26T00:00:00.000+02:00], eventTimestamp=2018-04-26T12:45:00.045+02:00} AbstractApplicationEvent{uuid='5e96abf9-4377-836d-75f4-7179f1400bee'}{code}",,dw255,qo794,radeale,tr866,xl987,,,,,";02/May/18 15:18;qo794;1800",";03/May/18 14:53;qo794;16200",";04/May/18 15:31;qo794;7200",";11/Jun/18 14:39;qo794;10800",,,,,,0,36000,,,0,36000,,,,,,,,,,,,,,,,,,,,,"26/Apr/18 13:17;xl987;ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000_1xml;https://jira.deutsche-boerse.com/secure/attachment/55087/ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000_1xml","26/Apr/18 13:17;xl987;ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000_2.xml;https://jira.deutsche-boerse.com/secure/attachment/55086/ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000_2.xml","26/Apr/18 13:20;xl987;ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000_2xml;https://jira.deutsche-boerse.com/secure/attachment/55089/ACK_C0001_AT-DE_NTC_AMP_2_1_20180426000000_2xml","26/Apr/18 13:17;xl987;C0001_AT-DE_NTC_AMP_2.xml;https://jira.deutsche-boerse.com/secure/attachment/55088/C0001_AT-DE_NTC_AMP_2.xml",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,66355200,,,,,,,,,,XP-53,,,,,,,,,,,,,,26/Apr/18 13:12,,,,,,,,,,,,,,,,,,,,,"1|y07vfw:i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Ampere Sprint 10,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Apr/18 07:05;qo794;Tested with various CMI email configurations and found out that each and every email is downloaded from the new email server twice if an automatic deletion is turned on. If emails are not deleted once they are downloaded by CMI, everything works properly. Needs further investigation together with testers.","12/Oct/18 15:42;dw255;Tested in SYT2 with XBID 1.4.10.8 and in SYT3 with XBID 1.5.8. NTC files were sent in encrypted email from [nois@xbid-test.deutsche-boerse.com|mailto:nois@xbid-test.deutsche-boerse.com] and each email was processed only once.

However this issue should not be closed only because it was not reproduced today. It doesn't seem to be deterministic.","24/Oct/18 07:58;qo794;[~dw255] please test it again, if it's not present on our test envs any longer, close the jira, thanks.","15/Jan/19 14:22;tr866;Issue re-occured as described in the subtask XP-896.",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Documentation changes,XP-114,73126,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,radeale,radeale,03/Oct/18 10:22,04/Aug/20 19:40,22/Feb/21 13:21,09/Nov/18 14:39,,,Pre2020,,Capacity,,,,,,,,"*Documents:* HLS100A, DFS700

*Details:* Changes made in XBID-2703 *{color:#de350b}reverted{color}*.

*Document:* HLS100A

*Chapter:* 2.13 H2H Matrix

*Details:* 
 Text replaced:
 *{color:#0747a6}Market Areas{color}* replaced with *{color:#00875a}Delivery Areas{color}*.

*Chapter:* 2.7 Virtual Areas

*Details:* 
 Text replaced:
{code:java}
VAs do not appear within the H2H matrix;{code}
With:
{code:java}
VAs do appear within the H2H matrix;{code}
*Chapter:* 3.1.2 Preferences

*Details:* 
 *{color:#0747a6}Market Areas{color}* replaced with *{color:#00875a}Delivery Areas{color}*.

*Chapter:* 3.2.3 H2H Matrix Overview

*Details:*
 - *{color:#0747a6}Market Areas{color}* (including abbreviations MA -> DA) replaced with *{color:#00875a}Delivery Areas{color}* where applicable
 - Screenshots updated
 - Description is updated according to the agreed solution of the CR

*Document:* DFS510

*Chapter:* 5.5.16 Hub-to-Hub ATC Matrix Request (HubToHubReq)

*Details:* 
 Text replaced:
{code:java}
mktArea{code}
With:
{code:java}
deliveryArea{code}
Text replaced:
{code:java}
Market Area{code}
With:
{code:java}
Delivery Area{code}
*Chapter:* 5.5.17 Hub-to-Hub Matrix Report (HubToHubResp), 5.5.18 Hub-to-Hub Notification (HubToHubNtf)

*Details:*

Text replaced:
{code:java}
Market Area(s){code}
With:
{code:java}
Delivery Area(s){code}
Text replaced:
{code:java}
marketArea{code}
With:
{code:java}
deliveryArea{code}
Where applicable along with related abbreviations (MA -> DA).

*Chapter:* 3.3.4.1 Sequence Number Reconciliation Broadcast

*Details:*
 Text replaced:
{code:java}
cmm.h2h.MADK1{code}
With:
{code:java}
cmm.h2h.DADK1{code}

*Document:* DFS700

*Chapter:* 9.2.1.1 Default values for internal interconnectors

*Details:* Chapter deleted.

*Reason:* Change Request _Halting of internal ICs must be possible_.",,qz412,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XBID-2703,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,72144000,,,,,,,,,,XP-110,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yvu:r00000101",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Oct/18 13:02;qz412;R2.0 Specs update sent for review on 23/10/2018. Waiting for reaction.","07/Nov/18 09:55;qz412;R2.0 specs second-round, no change in suggested solution.","09/Nov/18 14:40;radeale;Implemented in the R2.0 specs.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SOB Trading impact,XP-113,73123,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,radeale,radeale,radeale,03/Oct/18 10:15,04/Aug/20 19:40,22/Feb/21 13:21,09/Nov/18 14:45,,,Pre2020,,Trading,,,,,,,,"Halting of internal ICs must be possible without negative impact on the system.

Please analyse what would be impact of halted ICs on the trading and whether any code changes are necessary to facilitate the change.",,lt112,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,TECHLOG-1252,SERVICE-1871,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,72144000,,,,,,,,,,XP-110,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yvu:r000001019",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Oct/18 16:59;lt112;I see no change required in trading.
TODO consult halting process with [~qo794]","03/Oct/18 16:59;lt112;UPDATE: https://jira.deutsche-boerse.com/browse/XP-111 is the only way it could affect trading, and as I can see, Kamil has already analyzed it.","11/Oct/18 14:27;radeale;Michael, could you please check impact on PblcOrdrBooksDeltaRprt? [~eh941] suppose the message communicates changes on the MA level.","11/Oct/18 15:57;lt112;{{PblcOrdrBooksDeltaRprt}} contains {{LastTradeInfo}} per market area. It's ""calculation"" is in no way influenced by external/internal inter-connectors.
As such, disconnected delivery area can still receive updates about {{LastTradeInfo}} in it's market area, but it's just the result of its definition and this behavior should be expected.
In other words, it still should have no impact.","11/Oct/18 16:01;radeale;Consider changing the LastTradeInfo to be done per DA instead of MA.","09/Nov/18 14:45;radeale;No changes necessary, the trading depends on the CMM in this regard.",,,,,,,,,,,,,,,,,,,,,,,,,,
CMM H2H Matrix impact,XP-112,73121,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,radeale,radeale,radeale,03/Oct/18 10:13,04/Aug/20 19:40,22/Feb/21 13:21,09/Nov/18 14:52,,,Pre2020,,Capacity,,,,,,,,"Halting of internal ICs must be possible without negative impact on the system.

Please analyse:
 * what would be current impact of halted ICs on the H2H Matrix
 * Also consider possibility of redesigning the H2H Matrix to show DAs instead of MAs (related to the discussion in XP-59).

Open questions:
 - Separate page for H2H?
 - Calculation performed by a separate module?
 - Should VDAs be displayed?",,qo794,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,72144000,,,,,,,,,,XP-110,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yvu:r00000102i",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Oct/18 15:57;qo794;* MA-MA needs to be changed to DA-DA in general (API, GUI)
* GUI: worth redesigning - more user-friendly
* API changes:
** xsd - HubToHubReq contains mktArea
** h2h broadcasts are sent to cmm.h2h.MA (internal)
** internal routing is based on market areas (internal)
** X_AREA header contains MA
** x-m7-group-id contains MA","09/Nov/18 14:51;radeale;Changes described in the epic body and in HLS100A v24.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CMM routing impact,XP-111,73119,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,radeale,radeale,radeale,03/Oct/18 10:10,04/Aug/20 19:41,22/Feb/21 13:21,09/Nov/18 14:52,,,Pre2020,,Capacity,,,,,,,,"Halting of internal ICs must be possible without negative impact on the system.

Please analyse whether this can be currently done without negative impact on the routing in the Core (CMM) or other negative consequences.",,qo794,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"The routing algorithm does not distinguish between internal and ""normal"" interconnectors hence routing should not be affected, CMM allocations are made on ICs - nothing related only to ""normal"" ICs, working already.",,,,,,,,,,75340800,,,,,,,,,,XP-110,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yvu:r00000102r",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Oct/18 15:49;qo794;The routing algorithm does not distinguish between internal and ""normal"" interconnectors hence routing should not be affected, CMM allocations are made on ICs - nothing related only to ""normal"" ICs, working already.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
High time to stop Trading after both SOB Equiry instances are down,XP-108,73094,Bug,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Major,Done,radeale,radeale,radeale,02/Oct/18 15:02,04/Aug/20 19:22,22/Feb/21 13:21,10/Jan/19 17:25,,,Pre2020,,Trading,,,,,R2.0-AgreedFixScope,,,"{color:#de350b}<<<Added to 1.x Latent Faults based on Vlada Satek's e-mail from 31st Oct 2018>>>{color}

DBAG proposes to introduce isAlive checks between XBID Core and the SOB-Enquiry modules:
 - Checks are performed every 30 seconds
 - When there are three negative consecutive isAlive checks, SOB-Enquiry modules are deemed _unavailable_ and the SOB Trading is put to HALT
 - SOB-Enquiry in deemed _available_ after a positive isAlive check
 - There is no automatic unhalting of the Trading once SOB-Enquiry is available again",,qz412,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,SMXBID-578,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,74563200,,,,,,,,,,XP-53,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yrt:3r",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Ampere Sprint 9,Ampere Sprint 10,,,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-1261-guava-28,selenide-poc,XP-2942,tomcat-rollback,XP-3025-catalina-timezone,xbid-losses-poc,XP-2484,XP-3230,XP-3110-deprecated-log,XP-3070,xbid-2.0.25.x,fixing-failover,plewmic-scripts,XP-1504,XP-2506-xbid-dev-env,trailing-slash-syt1,XP-456,XP-2979-postgresql,XP-3264,develop,XP-2694,XP-2232,XP-2501-to-xbid-dev-env,XP-4273-owasp-zap-enable,traversal-XP-2485,inline-tomcat-params,XP-528-feature-file-testcases,XP-4526-resource-managment-fix,XP-2488-xbid-dev-env,XP-2080-finishing-price-rounding-integration,,,,true,"04/Oct/18 12:37;qz412;Pls push to the customers:

-----

Dear David,

DBAG provides the description of the suggested solution which is in line with the expectations of parties on the behaviour as agreed in the RCB. 

This solution can only be implemented after R1.5.

Regular isAlive check between XBID Core and the SOB-Enquiry modules is introduced:
 - Checks are performed every 30 seconds (there is no correlation to the position of SPs)
 - When there are three negative consecutive isAlive checks, SOB-Enquiry modules are deemed _unavailable_ and the SOB Trading is put to HALT
 - SOB-Enquiry in deemed _available_ after a positive isAlive check
 - There is no automatic unhalting of the Trading once SOB-Enquiry is available again

Best regards, ...","12/Oct/18 16:37;qz412;Update: The solution presented on 04 October complemented with clarification that configuration parameters  m7.timer.isAlivePeriod and sAlive.max.failed.requests  will be used to set the frequency/number of failed checks also for SOB-Enquiry check is agreed.

Converting to bug and puting high in rank as this will need to be implemented for R2.0",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CR084 User Stories,XP-87,72505,Story,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Trivial,Done,radeale,radeale,radeale,17/Sep/18 14:35,04/Aug/20 19:41,22/Feb/21 13:21,06/Nov/18 12:38,,,Pre2020,,Shipping,,,,,,,,"+User Story #1+

*Who:* Receivers of the SM files (EPEX in this case).

*What:* When the save version of file is resent, the sequence number has to be increased by exactly one for the same FTC.

*Why:* Skipping the sequence number do not follow the normal pattern and therefor causes internal problems for integrity checks for the receivers.

{color:#DE350B}*How:*{color} Short Name of the receiving party is added to the Document Identifier of the outgoing file.

*Acceptance Criteria:* 
SM files have correct sequence number, each next file per Global ID has a sequence number increased by 1. The time sequence is correct by margin of 5 minutes.",,radeale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,72489600,,,,,,,,,,XP-54,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y07ddg:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Sep/18 14:38;radeale;+Testing notes (recommendation):+
_Primary:_
- The following case must be successfully executed.
1. Have two recipients configured in the SM with the EIC code.
2. Have two FTCs configure for the test recipients for the same _file type_, _boder/IC_ and delivery date covered in the file. The triggering event/file has to be same for both FTCs.
3. Trigger file generation, both files has to arrive with the same sequence number (1).
4. Trigger resending of the files of the version generated in the previous step. The sequence number for the both files is +1, i.e. 2.

_Secondary:_
- Check that the hashed Document Identifier mRID contains the _Short Name_ of the receiving entity.","06/Nov/18 12:38;radeale;Will reopen if needed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement Option 2 of Enhanced Shipping Agent Assignment Rule (ESAAR),XP-40,70565,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,radeale,qz412,qz412,26/Jul/18 11:54,04/Aug/20 19:41,22/Feb/21 13:21,11/Jan/19 11:17,,,Pre2020,,Shipping,,,,,,,,"Implement functionality in line with:
 * DFS310
 * DFS300

focus on blue parts which indicate the pending functionality of ESAAR Option 2. 

*Indicative breakdown:*
 * Web GUI update - Regional/competing flag for CCP
 * Backend update - Preferred SA assignment rule change on Regional PX Shipping Arrangements",,hj444,qz412,radeale,tr866,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,XP-853,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,66787200,,,,,,,,,,XP-38,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yrt:3",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,Alpha Team Sprint 7,Christmas Sprint 8,Ampere Sprint 9,Ampere Sprint 10,,,,,,,,,,,,,8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,master,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Dec/18 11:13;hj444;XP-240 linked with this task. 
Contains link to .xls with test models created for this task.","10/Dec/18 12:45;radeale;Test Model updated:
S:\Energie\Prod_DEVELOP\002 Test\002 XBid Release\Test Models\15_CRs\CR064 Enhanced Preferred Shipper\CR-064-Enhanced_Preferred_Shipper_O2_v0.4.xlsx","12/Dec/18 08:39;hj444;Test models .xlsx updated - v0.5 
Added tests for recall/cancel.","11/Jan/19 11:15;tr866;Testing completed as described in XP-843 and linked issue XP-853 was fixed. Added missing expected results in Test Model and Progress updated in
S:\Energie\Prod_DEVELOP\002 Test\002 XBid Release\Test Models\15_CRs\CR064 Enhanced Preferred Shipper\CR-064-Enhanced_Preferred_Shipper_O2_v0.6.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Specify functionality,XP-39,70564,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,qz412,qz412,qz412,26/Jul/18 11:51,04/Aug/20 19:40,22/Feb/21 13:21,26/Jul/18 11:53,,,Pre2020,,Shipping,,,,,,,,,,qz412,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Specification written and released as part of DFS310 1.4,,,,,,,,,,81388800,,,,,,,,,,XP-38,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y06xp4:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement PoC SM report visualizer,XP-13,70476,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,ei349,qz412,qz412,25/Jul/18 15:22,11/Sep/20 14:14,22/Feb/21 13:21,16/Aug/18 17:23,,,Pre2020,,Shipping,,,,,,,,,,ll664,qz412,,,,,,,,,,,,,,,,144000,144000,,0%,144000,144000,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,73008000,,,,,,,,,,XP-12,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y06x9o:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Aug/18 17:23;ll664;The visualizer tool implemeted - see https://github.deutsche-boerse.de/dev/xbid-trade-visualizer","31/Oct/18 09:14;qz412;Not an item for R2.0, putting on hold.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Losses - Implementation CR,XP-8,69283,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,de698,qz412,qz412,13/Jun/18 15:24,31/Aug/20 15:38,22/Feb/21 13:21,30/Jul/19 17:21,,,Losses ASR,,Capacity,ComTrader,Shipping,Trading,,,,,"Implementation CR ticket for XBID Losses

It has been agreed with ACM we will keep tracking major tasks directly in JIRA to provide better clarity on progress and timeline.

*Current status:*
 * Input from dev and functional provided, v08 attached
 * PO review attached (v0.9)

*Next steps:*
 * [~de698], functional team
 ** new version reacting to the comments will be provided on June 22nd, ACM will only react once this new version is available
 *  ACM:
 ** please set expected timeline for further iterations (it has been communicated that handover on 28th June is not valid any more due to fact that Losses have been postponed past foreseeable release plan)",,de698,qz412,rg535,,,,,,,,,,,,,,,576000,576000,,0%,576000,576000,,,,,,,,,,,,,,,XP-955,M7ACM-285,,,,,,"10/Aug/18 17:49;de698;180427 - Letter to NRAs - Gainy Loop Example.pdf;https://jira.deutsche-boerse.com/secure/attachment/58150/180427+-+Letter+to+NRAs+-+Gainy+Loop+Example.pdf","31/Jul/18 15:49;rg535;20180731_XBID grid losses questions_DBAG's Response_v1.0.docx;https://jira.deutsche-boerse.com/secure/attachment/57861/20180731_XBID+grid+losses+questions_DBAG%27s+Response_v1.0.docx","21/Jun/18 11:35;rg535;ASR010c Grid Loss Proof of Concept_v1.0.xlsx;https://jira.deutsche-boerse.com/secure/attachment/56890/ASR010c+Grid+Loss+Proof+of+Concept_v1.0.xlsx","17/Jul/18 17:57;de698;Description of Change_v0.11_AR.docx;https://jira.deutsche-boerse.com/secure/attachment/57410/Description+of+Change_v0.11_AR.docx","13/Jun/18 15:19;qz412;Description of Change_v0.8.docx;https://jira.deutsche-boerse.com/secure/attachment/56561/Description+of+Change_v0.8.docx","19/Jun/18 11:44;qz412;Description of Change_v0.9_PO.docx;https://jira.deutsche-boerse.com/secure/attachment/56790/Description+of+Change_v0.9_PO.docx","25/Jun/18 17:44;de698;Description of Change_v0.9_PO_AR_Dev.docx;https://jira.deutsche-boerse.com/secure/attachment/56982/Description+of+Change_v0.9_PO_AR_Dev.docx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,49420800,,,,,,,,,,XP-9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|y07ddj:zi",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Jun/18 09:59;rg535;Thank you for the document, v.8. Has the product owner reviewed this document? I suggest he reviews it from a functional and impact perspective. Here are some general comments from me:

* Current release is not 1.3

* An impact analysis was already officially provided as part of ASR010b, as such I do not think it is wise to include another one in the CR. If you want to include something, them make a reference to the official one. If we now know more then add the new things in the CR. 

* Sentences such as “medium” impact cannot be include in a CR without qualification.

* Sentences such as SLAs need to be refined also cannot be included in a CR without qualification. If there are limitations they need to be explicitly stated. This applies to all such statements in the CR.","19/Jun/18 11:44;qz412;PO review attached [^Description of Change_v0.9_PO.docx]","19/Jun/18 14:04;de698;Thanks for the comments. New version can be provided on Friday 22nd.","21/Jun/18 11:36;rg535;The current estimate provided in version 08 does not quite adhere to the communication from Janaury 2018. I have entered the offer history into this comment. 
This is what we offered in January 2018 to the customers but we were not formally mandated:
  
*January 2018*
 Functional and technical very deep-dive with more examples and use cases
  
*February to June 2018:*
 
Iterative PoC prototyping process including:
§  performance checks 
§  update, revise, review specifications 
§  2 or 3 workshops or calls, as necessary, for clarifications with PXs / TSOs.

*July 2018*
 §  prototype in place
§  specifications updated and agreed/signed.
 *July 2018 or thereafter*
 Implementation Change Request based:
§  on prototype and 
§  updated, signed specifications.
These are the questions and answers:

 
 
  
Question Raised by Losses SG and DBAG’s Answers

1.   It is not expected that PXs/TSOs develop their test systems in parallel to be able to connect to the proposed prototype
 
Correct. DBAG does not expect that the PXs / TSOs develop their test systems in parallel to be able to connect via the contractually defined methods (SFTP, MPLS, Email, ECP, etc) to the proposed prototype. 
  
2.   Will be an isolated system to which we can connect remotely to see how the system will function
 
Yes, it will be a prototype to which the Parties can remotely connect (via XBID GUIs).

To be agreed / open: environment that can be used.

 What are the limits of the prototype? 
 Features available
Interfaces available 
 
The prototype will comprise all features necessary for the inclusion of losses, as described in the HLFC and will take into consideration technical aspects as identified in the Impact Analysis. The prototype will also include changes to the interfaces (c.f. impact analysis) to have access to the losses functionality.

SG Losses assumes that all proposed work until July 2018 (prototype in place and specifications updated and agreed) is part of ASR010B.
 
The assumption with July was valid under the premise that we start in January. As we do not have a final go, the finish date may now be a bit later than July. 

With regard to the work, the HLFC, the Impact Analysis (already done) as well as the specifications and timeline are all part of the ASR010b. The actual work for the prototype is not part of ASR010b. DBAG can provide effort estimates for the work on the prototype, if requested.

Can you comment on IPR given that PXs and TSOs co create with DBAG?
 
The Proof of Concept will follow the same legal framework as currently in place for XBID.

From DBAGs point of view: What would be the consequences / following steps in case that PoC shows significant performance drops or that functionality is below expectation?
 
The aim is to identify potential bottlenecks as part of the process and  to design the prototype so that it will not significantly impact the performance. The aim is also to identify any necessary architectural short-comings and to make solution proposals.
  
7.   It is not expected to do an approval of the prototype itself. The aim to agree on specifications is unchanged from our point of view.
 
Correct, we do not expect an explicit approval of the prototype. However, the specification will be based on the prototype. In signing the specifications, the Parties have thus agreed on the prototype. This may need to be discussed with the Legal SG.

*Initial Commerical Offer made to PXs for PoC based on estimates provided by team:
* [^ASR010c Grid Loss Proof of Concept_v1.0.xlsx] See excel sheet for final offer which was sent in Q1 2018 to PXs.
I envisage that this Proof of Concept would require the following overall effort:

# Functional Support for the Functional Specifications of 46 PD
# Technical aspects of Proof of Concept of between 140 PD and 200 PD
# Negotiation Overhead for draft ASR of 5 PD
# Project Management of 6,5 PD 
# Material Costs for 2 Workshops (if needed)
# Telcos of up to 11 hours 

Items 1, 4, and 6 would not create any additional financial impact for the PXs as these are the left over effort from ASR010b (they have not been invoiced yet, though). So to be exact, only items 2, 3 and 5 generate additional effort vs. the current ASR010b

290 to 350 MD was estimated for the remaining technical work after completion of POC","25/Jun/18 17:44;de698;Please find attached the updated version of CR inputs. Any questions and comments are appreciated.

[^Description of Change_v0.9_PO_AR_Dev.docx]","26/Jun/18 12:51;rg535;Please follow the standard CR template. Please refer to the CRs on the project drive, for further details.
Chapter 1: Deliverable Specific Agreement
Chapter 2: Management Summary
Chapter 3: Description of Change of which documentation is usually a sub-chapter.
Other comments:
Unless you are creating new specs you may not adjust the names of existing ones. I do not advise to create new specs unless it is absolutely necessary. In general we just amend the existing ones, but, again, we do not change their names only the version numbers.

You cannot put in the CR that we will modify the SLAs. If the SLAs need to be modified for losses this must be discussed internally and discussed in the strategy meeting before putting anything in the CR. Optimally, this is handled definitively in the CR, with the changes that need to be made or left out.

If we are not provided a solution for something, i.e. disuptes that it is not to be mentioned in the CR. It is only to be mentioned if we are changing something. In this case, we must indicate what we are changing.

Do not recommend giving the customers an option, eg H2H. Best way to handle it would be to simple define in the CR how it will be done.

What does it mean that something will remain roughly the same. Either it changes and we define how or it does not change and is not mentioned  in the CR.","17/Jul/18 17:59;de698;The document structure changed based on other CRs - attached [^Description of Change_v0.11_AR.docx]

Other comments:
{quote}Unless you are creating new specs you may not adjust the names of existing ones. I do not advise to create new specs unless it is absolutely necessary. In general we just amend the existing ones, but, again, we do not change their names only the version numbers
{quote} - ok, kept the DFS290 with original name. However, with losses implemented, the whole content of the DFS290 will become not applicable to the newly implemented system. So for XBID 1.4 DFS290 would still be up-to-date, but for XBID xyz-with-losses, it would have to be HLFCL + specification of topics presented in the CR

{quote}You cannot put in the CR that we will modify the SLAs. If the SLAs need to be modified for losses this must be discussed internally and discussed in the strategy meeting before putting anything in the CR. Optimally, this is handled definitively in the CR, with the changes that need to be made, or left out.
{quote} - ok, agree, I'll take it out of the CR and we need to align on this. We will probably not have a chance to provide detailed proposed SLA changes as early as with CR?

{quote}If we are not provided a solution for something, i.e. disputes that it is not to be mentioned in the CR. It is only to be mentioned if we are changing something. In this case, we must indicate what we are changing.
{quote} - ok, disputes and area prices left out completely

{quote}Do not recommend giving the customers an option, e.g. H2H. Best way to handle it would be to simple define in the CR how it will be done.
{quote} - removed for H2H. We have not decided on the Local View depth solution yet.

{quote}What does it mean that something will remain roughly the same. Either it changes and we define how or it does not change and is not mentioned in the CR.
{quote} - changed description for block contracts","31/Jul/18 15:50;rg535;Attached NRA's questions and DBAG's answers.","10/Aug/18 17:50;de698;Attached is the example requested as additional input for answering the NRA's questions.","30/Jul/19 17:21;de698;We are currently proceeding with the ASR010c - PoC Losses",,,,,,,,,,,,,,,,,,,,,,
Analyse ACER report functionality,XP-7,70433,Task,Done,XP,XBID Agile Development,software,dm700,Agile XBID delivery ,,Minor,Done,de698,qz412,qz412,24/Jul/18 12:42,04/Aug/20 19:40,22/Feb/21 13:21,02/Jan/19 17:08,,,Pre2020,,Trading,,,,,,,,"ACER reporting requirements are provided by customer. Detailed breakdown of the Epic needs to follow.

*Current state:* two rounds of refinement (simulations) have been done. Analytical breakdown to areas is drafted. There are still open questions and/or unclear areas.

*Output:* clear breakdown of the epic into tasks which are sprint-ready is provided (so that only potential unknown unknowns are left).

------------------------------------------
+Open points:+
Test environments - test env availability for internal testing is not clarified
Data aggregation - once the data is collected and stored - at what point the calculation and aggregation happens?
Batch process - runs once in 6 months
Archiving - reports need to be stored for 12 months after the reported period
Missing data - there is no process description how to handle any kind of data outages (failover, functionality failure, notifications,...)
Incorporation into current reporting tool?

 ",,de698,qz412,,,,,,,,,,,,,,,,144000,144000,,0%,144000,144000,,,,,,,,,,,,,,,,,,,,,,"19/Oct/18 13:18;de698;ACER Reporting_analysis.mm;https://jira.deutsche-boerse.com/secure/attachment/60656/ACER+Reporting_analysis.mm","19/Oct/18 13:20;de698;ACER Reporting_analysis.pdf;https://jira.deutsche-boerse.com/secure/attachment/60657/ACER+Reporting_analysis.pdf",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67478400,,,,,,,,,,XP-6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|000yvu:r2",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,5.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Jan/19 17:08;de698;In the meantime, most of the open points were subject to continuous refinement and list of tasks under the epic XP-6 continues to grow.

Therefore closing this task.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
